<?xml version="1.0" encoding="utf-8"?>
<search>
  
    
    <entry>
      <title><![CDATA[æˆ‘çš„åšå®¢]]></title>
      <url>%2F2017%2F11%2F20%2Ftest%2F</url>
      <content type="text"></content>
    </entry>

    
    <entry>
      <title><![CDATA[psç¬”è®°]]></title>
      <url>%2F2017%2F04%2F22%2Fps%E7%AC%94%E8%AE%B0%2F</url>
      <content type="text"><![CDATA[å›¾å±‚çš„æ“ä½œ: 1.æŒ‰ä½ç©ºæ ¼é”®ä¸æ¾ï¼Œæ— è®ºé€‰æ‹©ä»€ä¹ˆå·¥å…·ï¼Œéƒ½ä¼šåˆ‡æ¢ä¸ºæŠ“æ‰‹å·¥å…·æ¥ç§»åŠ¨è§†å›¾2.æŒ‰ä½æŠ“æ‰‹å·¥å…·ä¸æ¾ï¼Œå¯ä»¥å‡ºçŽ°æŠ“æ‰‹å·¥å…·å’Œæ—‹è½¬è§†å›¾å·¥å…·3.åœ¨é€‰å–çŠ¶æ€ä¸‹,shift + å·¦é”®ï¼Œç”»å‡ºæ­£æ–¹å½¢çš„é€‰å–ã€‚ç§»åŠ¨é€‰å–äº¤ç‚¹åˆ°ä¸­å¿ƒä½ç½®ï¼ŒæŒ‰ä½optioné”®ï¼ŒæŒ‰ä½å·¦é”®ï¼Œä»¥ä¸­å¿ƒä½ç½®ä¸ºé€‰å–çš„ä¸­å¿ƒç‚¹ç¼©æ”¾]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[HTMLå­¦ä¹ 4.8]]></title>
      <url>%2F2017%2F04%2F08%2FHTML%E5%AD%A6%E4%B9%A04-8%2F</url>
      <content type="text"><![CDATA[1.control + shift + k : åˆ é™¤ä¸€è¡Œcommand + å•å‡»ï¼š é›†ä½“è¾“å…¥command + / : æ³¨é‡Šcommand + L :å¿«é€Ÿé€‰ä¸­ä¸€è¡Œ 2.1&lt;br /&gt;ä¸ä¼šç”Ÿæˆç©ºç™½è¡Œ 3.1&lt;strong&gt;åŠ ç²—&lt;/strong&gt; 4.1&lt;em&gt;æˆ‘æ˜¯æ­ªçš„å—&lt;/em&gt; : å€¾æ–œæ ‡ç­¾ 5.1&lt;del&gt;1000.00&lt;/del&gt;: åˆ é™¤æ ‡ç­¾ 6.1&lt;ins&gt;ä¸‹åˆ’çº¿&lt;/ins&gt; : ä¸‹åˆ’çº¿ 7.12&lt;img src=&quot;Snip20170314_1.png&quot; alt=&quot;æˆ‘æ˜¯æ˜¾ç¤ºä¸å‡ºæ¥çš„å›¾ç‰‡&quot; title=&quot;æˆ‘çš„ç”·ç¥ž&quot;/&gt; : title:é¼ æ ‡åœç•™åœ¨å›¾ç‰‡ä¸Šæ—¶æ˜¾ç¤ºçš„æ–‡å­—å½“ä¸å†™å®½é«˜çš„æ—¶å€™ï¼Œä»¥å›¾ç‰‡æœ¬èº«çš„å®½é«˜æ˜¾ç¤ºã€‚å¦‚æžœå•ç‹¬çš„è®¾ç½®å®½æˆ–è€…é«˜ï¼Œé‚£ä¹ˆå›¾ç‰‡å°±ä¼šç­‰æ¯”ç¼©æ”¾ 8.12345ç›¸å¯¹è·¯å¾„å’Œç»å¯¹è·¯å¾„ç›¸å¯¹è·¯å¾„ï¼šç›¸å¯¹äºŽæ–‡ä»¶è‡ªèº«å‡ºå‘:æ–‡ä»¶å’Œå›¾ç‰‡åœ¨åŒä¸€ä¸ªç›®å½•ä¸‹(æ–‡ä»¶å¤¹)ï¼Œç›´æŽ¥å†™æ–‡ä»¶åå›¾ç‰‡åœ¨æ–‡ä»¶çš„ä¸Šä¸€çº§ç›®å½•é‡Œï¼Œ../+å›¾ç‰‡åå­—ç»å¯¹è·¯å¾„ï¼š 9.1234567&lt;a href=&quot;å¸¸ç”¨å¿«æ·é”®.html&quot;&gt;ç‚¹å‡»æˆ‘å§ï¼Ÿ&lt;/a&gt;href: åŽ»å¾€å“ªé‡Œï¼Ÿsrc: ä»Žå“ªé‡Œæ¥ï¼Ÿtarget:é¡µé¢æ‰“å¼€æ–¹å¼title: æç¤ºæ–‡å­— é¼ æ ‡æ”¾åœ¨é“¾æŽ¥ä¸Šæ˜¾ç¤ºçš„æ–‡å­—target=&quot;_self&quot; : é»˜è®¤å€¼ï¼Œåœ¨è‡ªèº«é¡µé¢æ‰“å¼€target-&quot;_blank&quot; : åœ¨æ–°çš„é¡µé¢æ‰“å¼€ 10.12é”šé“¾æŽ¥&lt;p id=&quot;é”šç‚¹&quot;&gt;&lt;a href=&quot;#é”šç‚¹&quot;&gt;&lt;/a&gt;&lt;/p&gt; 11.12ç©ºé“¾: #&lt;a href=&quot;#&quot;&gt;ç©ºé“¾&lt;/a&gt; 123è¶…é“¾æŽ¥çš„ä¼˜åŒ–å†™æ³•base:&lt;base target=&quot;_blank&quot;&gt; 13.12ç©ºæ ¼ï¼š&amp;nbsp; 14.12å°äºŽå·ï¼š &amp;lt;å¤§äºŽå·ï¼š &amp;gt; 15. 16.12345678910æ— åºåˆ—è¡¨&lt;ul&gt;&lt;li&gt;è‚¯å®šä¸æ˜¯å‘€&lt;/li&gt;&lt;li&gt;è‚¯å®šä¸æ˜¯å‘€&lt;/li&gt;&lt;li&gt;è‚¯å®šä¸æ˜¯å‘€&lt;/li&gt;&lt;li&gt;è‚¯å®šä¸æ˜¯å‘€&lt;/li&gt;&lt;/ul&gt;type=&quot;square&quot; å°æ–¹å—type=&quot;disc&quot; å®žå¿ƒåœ†type=&quot;circle&quot; ç©ºå¿ƒåœ† è‚¯å®šä¸æ˜¯å‘€è‚¯å®šä¸æ˜¯å‘€è‚¯å®šä¸æ˜¯å‘€è‚¯å®šä¸æ˜¯å‘€ 17.1234567891011æœ‰åºåˆ—è¡¨&lt;ol&gt;&lt;li&gt;è‚¯å®šä¸æ˜¯å‘€&lt;/li&gt;&lt;li&gt;è‚¯å®šä¸æ˜¯å‘€&lt;/li&gt;&lt;li&gt;è‚¯å®šä¸æ˜¯å‘€&lt;/li&gt;&lt;li&gt;è‚¯å®šä¸æ˜¯å‘€&lt;/li&gt;&lt;/ol&gt;type=&quot;1&quot;type=&quot;a&quot;type=&quot;A&quot;type=&quot;I&quot; è‚¯å®šä¸æ˜¯å‘€ è‚¯å®šä¸æ˜¯å‘€ è‚¯å®šä¸æ˜¯å‘€ è‚¯å®šä¸æ˜¯å‘€18.123456è‡ªå®šä¹‰åˆ—è¡¨&lt;dl&gt;&lt;dt&gt;å¸®åŠ©ä¸­å¿ƒ&lt;/dt&gt;&lt;dd&gt;è´¦æˆ·ç®¡ç†&lt;/dd&gt;&lt;dd&gt;è´­ç‰©æŒ‡å—&lt;/dd&gt;&lt;/dl&gt; 19.12345678910meta:è§£ç æ–¹å¼ï¼šcharset: ç¼–ç å…³é”®å­—ï¼š&lt;meta name=&quot;keywords&quot; content=&quot;xxx&quot;&gt;ç½‘é¡µæè¿°&lt;meta name=&quot;description&quot; content=&quot;xxx&quot;&gt;ç½‘é¡µé‡å®šå‘&lt;meta http-equiv=&quot;refresh&quot; content=&quot;5; http://www.baidu.com&quot;&gt; 20.12iconå›¾æ ‡&lt;link rel=&quot;icon&quot; href=&quot;xxx.ico&quot;&gt; 21.12345678910111213141516è¡¨æ ¼&lt;table border=&quot;1&quot; width=&quot;500&quot; height=&quot;300&quot; cellspacing=&quot;0&quot; cellpadding=&quot;10&quot; align=&quot;center&quot; bgcolor=&quot;yellow&quot;&gt; &lt;tr&gt; //è¡Œ &lt;td&gt;&lt;/td&gt; //åˆ—ï¼ˆå•å…ƒæ ¼ï¼‰ &lt;td&gt;&lt;/td&gt; &lt;td&gt;&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;&lt;/td&gt; &lt;td&gt;&lt;/td&gt; &lt;td&gt;&lt;/td&gt; &lt;/tr&gt;&lt;/table&gt;tableçš„å±žæ€§border: è¾¹æ¡† cellspacingï¼šå•å…ƒæ ¼ä¹‹é—´çš„é—´è· cellpaddingï¼šå•å…ƒæ ¼å†…å®¹çš„è¾¹è·(å†…è¾¹è·) align:tableçš„å¯¹é½æ–¹å¼ bgcolor: tableçš„èƒŒæ™¯è‰²å¦‚æžœç»™træˆ–è€…tdä½¿ç”¨align=&quot;center&quot;: æ˜¯ä½¿å¾—å†…å®¹å±…ä¸­ 22.123456&lt;table&gt; &lt;thead&gt;&lt;/thead&gt; &lt;tbody&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;caption&gt;&lt;/caption&gt; ï¼šè¡¨å¤´ 23.12åˆå¹¶å•å…ƒæ ¼rowspan colspan 24.123456789101112&lt;table border=&quot;2&quot; bordercolor=&quot;red&quot; width=&quot;200&quot; height=&quot;100&quot; cellspacing=&quot;0&quot;&gt; &lt;tr&gt; &lt;th&gt;æˆ˜ä¸‰&lt;/th&gt; &lt;th&gt;20&lt;/th&gt; &lt;th&gt;å¤§å‰ç«¯&lt;/th&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;å¼ ä¸‰&lt;/td&gt; &lt;td&gt;20&lt;/td&gt; &lt;td&gt;å¤§å‰ç«¯&lt;/td&gt; &lt;/tr&gt;&lt;/table&gt; 25.12345678ç»†çº¿è¡¨æ ¼&lt;table width=&quot;200&quot; height=&quot;100&quot; bgcolor=&quot;green&quot; cellspacing=&quot;1&quot;&gt; &lt;tr bgcolor=&quot;white&quot;&gt; &lt;td&gt;&lt;/td&gt; &lt;td&gt;&lt;/td&gt; &lt;td&gt;&lt;/td&gt; &lt;/tr&gt;&lt;/table&gt; 26.123456789101112131415161718192021222324252627282930313233343536373839404142434445464748&lt;table width=&quot;300&quot; height=&quot;200&quot; bgcolor=&quot;green&quot; cellspacing=&quot;1&quot; align=&quot;center&quot;&gt;&lt;caption&gt;è¯¾ç¨‹è¡¨&lt;/caption&gt;&lt;tr bgcolor=&quot;white&quot;&gt;&lt;th width=&quot;80&quot; colspan=&quot;2&quot;&gt;&lt;/th&gt;&lt;!-- &lt;td&gt;&lt;/td&gt; --&gt;&lt;th&gt;æ˜ŸæœŸä¸€&lt;/th&gt;&lt;th&gt;æ˜ŸæœŸäºŒ&lt;/th&gt;&lt;th&gt;æ˜ŸæœŸä¸‰&lt;/th&gt;&lt;th&gt;æ˜ŸæœŸå››&lt;/th&gt;&lt;th&gt;æ˜ŸæœŸäº”&lt;/th&gt;&lt;/tr&gt;&lt;tr bgcolor=&quot;white&quot;&gt;&lt;td rowspan=&quot;2&quot; width=&quot;50&quot;&gt;ä¸Šåˆ&lt;/td&gt;&lt;td width=&quot;30&quot;&gt;1&lt;/td&gt;&lt;td&gt;è¯­æ–‡&lt;/td&gt;&lt;td&gt;è¯­æ–‡&lt;/td&gt;&lt;td&gt;è¯­æ–‡&lt;/td&gt;&lt;td&gt;è¯­æ–‡&lt;/td&gt;&lt;td&gt;è¯­æ–‡&lt;/td&gt;&lt;/tr&gt;&lt;tr bgcolor=&quot;white&quot;&gt;&lt;!-- &lt;td&gt;&lt;/td&gt; --&gt;&lt;td&gt;2&lt;/td&gt;&lt;td&gt;è¯­æ–‡&lt;/td&gt;&lt;td&gt;æ•°å­¦&lt;/td&gt;&lt;td&gt;ç‰©ç†&lt;/td&gt;&lt;td&gt;åŒ–å­¦&lt;/td&gt;&lt;td&gt;ç”Ÿç‰©&lt;/td&gt;&lt;/tr&gt;&lt;tr bgcolor=&quot;white&quot;&gt;&lt;td rowspan=&quot;2&quot; height=&quot;50&quot;&gt;ä¸‹åˆ&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;è¯­æ–‡&lt;/td&gt;&lt;td&gt;è¯­æ–‡&lt;/td&gt;&lt;td&gt;è¯­æ–‡&lt;/td&gt;&lt;td&gt;è¯­æ–‡&lt;/td&gt;&lt;td&gt;è¯­æ–‡&lt;/td&gt;&lt;/tr&gt;&lt;tr bgcolor=&quot;white&quot;&gt;&lt;!-- &lt;td&gt;&lt;/td&gt; --&gt;&lt;td&gt;2&lt;/td&gt;&lt;td&gt;è¯­æ–‡&lt;/td&gt;&lt;td&gt;è¯­æ–‡&lt;/td&gt;&lt;td&gt;è¯­æ–‡&lt;/td&gt;&lt;td&gt;è¯­æ–‡&lt;/td&gt;&lt;td&gt;è¯­æ–‡&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt; 27.12345678910111213&lt;form action=&quot;1.php&quot; method=&quot;post&quot;&gt;ç”¨æˆ·å&lt;input type=&quot;text&quot; maxlength=&quot;6&quot; readonly=&quot;readonly&quot;&gt;å¯†&amp;nbsp;ç &lt;input type=&quot;password&quot;&gt;&lt;input type=&quot;submit&quot;&gt;&lt;/form&gt;inputå±žæ€§è¯´æ˜Ž:name=&quot;username&quot;: åŒºåˆ†ä¸åŒçš„è¾“å…¥æ¡†ç”¨äºŽæäº¤value=&quot;å¤§å‰ç«¯&quot;:(é»˜è®¤å€¼) æäº¤åˆ°æœåŠ¡å™¨ï¼Œæ˜¯ä¼ åˆ°æœåŠ¡å™¨çš„å€¼maxlength: é™åˆ¶è¾“å…¥çš„æœ€å¤§é•¿åº¦readonly=&quot;readonly&quot;: è¯»å†™æƒé™ï¼šåªè¯»æƒé™ï¼ˆä¸èƒ½ç¼–è¾‘ï¼‰disabled=&quot;disabled&quot;: æœªæ¿€æ´» ç”¨æˆ·åå¯†&nbsp;ç  28.1234//åœ¨è¿™é‡Œï¼Œå½“å°†ä¸¤ä¸ªçš„nameçš„å€¼è®¾ç½®ç›¸åŒçš„æ—¶å€™ï¼Œæ‰èƒ½å¤Ÿå®žçŽ°å•é€‰æ•ˆæžœã€‚//checked=&quot;checked&quot;: è®¾ç½®é»˜è®¤é€‰ä¸­é¡¹&lt;input type=&quot;radio&quot; name=&quot;gender&quot; checked=&quot;checked&quot;&gt;ç”·&lt;input type=&quot;radio&quot; name=&quot;gender&quot;&gt;å¥³ç”·å¥³29.12345678910111213141516171819202122232425262728//ä¸‹æ‹‰èœå•//selected=&quot;selected&quot;: è®¾ç½®é»˜è®¤é€‰ä¸­é¡¹çœ(å¸‚): &lt;select&gt;&lt;option&gt;æ²³åŒ—&lt;/option&gt;&lt;option&gt;å±±è¥¿&lt;/option&gt;&lt;option selected=&quot;selected&quot;&gt;åŒ—äº¬&lt;/option&gt;&lt;/select&gt;//mutiple=&quot;mutiple&quot;: è®¾ç½®ä¸ºå¯ä»¥å¤šé€‰&lt;select mutiple=&quot;mutiple&quot;&gt;&lt;option&gt;æ²³åŒ—&lt;/option&gt;&lt;option&gt;å±±è¥¿&lt;/option&gt;&lt;option selected=&quot;selected&quot;&gt;åŒ—äº¬&lt;/option&gt;&lt;/select&gt;//åˆ†ç»„çš„ä¸‹æ‹‰èœå•//label: åˆ†ç»„æ ‡ç­¾&lt;select&gt;&lt;optgroup label=&quot;æˆéƒ½å¸‚&quot;&gt;&lt;option&gt;é”¦æ±ŸåŒº&lt;/option&gt;&lt;option&gt;æ­¦ä¾¯åŒº&lt;/option&gt;&lt;option&gt;é’ç¾ŠåŒº&lt;/option&gt;&lt;/optgroup&gt;&lt;optgroup label=&quot;åŒ—äº¬å¸‚&quot;&gt;&lt;option&gt;æµ·æ·€åŒº&lt;/option&gt;&lt;option&gt;æœé˜³åŒº&lt;/option&gt;&lt;option&gt;æ˜Œå¹³åŒº&lt;/option&gt;&lt;/optgroup&gt;&lt;/select&gt;çœ(å¸‚): æ²³åŒ—å±±è¥¿åŒ—äº¬æ²³åŒ—å±±è¥¿åŒ—äº¬é”¦æ±ŸåŒºæ­¦ä¾¯åŒºé’ç¾ŠåŒºæµ·æ·€åŒºæœé˜³åŒºæ˜Œå¹³åŒº30.12345//å¤šé€‰æ¡†//checked=&quot;checked&quot; è®¾ç½®ä¸ºé»˜è®¤é€‰ä¸­&lt;input type=&quot;checkbox&quot; checked=&quot;checked&quot;&gt;å–é…’&lt;input type=&quot;checkbox&quot;&gt;æŠ½çƒŸ&lt;input type=&quot;checkbox&quot;&gt;çƒ«å¤´å–é…’æŠ½çƒŸçƒ«å¤´31.12//é‡ç½®æŒ‰é’®&lt;input type=&quot;reset&quot;&gt;32.1234567&lt;form action=&quot;1.php&quot; method=&quot;post&quot;&gt;&lt;!-- /ç½‘å€æŽ§ä»¶ --&gt;&lt;input type=&quot;url&quot;&gt;&lt;!-- æ—¥æœŸæŽ§ä»¶ --&gt;&lt;input type=&quot;date&quot;&gt;&lt;input type=&quot;submit&quot;&gt; &lt;/form&gt;]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[å¼€å‘ä¸­ReactiveCocoaçš„ä½¿ç”¨]]></title>
      <url>%2F2017%2F04%2F07%2F%E5%BC%80%E5%8F%91%E4%B8%ADReactiveCocoa%E7%9A%84%E4%BD%BF%E7%94%A8%2F</url>
      <content type="text"><![CDATA[RACäº®ç‚¹:æ•°æ®ä¸Žè§†å›¾çš„ç»‘å®šï¼Œå½“æ•°æ®å˜åŒ–çš„æ—¶å€™ï¼Œè§†å›¾ä¸éœ€è¦åšé¢å¤–çš„å¤„ç†ï¼Œä¾¿å¯æ­£ç¡®åœ°å‘ˆçŽ°æœ€æ–°çš„æ•°æ® ReactiveCocoaç»“åˆäº†å‡ ç§ç¼–ç¨‹é£Žæ ¼ï¼š å‡½æ•°å¼ç¼–ç¨‹ï¼ˆFunctional Programmingï¼‰ï¼šä½¿ç”¨é«˜é˜¶å‡½æ•°ï¼Œä¾‹å¦‚å‡½æ•°ç”¨å…¶ä»–å‡½æ•°ä½œä¸ºå‚æ•°ã€‚ å“åº”å¼ç¼–ç¨‹ï¼ˆReactive Programmingï¼‰ï¼šå…³æ³¨äºŽæ•°æ®æµå’Œå˜åŒ–ä¼ æ’­ã€‚ æ‰€ä»¥ï¼Œä½ å¯èƒ½å¬è¯´è¿‡ReactiveCocoaè¢«æè¿°ä¸ºå‡½æ•°å“åº”å¼ç¼–ç¨‹ï¼ˆFRPï¼‰æ¡†æž¶ã€‚]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[ç²¾å¦™çš„æ–‡æœ¬å¸ƒå±€]]></title>
      <url>%2F2017%2F04%2F01%2F%E7%B2%BE%E5%A6%99%E7%9A%84%E6%96%87%E6%9C%AC%E5%B8%83%E5%B1%80%2F</url>
      <content type="text"><![CDATA[æ›¾ç»éœ€è¦ç”¨åº•å±‚çš„Core Textæ‰èƒ½åšçš„é«˜çº§å¸ƒå±€çŽ°åœ¨å¯ä»¥ç›´æŽ¥ç”¨UIKitå¤„ç†äº†ã€‚ ç†è§£å¯Œæ–‡æœ¬ å­—ç¬¦ä¸Žå­—å½¢ NSString æ˜¯å­—ç¬¦é›†åˆï¼Œæ¯ä¸ªå­—ç¬¦ç”¨ä¸€ä¸ªå”¯ä¸€çš„Unicodeå€¼è¡¨ç¤ºã€‚ ä»»ä½•çš„â€æˆ‘â€å‡ºçŽ°åœ¨å­—ç¬¦ä¸²ä¸­ï¼Œå…¶æ•°å€¼éƒ½æ˜¯ä¸€æ ·çš„ã€‚ä¸‹é¢è¿™å¼ å›¾ï¼Œæ¯ä¸ªâ€æˆ‘â€çš„å­—ç¬¦å€¼éƒ½æ˜¯ä¸€æ ·çš„ï¼Œä½†å®ƒä»¬çš„å½¢çŠ¶å´å¤§ä¸ç›¸åŒ,è¿™äº›å½¢çŠ¶è¢«ç§°ä¸ºå­—å½¢ å­—ä½“ä¸»è¦æ˜¯æ˜ å°„åˆ°å­—ç¬¦çš„å­—å½¢çš„é›†åˆï¼Œä¸è¿‡ä¸æ˜¯ä¸€å¯¹ä¸€çš„æ˜ å°„ã€‚å¾ˆå¤šæƒ…å†µä¸‹ï¼Œä¸€ç§å­—ä½“å¯ä»¥æœ‰å¤šç§å­—å½¢æ¥è¡¨ç¤ºç»™å®šçš„å­—ç¬¦ã€‚ å¯¹äºŽç»™å®šçš„å­—ç¬¦ä¸²ï¼Œå­—ç¬¦æ•°ä¹Ÿå¯èƒ½å’Œå­—å½¢æ•°ä¸åŒã€‚å¯¼è‡´è¿™ç§åŒºåˆ«çš„å¸¸è§åŽŸå› æ˜¯è¿žå­ï¼Œä¹Ÿå°±æ˜¯å¤šä¸ªå­—ç¬¦è¿žæˆå•ä¸ªçš„å­—å½¢ã€‚ æœ‰äº›è¿žå­—å’Œå­—ä½“æœ‰å…³ï¼Œæ˜¯ä¸ºæé«˜å¯è¯»æ€§è€Œè®¾è®¡çš„ã€‚è‹±æ–‡ä¸­å¸¸è§çš„æ˜¯f-iè¿žå­—ã€‚å¦‚å›¾æ‰€ç¤ºã€‚æ³¨æ„iä¸Šé¢çš„ç‚¹æ˜¯å¦‚ä½•æ¶ˆå¤±çš„ï¼Œè¿™æ˜¯å­—ä½“æœ‰æ„ä¸ºä¹‹çš„ç‰¹æ€§ï¼Œä¸¤ä¸ªå­—ç¬¦ç»˜åˆ¶æˆå•ä¸ªçš„å­—å½¢ ç†è§£å­—ä½“å­—ä½“æ˜¯å­—å½¢çš„é›†åˆï¼Œä»¥åŠå¦‚ä½•é€‰æ‹©å’Œæ”¾ç½®å­—å½¢çš„é›†åˆã€‚å­—ä½“æ˜¯å¯æ‰©å±•çš„ï¼Œæ‰€ä»¥Baskerville 18ptå’ŒBaskerville 28ptåªæ˜¯åŒä¸€å­—ä½“çš„ä¸¤ç§å°ºå¯¸ã€‚ä¸è¿‡Baskervilleçš„æ–œä½“å’Œç²—ä½“åˆ™æ˜¯å®Œå…¨ä¸åŒçš„å­—ä½“ã€‚ è¿™é‡Œçš„å…³é”®æ˜¯å½“ä½ éœ€è¦â€æŠŠå­—ä½“åŠ ç²—â€çš„æ—¶å€™ï¼Œå…¶å®žéœ€è¦çš„æ˜¯å½“å‰å­—ä½“çš„åŠ ç²—å­—ä½“ã€‚ç³»ç»Ÿå¯èƒ½æ²¡æœ‰è¿™æ ·çš„å­—ä½“ï¼Œä¹Ÿå¯èƒ½æœ‰å¥½å‡ ä¸ªå­—ä½“ã€‚æ¯”å¦‚æœ‰äº›å­—ä½“ä¼šæœ‰ç²—ä½“ã€åŠç²—ä½“ã€ç‰¹ç²—ä½“ç­‰å˜ä½“ã€‚æ‰€ä»¥åŠ ç²—å’Œæ–œä½“å°±æ˜¯é€‰æ‹©å­—ä½“ã€‚ ä¸‹åˆ’çº¿å’Œåˆ é™¤çº¿åˆ™æ˜¯è£…é¥°ã€‚è£…é¥°ä¼šä¿®æ”¹çŽ°å­˜å­—ä½“ï¼Œè€Œæ·»åŠ ä¸‹åˆ’çº¿å­—ä½“ä¸ä¼šå˜ï¼Œå­—å½¢ä¸ä¼šå˜ã€‚ç³»ç»Ÿåªæ˜¯ðŸ‘‰é¢å¤–ðŸ‘ˆçš„ç”»äº†ä¸€æ¡çº¿ã€‚ æ®µè½æ ·å¼æ®µè½æ ·å¼ä¸ä¼šä¿®æ”¹å­—ä½“æˆ–è€…å­—å½¢é€‰æ‹©ï¼Œè€Œåªæ˜¯ä¿®æ”¹å­—å½¢çš„ä½ç½®ã€‚æ®µè½æ ·å¼å¯èƒ½åŒ…å«å¯¹é½ã€ç¼©è¿›å’Œæ–¹å‘ï¼Œè¿™äº›ä¿¡æ¯è¡¨æ˜Žå­—å½¢æ˜¯å¦‚ä½•æ°´å¹³å¸ƒå±€çš„ã€‚æ®µè½æ ·å¼è¿˜å¯èƒ½åŒ…å«è¡Œé—´è·å’Œæ®µé—´è·ï¼Œè¡¨æ˜Žå­—å½¢å¦‚ä½•åž‚ç›´å¸ƒå±€ã€‚ å±žæ€§åŒ–å­—ç¬¦ä¸²å±žæ€§è¯å­—ç¬¦ä¸²æŠŠå­—ç¬¦å’Œå­—ç¬¦ä¸²ä¸­æŸä¸ªèŒƒå›´çš„å…ƒæ•°æ®ç»„åˆåœ¨ä¸€èµ·ã€‚ å±žæ€§åŒ–å­—ç¬¦ä¸²çš„ä¸€ç§æ–¹æ³•ï¼š123456789101112131415161718NSString *string = @&quot;Be Bold!And a little color wouldn&apos;t hurt either.&quot;;NSDictionary *attrs = @&#123;NSFontAttributeName:[UIFont systemFontOfSize:36]&#125;;//NSString -&gt; AttributedString//å­—ç¬¦ä¸²è½¬ä¸ºå¸¦å±žæ€§çš„å­—ç¬¦ä¸²//åˆ›å»ºäº†ä¸€ä¸ªå¯å˜çš„å±žæ€§åŒ–å­—ç¬¦ä¸²NSMutableAttributedString *as = [[NSMutableAttributedString alloc] initWithString:string attributes:attrs];//æ·»åŠ å±žæ€§[as addAttribute:NSFontAttributeName value:[UIFont boldSystemFontOfSize:36] range:[string rangeOfString:@&quot;Bold!&quot;]];[as addAttribute:NSForegroundColorAttributeName value:[UIColor blueColor] range:[string rangeOfString:@&quot;little color&quot;]];[as addAttribute:NSFontAttributeName value:[UIFont systemFontOfSize:18] range:[string rangeOfString:@&quot;little&quot;]];[as addAttribute:NSFontAttributeName value:[UIFont fontWithName:@&quot;Papyrus&quot; size:36] range:[string rangeOfString:@&quot;color&quot;]];UILabel *lbl = [[UILabel alloc] init];lbl.attributedText = as;lbl.textColor = [UIColor redColor];[lbl sizeToFit];[self.view addSubview:lbl]; ç”¨å­—ä½“æè¿°ç¬¦é€‰æ‹©å­—ä½“å¯»æ‰¾å­—ä½“çš„ä¸»è¦å·¥å…·æ˜¯å­—ä½“æè¿°ç¬¦ã€‚UIFontDescriptoræä¾›äº†ä»Žç³»ç»Ÿä¸­è¯·æ±‚å­—ä½“çš„å¤šç§æ–¹æ³•ï¼Œä¹Ÿæ˜¯åºåˆ—åŒ–å­—ä½“ä¿¡æ¯çš„é¦–é€‰å¯¹è±¡ã€‚ðŸ‘‰å­—ä½“æè¿°ç¬¦çš„å¸¸è§ç”¨å¤„æ˜¯å¯»æ‰¾ðŸ‘€ç›¸å…³å­—ä½“ðŸ‘€ã€‚ðŸ‘ˆåœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œä½ ä¼šæ‰“å¼€ä¸ŠèŠ‚ä¸­åˆ›å»ºçš„å±žæ€§åŒ–å­—ç¬¦ä¸²çš„æ–œä½“ï¼š1234567891011121314-(IBAction)toggleItalic:(id)sender&#123;NSMutableAttributedString *as = [self.label.attributedText mutableCopy];[as enumerateAttribute:NSFontAttributeName inRange:NSMakeRange(0, as.length) options:0 usingBlock:^(id _Nullable value, NSRange range, BOOL * _Nonnull stop) &#123;UIFont *font = value;UIFontDescriptor* descriptor = font.fontDescriptor;//symbolicTraitsç¬¦å·ç‰¹å¾UIFontDescriptorSymbolicTraits traits = descriptor.symbolicTraits ^ UIFontDescriptorTraitItalic;UIFontDescriptor *toggledDescriptor = [descriptor fontDescriptorWithSymbolicTraits:traits];UIFont *italicFont = [UIFont fontWithDescriptor:toggledDescriptor size:0];[as addAttribute:NSFontAttributeName value:italicFont range:range];self.label.attributedText = as;&#125;];&#125; NSAttributedStringçš„enumerateAttribute:inRange:usingBlock:æ˜¯å¯¹è¢«éåŽ†å­—ç¬¦ä¸²çš„è¿žç»­æ–‡æœ¬åšå¾ªçŽ¯æœ‰ç”¨çš„æ–¹æ³•ã€‚ç»™å®šçš„å±žæ€§ä¸€æ—¦å˜åŒ–ï¼Œå—ä¼šè¢«è°ƒç”¨ã€‚åœ¨è¿™ä¸ªå—ä¸­ï¼Œæˆ‘ä»¬ä»Žå­—ä½“èŽ·å–åˆ°å­—ä½“æè¿°ç¬¦ï¼Œç„¶åŽæ‰“å¼€â€æ–œä½“â€ç¬¦å·ç‰¹å¾ã€‚æŽ¥ç€ä¸ºå­—ä½“æè¿°ç¬¦æ‰¾åˆ°æ–°çš„å­—ä½“å¹¶åº”ç”¨åˆ°èŒƒå›´ä¸­ã€‚æ•ˆæžœå›¾å¦‚ä¸‹ ä¹Ÿå¯ä»¥æ›´æ”¹ä¸ºåŠ ç²—çš„å­—ä½“ å¹¶éžæ‰€æœ‰çš„å­—ä½“éƒ½æœ‰æ‰€æœ‰çš„å˜ä½“ã€‚æ¯”å¦‚è¯´ï¼ŒPapyruså­—ä½“å°±æ²¡æœ‰æ–œä½“ï¼Œå½“ä½ ç”¨fontDescriptorWithSymbolicTraits:æ–¹æ³•æ—¶ï¼Œå®ƒä¼šæ‰¾åˆ°ç»™å®šåŒ¹é…çš„æœ€ä½³æè¿°ã€‚ è®¾ç½®æ®µè½æ ·å¼æ®µè½æ ·å¼åŒ…æ‹¬å¤–è¾¹è·ã€å¯¹é½ã€è¿žä½“ç¬¦å·ã€æ¢è¡Œä»¥åŠç±»ä¼¼å±žæ€§ã€‚åœ¨iOSä¸­ï¼ŒðŸ‘‰æ®µè½ç”¨æ¢è¡Œç¬¦åˆ†éš”ï¼Œè€Œå…¶èµ·ä½œç”¨çš„æ®µè½æ ·å¼åˆ™æ˜¯å¯¹æ®µè½ä¸­ç¬¬ä¸€ä¸ªå­—ç¬¦åº”ç”¨çš„æ ·å¼ï¼Œå…¶ä»–æ ·å¼åˆ™ä¼šè¢«å¿½ç•¥ðŸ‘ˆå› ä¸ºæ®µè½æ ·å¼æœ‰ç‰¹æ®Šçš„ä½œç”¨åŸŸèŒƒå›´ï¼Œæ‰€ä»¥ä¼šæ‰“åŒ…æˆä¸€ä¸ªå•ç‹¬çš„NSParagraphStyleå¯¹è±¡ï¼Œå¹¶ä½œä¸ºä¸€ä¸ªå•ç‹¬çš„å±žæ€§ç”¨NSParagraphStyleAttributeNameé”®åº”ç”¨ã€‚ä»¥ä¸‹ä¼šå¯¹ä¸¤ä¸ªæ®µè½è®¾ç½®å¤–è¾¹è·å’Œå¯¹é½12345678910111213141516171819202122NSString *paragraphs = @&quot;Do any additional setup after loading the view, typically from a nib.Do any additional setup after loading the view, typically from a nib.Do any additional setup\n after loading the view, typically from a nib.Do any additional setup after loading the view, typically from a nib.Do any additional setup after loading the view, typically from a nib.&quot;;NSMutableParagraphStyle *wholeDocStyle = [NSMutableParagraphStyle new];[wholeDocStyle setParagraphSpacing:34.0];[wholeDocStyle setFirstLineHeadIndent:10.0];NSDictionary *attributes = @&#123;NSParagraphStyleAttributeName: wholeDocStyle&#125;;NSMutableAttributedString *pas = [[NSMutableAttributedString alloc] initWithString:paragraphs attributes:attributes];//é€šè¿‡å¯»æ‰¾å›žè½¦æ¥æ‰¾åˆ°ç¬¬äºŒæ®µNSUInteger secondParapraphStart = NSMaxRange([pas.string rangeOfString:@&quot;\n&quot;]);//æ·»åŠ å¤´å°¾ç¼©è¿›NSMutableParagraphStyle *secondParagraphStyle = [[pas attribute:NSParagraphStyleAttributeName atIndex:secondParapraphStart effectiveRange:NULL] mutableCopy];secondParagraphStyle.headIndent += 50.0;secondParagraphStyle.firstLineHeadIndent += 50.0;secondParagraphStyle.tailIndent -= 50.0;//å¯¹æœ¬æ®µçš„ç¬¬ä¸€ä¸ªå­—è¿ç”¨æ ·å¼[pas addAttribute:NSParagraphStyleAttributeName value:secondParagraphStyle range:NSMakeRange(secondParapraphStart, 1)];self.label.numberOfLines = 0;self.label.attributedText = pas;self.label.backgroundColor = [UIColor redColor]; iOS7 ä¸ºNSMutableAttributedStringæ–°å¢žäº†ä¸€ä¸ªæ–¹æ³•:fixAttributesInRange:ã€‚è¿™ä¸ªæ–¹æ³•ä¼šæ¸…ç©ºå¤šç§å¸¸è§çš„æ ·å¼ä¸Šçš„ä¸ä¸€è‡´ï¼Œç‰¹åˆ«æ˜¯å®ƒåŸºäºŽæ®µè½ç¬¬ä¸€ä¸ªå­—ç¬¦çš„æ ·å¼ä¸ºæ•´ä¸ªæ®µè½åº”ç”¨æ®µè½æ ·å¼ã€‚]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[å¼€å‘å¤šå¹³å°åº”ç”¨]]></title>
      <url>%2F2017%2F04%2F01%2F%E5%BC%80%E5%8F%91%E5%A4%9A%E5%B9%B3%E5%8F%B0%E5%BA%94%E7%94%A8%2F</url>
      <content type="text"><![CDATA[å¼€å‘å¤šå¹³å°åº”ç”¨ Base SDKå’ŒDeployment Targe Xcode ä¸ºä½ æž„å»ºçš„ç›®æ ‡å¹³å°ï¼Œæä¾›äº†ä¸¤ä¸ªå¯é…ç½®çš„è®¾ç½®ï¼š ç¬¬ä¸€ä¸ªæ˜¯Base SDK,ç¬¬äºŒä¸ªæ˜¯Deployment Target. 1. é…ç½®Base SDKè®¾ç½® åœ¨Build Settingsé€‰é¡¹å¡ï¼ŒBase SDKé€‰é¡¹ã€‚å¯ä»¥å°†å€¼æ”¹ä¸º&quot;Latest iOS SDK&quot;,æˆ–è€…æ˜¯å¼€å‘æœºå™¨ä¸Šå®‰è£…çš„ä»»æ„ç‰ˆæœ¬çš„SDKã€‚Base SDKè®¾ç½®ä¼šå¼•å¯¼ç¼–è¯‘å™¨ä½¿ç”¨è¯¥ç‰ˆæœ¬çš„SDKç¼–è¯‘å’Œæž„å»ºåº”ç”¨ï¼Œå®ƒä¼šæŽ§åˆ¶åº”ç”¨ä½¿ç”¨å“ªäº›APIã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒXcodeä¸­åˆ›å»ºçš„æ–°å·¥ç¨‹ï¼Œæ€»æ˜¯ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬çš„SDKï¼Œè€Œè‹¹æžœä¼šå¤„ç†APIçš„åºŸå¼ƒã€‚ 2.é…ç½®Deployment Targetè®¾ç½® å®ƒæŽ§åˆ¶ç€è¿è¡Œè¿ç”¨éœ€è¦çš„æœ€æ–°æ“ä½œç³»ç»Ÿç‰ˆæœ¬ã€‚å¦‚æžœä½ å°†å®ƒè®¾æˆäº†ç‰¹å®šç‰ˆæœ¬ï¼Œæ¯”å¦‚6.0ï¼ŒApp Storeä¼šè‡ªåŠ¨é˜»æ­¢è¿è¡Œæ—©æœŸæ“ä½œç³»ç»Ÿçš„ç”¨æˆ·ä¸‹è½½æˆ–å®‰è£…è¿™ä¸ªåº”ç”¨ã€‚ æ”¯æŒå¤šä¸ªSDKæ—¶çš„æ³¨æ„äº‹é¡¹ï¼šæ¡†æž¶ã€ç±»å’Œæ–¹æ³•åœ¨æ”¯æŒå¤šä¸ªSDKæ—¶ï¼Œéœ€è¦å¤„ç†ä¸‰ç§æƒ…å†µï¼šæ¡†æž¶ã€ç±»å’Œæ–¹æ³• 1.æ¡†æž¶çš„å¯ç”¨æ€§ æœ‰æ—¶æ–°çš„SDKä¼šå¢žåŠ ä¸€ä¸ªå®Œæ•´çš„æ–°æ¡†æž¶ï¼Œä¹Ÿå°±æ˜¯è¯´è¯¥æ¡†æž¶åœ¨è¾ƒæ—©çš„æ“ä½œç³»ç»Ÿä¸Šä¸å¯ç”¨ã€‚ ä¾‹å¦‚iOS7ä¸­çš„GameController.frameworkï¼Œè¿™ä¸ªæ¡†æž¶åªå¯¹è¿è¡ŒiOS7åŠä»¥ä¸Šçš„è®¾å¤‡å¯ç”¨ã€‚è¿™é‡Œéœ€è¦æ£€æŸ¥ç»™å®šæ¡†æž¶åœ¨ç”¨æˆ·çš„æ“ä½œç³»ç»Ÿä¸Šæ˜¯å¦å¯ç”¨ï¼Œå¹¶éšè—è°ƒç”¨è¯¥æ¡†æž¶çš„UIå…ƒç´ ã€‚ å¯¹äºŽæŸä¸ªæ—©æœŸç‰ˆæœ¬æ“ä½œç³»ç»Ÿä¸­ä¸å¯ç”¨çš„æ¡†æž¶ï¼Œå¦‚æžœæ—¶å€™äº†å…¶ä¸­å®šä¹‰çš„ç¬¦å·ï¼Œé‚£åº”ç”¨å°±æ— æ³•åŠ è½½ã€‚ä¸ºäº†é¿å…è¿™ç§æƒ…å†µæƒ…å†µè€Œé€‰æ‹©æ€§çš„åŠ è½½æ¡†æž¶ï¼Œå¿…é¡»é‡‡ç”¨å¼±é“¾æŽ¥(weak-link).è¦å¼±é“¾æŽ¥æŸä¸ªæ¡†æž¶ï¼Œæ‰“å¼€Build Phasesé€‰é¡¹å¡ï¼Œå±•å¼€Link Binary With Libraries,ä½ å¯ä»¥çœ‹åˆ°å½“å‰é“¾æŽ¥åˆ°ç›®æ ‡çš„ä¸€ç³»åˆ—æ¡†æž¶ã€‚å¦‚æžœæ²¡æœ‰ä¿®æ”¹è¿™é‡Œçš„è®¾ç½®ï¼Œé»˜è®¤æƒ…å†µä¸‹æ‰€æœ‰çš„æ¡†æž¶éƒ½ä¼šè¢«è®¾æˆRequired.ç‚¹å‡»Requiredç»„åˆæ¡†ï¼Œç„¶åŽå°†å®ƒä¿®æ”¹ä¸ºOptionalã€‚è¿™æ ·å°±å¼±é“¾æŽ¥è¯¥æ¡†æž¶äº†ã€‚ å¼±é“¾æŽ¥æ¡†æž¶æ—¶ï¼Œç¼ºå¤±çš„ç¬¦å·ä¼šè‡ªåŠ¨å˜æˆç©ºæŒ‡é’ˆã€‚å¯ä»¥é€šè¿‡æ£€æŸ¥è¿™ä¸ªç©ºæŒ‡é’ˆæ¥å¯ç”¨æˆ–ç¦æ­¢UIå…ƒç´ ã€‚ åœ¨é“¾æŽ¥ä¸€ä¸ªåªæœ‰è¾ƒæ–°ç‰ˆæœ¬çš„SDKæä¾›çš„æ¡†æž¶æ—¶ï¼Œå¦‚æžœä½ ä»ç„¶å°†è¯¥åº”ç”¨çš„éƒ¨ç½²ç›®æ ‡è®¾ç½®ä¸ºè¾ƒæ—©ç‰ˆæœ¬çš„SDKï¼Œåº”ç”¨ä¼šæ— æ³•å¯åŠ¨ï¼Œè€Œä¸”å‡ ä¹Žä¼šç«‹å³å´©æºƒã€‚ 2.ç±»çš„å¯ç”¨æ€§ æœ‰æ—¶æ–°çš„SDKå¯èƒ½åœ¨å·²æœ‰æ¡†æž¶ä¸­æ–°å¢žäº†æ–°ç±»ã€‚è¿™æ„å‘³ç€å³ä½¿è¯¥æ¡†æž¶é“¾æŽ¥äº†ï¼Œä¹Ÿå¹¶ä¸æ˜¯æ‰€æœ‰çš„ç¬¦å·éƒ½èƒ½åœ¨æ—©æœŸæ“ä½œç³»ç»Ÿä¸­å¯ç”¨ã€‚ä¾‹å¦‚iOS7 é‡ŒUIKit.frameworkä¸­å®šä¹‰çš„NSLayoutManagerç±»ã€‚è¯¥æ¡†æž¶ä¼šè¢«é“¾æŽ¥åˆ°æ¯ä¸ªiOSåº”ç”¨ä¸Šï¼Œæ‰€ä»¥åœ¨ä½¿ç”¨è¯¥ç±»çš„æ—¶å€™ï¼Œéœ€è¦ä½¿ç”¨NSClassFromStringæ–¹æ³•æ¥å®žä¾‹åŒ–ä¸€ä¸ªå¯¹è±¡ï¼Œå€Ÿæ­¤æ£€æŸ¥è¯¥å¯¹è±¡æ˜¯å¦å­˜åœ¨ã€‚ å¦ä¸€ä¸ªæ£€æŸ¥å¯ç”¨æ€§çš„æ–¹æ³•æ˜¯ä½¿ç”¨classæ–¹æ³•ï¼Œè€Œä¸æ˜¯NSClassFromStringï¼Œå¦‚ä»¥ä¸‹ä»£ç ã€‚ æ£€æŸ¥UIStepperæŽ§ä»¶çš„å¯ç”¨æ€§ 12345if([NSLayoutManager class])&#123; //ä½¿ç”¨åŸºäºŽTextKitçš„æ–°å¸ƒå±€&#125;else&#123; //ä½¿ç”¨åŸºäºŽCore Textçš„æ–°å¸ƒå±€&#125; 3.æ–¹æ³•çš„å¯ç”¨æ€§ æ£€æŸ¥æŸä¸ªç±»ä¸­æ˜¯å¦å­˜åœ¨æŸä¸ªæ–¹æ³•çš„ä»£ç  1if([self.view respondsToSelector:@selector(setTintColor:)])&#123;&#125; è¦æ£€æŸ¥åˆ¶å®šç±»ä¸­æ˜¯å¦å­˜åœ¨æŸä¸ªæ–¹æ³•ï¼Œå¯ä»¥ä½¿ç”¨respondsToselecotr:æ–¹æ³•ã€‚ å¦‚æžœä½ è¦æ£€æŸ¥çš„æ–¹å¼æ˜¯Cå…¨å±€å‡½æ•°ï¼Œé‚£å°±åœ¨è¡¨è¾¾å¼ä¸­å°†å®ƒå’ŒNULLæ¯”è¾ƒï¼Œå¦‚ä»¥ä¸‹ä»£ç æ‰€ç¤ºã€‚ 123if(CFunction != NULL)&#123; CFunction(a);&#125; æ£€æµ‹è®¾å¤‡çš„åŠŸèƒ½çœ‹çœ‹å¦‚ä¸‹çš„ä»£ç ç‰‡æ®µï¼Œå®ƒç”¨æ¥åˆ¤æ–­iPhoneçš„åŠŸèƒ½ã€‚ æ£€æµ‹éº¦å…‹é£ŽðŸŽ¤çš„é”™è¯¯æ–¹æ³•123if(![[UIDevice currentDevice].model isEqualToString:@&quot;iPhone&quot;])&#123;///&#125; è¿™æ®µä»£ç çš„é—®é¢˜åœ¨äºŽï¼Œè¿™ä½å¼€å‘è€…å¤§èƒ†åœ°å‡è®¾åªæœ‰iPhoneæœ‰éº¦å…‹é£Žã€‚è¿™æ®µä»£ç æœ€å¼€å§‹è¡¨çŽ°è‰¯å¥½ã€‚ä½†åœ¨iOS2.2ç‰ˆä¸­ï¼Œè‹¹æžœå‘iPod touchå¢žåŠ äº†å¤–æŽ¥éº¦å…‹é£ŽåŠŸèƒ½ï¼Œè¿™æ®µä»£ç ä¼šé˜»æ­¢ç”¨æˆ·ä½¿ç”¨è¯¥åº”ç”¨ã€‚]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[é€šè¿‡å®‰å…¨æœåŠ¡å·©å›ºç³»ç»Ÿå®‰å…¨]]></title>
      <url>%2F2017%2F03%2F29%2F%E9%80%9A%E8%BF%87%E5%AE%89%E5%85%A8%E6%9C%8D%E5%8A%A1%E5%B7%A9%E5%9B%BA%E7%B3%BB%E7%BB%9F%E5%AE%89%E5%85%A8%2F</url>
      <content type="text"><![CDATA[ç†è§£iOSæ²™ç›’ iOS å®‰å…¨æ¨¡åž‹çš„ç²¾é«“åœ¨äºŽæ²™ç›’(sandbox).å®‰è£…åº”ç”¨æ—¶ï¼Œç³»ç»Ÿä¼šåœ¨æ–‡ä»¶ç³»ç»Ÿä¸­åˆ›å»ºä¸€ä¸ªè‡ªå·±çš„ä¸»ç›®å½•ã€‚ æ²™ç›’ä¸­æœ‰å››ä¸ªé‡è¦çš„é¡¶çº§ç›®å½•ï¼š .appæ†ç»‘ç›®å½•(.app bundle)ã€Documentsã€Library å’Œ tmp. åº”ç”¨å…è®¸è®¿é—®/System/Library/Frameworks. ä¸ºäº†æ›´å¥½çš„ç»„ç»‡ï¼Œå¯ä»¥åœ¨Libraryä¸‹åˆ›å»ºå­ç›®å½•ã€‚ .appæ†ç»‘ç›®å½•æ˜¯Xcodeæœ€ç»ˆæž„å»ºå‡ºæ¥å¹¶å¤åˆ¶åˆ°è®¾å¤‡ä¸Šçš„åŒ…ã€‚å…¶ä¸­æ‰€æœ‰çš„å†…å®¹éƒ½ç»è¿‡äº†æ•°å­—ç­¾åï¼Œæ‰€ä»¥æ— æ³•ä¿®æ”¹ã€‚å°¤å…¶æ˜¯å…¶ä¸­è¿˜åŒ…å«å¼€å‘è€…çš„Resourceç›®å½•ã€‚ðŸ‘‰è¦ä¿®æ”¹ä½œä¸ºæ†ç»‘å®‰è£…çš„æ–‡ä»¶ï¼Œéœ€è¦å…ˆå°†å®ƒä»¬å¤åˆ¶åˆ°å…¶ä»–åœ°æ–¹ï¼Œé€šå¸¸æ˜¯Libraryå½“ä¸­ã€‚ðŸ‘ˆ Library/Cachesç›®å½•å¾ˆç‰¹æ®Šï¼Œå®ƒä¸ä¼šè¢«å¤‡ä»½ï¼Œä½†æ˜¯ä¼šåœ¨å‡çº§è¿‡ç¨‹ä¸­ä¿ç•™ã€‚ å¤‡ä»½æ˜¯éžå¸¸é‡è¦çš„æ¦‚å¿µï¼Œç”¨æˆ·å¯èƒ½ä¼šä½¿ç”¨å¯†ç æ¥åŠ å¯†iTuneså¤‡ä»½ã€‚å¦‚æžœæ•°æ®ä¸åº”è¯¥ä»¥æ˜Žæ–‡æ–¹å¼åœ¨æ¡Œé¢æœºå™¨ä¸Šå­˜å‚¨ï¼Œé‚£å°±åº”è¯¥å°†å…¶å­˜å‚¨åœ¨é’¥åŒ™ä¸²(keychain)ä¸­ã€‚ å¦‚æžœæŸäº›ä¿¡æ¯ä¸æƒ³è®©ç”¨æˆ·çœ‹åˆ°ï¼Œå¯ä»¥å°†å®ƒä»¬å­˜å‚¨åœ¨é’¥åŒ™ä¸²ä¸­ï¼Œæˆ–æ˜¯Library/Cachesç›®å½•ä¸‹ã€‚ä½†è¿™åªèƒ½èµ·åˆ°å¾®å¼±çš„ä¿æŠ¤ï¼Œå› ä¸ºç”¨æˆ·æ€»èƒ½é€šè¿‡è¶Šç‹±æ¥è¯»å–ä»»ä½•æ–‡ä»¶æˆ–é’¥åŒ™ä¸² ä¿è¯ç½‘ç»œé€šä¿¡çš„å®‰å…¨æ”»å‡»è€…å¹¶ä¸éœ€è¦è®¿é—®è®¾å¤‡ï¼Œåªè¦èƒ½å¤Ÿè®¿é—®è®¾å¤‡æ‰€åœ¨çš„ç½‘ç»œå°±è¡Œäº†ã€‚å±é™©åŒºåŸŸåŒ…æ‹¬å’–å•¡é¦†ã€æœºåœºä»¥åŠå…¶ä»–å…¬å…±Wi-FiæŽ¥å…¥åŒºã€‚ æœ€ç®€å•ç›´æŽ¥çš„è§£å†³åŠžæ³•æ˜¯åœ¨ç½‘ç»œé€šä¿¡ä¸­é‡‡ç”¨HTTPSï¼Œè¯¥åè®®èƒ½å¤Ÿé¿å…å¾ˆå¤šç®€å•çš„æ”»å‡»ã€‚ è¯ä¹¦å·¥ä½œåŽŸç†éžå¯¹ç§°å¯†ç å­¦åŸºäºŽä»¥ä¸‹æ•°å­¦äº‹å®žï¼šå¯ä»¥æ‰¾åˆ°ä¸¤ä¸ªå¾ˆå¤§çš„ç›¸å…³æ•°å­—(åˆ†åˆ«ç§°ä¸ºAå’ŒB)ï¼Œå…¶ä¸­ä¸€ä¸ªæ•°å­—åŠ å¯†çš„å†…å®¹å¯ä»¥ä½¿ç”¨å¦å¤–ä¸€ä¸ªæ•°å­—è§£å¯†ï¼Œåä¹‹äº¦ç„¶ã€‚ç§˜é’¥Aä¸èƒ½è§£å¯†ç§˜é’¥AåŠ å¯†çš„å†…å®¹ï¼Œç§˜é’¥Bä¸èƒ½è§£å¯†ç§˜é’¥BåŠ å¯†çš„å†…å®¹ã€‚å„è‡ªåªèƒ½è§£å¯†å¯¹æ–¹åŠ å¯†çš„æ•°æ®ã€‚è¿™éƒ¨åˆ†æ•°æ®ç§°ä¹‹ä¸ºå¯†æ–‡ã€‚è§£å¯†å’ŒåŠ å¯†ä½¿ç”¨çš„æ˜¯ä¸åŒçš„é’¥åŒ™ã€‚é‡‡ç”¨å…¬é’¥åŠ å¯†ï¼Œç§é’¥è§£å¯†ã€‚å¦‚æžœè¦è¯æ˜ŽæŸä¸ªå®žä½“(ä¸ªäººæˆ–æœºå™¨)æ‹¥æœ‰é…å¯¹çš„ç§é’¥ï¼Œå¯ä»¥ç”Ÿæˆä¸€ä¸ªéšæœºæ•°ï¼Œå°†å®ƒç”¨è¯¥å®žä½“çš„å…¬é’¥åŠ å¯†ï¼Œç„¶åŽå‘é€ç»™å®ƒã€‚è¯¥å®žä½“ä¼šç”¨ç§é’¥è§£å¯†æ•°æ®ï¼Œç„¶åŽå°†å®ƒå‘å›žã€‚å¼€å‘äººå‘˜è¿˜å¯ä»¥ä½¿ç”¨è¯¥å±žæ€§å¯¹æ•°æ®è¿›è¡Œæ•°å­—ç­¾åã€‚ç»™å®šä¸€äº›æ•°æ®ï¼Œå¯ä»¥å…ˆç”¨ä¸€äº›çŸ¥åçš„æ•£åˆ—ç®—æ³•å°†å…¶æ•£åˆ—åŒ–ï¼Œç„¶åŽå†ç”¨ç§é’¥å¯¹å…¶åŠ å¯†ã€‚ç”Ÿæˆçš„å¯†æ–‡å°±æ˜¯ç­¾åã€‚è¦éªŒè¯è¯¥ç­¾åï¼Œç”¨åŒæ ·çš„ç®—æ³•å†æ¬¡æ•£åˆ—åŒ–è¯¥æ•°æ®ï¼Œç”¨å…¬é’¥è§£å¯†æ”¶åˆ°çš„ç­¾åï¼Œç„¶åŽæ¯”è¾ƒè¿™ä¸¤ä¸ªæ•£åˆ—å€¼ã€‚å¦‚æžœä¸€è‡´ï¼Œè¯´æ˜Žè¯¥ç­¾åæ˜¯ç”±æŒæœ‰ç§é’¥çš„å®žä½“åˆ›å»ºçš„ã€‚ å­˜åœ¨çš„é—®é¢˜æ˜¯ï¼š èƒ½å¤Ÿè®¿é—®è¯¥ç§é’¥çš„äººéƒ½èƒ½å¤Ÿä¼ªé€ ç­¾åã€‚ å…¶æ¬¡ï¼Œä½ æ€Žä¹ˆçŸ¥é“è‡ªå·±æ‹¿åˆ°çš„å…¬é’¥å°±æ˜¯è·Ÿä½ é€šä¿¡çš„å®žä½“å…³è”çš„é‚£ä¸ªï¼Ÿ è¯ä¹¦æ˜¯ç”±å…¬é’¥ã€è¯ä¹¦ç›¸å…³çš„å…ƒæ•°æ®ï¼Œä»¥åŠå…¶ä»–ä¸€ç³»åˆ—è¯ä¹¦çš„ç­¾åæž„æˆã€‚è¯ä¹¦éƒ½å­˜åœ¨ä¸€ä¸ªç®€å•çš„é“¾ï¼Œæ¯ä¸ªéƒ½ä¼šå¯¹å…¶åŽé¢è·Ÿç€çš„è¿›è¡Œç­¾åã€‚ æ•°å­¦ä¸Šï¼Œå¯ä»¥åˆ¤æ–­å‡ºæ¯ä¸ªè¯ä¹¦çš„æŽ§åˆ¶è€…éƒ½ä¼šç­¾åé“¾ä¸­çš„ä¸‹ä¸€ä¸ªè¯ä¹¦ï¼Œä½†æˆ‘ä»¬ä¸ºä»€ä¹ˆä¿¡ä»»å®ƒä»¬ï¼Ÿæˆ‘ä»¬ä¿¡ä»»å®ƒä»¬æ˜¯å› ä¸ºè‹¹æžœä¿¡ä»»VeriSignçš„æ ¹è¯ä¹¦ï¼Œå®ƒä¼šå¯¹ä¸­çº§è¯ä¹¦ç­¾åï¼Œè€Œä¸­çº§è¯ä¹¦åˆä¼šå¯¹è‹¹æžœè¯ä¹¦è¿›è¡Œç­¾åã€‚è‹¹æžœä¼šå°†VeriSignçš„æ ¹è¯ä¹¦ä»¥åŠä¸€ç™¾å¤šä¸ªå…¶ä»–å—ä¿¡ä»»æ ¹è¯ä¹¦å­˜æ”¾åœ¨æ¯ä¸ªiOSè®¾å¤‡çš„å—ä¿¡ä»»è¯ä¹¦ä»“åº“ä¸­ã€‚ðŸ‘‰å—ä¿¡ä»»æ ¹è¯ä¹¦ä»“åº“æ˜¯ä¸€ç³»åˆ—è¢«è®¤ä¸ºå€¼å¾—ä¿¡ä»»çš„è¯ä¹¦ðŸ‘ˆæˆ‘ä»¬å°†æ˜Žç¡®å—ä¿¡ä»»çš„è¯ä¹¦æˆä¸ºé”šï¼Œå¦‚æžœä¸ä¿¡ä»»è‹¹æžœçš„å—ä¿¡ä»»è¯ä¹¦åˆ—è¡¨ï¼Œå¼€å‘è€…å¯ä»¥è®¾ç½®è‡ªå·±çš„é”šã€‚ å¤„äºŽå¯†ç å­¦åŽŸå› ï¼Œæ¯ä¸ªè¯ä¹¦éƒ½è¦åŒ…å«ä¸€ä¸ªæ¥è‡ªè‡ªèº«çš„ç­¾åã€‚åªåŒ…å«è¿™ä¸ªç­¾åçš„è¯ä¹¦è¢«ç§°ä¸ºè‡ªç­¾åè¯ä¹¦ã€‚é€šå¸¸ï¼Œäººä»¬åœ¨è°ˆåˆ°è‡ªç­¾åè¯ä¹¦æ—¶ï¼Œæš—å«â€œä½ ä¸è¯¥ä¿¡ä»»è¿™ä¸ªè¯ä¹¦â€çš„æ„æ€ã€‚ä½†VeriSignæ ¹è¯ä¹¦å°±æ˜¯ä¸€ä¸ªè‡ªç­¾åè¯ä¹¦ï¼Œè€Œå®ƒæ˜¯ä¸–ç•Œä¸Šæœ€å—ä¿¡ä»»çš„è¯ä¹¦ä¹‹ä¸€ã€‚ä»Žå®šä¹‰ä¸Šæ¥çœ‹ï¼Œæ¯ä¸ªæ ¹è¯ä¹¦å°±æ˜¯ä¸€ä¸ªè‡ªç­¾åè¯ä¹¦ã€‚å†³å®šå®‰å…¨æ€§çš„å…¶å®žå¹¶ä¸æ˜¯è¯ä¹¦é“¾ä¸­çš„è¯ä¹¦ã€‚å†³å®šå®‰å…¨æ€§çš„å…¶å®žå¹¶ä¸æ˜¯è¯ä¹¦é“¾ä¸­çš„è¯ä¹¦åŒ…å«å¤šå°‘ä¸ªç­¾åï¼Œè€Œæ˜¯è¯ä¹¦é“¾ä¸­çš„ç§é’¥æ˜¯å¦ä¿æŠ¤çš„è¶³å¤Ÿå®‰å…¨ï¼Œä»¥åŠè¯ä¹¦æ‰€æœ‰è€…çš„èº«ä»½æ˜¯å¦å¾—åˆ°äº†è®¤è¯ã€‚å¦‚æžœä½ ç”Ÿæˆäº†è‡ªå·±çš„è‡ªç­¾åè¯ä¹¦ï¼Œå¹¶ä¸”å°†ç§é’¥ä¿ç®¡å¾—è¶³å¤Ÿå¥½ï¼Œé‚£å®ƒç”šè‡³æ¯”VerSigné¢å‘ç»™ä½ çš„è¯ä¹¦è¿˜è¦å®‰å…¨ã€‚è¿™ä¸¤è€…æƒ…å†µéƒ½éœ€è¦è‡ªå·±ä¿ç®¡ç§é’¥ï¼Œè€Œåœ¨åŽè€…ä¸­ï¼Œè¿˜è¦è€ƒå¯ŸVeriSignæ˜¯å¦ä¿ç®¡å¥½äº†å®ƒçš„ç§é’¥ã€‚ è¿™å¹¶ä¸æ˜¯è¯´VeriSignã€DigiTrustä»¥åŠå…¶ä»–æä¾›å•†é¢å‘çš„å•†ä¸šè¯ä¹¦ä¸å¤Ÿå¥½ç”¨ï¼Œè€Œæ˜¯è¯´ä½ ä¸èƒ½ä¾èµ–å•†ä¸šè¯ä¹¦æ¥æä¾›ç³»ç»Ÿçš„å®‰å…¨æ€§ã€‚èŽ·å¾—å•†ä¸šè¯ä¹¦åªæ˜¯ä¸ºäº†çœäº‹ï¼Œå› ä¸ºå•†ä¸šè¯ä¹¦å·²ç»åœ¨æ ¹è¯ä¹¦å¯†é’¥ä»“åº“ä¸­äº†ã€‚ç»“è®ºä»¤äººåƒæƒŠðŸ˜²ï¼šè´­ä¹°å•†ä¸šè¯ä¹¦æ¥åŠ å¯†åº”ç”¨å’ŒæœåŠ¡å™¨ä¹‹é—´çš„ç½‘ç»œåè®®å¹¶ä¸èƒ½æé«˜å®‰å…¨æ€§ã€‚ å•†ä¸šè¯ä¹¦åªå¯¹ç”±æµè§ˆå™¨æˆ–å…¶ä»–ä¸å¯æŽ§è½¯ä»¶è®¿é—®çš„ç½‘ç»œæœ‰ç”¨ã€‚ðŸ‘‰è‡ªè¡Œç”Ÿæˆè¯ä¹¦å¹¶å°†å…¬é’¥æ”¾åˆ°åº”ç”¨ä¸­ðŸ‘ˆç”šè‡³æ¯”ä½¿ç”¨å•†ä¸šè¯ä¹¦è¿˜è¦å®‰å…¨ã€‚ æ£€éªŒè¯ä¹¦çš„æœ‰æ•ˆæ€§å¦‚æžœè¯ä¹¦æ²¡æœ‰æŸåï¼Œå®ƒå°±ä¸€å®šæœ‰æ•ˆå—ï¼Ÿè¯ä¹¦åŒ…å«æœ‰å…³å…¶æ‰€åŒ…å«å…¬é’¥çš„å¤§é‡å…ƒæ•°æ®,å…¬é’¥åªæ˜¯ä¸€ä¸ªå¾ˆå¤§çš„æ•°å­—ï¼Œè‡ªèº«å¹¶æ²¡æœ‰ä»»ä½•æ„ä¹‰ã€‚æ­£æ˜¯å…ƒæ•°æ®æ‰èµ‹äºˆäº†è¿™äº›æ•°å­—å®žé™…æ„ä¹‰ã€‚è¯ä¹¦çš„æœ‰æ•ˆæ€§æ˜¯æŒ‡å®ƒæ‰€åŒ…å«çš„å…ƒæ•°æ®æ˜¯ä¸€è‡´çš„ï¼Œå¹¶ä¸”é€‚ç”¨äºŽè¯·æ±‚çš„ç”¨é€”ã€‚ å…ƒæ•°æ®ä¸­æœ€é‡è¦çš„éƒ¨åˆ†æ˜¯ä¸»é¢˜ã€‚å¯¹æœåŠ¡å™¨æ¥è¯´ï¼Œä¸»é¢˜å°±æ˜¯å®Œå…¨é™å®šåŸŸåï¼Œæ¯”å¦‚ww.example.org.ðŸ‘‰æœ‰æ•ˆæ€§æµ‹è¯•çš„ç¬¬ä¸€æ­¥æ˜¯åšåç§°åŒ¹é…ã€‚ðŸ‘ˆå¦‚æžœä½ è®¿é—®çš„åŸŸåæ˜¯www.example.org,è€Œç½‘ç«™è¯ä¹¦ä¸Šå†™çš„æ˜¯www.badguy.com,é‚£ä½ åº”è¯¥æ‹’ç»è¯¥è¯ä¹¦ã€‚ä½†æ˜¯äº‹æƒ…å¾€å¾€æ²¡æœ‰è¿™ä¹ˆç®€å•ã€‚å¦‚æžœè®¿é—®çš„æ˜¯example.org,è€Œå®ƒçš„è¯ä¹¦ä¸Šæ˜¾ç¤ºçš„æ˜¯www.example.orgå‘¢ï¼Ÿåº”è¯¥æŽ¥å—è¯¥è¯ä¹¦å—ï¼Ÿè®¸å¤šäººä»¥ä¸ºexample.orgå’Œwww.example.orgæ˜¯æŒ‡çš„åŒä¸€å°æœåŠ¡å™¨(å®žé™…ä¸Šå¯èƒ½æ˜¯åŒä¸€å¤©ï¼Œä¹Ÿå¯èƒ½ä¸æ˜¯)ï¼Œä½†è¯ä¹¦ä½¿ç”¨çš„æ˜¯ç®€å•çš„å­—ç¬¦ä¸²åŒ¹é…ã€‚å¦‚æžœå­—ç¬¦ä¸²ä¸åŒ¹é…ï¼Œé‚£ä¹ˆè¯ä¹¦å°±æ˜¯æ— æ•ˆçš„ã€‚æœ‰äº›æœåŠ¡å™¨å¸¦çš„æ˜¯ä¸»é¢˜ç±»ä¼¼*.exampleçš„é€šé…åž‹è¯ä¹¦ï¼ŒiOSä¼šæŽ¥å—è¿™äº›è¯ä¹¦ï¼›ä½†æœ‰æ—¶å€™å®ƒä»ç„¶æœ‰å¯èƒ½ä¼šå› ä¸ºåç§°ä¸åŒ¹é…è€Œæ‹’ç»ä½ æ‰€è®¤ä¸ºåº”è¯¥æŽ¥å—çš„è¯ä¹¦ã€‚ä¸å¹¸çš„æ˜¯ï¼ŒiOSå¤„ç†èµ·æ¥å¹¶ä¸å®¹æ˜“ï¼Œä½†å¥½åœ¨è¿˜æ˜¯èƒ½å¤„ç†çš„ã€‚å†³å®šæ˜¯å¦æŽ¥å—ä¸€ä¸ªè¯ä¹¦çš„ä¸»è¦å·¥å…·æ˜¯NSURLConnectionçš„å§”æ‰˜æ–¹æ³•connection:willSendRequestForAuthenticationChanllenge.åœ¨è¯¥æ–¹æ³•ä¸­ï¼Œä½ è¦å†³å®šæ˜¯å¦é€šè¿‡è¯¥æœåŠ¡å™¨çš„è®¤è¯ï¼Œå¦‚æžœè¦é€šè¿‡ï¼Œåˆ™éœ€è¦æä¾›å‡­æ®ã€‚ä¸‹é¢ä»£ç èƒ½å¤Ÿè¿žæŽ¥åˆ°ä»»ä½•æŒæœ‰éžæŸåè¯ä¹¦çš„ä»»ä½•æœåŠ¡å™¨æ¥è¿›è¡Œè®¤è¯ï¼Œè€Œä¸ç®¡è¯ä¹¦æ˜¯å¦æœ‰æ•ˆæˆ–å—ä¿¡ä»»123456-(void)connection:(NSURLConnection *)connection willSendRequestForAuthenticationChallenge:(NSURLAuthenticationChallenge *)challenge&#123;SecTrustRef trust = challenge.protectionSpace.serverTrust;NSURLCredential *cred;cred = [NSURLCredential credentialForTrust:trust];[challenge.sender useCredential:cred forAuthenticationChallenge:challenge];&#125; è¿™æ®µä»£ç å…ˆæå–äº†trustå¯¹è±¡ï¼Œç„¶åŽä¸ºå…¶åˆ›å»ºäº†ä¸€ä¸ªCredentialå¯¹è±¡ã€‚HTTPSè¿žæŽ¥æ€»ä¼šè¦æ±‚æä¾›Credentialå¯¹è±¡ï¼Œå³ä¾¿å®žé™…ä¸Šå¹¶ä¸éœ€è¦å°†å‡­æ®ä¼ ç»™æœåŠ¡å™¨ã€‚ ä¸‹é¢è¿™ä¸ªä¾‹å­å°è¯•é“¾æŽ¥IPåœ°å€ä¸º72.14.204.113çš„æœåŠ¡å™¨ã€‚æˆ‘ä»¬æŽ¥æ”¶åˆ°çš„ä¸»é¢˜æ˜¯*.google.com,è·Ÿå®žé™…çš„å¹¶ä¸åŒ¹é…ã€‚å­—ç¬¦ä¸²72.14.204.113é‡Œé¢å¹¶ä¸åŒ…å«.google.comã€‚ä½ å†³å®šæŽ¥å—ä¸»é¢˜åç§°ä¸­åŒ…å«google.comçš„æ‰€æœ‰å—ä¿¡ä»»è¯ä¹¦ã€‚è¦ç¼–è¯‘ä¸‹é¢çš„ä¾‹å­ï¼Œéœ€è¦å°†Security.frameworké“¾æŽ¥éƒ½ä½ çš„å·¥ç¨‹ä¸­ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182//è¿™ä¸ªå‡½æ•°ä¼šä»ŽURLåŠ è½½ç³»ç»Ÿåˆ›å»ºçš„åŽŸå§‹trustå¯¹è±¡å¤„å¤åˆ¶æ‰€æœ‰çš„è¯ä¹¦å¹¶åˆ›å»ºä¸€ä¸ªæ–°çš„trustå¯¹è±¡ã€‚æ–°trustå¯¹è±¡ä½¿ç”¨æ›´ç®€å•çš„X.509ç­–ç•¥ï¼Œåªæ£€æŸ¥è¯ä¹¦è‡ªèº«çš„æœ‰æ•ˆæ€§å’Œå¯ä¿¡åº¦ï¼Œè€Œä¸ä¼šåƒåŽŸæ¥çš„SSLç­–ç•¥ä¸€æ ·æ£€æŸ¥ä¸»æœºåã€‚static OSStatus RNSecTrustEvaluateAsX509(SecTrustRef trust,SecTrustResultType *result)&#123;OSStatus status = errSecSuccess;SecPolicyRef policy = SecPolicyCreateBasicX509();SecTrustRef newTrust;CFIndex numberOfCerts = SecTrustGetCertificateCount(trust);NSMutableArray *certs = [NSMutableArray new];for (NSUInteger index = 0; index &lt; numberOfCerts; ++index) &#123;SecCertificateRef cert;cert = SecTrustGetCertificateAtIndex(trust, index);[certs addObject:(__bridge id)cert];&#125;status = SecTrustCreateWithCertificates((__bridge CFArrayRef)certs,policy,&amp;newTrust);if (status == errSecSuccess) &#123;status = SecTrustEvaluate(newTrust, result);&#125;CFRelease(policy);CFRelease(newTrust);return status;&#125;-(void)connection:(NSURLConnection *)connection willSendRequestForAuthenticationChallenge:(NSURLAuthenticationChallenge *)challenge&#123;//æŽ¥å—challengeå¯¹è±¡ï¼Œæå–trustå¯¹è±¡ã€‚NSURLProtectionSpace *protSpace = challenge.protectionSpace;SecTrustRef trust = protSpace.serverTrust;SecTrustResultType result = kSecTrustResultFatalTrustFailure;//æˆ‘ä»¬é€šè¿‡æµ‹è¯•trustå¯¹è±¡(SecTrustEvaluate)å¾—åˆ°ä¸€ä¸ªå¯æ¢å¤é”™è¯¯ã€‚é€šå¸¸å¯æ¢å¤é”™è¯¯å°±æ˜¯åç§°ä¸åŒ¹é…ä¹‹ç±»çš„é—®é¢˜ã€‚OSStatus status = SecTrustEvaluate(trust, &amp;result);//Recoverable å¯æ¢å¤if (status == errSecSuccess &amp;&amp; result == kSecTrustResultRecoverableTrustFailure) &#123;SecCertificateRef cert = SecTrustGetCertificateAtIndex(trust, 0);//æˆ‘ä»¬æ‹¿åˆ°äº†è¯ä¹¦çš„ä¸»é¢˜ï¼Œç„¶åŽåˆ¤æ–­ä»–ä»¬æ˜¯å¦æ˜¯è¶³å¤Ÿçš„æŽ¥è¿‘ï¼ˆæœ¬ä¾‹ä¸­ï¼Œæ£€æŸ¥å®ƒæ˜¯å¦åŒ…å«.google.comï¼‰CFStringRef subject = SecCertificateCopySubjectSummary(cert);NSLog(@&quot;Trying to access %@. Got %@.&quot;,protSpace.host,subject);CFRange range = CFStringFind(subject, CFSTR(&quot;.google.com&quot;), kCFCompareAnchored|kCFCompareBackwards);if (range.location != kCFNotFound) &#123;//å¦‚æžœèƒ½æŽ¥å—ä¼ é€’è¿‡æ¥çš„åç§°,å°±å¯ä»¥æŠŠå®ƒå½“åšä¸€ä¸ªç®€å•çš„X.509è¯ä¹¦æ¥é‡æ–°æµ‹è¯•ï¼Œè€Œä¸æ˜¯ä½œä¸ºSSLæ¡æ‰‹çš„ä¸€æœ¬åˆ†ã€‚é€šè¿‡è‡ªå®šä¹‰å‡½æ•°RNSecTrustEvaluateAsX509è¿›è¡Œçš„ã€‚status = RNSecTrustEvaluateAsX509(trust, &amp;result);&#125;CFRelease(subject);&#125;if (status == errSecSuccess) &#123;switch (result) &#123;case kSecTrustResultInvalid:case kSecTrustResultDeny:case kSecTrustResultFatalTrustFailure:case kSecTrustResultOtherError:case kSecTrustResultRecoverableTrustFailure:NSLog(@&quot;Failing due to result: %u&quot;,result);[challenge.sender cancelAuthenticationChallenge:challenge];break;case kSecTrustResultProceed:case kSecTrustResultUnspecified:&#123;NSLog(@&quot;Successing with result: %u&quot;,result);NSURLCredential *cred;cred = [NSURLCredential credentialForTrust:trust];[challenge.sender useCredential:cred forAuthenticationChallenge:challenge];&#125;default:NSAssert1(NO, @&quot;Unexpected result from trust evaluation:%u&quot;, result);break;&#125;&#125;else&#123;//è¯ä¹¦æœ‰é—®é¢˜NSLog(@&quot;Complete failure with code: %d&quot;,(int)status);[challenge.sender cancelAuthenticationChallenge:challenge];&#125;&#125; è¯ä¹¦è¿˜æœ‰å¯èƒ½å› ä¸ºè¿‡æœŸæ— æ•ˆã€‚ä¸å¹¸çš„æ˜¯ï¼Œè™½ç„¶å¯ä»¥ä½¿ç”¨SecTrustSetVerifyDateåˆ¶å®šä»»ä½•çš„æ—¥æœŸæ¥é‡æ–°æµ‹è¯•è¯¥è¯ä¹¦ï¼Œä½†æˆ‘ä»¬æ— æ³•æ‰¾åˆ°ä¸€ä¸ªç®€å•ã€å…¬å¼€çš„åŠžæ³•æ¥æ£€éªŒè¯ä¹¦çš„æœ‰æ•ˆæ—¥æœŸã€‚ä¸‹é¢çš„ç§æœ‰æ–¹æ³•æ¥æ£€éªŒæœ‰æ•ˆæœŸé™ï¼š12CFAbsoluteTime SecCertificateNotValidBefore(SecCertificateRef certificate);CFAbsoluteTime SecCertificateNotValidAfter(SecCertificateRef certificate); æµ‹è¯•trustå¯¹è±¡åŽï¼Œæœ€ç»ˆç»“æžœä¼šæ˜¯SecTrustResultTypeä¸­çš„æŸä¸€ä¸ªã€‚å…¶ä¸­ä¸‹é¢è¿™äº›ç»“æžœä»£è¡¨è¯ä¹¦â€æ­£å¸¸â€æˆ–â€œå¯èƒ½æ­£å¸¸â€ kSecTrustResultProceed è¯ä¹¦æœ‰æ•ˆï¼Œç”¨æˆ·æ˜Žç¡®æŽ¥å—å®ƒ kSecTrustResultUnspecified è¯ä¹¦æœ‰æ•ˆï¼Œè€Œç”¨æˆ·æœªæ˜Žç¡®æŽ¥å—æˆ–æ‹’ç»ï¼Œé€šå¸¸å¼€å‘äººå‘˜æŽ¥å—å°±å¯ä»¥äº† kSecTrustResultRecoverableTrustFailure è¯ä¹¦æ— æ•ˆï¼Œä½†æŸç§æ„ä¹‰ä¸Šå¼€å‘äººå‘˜å¯ä»¥æŽ¥å—å®ƒï¼Œæ¯”å¦‚åç§°ä¸åŒ¹é…ã€å·²è¿‡æœŸæˆ–ç¼ºä¹å¯ä¿¡åº¦(è‡ªç­¾åè¯ä¹¦) kSecTrustResultDeny è¯¥è¯ä¹¦æœ‰æ•ˆï¼Œä½†ç”¨æˆ·æ˜Žç¡®æ‹’ç»äº† kSecTrustResultInvalid éªŒè¯è¿‡ç¨‹æ— æ³•è¾¾æˆï¼Œå¾ˆæœ‰å¯èƒ½æ˜¯å› ä¸ºå¼€å‘äººå‘˜è‡ªèº«ä»£ç æœ‰é—®é¢˜ kSecTrustResultFatalTrustFailure è¯¥è¯ä¹¦æœ‰é—®é¢˜æˆ–è€…æŸå kSecTrustResultOtherError è¿™ä¸ªé”™è¯¯ä½†æ„¿ä½ èƒ½è§åˆ° åˆ¤æ–­è¯ä¹¦çš„å¯ä¿¡åº¦ä½ å·²ç»äº†è§£äº†å¦‚ä½•æ¥åˆ¤æ–­è¿™ä¸ªè¯ä¹¦æ˜¯å¦æœ‰æ•ˆï¼Œä½†æœ‰æ•ˆå¹¶ä¸ä»£è¡¨å¯ä»¥ä¿¡ä»»ã€‚å¦‚æžœåº”ç”¨æŽ¥æ”¶åˆ°çš„æ˜¯ä¸æ˜Žèº«ä»½çš„è®¤è¯æœºæž„ç­¾å‘çš„è¯ä¹¦ï¼Œé‚£ä¹ˆå°±æ²¡æœ‰å¯ä¿¡åº¦ã€‚è¦æƒ³è¯ä¹¦å—ä¿¡ä»»ï¼Œå®ƒå¿…é¡»ç”±trustå¯¹è±¡çš„é”šè¯ä¹¦åˆ—è¡¨ä¸­çš„æŸä¸ªè¯ä¹¦ç­¾åï¼Œé”šè¯ä¹¦æ˜¯æŒ‡ç³»ç»Ÿæ˜Žç¡®ä¿¡ä»»çš„è¯ä¹¦ã€‚iOSå¸¦æœ‰ä¸€ç™¾å¤šä»½é”šè¯ä¹¦ï¼Œä¸»è¦æ¥è‡ªæ”¿åºœæˆ–ä¼ä¸šã€‚å¦‚æžœè¯ä¹¦æ˜¯è‡ªè¡Œç”Ÿæˆçš„ï¼Œä½ å¯ä»¥å°†å…¬é’¥åµŒå…¥åˆ°åº”ç”¨ä¸­ï¼Œå¹¶é…ç½®trustå¯¹è±¡ä½¿å…¶åªæŽ¥å—è¯¥è¯ä¹¦æˆ–ç”±å®ƒç­¾å‘çš„è¯ä¹¦ã€‚è¿™æ ·ä½ ä¸ä»…èƒ½åœ¨å®‰å…¨æ€§æ–¹é¢æ‹¥æœ‰è¾ƒå¤§çš„è‡ªä¸»æƒï¼Œè¿˜èƒ½èŠ‚çœä¸€äº›è´¹ç”¨ã€‚ åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªè‡ªç­¾åçš„è¯ä¹¦:(1)æ‰“å¼€keychain Access.(2)é€‰æ‹©keychain Access èœå•-&gt; Certificate Assistant -&gt; Create a Certificate.(3)è¾“å…¥ä½ æƒ³è¦çš„åå­—ã€‚å°†Identity type è®¾ä¸ºSelfSigned Root,å°†Certificate Typeè®¾ç½®ä¸ºSSL Client,ç„¶åŽåˆ›å»ºè¯¥è¯ä¹¦ã€‚å®ƒä¼šè­¦å‘Šâš ï¸ä½ è¯´è¿™æ˜¯ä¸€ä¸ªè‡ªç­¾åè¯ä¹¦ï¼Œç‚¹å‡»continueã€‚æ–°åˆ›å»ºçš„è¯ä¹¦ä¼šè­¦å‘Šè¯´æ­¤è¯ä¹¦å°šæœªç»è¿‡ç¬¬ä¸‰æ–¹éªŒè¯ï¼Œç®¡ä»–å‘¢ï¼(4)å›žåˆ°Keychain Accessçª—å£ï¼Œé€‰æ‹©login keychain,ç„¶åŽé€‰æ‹©category Certificates(5)æ‰¾åˆ°åˆšåˆšåˆ›å»ºçš„è¯ä¹¦ï¼Œç„¶åŽå°†å®ƒæ‹–åˆ°æ¡Œé¢ä¸Šå¯¼å‡ºã€‚è¯¥æ–‡ä»¶åªåŒ…å«å…¬é’¥ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œé’¥åŒ™ä¸²ä¸ä¼šå¯¼å‡ºç§é’¥çš„ï¼Œå°†è¿™ä¸ªå…¬é’¥æ–‡ä»¶æ‹–åˆ°ä½ çš„Xcodeå·¥ç¨‹ä¸­ã€‚å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼æ¥æµ‹è¯•æ”¶åˆ°çš„è¯ä¹¦æ˜¯ç”±ä½ çš„è¯ä¹¦ç­¾åçš„ï¼š 123456789SecTrustRef trust = ...; //è¦éªŒè¯çš„trustå¯¹è±¡NSError *error;NSString *path = [[NSBundle mainBundle] pathForResource:@&quot;MyCert&quot; ofType:@&quot;cer&quot;];NSData *certData =[NSData dataWithContentsOfFile:path options:0 error:&amp;error];SecCertificateRef certificate;certificate = SecCertificateCreateWithData(NULL,(__bridge CFDataRef)certData);NSArray *certs = @[(__bridge id)certificate];SecTrustSetAnchorCertificates(trust,(__bridge CFArrayRef) certs);CFRelease(certificate); å°†è¯ä¹¦ä»Žèµ„æºæ†ç»‘ç›®å½•ä¸­åŠ è½½åˆ°NSDataä¸­ï¼Œè½¬æ¢æˆSecCertificate,ç„¶åŽå°†å®ƒè®¾ç½®ä¸ºè¯¥trustå¯¹è±¡çš„é”šã€‚è¿™æ—¶è¯¥trustå¯¹è±¡åªæŽ¥å—ä¼ ç»™SecTrustSetAnchorCertificatesçš„è¯ä¹¦ï¼Œå¹¶å¿½ç•¥ç³»ç»Ÿçš„é”šã€‚å¦‚æžœäºŒè€…éƒ½æŽ¥å—ï¼Œå¯ä»¥ç”¨SecTrustSetAnchorCertificatesOnlyæ¥é‡æ–°é…ç½®è¯¥truså¯¹è±¡ã€‚ é€šè¿‡è¿™ç§æŠ€æœ¯ï¼Œå°±å¯ä»¥åœ¨connection:willSendRequestForAuthenticationChallenge:æ–¹æ³•ä¸­æ­£ç¡®ç›¸åº”æ‰€æœ‰çš„è¯ä¹¦ï¼Œå¹¶æŽ§åˆ¶è¦æ‹’ç»æˆ–æŽ¥å—å“ªäº›è¯ä¹¦äº†ã€‚]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[ä½¿ç”¨RESTæœåŠ¡]]></title>
      <url>%2F2017%2F03%2F25%2F%E4%BD%BF%E7%94%A8REST%E6%9C%8D%E5%8A%A1%2F</url>
      <content type="text"><![CDATA[1 RESTç®€ä»‹ RESTæœåŠ¡å™¨æ€»æ˜¯æ— çŠ¶æ€çš„ã€‚æ¯æ¬¡APIè°ƒç”¨éƒ½è¢«è§†ä½œæ–°çš„è¯·æ±‚ï¼ŒæœåŠ¡å™¨å¹¶ä¸ä¼šè®°å½•å®¢æˆ·ç«¯ä¸Šä¸‹æ–‡ã€‚å®¢æˆ·ç«¯éœ€è¦ç»´æŠ¤æœåŠ¡å™¨çš„çŠ¶æ€ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºŽç¼“å­˜æœåŠ¡å™¨å“åº”å’Œç™»å½•è®¿é—®ä»¤ç‰Œã€‚RESTå¼æœåŠ¡å™¨çš„èµ„æºå®šä½æ˜¯é€šè¿‡URLå®žçŽ°çš„ã€‚RESTä¸ä½¿ç”¨èµ„æºIDä½œä¸ºå‚æ•°ï¼Œè€Œæ˜¯å°†å®ƒä½œä¸ºURLçš„ä¸€éƒ¨åˆ†ã€‚ä¾‹å¦‚ï¼Œhttp://example.com/resource?id=1234åœ¨RESTæœåŠ¡å™¨ä¸­å°±å˜æˆäº†http://example.com/resources/1234.RESTå¼æœåŠ¡å™¨ä½¿ç”¨è¿™ç§æ–¹å¼è¿›è¡Œèµ„æºå®šä½ï¼Œè€Œä¸”ä¹Ÿä¸ç»´æŠ¤å®¢æˆ·ç«¯çŠ¶æ€ï¼Œè¿™å°±ä½¿å®¢æˆ·ç«¯å¯ä»¥æ ¹æ®URLç¼“å­˜å“åº”ï¼Œå°±åƒæµè§ˆå™¨ç¼“å­˜ç½‘é¡µä¸€æ ·ã€‚2 å‡è±¡çš„WebæœåŠ¡ æ¯ä¸€æ¬¡è°ƒç”¨webæœåŠ¡æ—¶éƒ½è¦åœ¨è¯·æ±‚ä¸­é™„å¸¦è®¿é—®ä»¤ç‰Œã€‚ è½¬åŒ–ä¸º/loginwaiterå’Œ/logintableè¿™ä¸¤ä¸ªæœåŠ¡ç«¯ç‚¹ã€‚ï¼ˆé¡¾å®¢å’ŒæœåŠ¡å‘˜ï¼‰è¿™ä¸¤ä¸ªç«¯ç‚¹éƒ½éœ€è¦è¿”å›žä¸€ä¸ªè®¿é—®ä»¤ç‰Œã€‚iOSå®¢æˆ·ç«¯ä¸­ä½¿ç”¨äº†é”®å€¼ç¼–ç (KVC)æŠ€æœ¯ï¼Œåªéœ€è¦ç”¨éžå¸¸å°‘çš„ä»£ç å°±å¯ä»¥æŠŠJSONé”®æ˜ å°„åˆ°æ¨¡åž‹å¯¹è±¡ã€‚åœ¨è¿™äº›æƒ…å†µä¸‹ï¼Œæœ‰ä¸€äº›iOSåº”ç”¨ä¼šæ˜¾ç¤ºä¸€ä¸ªæµ®åŠ¨çš„å¹³è§†æ˜¾ç¤ºå™¨(é€šå¸¸ç§°ä¹‹ä¸ºHUD)ï¼Œç”¨äºŽé˜²æ­¢ç”¨æˆ·åœ¨è¯„è®ºå‘è¡¨æˆåŠŸä¹‹å‰è¿›è¡Œå…¶ä»–æ“ä½œã€‚ä»Žç”¨æˆ·ä½“éªŒæ¥è¯´ï¼Œè¿™æ˜¯éžå¸¸ç³Ÿç³•çš„ã€‚ 3 é‡è¦æé†’ç¼–å†™åº”ç”¨æ—¶åº”å½“ç‰¢è®°è¿™äº›è¦ç‚¹ï¼š ç»å¯¹ä¸è¦ä½¿ç”¨åŒæ­¥çš„ç½‘ç»œè¯·æ±‚(ä¸€æ—¦å‘é€åŒæ­¥è¯·æ±‚ï¼Œç›´è‡³æœåŠ¡å™¨è¿”å›žæ•°æ®å®Œæˆï¼Œæ‰å¯ä»¥è¿›è¡Œä¸‹ä¸€æ­¥æ“ä½œ)ã€‚å³ä½¿æ˜¯åœ¨åŽå°çº¿ç¨‹ä¸­ï¼ŒåŒæ­¥è°ƒç”¨ä¹Ÿä¸ä¼šæŠ¥å‘Šè¿›åº¦ã€‚å¦å¤–ä¸€ä¸ªåŽŸå› æ˜¯ï¼Œå¦‚æžœæƒ³å–æ¶ˆåŽå°çº¿ç¨‹çš„åŒæ­¥è¯·æ±‚ï¼Œåªèƒ½ç»“æŸè¿™ä¸ªçº¿ç¨‹ã€‚å¦å¤–ï¼Œä¹Ÿä¸èƒ½æŽ§åˆ¶åº”ç”¨ä¸­çš„ç½‘ç»œè¯·æ±‚æ•°é‡ï¼Œè€Œè¿™å¯¹äºŽåº”ç”¨çš„æ€§èƒ½æ¥è¯´æ˜¯éžå¸¸å…³é”®çš„ã€‚ å°½é‡ä¸è¦ç›´æŽ¥ä½¿ç”¨NSThreadæˆ–è€…åŸºäºŽGCDçš„çº¿ç¨‹è¿›è¡Œç½‘ç»œè¯·æ±‚ã€‚ ä½¿ç”¨åŸºäºŽNSOperationQueueçš„çº¿ç¨‹ï¼Œä½¿ç”¨NSOperationQueueå¯ä»¥éžå¸¸å¥½åœ°æŽ§åˆ¶é˜Ÿåˆ—é•¿åº¦å’Œå¹¶å‘çš„ç½‘ç»œè¯·æ±‚æ•°é‡ã€‚åŸºäºŽGCDçš„çº¿ç¨‹åœ¨å—åˆ†æ´¾ä¹‹åŽï¼Œå°±æ— æ³•å–æ¶ˆäº†ã€‚ 4 RESTfulEngineæž¶æž„(iHotelAppç¤ºä¾‹ä»£ç ) 4.1 NSURLConnectitonä¸Žç¬¬ä¸‰æ–¹æ¡†æž¶MKNetworkKit å°è£…äº†å¾ˆå¤šå¸¸ç”¨çš„åŠŸèƒ½ï¼Œæ¯”å¦‚åŸºæœ¬è®¤è¯/æ‘˜è¦è®¤è¯ï¼Œè¡¨å•å‘å¸ƒã€ä¸Šä¼ /ä¸‹è½½æ–‡ä»¶ã€‚å¦å¤–ä¸€ä¸ªé‡è¦åŠŸèƒ½å°±æ˜¯å®ƒå°è£…äº†NSOperationQueue,å¯ä»¥ä½¿ç”¨é˜Ÿåˆ—æ¥ç®¡ç†ç½‘ç»œè¯·æ±‚ã€‚ å–æ¶ˆè¯·æ±‚ ç”¨æˆ·ç¦»å¼€å½“å‰è§†å›¾æ—¶ï¼Œåº”è¯¥ç”±å½“å‰è§†å›¾æŽ§åˆ¶å™¨è´Ÿè´£å–æ¶ˆå·²ç»åˆ›å»ºçš„ç½‘ç»œè¯·æ±‚ã€‚ä¸ºäº†ç¡®ä¿è¿™ä¸€ç‚¹ï¼ŒRESTfulEngineç±»ä¸­çš„æ‰€æœ‰æ–¹æ³•éƒ½åº”è¯¥æŠŠæ“ä½œå¯¹è±¡è¿”å›žç»™è§†å›¾æŽ§åˆ¶å™¨ã€‚é€šè¿‡é‡Šæ”¾å¸¦å®½ï¼ŒåŠ å¿«å…¶ä»–è¯·æ±‚çš„é€Ÿåº¦ã€‚ 6.è¯·æ±‚ç›¸åº” å¯¹JSONæ•°æ®è¿›è¡Œé”®å€¼ç¼–ç  setValuesForKeysWithDictionary: ç”¨äºŽåŒ¹é…ç±»ä¸­ä¸Žå­—å…¸çš„é”®åŒåçš„å±žæ€§ï¼Œå¹¶æŠŠå­—å…¸ä¸­çš„å€¼èµ‹å€¼ç»™è¯¥å±žæ€§ã€‚ setValue:forUndefinedKey:å¤„ç†ä¸å…¼å®¹çš„é”®å€¼ç¼–ç ã€‚è¿™ä¸ªæ–¹æ³•çš„é»˜è®¤å®žçŽ°ä¼šå¼•å‘NSUndefinedKeyExceptionå¼‚å¸¸ã€‚ æˆ‘ä»¬å¯ä»¥åœ¨æ´¾ç”Ÿå†…ä¸­è¦†ç›–è¿™ä¸ªæ–¹æ³•ï¼Œå¹¶ä¸”è®¾ç½®ç›¸åº”çš„å€¼123456789-(void)setValue:(id)value forUndefinedKey:(NSString *)key&#123;if([key isEqualToString:@&quot;ID&quot;])&#123; self.itemID = value;&#125;if([key isEqualToString:@&quot;description&quot;])&#123; self.itemDescription = value;&#125;....&#125; åˆ—è¡¨ç•Œé¢çš„JSONå¯¹è±¡ä¸Žè¯¦ç»†ç•Œé¢çš„JSONå¯¹è±¡ ä¸€ä¸ªJSONå¯¹è±¡å°±æ˜¯ä»ŽæœåŠ¡å™¨ä¼ é€åˆ°å®¢æˆ·ç«¯çš„è´Ÿè½½ã€‚ä¸ºäº†æå‡æ€§èƒ½å¹¶ä¸”å‡å°‘è´Ÿè½½ï¼ŒæœåŠ¡å™¨å¼€å‘è€…é€šå¸¸ä¼šä¸ºåŒä¸€ä¸ªå¯¹è±¡ä½¿ç”¨ä¸¤ç§ä¸åŒçš„è´Ÿè½½ã€‚ä¸€ç§æ˜¯å¤§è´Ÿè½½æ ¼å¼ï¼ŒåŒ…å«äº†å¯¹è±¡çš„å…¨éƒ¨ä¿¡æ¯ã€‚å¦ä¸€ç§æ˜¯å°è´Ÿè½½æ ¼å¼ï¼ŒåªåŒ…å«äº†ç”¨äºŽåœ¨åˆ—è¡¨ä¸­æ˜¾ç¤ºçš„å¿…é¡»ä¿¡æ¯ã€‚è¿™ç§æŠ€æœ¯å¯ä»¥æ˜Žæ˜¾çš„æé«˜iOSåº”ç”¨çš„æ€§èƒ½ã€‚ä»Žå®žçŽ°çš„è§’åº¦æ¥è¯´ï¼ŒiOSåº”ç”¨ä¸éœ€è¦åšä»»ä½•æ”¹åŠ¨å°±å¯ä»¥åŒæ—¶æ˜ å°„è¿™ä¸¤ç§JSONã€‚å¦‚æžœè¿”å›žå®Œå…¨çš„JSONï¼Œå¯¹è±¡å°±ä¼šè¢«å®Œå…¨å¡«å……ï¼›å¦‚æžœè¿”å›žä¸å®Œå…¨çš„JSONï¼Œå¯¹è±¡å°±ä¼šè¢«éƒ¨åˆ†å¡«å……ã€‚ åµŒå¥—JSONå¯¹è±¡ ä»¥é€’å½’çš„æ–¹å¼è¿›è¡Œæ˜ å°„ï¼šå¯ä»¥é€šè¿‡setValue:forKey:æ–¹æ³•è¿›è¡Œå¤„ç†12345678910-(void)setValue:(id)value forKey:(NSString *)key&#123;if([key isEqualToString:@&quot;reviews&quot;])&#123; for(NSMutableDictionary *reviewArrayDict in value)&#123; Review *thisReview = [[Review alloc] initWithDictionary:reviewArrayDict]; [self.reviews addObject:thisReview]; &#125;&#125;else&#123; [super setValue:value forKey:key];&#125;&#125; é”™è¯¯å¤„ç† ï¼ˆåœ¨iOSå®¢æˆ·ç«¯ä¼˜é›…çš„å¤„ç†æœåŠ¡å™¨ç«¯é”™è¯¯ï¼‰ åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œå¯ä»¥ä½¿ç”¨ä¸€ä¸ªç‰¹æ®Šçš„é”®æ¥ä¼ é€’é”™è¯¯ä¿¡æ¯ï¼Œæ¯”å¦‚statusã€‚åœ¨å¦å¤–ä¸€äº›æƒ…å†µä¸‹ï¼ŒæœåŠ¡å™¨ä¼šä½¿ç”¨ä¸€ä¸ªåä¸ºerrorçš„é”®æ¥ä¼ é€’æ›´å¤šçš„çœŸå®žé”™è¯¯ä¿¡æ¯ã€‚å¦‚æžœAPIè°ƒç”¨æˆåŠŸåˆ™æ²¡æœ‰è¿™ä¸ªerroré”®ã€‚ å¯ä»¥ç”¨MKNetworkOperationå­ç±»å¤„ç†è‡ªå®šä¹‰APIé”™è¯¯ï¼Œæ­¥éª¤å¦‚ä¸‹ï¼š(1)åˆ›å»ºä¸€ä¸ªåä¸ºRESTfulOperationçš„MKNetworkOperationå­ç±»ã€‚è¿™ä¸ªå­ç±»æœ‰ä¸€ä¸ªå±žæ€§ç”¨äºŽä¿å­˜æœåŠ¡å™¨æŠ›å‡ºçš„ä¸šåŠ¡é€»è¾‘é”™è¯¯ã€‚(2)åœ¨å­ç±»ä¸­åˆ›å»ºä¸€ä¸ªåä¸ºrestErrorçš„NSError*å±žæ€§(3)è¦†ç›–ä¸¤ä¸ªç”¨äºŽå¤„ç†é”™è¯¯æƒ…å†µçš„æ–¹æ³•ã€‚é¦–å…ˆè¦†ç›–operationFailedWithError:æ–¹æ³•12345678910111213141516171819-(void) operationFailedWithError:(NSError *)theError&#123;NSMutableDictionary *errorDict = [[self responseJSON] objectForKey:@&quot;error&quot;];if(errorDict == nil)&#123;self.restError = [[RESTError alloc] initWithDomain:kRequestErrorDomain code:[theError code]userInfo:[theError userInfo]];&#125;else&#123;self.restError = [[RESTError alloc] initWithDomain:kBusinessErrorDomain code:[[errorDict objectForKey:@&quot;code&quot;] intValue]userInfo:errorDict]; &#125;[super operationFailedWithError:theError];&#125; å¹¶ä¸æ˜¯æ¯ä¸€ä¸ªä¸šåŠ¡é€»è¾‘é”™è¯¯éƒ½èƒ½è¢«æ˜ å°„ä¸ºç­‰ä»·çš„HTTPé”™è¯¯ä»£ç ã€‚ä¸ºäº†èƒ½å¤Ÿå¤„ç†è¿™ä¸¤ç§æƒ…å†µï¼Œè¿˜éœ€è¦è¦†ç›–operationSucceeded:æ–¹æ³•ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š123456789101112131415161718- (void)operationSucceeded&#123; // even when request completes without a HTTP Status code, it might be a benign errorNSMutableDictionary *errorDict = [[self responseJSON] objectForKey:@&quot;error&quot;];if(errorDict)&#123;self.restError = [[RESTError alloc] initWithDomain:kBusinessErrorDomain code:[[errorDict objectForKey:@&quot;code&quot;] intValue]userInfo:errorDict];[super operationFailedWithError:self.restError];&#125;else &#123; [super operationSucceeded];&#125; &#125; è¿™äº›æ–¹æ³•éƒ½ä½¿ç”¨å­ç±»è¯·æ±‚å¯¹è±¡çš„resetErrorå±žæ€§ä¿å­˜ä¸šåŠ¡é€»è¾‘é”™è¯¯ã€‚è¿™æ ·ä¸€æ¥ï¼Œå®¢æˆ·ç«¯å°±æ—¢å¯ä»¥å¤„ç†HTTPé”™è¯¯(ä½¿ç”¨RESTfulOperationçˆ¶ç±»çš„é”™è¯¯å¯¹è±¡)åˆèƒ½å¤„ç†ä¸šåŠ¡å±‚é”™è¯¯(ä½¿ç”¨å±€éƒ¨å±žæ€§restError) ç”±äºŽè¿™äº›æ˜¯åœ¨å­ç±»ä¸­å®Œæˆçš„ï¼Œæ‰€ä»¥RESTfulEngineç±»ä¸éœ€è¦åšä»»ä½•é¢å¤–çš„é”™è¯¯å¤„ç†ã€‚ä¸ç®¡æ˜¯HTTPé”™è¯¯è¿˜æ˜¯ä¸šåŠ¡é€»è¾‘é”™è¯¯ï¼ŒRESTfulEngineå¾—åˆ°çš„éƒ½æ˜¯ä¸€ä¸ªå°è£…å¥½çš„NSErrorå¯¹è±¡ã€‚åœ¨è§†å›¾æŽ§åˆ¶å™¨çš„å®žçŽ°ä¸­åªéœ€è¦æ£€æŸ¥erræ˜¯å¦ä¸ºnilå°±å¯ä»¥äº†ã€‚ æœ¬åœ°åŒ– åœ¨æŸäº›å®žçŽ°ä¸­éœ€è¦ç”¨å¤šç§è¯­è¨€å¯¹é”™è¯¯ä¿¡æ¯è¿›è¡Œæœ¬åœ°åŒ–ã€‚å¯¹äºŽæœåŠ¡å™¨ç›¸å…³çš„é”™è¯¯ï¼Œæ˜¾ç¤ºæœ¬åœ°åŒ–é”™è¯¯çš„æœ€å¥½åŠžæ³•å°±æ˜¯åœ¨å‘ç”Ÿé”™è¯¯æ—¶ï¼Œè¿”å›žåŒæ–¹ä¸€è‡´åŒæ„çš„é”™è¯¯ä»£ç ã€‚iOSå®¢æˆ·ç«¯æ ¹æ®é”™è¯¯ä»£ç æŸ¥æ‰¾æœ¬åœ°åŒ–å­—ç¬¦ä¸²æ–‡ä»¶ï¼Œç„¶åŽæ˜¾ç¤ºç›¸åº”çš„é”™è¯¯ä¿¡æ¯ã€‚ RESTError.m1234567891011121314151617+ (void) initialize&#123;//ä¸åŒçš„åœ°æ–¹åŠ è½½ä¸åŒçš„æ–‡ä»¶ã€‚ Errors_en_US.plist Errors_zh_CN.plistNSString *fileName = [NSString stringWithFormat:@&quot;Errors_%@&quot;, [[NSLocale currentLocale] localeIdentifier]];NSString *filePath = [[NSBundle mainBundle] pathForResource:fileName ofType:@&quot;plist&quot;];if(filePath != nil)&#123;errorCodes = [[NSMutableDictionary alloc] initWithContentsOfFile:filePath]; &#125;else&#123; // fall back to english for unsupported languagesNSString *filePath = [[NSBundle mainBundle] pathForResource:@&quot;Errors_en_US&quot; ofType:@&quot;plist&quot;];errorCodes = [[NSMutableDictionary alloc] initWithContentsOfFile:filePath]; &#125;&#125; è¦†ç›–NSErrorçš„localizedDescriptionå’ŒlocalizedRecoverySuggestionæ–¹æ³•ï¼Œä»¥æä¾›æ˜“æ‡‚çš„å¤„ç†å¤„ç†æ–¹æ³•ã€‚å¦‚æžœWebæœåŠ¡åœ¨è¿”å›žé”™è¯¯ä»£ç çš„åŒæ—¶ä¹Ÿè¿”å›žäº†é”™è¯¯ä¿¡æ¯ï¼Œä½¿ç”¨è¿™ç§æ–¹å¼å¤„ç†å’Œæ˜¾ç¤ºé”™è¯¯ä¿¡æ¯æ¯”ä½¿ç”¨userInfoå­—å…¸æ˜¾ç¤ºæœåŠ¡å™¨é”™è¯¯ä¿¡æ¯æ›´å¥½ã€‚ åœ¨iOSä¸­æå‡æ€§èƒ½çš„å°æŠ€å·§ ä¸ŽWebåº”ç”¨ä¸åŒï¼ŒiPhoneåº”ç”¨çš„å¸¦å®½éžå¸¸æœ‰é™ã€‚ å¤§éƒ¨åˆ†æœåŠ¡å™¨éƒ½ä¸å…è®¸åŒä¸€ä¸ªIPå‡ºçŽ°6ä¸ªä»¥ä¸Šçš„å¹¶å‘HTTPè¯·æ±‚ï¼Ÿ ç¼“å­˜ æŒ‰éœ€ç¼“å­˜ï¼šæŠŠä»ŽæœåŠ¡å™¨èŽ·å–çš„å†…å®¹ä»¥æŸç§æ ¼å¼å­˜æ”¾åœ¨æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿä¹‹åŽå¯¹äºŽæ¯æ¬¡è¯·æ±‚ï¼Œæ£€æŸ¥ç¼“å­˜ä¸­æ˜¯å¦å­˜åœ¨è¿™å—æ•°æ®ï¼Œåªæœ‰å½“æ•°æ®ä¸å­˜åœ¨(æˆ–è€…è¿‡æœŸ)çš„æƒ…å†µä¸‹æ‰ä»ŽæœåŠ¡å™¨èŽ·å–ã€‚è€Œé¢„ç¼“å­˜æ˜¯æŠŠå†…å®¹æ”¾åœ¨æœ¬åœ°ä»¥å¤‡å°†æ¥è®¿é—®ã€‚ å®žçŽ°é¢„ç¼“å­˜å¯èƒ½éœ€è¦ä¸€ä¸ªåŽå°çº¿ç¨‹è®¿é—®æ•°æ®å¹¶ä»¥æœ‰æ„ä¹‰çš„æ ¼å¼ä¿å­˜ï¼Œä»¥ä¾¿æœ¬åœ°ç¼“å­˜æ— éœ€é‡æ–°è¿žæŽ¥æœåŠ¡å™¨å³å¯è¢«ç¼–è¾‘ã€‚ç¼–è¾‘å¯èƒ½æ˜¯â€æ ‡è®°è®°å½•ä¸ºå·²è¯»â€æˆ–â€åŠ å…¥æ”¶è—â€ã€‚è¿™é‡Œæœ‰æ„ä¹‰çš„æ ¼å¼æ˜¯æŒ‡å¯ä»¥ç”¨å¤šç§æ ¼å¼ä¿å­˜å†…å®¹ï¼Œä¸ç”¨å’ŒæœåŠ¡å™¨é€šä¿¡å°±å¯ä»¥åœ¨æœ¬åœ°ä½œå‡ºä¸Šé¢æåˆ°çš„æ›´æ”¹ï¼Œå¹¶ä¸”ä¸€æ—¦å†æ¬¡è¿žä¸Šç½‘å°±å¯ä»¥æŠŠå˜æ›´å‘é€å›žæœåŠ¡å™¨ã€‚Core Dataæ˜¯å®žçŽ°è¿™ç§å‚¨å­˜çš„ä¸€ç§æ–¹å¼ã€‚ æŒ‰éœ€ç¼“å­˜å¯ä»¥é€šè¿‡åœ¨æ‰“å¼€ä¸€ä¸ªè§†å›¾æŽ§åˆ¶å™¨æ—¶æŒ‰éœ€åœ°ç¼“å­˜æ•°æ®æ¨¡åž‹(åˆ›å»ºä¸€ä¸ªæ•°æ®æ¨¡åž‹ç¼“å­˜)æ¥å®žçŽ°ã€‚ä¹Ÿå¯ä»¥åœ¨ä¸€ä¸ªURLè¯·æ±‚è¿”å›žæˆåŠŸåº”ç­”æ—¶å®žçŽ°æŒ‰éœ€ç¼“å­˜ï¼ˆåˆ›å»ºä¸€ä¸ªURLç¼“å­˜ï¼‰ã€‚ é€‰æ‹©ä½¿ç”¨æŒ‰éœ€ç¼“å­˜è¿˜æ˜¯é¢„ç¼“å­˜çš„ä¸€ä¸ªç®€ä¾¿æ–¹æ³•æ˜¯åˆ¤æ–­æ˜¯å¦éœ€è¦åœ¨ä¸‹è½½æ•°æ®ä¹‹åŽå¤„ç†æ•°æ®ã€‚åŽæœŸå¤„ç†æ•°æ®å¯èƒ½æ˜¯ä»¥ç”¨æˆ·äº§ç”Ÿç¼–è¾‘çš„å½¢å¼ï¼Œä¹Ÿå¯èƒ½æ˜¯æ›´æ–°ä¸‹è½½çš„æ•°æ®ï¼Œæ¯”å¦‚é‡å†™HTMLé¡µé¢é‡Œçš„å›¾ç‰‡é“¾æŽ¥ä»¥æŒ‡å‘æœ¬åœ°çš„ç¼“å­˜å›¾ç‰‡ã€‚å¦‚æžœä¸€ä¸ªåº”ç”¨éœ€è¦åšä¸Šé¢æåˆ°çš„ä»»ä½•åŽæœŸå¤„ç†ï¼Œå°±å¿…é¡»å®žçŽ°é¢„ç¼“å­˜ã€‚ 13.1 å­˜å‚¨ç¼“å­˜å› ä¸ºç¼“å­˜æ•°æ®ä¸æ˜¯ç”¨æˆ·äº§ç”Ÿçš„ï¼Œæ‰€ä»¥å®ƒåº”è¯¥è¢«ä¿å­˜åœ¨NSCacheDirectory,è€Œä¸æ˜¯NSDocumentsDirectory.ä¸ºç¼“å­˜æ•°æ®åˆ›å»ºç‹¬ç«‹ç›®å½•æ˜¯ä¸€é¡¹ä¸é”™çš„å®žè·µã€‚å¯ä»¥è¿™æ ·åˆ›å»ºï¼š123NSArray *path = NSSearchPathForDirectoriesInDomains(NSCachesDirectory,NSUserDomainMask,YES);NSString* cachesDirectory = [path objectAtIndex:0];cachesDirectory = [cachesDirectory stringByAppendingPathComponent:@&quot;MyAppCache&quot;]; æŠŠç¼“å­˜å­˜å‚¨åœ¨ç¼“å­˜æ–‡ä»¶å¤¹ä¸‹çš„åŽŸå› æ˜¯iCloud(å’ŒiTunes)çš„å¤‡ä»½ä¸åŒ…æ‹¬æ­¤ç›®å½•ã€‚ é¢„ç¼“å­˜æ˜¯é«˜çº§æ•°æ®åº“(æ¯”å¦‚åŽŸå§‹çš„SQLite)æˆ–è€…å¯¹è±¡åºåˆ—åŒ–æ¡†æž¶(æ¯”å¦‚Core Data)å®žçŽ°çš„ã€‚ æ•°æ®æ¨¡åž‹ç¼“å­˜å®žçŽ°ç»†èŠ‚ï¼š å¯ä»¥ç”¨NSKeyedArchiverç±»æ¥å®žçŽ°æ•°æ®æ¨¡åž‹çš„ç¼“å­˜ã€‚ä¸ºäº†æŠŠæ¨¡åž‹å¯¹è±¡ç”¨NSKeyedArchiverå½’æ¡£ã€‚æ¨¡åž‹ç±»éœ€è¦éµå®ˆNSCodingåè®®ã€‚ NSCodingåè®®æ–¹æ³•ï¼š12- (void)encodeWithCoder:(NSCoder *)aCoder;- (nullable instancetype)initWithCoder:(NSCoder *)aDecoder; å½“æ¨¡åž‹éµå®ˆäº†NSCodingåè®®ï¼Œå½’æ¡£å¯¹è±¡å°±å¾ˆç®€å•ï¼Œåªè¦è°ƒç”¨ä¸‹åˆ—æ–¹æ³•ï¼š12//åˆ¶å®šçš„è·¯å¾„ä¸‹åˆ›å»ºå½’æ¡£æ–‡ä»¶[NSKeyedArchiver archiveRootObject: toFile:]; ä½¿ç”¨NSKeyedUnarchiverç”¨äºŽä»Žæ–‡ä»¶åå½’æ¡£æ¨¡åž‹ã€‚1[NSKeyedUnarchiver unarchiveObjectWithFile:]; ä½¿ç”¨ä»»ä½•NSKeyedArchiver/NSkeyedUnarichiverçš„å‰ææ˜¯æ¨¡åž‹å®žçŽ°äº†NSCodingåè®®ã€‚ é¢„ç¼“å­˜ï¼š é¢„ç¼“å­˜éœ€è¦ç”¨åˆ°æ›´ç»“æž„åŒ–çš„æ•°æ®ç»“æž„ã€‚Core Dataï¼šCore Dataæ›´åƒæ˜¯ä¸€ä¸ªå¯¹è±¡åºåˆ—åŒ–æ¡†æž¶ï¼Œè€Œä¸ä»…ä»…æ˜¯ä¸€ä¸ªæ•°æ®åº“APIã€‚è¦åœ¨Core dataä¸­ä¿å­˜æ•°æ®ï¼Œé¦–å…ˆéœ€è¦åˆ›å»ºä¸€ä¸ªCore Dataæ¨¡åž‹æ–‡ä»¶ï¼Œå¹¶åˆ›å»ºå®žä½“(Entity)å’Œå…³ç³»(Relationship); ç„¶åŽå†™å¥½ä¿å­˜å’ŒèŽ·å–æ•°æ®çš„æ–¹æ³•ã€‚åº”ç”¨å¯ä»¥å€ŸåŠ©Core Dataå®žçŽ°çœŸæ­£çš„ç¦»çº¿è®¿é—®åŠŸèƒ½ã€‚å°±åƒè‹¹æžœå†…ç½®çš„é‚®ä»¶å’Œæ—¥åŽ†åº”ç”¨ä¸€æ ·ã€‚å®žçŽ°é¢„ç¼“å­˜æ—¶å¿…é¡»å®šæœŸåˆ é™¤ä¸å†éœ€è¦çš„(è¿‡æ—¶çš„)æ•°æ®ã€‚ðŸ‘‰åŒæ­¥æœ¬åœ°å˜æ›´æ˜¯é€šè¿‡è¿½è¸ªå˜æ›´é›†å¹¶å‘é€ç»™æœåŠ¡å™¨å®žçŽ°çš„ã€‚ ç”¨Core Dataå®žçŽ°æŒ‰éœ€ç¼“å­˜ åŽŸå§‹SQLiteå¯ä»¥é€šè¿‡é“¾æŽ¥libsqlite3çš„åº“æ¥æŠŠSQLiteåµŒå…¥åº”ç”¨ï¼Œä½†æ˜¯è¿™ä¹ˆåšæœ‰å¾ˆå¤§çš„ç¼ºé™·ã€‚æ‰€æœ‰çš„sqlite3åº“å’Œå¯¹è±¡å…³ç³»æ˜ å°„(ORM)æœºåˆ¶æ€»æ˜¯æ¯”Core Dataæ…¢ã€‚æ­¤å¤–ï¼Œå°½ç®¡sqlite3æœ¬èº«æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œä½†æ˜¯iOSçš„äºŒè¿›åˆ¶åŒ…åˆ™ä¸æ˜¯ã€‚æ‰€ä»¥é™¤éžæ˜¯å®šåˆ¶ç¼–è¯‘çš„sqlite3åº“(ç”¨çº¿ç¨‹å®‰å…¨çš„ç¼–è¯‘å‚æ•°ç¼–è¯‘)ï¼Œå¦åˆ™å¼€å‘è€…å°±æœ‰è´£ä»»ç¡®ä¿ä»Žsqlite3è¯»å–æ•°æ®æˆ–è€…å¾€sqlite3å†™å…¥æ•°æ®æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚Core Dataæœ‰è¿™ä¹ˆå¤šç‰¹æ€§è€Œä¸”å†…ç½®çº¿ç¨‹å®‰å…¨ï¼Œå»ºè®®åœ¨iOSä¸­å°½é‡é¿å…ä½¿ç”¨sqliteã€‚åº”è¯¥ç”¨é‚£ç§ç¼“å­˜æŠ€æœ¯ åœ¨ä¼—å¤šå¯ä»¥æœ¬åœ°ç¼“å­˜æ•°æ®çš„æŠ€æœ¯å½“ä¸­ï¼Œæœ‰ä¸‰ç§å¯ä»¥è„±é¢–è€Œå‡ºï¼šURLç¼“å­˜ã€æ•°æ®æ¨¡åž‹ç¼“å­˜(åˆ©ç”¨NSKeyedArchiver)å’ŒCore Dataã€‚ å‡è®¾ä½ æ­£åœ¨å¼€å‘ä¸€ä¸ªåº”ç”¨ï¼Œéœ€è¦ç¼“å­˜æ•°æ®ä»¥æ”¹å–„åº”ç”¨è¡¨çŽ°å‡ºæ¥çš„æ€§èƒ½ï¼Œä½ åº”è¯¥å®žçŽ°æŒ‰éœ€ç¼“å­˜(ä½¿ç”¨æ•°æ®æ¨¡åž‹ç¼“å­˜æˆ–URLç¼“å­˜)ã€‚å¦ä¸€æ–¹é¢ï¼Œå¦‚æžœéœ€è¦æ•°æ®èƒ½å¤Ÿç¦»çº¿ç¼“å­˜ï¼Œè€Œä¸”å…·æœ‰åˆç†çš„å­˜å‚¨æ–¹å¼ä»¥ä¾¿ç¦»çº¿ç¼–è¾‘ï¼Œé‚£ä¹ˆå°±ç”¨é«˜çº§åºåˆ—åŒ–æŠ€æœ¯(å¦‚Core Data)æ•°æ®æ¨¡åž‹ç¼“å­˜1234567891011121314151617181920212223242526272829- (void)encodeWithCoder:(NSCoder *)encoder &#123;[encoder encodeObject:self.itemId forKey:@&quot;itemId&quot;];[encoder encodeObject:self.image forKey:@&quot;image&quot;];[encoder encodeObject:self.name forKey:@&quot;name&quot;];[encoder encodeObject:self.spicyLevel forKey:@&quot;spicyLevel&quot;];[encoder encodeObject:self.rating forKey:@&quot;rating&quot;];[encoder encodeObject:self.itemDescription forKey:@&quot;itemDescription&quot;];[encoder encodeObject:self.waitingTime forKey:@&quot;waitingTime&quot;];[encoder encodeObject:self.reviewCount forKey:@&quot;reviewCount&quot;];[encoder encodeObject:self.reviews forKey:@&quot;reviews&quot;];&#125;- (id)initWithCoder:(NSCoder *)decoder &#123;self = [super init];if (self) &#123;self.itemId = [decoder decodeObjectForKey:@&quot;itemId&quot;];self.image = [decoder decodeObjectForKey:@&quot;image&quot;];self.name = [decoder decodeObjectForKey:@&quot;name&quot;];self.spicyLevel = [decoder decodeObjectForKey:@&quot;spicyLevel&quot;];self.rating = [decoder decodeObjectForKey:@&quot;rating&quot;];self.itemDescription = [decoder decodeObjectForKey:@&quot;itemDescription&quot;];self.waitingTime = [decoder decodeObjectForKey:@&quot;waitingTime&quot;];self.reviewCount = [decoder decodeObjectForKey:@&quot;reviewCount&quot;];self.reviews = [decoder decodeObjectForKey:@&quot;reviews&quot;];&#125;return self;&#125; åœ¨viewWillApearï¼šæ–¹æ³•ä¸­å®žçŽ°å®žé™…çš„ç¼“å­˜é€»è¾‘ è§†å›¾æŽ§åˆ¶å™¨çš„viewWillApear:æ–¹æ³•ä¸­ç¼“å­˜æ¢å¤æ•°æ®æ¨¡åž‹å¯¹è±¡çš„ä»£ç ç‰‡æ®µ12345678910111213141516NSArray *path = NSSearchPathForDirectoriesInDomians(NSCachesDirectory,NSUserDomianMask,YES);NSString *cachesDirectory = [path objectAtIndex:0];//æ‹¼æŽ¥è·¯å¾„NSString *archivePath = [cachesDirectory stringByAppendingPathComponent:@&quot;AppCache/MenuItems.archive&quot;];//å°è¯•åå½’æ¡£NSMutableArray *cachedItems = [NSKeyedUnarchiver unarchiveObjectWithFile:archivePath];if(cachedItems == nil) self.menuItems = [AppDelegate.engine localMenuItems];else self.menuItems = cachedItems;//åœ¨è¿™é‡Œå†³å®šè¦ä¸è¦æ›´æ–°NSTimeInterval stalenessLevel = [[[[NSFileManager defaultManager] attributesOfItemAtPath:archivePath error:nil] fileModificationDate] timeIntervalSinceNow];if(stalenessLevel &gt; THRESHOLD) self.menuItems = [AppDelegate.engine localMenuItems];[self updateUI]; è§†å›¾æŽ§åˆ¶å™¨çš„viewWillDisappearï¼šæ–¹æ³•ä¸­ç¼“å­˜æ•°æ®æ¨¡åž‹çš„ä»£ç ç‰‡æ®µ1234NSArray *paths = NSSearchPathForDirectoriesInDomains(NSChchesDirectory,NSUserDomainMask,YES);NSString *cachesDirectory = [paths objectAtIndex:0];NSString *archivePath = [cachesDirectory stringByAppendingPathComponent:@&quot;AppCache/MenuItems.archive&quot;];[NSKeyedArchiver archiveRootObject:self.menuItems toFile:archivePath]; é‡æž„å½“æœ‰å¤šä¸ªè§†å›¾æŽ§åˆ¶å™¨çš„æ—¶å€™ï¼Œè¿™æ ·çš„ä»£ç å°±æ˜¾å¾—å†—æ‚ã€‚å¯ä»¥é€šè¿‡æŠ½è±¡å…¬å…±ç±»ä½œä¸ºå¤„ç†ç¼“å­˜çš„æ ¸å¿ƒä»£ç ã€‚ è§†å›¾æŽ§åˆ¶å™¨viewWillApear:æ–¹æ³•ä¸­ç”¨AppCacheç±»ç¼“å­˜æ•°æ®æ¨¡åž‹çš„é‡æž„ä»£ç ç‰‡æ®µï¼š1234567891011121314-(void)viewWillApear:(BOOL)animated&#123;self.menItems = [AppCache getCachedMenuItems];[self.tableView reloadData];//å¦‚æžœè¶…è¿‡äº†ç¼“å­˜æœŸé™æˆ–è€…æ ¹æœ¬å°±æ²¡æœ‰ç¼“å­˜if([AppCache isMenuItemsStale] || self.menuItems)&#123; //å‘é€ç½‘ç»œè¯·æ±‚&#125;[super viewWillAppear:animated];&#125;-(void)viewWillDisappear:(BOOL)animated&#123;[AppCache cacheMenuItems:self.menuItems];[super viewWillDisappear:animated];&#125; å¼€å‘è€…å¯ä»¥é€šè¿‡ä¸ºæ¯ä¸ªç”¨æˆ·åˆ›å»ºå­ç›®å½•å³å¯è½»æ¾å¢žå¼ºç¼“å­˜æ•°æ®çš„å®‰å…¨æ€§ã€‚æ›´æ”¹ç¼“å­˜ç›®å½•ä¸ºè¿”å›žå½“å‰ç™»å½•ç”¨æˆ·çš„å­ç›®å½•ã€‚è¿™æ ·ï¼Œä¸€ä¸ªç”¨æˆ·ç¼“å­˜çš„æ•°æ®å°±ä¸ä¼šè¢«éšåŽç™»å½•çš„ç”¨æˆ·çœ‹è§äº†ã€‚ ç¼“å­˜ç‰ˆæœ¬æŽ§åˆ¶ å½“ä½ æ›´æ–°åº”ç”¨æ—¶ï¼Œæ¨¡åž‹ç±»å¯èƒ½ä¼šå‘ç”Ÿå˜åŒ–ï¼Œè¿™æ„å‘³ç€ä¹‹å‰å½’æ¡£çš„ä»»ä½•æ•°æ®éƒ½å°†ä¸èƒ½æ¢å¤åˆ°æ–°çš„æ¨¡åž‹ä¸Šã€‚å¦‚ä½•åœ¨ç‰ˆæœ¬å‡çº§æ—¶åˆ é™¤ç¼“å­˜ç›®å½•ï¼Ÿï¼šä½¿ç¼“å­˜å¤±æ•ˆAppCache ä¸­ç¼“å­˜ç‰ˆæœ¬çš„åˆå§‹åŒ–æ–¹æ³•(AppCache.m)123456789101112131415+(void)initialize&#123; //èŽ·å¾—æ‹¼æŽ¥çš„è·¯å¾„ NSString *cacheDirectory = [AppCache cacheDirectory]; if(![[NSFileManager defaultManager] fileExistsAtPath:cacheDirectory])&#123; [[NSFileManager defaultManager] createDirectoryAtPath:cacheDirectory withIntermediateDirectories:YES attributes:nil error:nil]; &#125; double lastSavedCacheVersion = [[NSUserDefaults standardUserDefaults] doubleForKey:@&quot;CACHE_VERSION&quot;]; double currentAppVersion = [[AppCache appVersion] doubleValue];if(lastSavedCacheVersion == 0.0f || lastSavedCacheVersion &lt; lastSavedCacheVersion)&#123; [AppCache clearCache]; //æŠŠç‰ˆæœ¬å·å­˜å‚¨åœ¨è®¾å¤‡ä¸­ ... &#125; &#125; ä¹Ÿå¯ä»¥ç”¨ä¸‹é¢è¿™æ®µä»£ç ä»Žåº”ç”¨çš„Info.plistä¸­è¯»å–ç‰ˆæœ¬å·ï¼š12345+(NSString *)appVersion&#123;CFStringRef versStr = CFBundleGetValueForInfoDictionaryKey(CFBundleGetMainBundle(), kCFBundleVersionKey);NSString *version = [NSString stringWithUTF8String:CFStringGetCStringPtr(versStr, kCFStringEncodingMacRoman)];return version;&#125; clearCacheæ–¹æ³•å…·ä½“å®žçŽ°123456+(void)clearCache&#123;NSArray *cachedItems = [[NSFileManager defaultManager] contentsOfDirectoryAtPath:[AppCache cacheDirectory] error:nil];for (NSString *path in cachedItems) &#123;[[NSFileManager defaultManager] removeItemAtPath:path error:nil];&#125;&#125; åˆ›å»ºå†…å­˜ç¼“å­˜ï¼š éœ€è¦é¿å…è¿‡äºŽé¢‘ç¹çš„è¯»å†™é—ªå­˜ã€‚ä¸ºäº†é¿å…è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥å†å¼•å…¥ä¸€å±‚ç¼“å­˜ï¼Œåˆ©ç”¨è®¾å¤‡çš„RAMè€Œä¸æ˜¯é—ªå­˜(ç”¨NSMutableDictionry)è¦åˆ›å»ºå†…å­˜ç¼“å­˜éœ€è¦çš„æ­¥éª¤ï¼š(1)æ·»åŠ å˜é‡æ¥å­˜æ”¾å†…å­˜ç¼“å­˜(2)é™åˆ¶å†…å­˜ç¼“å­˜å¤§å°ï¼Œå¹¶ä¸”æŠŠæœ€è¿‘æœ€å°‘ä½¿ç”¨çš„é¡¹å†™å…¥æ–‡ä»¶ï¼Œç„¶åŽä»Žå†…å­˜ç¼“å­˜ä¸­åˆ é™¤ã€‚RAMæ˜¯æœ‰é™çš„ï¼Œè¾¾åˆ°ä½¿ç”¨æžé™å°±ä¼šè§¦å‘å†…å­˜è­¦å‘Šã€‚è¦ä¸ºå†…å­˜ç¼“å­˜è®¾ç½®ä¸€ä¸ªæœ€å¤§é˜ˆå€¼ã€‚å½“å†…å­˜æ»¡äº†ä»¥åŽå†æ·»åŠ ä»»ä½•ä¸œè¥¿æ—¶ï¼Œæœ€è¿‘æœ€å°‘ä½¿ç”¨çš„å¯¹è±¡åº”è¯¥è¢«ä¿å­˜åˆ°æ–‡ä»¶(é—ªå­˜ä¸­)(3)å¤„ç†å†…å­˜è­¦å‘Šï¼Œå¹¶æŠŠå†…å­˜ç¼“å­˜ä»¥æ–‡ä»¶å½¢å¼å†™å…¥é—ªå­˜(4)å½“åº”ç”¨å…³é—­ã€é€€å‡ºï¼Œæˆ–è¿›å…¥åŽå°æ—¶ï¼ŒæŠŠå†…å­˜ç¼“å­˜å…¨éƒ¨ä»¥æ–‡ä»¶å½¢å¼å†™å…¥é—ªå­˜ 14 ä¸ºAPPCacheè®¾ç½®å†…å­˜ç¼“å­˜ æ·»åŠ ä¸€ä¸ªNSMutableDictionaryæ¥ä¿å­˜ç¼“å­˜æ•°æ®ã€‚æ·»åŠ ä¸€ä¸ªNSMutableArrayæ¥è¿½è¸ªæœ€è¿‘ä½¿ç”¨çš„é¡¹(æŒ‰ç…§æ—¶é—´é¡ºåºæŽ’åº)ï¼Œæœ€åŽæ·»åŠ ä¸€ä¸ªæ•´æ•°æ¥é™åˆ¶ç¼“å­˜çš„æœ€å¤§å°ºå¯¸1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253@interface ViewController ()@endstatic NSMutableDictionary *memoryCache;static NSMutableArray *recentlyAccessedKeys;static int kCacheMemoryLimit;@implementation ViewController+(void)cacheMenuItems:(NSMutableArray *)menuItems&#123;//è¿™é‡Œå°†NSKeyedArchiverå¾—åˆ°çš„NSDataä¿å­˜åˆ°ç¼“å­˜ä¸­ï¼Œ[self cacheData:[NSKeyedArchiver archivedDataWithRootObject:menuItems] toFile:@&quot;MenuItems.archive&quot;];&#125;+(NSMutableArray *)getCachedMenuItems&#123;return [NSKeyedUnarchiver unarchiveObjectWithData:[self dataForFile:@&quot;MenuItems.archive&quot;]];&#125;//è¿™é‡Œå°†ç¼“å­˜æ–¹æ³•å°è£…ï¼Œåˆ°åº•æ˜¯å¦‚ä½•å®žçŽ°ç¼“å­˜çš„å¤–ç•Œä¸å¾—è€ŒçŸ¥ã€‚//è¿™é‡Œå°†NSKeyedArchiverå¾—åˆ°çš„NSDataä¿å­˜åˆ°ç¼“å­˜ä¸­+(void)cacheData:(NSData *)data toFile:(NSString *)fileName&#123;//è¿™é‡Œä½¿ç”¨é”®å€¼å¯¹ã€‚ä»¥å­˜å‚¨è·¯å¾„ä½œä¸ºkey[memoryCache setObject:data forKey:fileName];//é¦–å…ˆç¡®ä¿æ•°ç»„ä¸­æ²¡æœ‰è¿™ä¸ªkeyã€‚æœ‰å°±ç§»é™¤if ([recentlyAccessedKeys containsObject:fileName]) &#123;[recentlyAccessedKeys removeObject:fileName];&#125;//çŽ°åœ¨æŠŠè¿™ä¸ªkeyæ”¾åœ¨æ•°ç»„çš„æœ€å‰é¢[recentlyAccessedKeys insertObject:fileName atIndex:0];//if ([recentlyAccessedKeys count] &gt; kCacheMemoryLimit) &#123;NSString *leastRecentlyUsedDataFilename = [recentlyAccessedKeys lastObject];//æ•°ç»„ä¸­æœ€åŽçš„å…ƒç´ å°±æ˜¯ä¸Šæ¬¡è°ƒç”¨æ—¶é—´è·ç¦»çŽ°åœ¨æœ€ä¹…çš„å…ƒç´ //çŽ°åœ¨æŠŠè¿™ä¸ªå…ƒç´ å†™å…¥åˆ°é—ªå­˜ä¸­NSData *leastRecentlyUsedCacheData = [memoryCache objectForKey:leastRecentlyUsedDataFilename];NSString *archivePath = [[AppCache cacheDirectory] stringByAppendingPathComponent:fileName];[leastRecentlyUsedCacheData writeToFile:archivePath atomically:YES];[recentlyAccessedKeys removeLastObject];[memoryCache removeObjectForKey:leastRecentlyUsedDataFilename];&#125;&#125;//åœ¨å†…å­˜ä¸­æ²¡æœ‰çš„æ—¶å€™æ‰åŽ»è®¿é—®æ–‡ä»¶+(NSData *)dataForFile:(NSString *)fileName&#123;NSData *data = [memoryCache objectForKey:fileName];if (data) &#123;return data;&#125;NSString *archivePath = [[AppCache cacheDirectory] stringByAppendingPathComponent:fileName];data = [NSData dataWithContentsOfFile:archivePath];if (data) &#123;[self cacheData:data toFile:fileName];&#125;return data;&#125; å¤„ç†å†…å­˜è­¦å‘Šé€šè¿‡è¿™ç§å°†æ•°æ®ç¼“å­˜åœ¨å†…å­˜ä¸­ï¼Œæ”¶åˆ°å†…å­˜è­¦å‘Šçš„å¯èƒ½æ€§å¾ˆå¤§å‘UIApplicationDidReceiveMemoryWarningNotificationæ·»åŠ ä¸€ä¸ªé€šçŸ¥è§‚å¯Ÿè€…ï¼š1[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(saveMemoryCacheToDisk:) name:UIApplicationDidReceiveMemoryWarningNotification object:nil]; ç„¶åŽå†™ä¸€ä¸ªæ–¹æ³•æŠŠå†…å­˜ç¼“å­˜ä¸­çš„é¡¹ä¿å­˜åˆ°æ–‡ä»¶ï¼š1234567+(void)saveMemoryCacheToDisk:(NSNotification *)notification&#123;for (NSString *filename in [memoryCache allKeys]) &#123;NSString *archivePath = [[AppCache cacheDirectory] stringByAppendingPathComponent:filename];NSData *cacheData = [memoryCache objectForKey:filename];[cacheData writeToFile:archivePath atomically:YES];&#125;&#125; å¤„ç†ç»“æŸå’Œè¿›å…¥åŽå°é€šçŸ¥ æˆ‘ä»¬è¿˜åº”å½“ç¡®ä¿åº”ç”¨é€€å‡ºæˆ–è¿›å…¥åŽå°æ—¶ä¼šä¿å­˜å†…å­˜ä¸­çš„ç¼“å­˜ã€‚ç›‘å¬åº”ç”¨çš„åœæ­¢æ´»è·ƒæˆ–å…³é—­é€šçŸ¥ã€‚åªè¦æŠŠUIApplicationDidEnterBackgroundNotificationå’ŒUIApplicationWillTerminateNotificationçš„è§‚å¯Ÿè€…åŠ å…¥åˆå§‹åŒ–æ–¹æ³•å³å¯ã€‚ åˆ›å»ºURLç¼“å­˜ å¯ä»¥é€šè¿‡ä¸ºåº”ç”¨æ‰€åšçš„æ¯æ¬¡URLè¯·æ±‚ç¼“å­˜åº”ç­”æ¥å®žçŽ°URLç¼“å­˜ã€‚URLç¼“å­˜ç”¨URLä½œä¸ºé”®ï¼Œåº”ç­”çš„æ•°æ®ä½œä¸ºå€¼ã€‚]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[å¹•åŽåˆ¶ä½œï¼š åŽå°å¤„ç†]]></title>
      <url>%2F2017%2F03%2F25%2F%E5%B9%95%E5%90%8E%E5%88%B6%E4%BD%9C%EF%BC%9A-%E5%90%8E%E5%8F%B0%E5%A4%84%E7%90%86%2F</url>
      <content type="text"><![CDATA[åº”ç”¨åº”è¯¥è®©ç”¨æˆ·æ„Ÿè§‰å®ƒä¸€ç›´åœ¨è¿è¡Œï¼Œå³ä½¿å®žé™…ä¸Šä¸æ˜¯è¿™æ ·ã€‚åº”ç”¨å¯èƒ½ä¼šåœ¨æŒ‚èµ·çŠ¶æ€ä¸‹æ²¡æœ‰æ”¶åˆ°ä»»ä½•çš„è­¦å‘Šå°±ç»ˆæ­¢è¿è¡Œäº†ï¼Œä½†å†æ¬¡è¿è¡Œæ—¶ï¼Œå®ƒåº”è¯¥è®©ç”¨æˆ·æ„Ÿè§‰ä¸Žä¸Šæ¬¡é€€å‡ºæ—¶æ²¡æœ‰ä»»ä½•ä¸ç”¨ã€‚ä¸€æ˜¯ä¸è¦åœ¨åŠ è½½è¿‡ç¨‹ä¸­æ˜¾ç¤ºå¯åŠ¨å›¾ç‰‡ï¼ŒäºŒæ˜¯è¦åœ¨åº”ç”¨è¿›å…¥åŽå°è¿è¡Œæ—¶æŠŠå„ç§å¿…è¦çš„çŠ¶æ€ä¿å­˜ä¸‹æ¥ã€‚åœ¨applicationWillResignActive:æ–¹æ³•ä¸­ï¼Œå¯ä»¥æŠŠå°‘é‡çš„æ•°æ®ä¿å­˜åˆ°NSUserDefaultsä¸­ã€‚å¤§ä¸€äº›çš„æ•°æ®ç»“æž„åº”è¯¥ä¿å­˜åˆ°æ–‡ä»¶ä¸­ï¼Œè¿™äº›æ–‡ä»¶é€šå¸¸ä½äºŽ~/Library/Cachesç›®å½•ä¸‹ã€‚ åº”ç”¨æŒ‚èµ·åŽæ— æ³•æ”¶åˆ°å†…å­˜è­¦å‘Šã€‚å¦‚æžœå†…å­˜å ç”¨æ¯”è¾ƒå¤§ï¼Œé‚£ä¹ˆç³»ç»Ÿå¾ˆå¯èƒ½ä¼šåœ¨å‡ºçŽ°å†…å­˜åŽ‹åŠ›æ—¶ç»ˆæ­¢åº”ç”¨ï¼Œè€Œä½ å¯¹æ­¤æ¯«æ— åŠžæ³•ã€‚å¤„ç†è¿™ä¸ªé—®é¢˜æ—¶ï¼ŒNSCacheå’ŒNSPurgeableDataèƒ½å¤Ÿå¤§æ˜¾èº«æ‰‹ã€‚NSPurgeableDataæ˜¯ä¸€ä¸ªNSDataå¯¹è±¡ï¼Œå¯ä»¥å°†å®ƒæ ‡è®°ä¸ºå½“å‰æ­£åœ¨ä½¿ç”¨æˆ–è€…å¯æ¸…é™¤ã€‚å¦‚æžœæŠŠå®ƒä¿å­˜åˆ°NSChacheå¯¹è±¡ä¸­å¹¶ä½¿ç”¨endContentAccesså°†å…¶æ ‡è®°ä¸ºå¯æ¸…é™¤ï¼ŒiOSä¼šåœ¨é‡åˆ°å†…å­˜åŽ‹åŠ›ä¹‹å‰ä¸€ç›´ä¿å­˜å®ƒã€‚é‡åˆ°å†…å­˜åŽ‹åŠ›æ—¶ï¼ŒiOSå°±ä¼šä¸¢å¼ƒè¿™äº›æ•°æ®ï¼Œå³ä½¿è¿™æ—¶åº”ç”¨å¤„äºŽæŒ‚èµ·çŠ¶æ€ã€‚ ä½¿ç”¨imageNamed:æ–¹æ³•åŠ è½½çš„å›¾ç‰‡æ•°æ®ä¼šè¢«è‡ªåŠ¨ä¸¢å¼ƒï¼Œå†æ¬¡ä½¿ç”¨æ—¶ä¼šé‡æ–°ä»Žç£ç›˜åŠ è½½ã€‚è§†å›¾çš„åŽå¤‡å­˜å‚¨(ä½å›¾ç¼“å­˜)ä¹Ÿä¼šè¢«è‡ªåŠ¨ä¸¢å¼ƒã€‚å”¤é†’åº”ç”¨æ—¶åº”è¯¥è°ƒç”¨drawRect:æ–¹æ³•ã€‚è¿™ä¸ªè§„åˆ™æœ‰ä¸€ä¸ªé‡å¤§çš„ä¾‹å¤–ï¼šUIImageViewä¸ä¼šä¸¢å¼ƒæ•°æ®ï¼Œå› è€Œä¼šå ç”¨å¤§é‡çš„å†…å­˜ã€‚å¦‚æžœUIImageViewä¸­æœ‰éžå¸¸å¤§çš„å›¾ç‰‡ï¼Œé€šå¸¸åº”è¯¥åœ¨è¿›å…¥åŽå°è¿è¡Œä¹‹å‰æŠŠå®ƒåˆ é™¤ã€‚ç„¶è€Œï¼Œè§£åŽ‹å›¾ç‰‡éžå¸¸è€—æ—¶ï¼Œæ‰€ä»¥ä¸è¦è¿‡äºŽé¢‘ç¹åœ°ä¸¢å¼ƒå®ƒä»¬ã€‚è¿™ä¸ªé—®é¢˜æ²¡æœ‰å”¯ä¸€æ­£ç¡®çš„ç­”æ¡ˆï¼Œéœ€è¦æ ¹æ®è‡ªå·±çš„åº”ç”¨è¿›è¡Œæƒè¡¡ ã€‚åº”ç”¨è¿›å…¥åˆ°åŽå°åŽï¼Œå¯ä»¥ä½¿ç”¨Instrumentsä¸­çš„VM Trackeræ£€éªŒåº”ç”¨å ç”¨çš„å†…å­˜æ•°é‡ã€‚é¦–å…ˆï¼Œåˆ›å»ºä¸€ä¸ªç”¨äºŽæ˜¾ç¤ºå¤§åž‹å›¾ç‰‡çš„åº”ç”¨ã€‚ç„¶åŽä½¿ç”¨VM Trakerè¿è¡Œåº”ç”¨ã€‚æ³¨æ„å½“å‰çš„å†…å­˜å ç”¨é‡ã€‚æŒ‰ä¸‹Homeé”®çœ‹çœ‹å½“å‰çš„å†…å­˜å ç”¨é‡ã€‚è¿™å°±æ˜¯è¿›å…¥åŽå°è¿è¡Œæ—¶ä¼šé‡Šæ”¾çš„å†…å­˜ã€‚ðŸ‘‰åŽå°å†…å­˜å ç”¨é‡é«˜çš„è¯ï¼Œå”¤é†’åº”ç”¨çš„è¿‡ç¨‹æ¯”è¾ƒæ…¢ã€‚ðŸ‘ˆå†…å­˜å ç”¨é‡åº”è¯¥å°½å¯èƒ½ä½Žã€‚ åœ¨Instrumentsä¸­å¯ä»¥çœ‹åˆ°ä¸¤ç§å†…å­˜ï¼Œè„å†…å­˜(dirty memory)å’Œå¸¸é©»å†…å­˜(resident memory)ã€‚è¿›å…¥åŽå°è¿è¡Œæ—¶ï¼Œä¸èƒ½è¢«iOSè‡ªåŠ¨å›žæ”¶çš„å†…å­˜å°±æ˜¯è„å†…å­˜ã€‚å¸¸é©»å†…å­˜å°±æ˜¯å½“å‰ä½¿ç”¨çš„æ‰€æœ‰å†…å­˜ã€‚å‡å°‘è„å†…å­˜çš„å æœ‰é‡å¯ä»¥é™ä½Žåº”ç”¨åœ¨åŽå°è¢«ç»ˆæ­¢çš„å¯èƒ½æ€§ã€‚åº”ä¼˜å…ˆå‡å°‘è„å†…å­˜çš„å æœ‰é‡ã€‚NSCacheå’ŒNSPurgeableDataå¯ä»¥ç”¨æ¥å‡å°‘è„å†…å­˜å æœ‰ã€‚]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[å¤šä»»åŠ¡]]></title>
      <url>%2F2017%2F03%2F23%2F%E5%A4%9A%E4%BB%BB%E5%8A%A1%2F</url>
      <content type="text"><![CDATA[1.å¤šä»»åŠ¡å’Œè¿è¡Œå¾ªçŽ¯ç®€ä»‹æ¯ä¸ªCocoaåº”ç”¨ç¨‹åºéƒ½ç”±ä¸€ä¸ªå¤„äºŽé˜»å¡žçŠ¶æ€çš„do/whileå¾ªçŽ¯é©±åŠ¨ã€‚å½“æœ‰äº‹ä»¶å‘ç”Ÿæ—¶ï¼Œå°±æŠŠäº‹ä»¶åˆ†æ´¾ç»™åˆé€‚çš„ç›‘å¬å™¨ã€‚ æ˜Žç™½è¿è¡Œå¾ªçŽ¯å°±æ˜¯ä¸€ä¸ªå¤§çš„do/whileå¾ªçŽ¯ã€‚å®ƒè¿è¡Œåœ¨æŸä¸ªçº¿ç¨‹ä¸­ï¼Œä»Žå„ç§äº‹ä»¶é˜Ÿåˆ—ä¸­å–å¾—äº‹ä»¶ï¼Œç„¶åŽæŠŠå®ƒåˆ†é…ç»™åˆé€‚çš„ç›‘å¬å™¨ã€‚ å¦‚æžœè°ƒç”¨applicationWillResignAction:æ–¹æ³•ï¼Œé‚£æ˜¯å› ä¸ºæŸä¸ªäº‹ä»¶è§¦å‘äº†ä½ å®žçŽ°çš„å§”æ‰˜è°ƒç”¨ã€‚è¿™æ—¶è¿è¡Œå¾ªçŽ¯ä¼šé˜»å¡ž(å¯¹äºŽå…¶ä»–çš„ä»»ä½•æ–¹æ³•æ¥è¯´å°±æ˜¯é˜»å¡žçŠ¶æ€)ï¼Œè°ƒç”¨è¿”å›žåŽæ‰èƒ½ç»§ç»­è¿è¡Œã€‚ä¸»çº¿ç¨‹è¿è¡Œè¿™äº›ä»£ç æ—¶ï¼Œæ»šåŠ¨è§†å›¾æ— æ³•æ»šåŠ¨ï¼ŒæŒ‰é’®æ— æ³•é«˜äº®ï¼Œå®šæ—¶å™¨ä¹Ÿæ— æ³•è§¦å‘ã€‚æ•´ä¸ªUIéƒ½ä¼šè¢«æŒ‚èµ·ï¼Œç›´åˆ°äº‹ä»¶å¤„ç†å®Œæˆã€‚ è¿™å¹¶ä¸æ˜¯è¯´æ‰€æœ‰çš„ä¸œè¥¿éƒ½åœ¨ä¸»è¿è¡Œå¾ªçŽ¯ä¸Šï¼Œæ¯ä¸ªçº¿ç¨‹éƒ½æœ‰è‡ªå·±çš„è¿è¡Œå¾ªçŽ¯ã€‚ä¸Žå¤§éƒ¨åˆ†çš„ç½‘ç»œè¯·æ±‚ä¸€æ ·ï¼ŒåŠ¨ç”»é€šå¸¸ä¹Ÿåœ¨åŽå°ä¸­è¿è¡Œã€‚ç³»ç»Ÿæ ¸å¿ƒä¼šè¿è¡Œä¸€ä¸ªå…±äº«çš„è¿è¡Œå¾ªçŽ¯ã€‚è™½ç„¶æ¯ä¸ªçº¿ç¨‹éƒ½æœ‰è‡ªå·±çš„è¿è¡Œå¾ªçŽ¯ï¼Œä½†è¿™å¹¶ä¸æ˜¯è¯´æ¯ä¸ªçº¿ç¨‹éƒ½ä¼šå¤„ç†è‡ªå·±çš„è¿è¡Œå¾ªçŽ¯ã€‚è¿è¡Œå¾ªçŽ¯ä»…åœ¨éœ€è¦å¯¹runUntilDateï¼šç­‰å‘½ä»¤åšå‡ºå“åº”æ—¶ï¼Œæ‰ä¼šæ‰§è¡Œå®ƒä»¬çš„do/whileå¾ªçŽ¯ã€‚è°ƒç”¨main.mæ–‡ä»¶ä¸­çš„UIApplicationMainå°±ä¼šè¿è¡Œä¸»è¿è¡Œå¾ªçŽ¯ã€‚ NSTimer åŸºäºŽè¿è¡Œå¾ªçŽ¯è¿›è¡Œæ¶ˆæ¯åˆ†æ´¾ã€‚è°ƒåº¦NSTimeæ—¶ï¼Œå…¶å®žæ˜¯è¦æ±‚å½“å‰è¿è¡Œå¾ªçŽ¯åœ¨æŸä¸ªç‰¹å®šçš„æ—¶é—´åˆ†æ´¾æŸä¸ªé€‰æ‹©å™¨ã€‚è¿è¡Œå¾ªçŽ¯æ¯æ¬¡è¿­ä»£éƒ½ä¼šå¯¹æ—¶é—´è¿›è¡Œæ£€æŸ¥å¹¶ä¸”è§¦å‘æ‰€æœ‰è¿‡æœŸçš„å®šæ—¶å™¨ã€‚å»¶è¿Ÿæ‰§è¡Œçš„æ–¹æ³•(æ¯”å¦‚performSelector:withObject:afterDelay:)ä¹Ÿæ˜¯é€šè¿‡è°ƒåº¦å®šæ—¶å™¨å®žçŽ°çš„ã€‚ 2.ä»¥æ“ä½œä¸ºä¸­å¿ƒçš„å¤šä»»åŠ¡å¼€å‘ çº¿ç¨‹çš„åˆ›å»ºå’Œç»´æŠ¤æˆæœ¬éƒ½å¾ˆé«˜ã€‚åŠ é”çš„ä»£ä»·æ˜¯æ˜‚è´µçš„ã€‚å¯èƒ½å¯¼è‡´å¤§é‡çš„bugã€‚å¾ˆå¤šæ“ä½œä¸€èˆ¬ä¼šæœ‰é¡ºåºçš„ä¾èµ–å…³ç³»ï¼Œæ‰€ä»¥æœ€å¥½åˆ›å»ºæŸç§é˜Ÿåˆ—ï¼Œç¡®ä¿å®ƒä»¬æŒ‰ä½ æƒ³è¦çš„é¡ºåºæ‰§è¡Œã€‚è¿™å°±æ˜¯NSOperationçš„åŠŸèƒ½ã€‚è¿™æ˜¯ä½ åœ¨ä¼˜åŒ–å¤šçº¿ç¨‹ç¨‹åºï¼Œä»Žè€Œå°½å¯èƒ½å‡å°‘é”æ—¶æƒ³åˆ°çš„æ–¹æ¡ˆã€‚ ðŸ‘‰æ“ä½œæ”¯æŒä¼˜å…ˆçº§ï¼Œä¾èµ–å…³ç³»å’Œå–æ¶ˆã€‚æ‰€ä»¥å®ƒä»¬å¾ˆé€‚åˆè°ƒåº¦æŸäº›å®žé™…ä¸Šå¹¶ä¸éœ€è¦åšçš„äº‹æƒ…ã€‚æ¯”å¦‚ï¼Œåœ¨ä¸€ä¸ªæ»šåŠ¨è§†å›¾ä¸­æ›´æ–°å›¾ç‰‡ï¼Œæ”¶è—å½“å‰å±å¹•ä¸Šçš„å›¾ç‰‡ï¼Œä»¥åŠå–æ¶ˆæ›´æ–°æ»šå‡ºå±å¹•ä»¥å¤–çš„å›¾ç‰‡ ä¸‹é¢çš„è¿™ä¸ªä¾‹å­å°†åˆ›å»ºä¸€ä¸ªUICollectionViewï¼Œå…¶ä¸­åŒ…å«éšæœºåˆ†å½¢å›¾ã€‚è®¡ç®—è¿™äº›åˆ†å½¢å›¾éžå¸¸æ¶ˆè€—èµ„æºï¼Œæ‰€ä»¥è¦å¼‚æ­¥ç”Ÿæˆã€‚ä¸ºäº†æé«˜æ˜¾ç¤ºæ€§èƒ½ï¼Œè¦è®¡ç®—å„ç§åˆ†è¾¨çŽ‡ä¸‹çš„åˆ†å½¢å›¾ï¼Œå¿«é€Ÿæ˜¾ç¤ºä¸€ä¸ªä½Žåˆ†è¾¨çŽ‡åˆ†å½¢å›¾ï¼Œç„¶åŽåœ¨ç”¨æˆ·åœæ­¢æ»šåŠ¨æ—¶æ˜¾ç¤ºé«˜åˆ†è¾¨çŽ‡åˆ†å½¢å›¾ã€‚ Demoåœ°å€ 3.ç”¨GCDå®žçŽ°å¤šä»»åŠ¡ NSOperationQueueæ˜¯åœ¨GCDçš„åŸºç¡€ä¸Šå®žçŽ°çš„ã€‚å—æ·»åŠ åˆ°åˆ†æ´¾é˜Ÿåˆ—åŽå°±æ— æ³•å–æ¶ˆäº†ã€‚åˆ†æ´¾é˜Ÿåˆ—æ˜¯ä¸¥æ ¼çš„å…ˆè¿›å…ˆå‡º(FIFO)ç»“æž„ï¼Œæ‰€ä»¥æ— æ³•åœ¨é˜Ÿåˆ—ä¸­ä½¿ç”¨ä¼˜å…ˆçº§æˆ–è€…è°ƒæ•´å—æ¬¡åºã€‚å¦‚æžœéœ€è¦è¿™ç±»ç‰¹æ€§ï¼Œä¸€å®šè¦ç”¨NSOperationQueueï¼Œè€Œä¸æ˜¯ç”¨GCDé‡æ–°å‘æ˜Žè½®å­ã€‚å¯ä»¥ç”¨åˆ†æ´¾é˜Ÿåˆ—åšå¾ˆå¤šæ“ä½œåŠžä¸åˆ°çš„äº‹ã€‚æ¯”å¦‚ï¼ŒGCDæä¾›çš„dispatch_afteræ”¯æŒè°ƒåº¦ä¸‹ä¸€ä¸ªæ“ä½œçš„å¼€å§‹æ—¶é—´è€Œä¸æ˜¯ç›´æŽ¥è¿›å…¥ç¡çœ ã€‚3.1 åˆ†æ´¾é˜Ÿåˆ—ç®€ä»‹ åˆ†æ´¾é˜Ÿåˆ—å°±æ˜¯é˜Ÿåˆ—ï¼Œä¸æ˜¯çº¿ç¨‹ã€‚ä¸è¦è®¤ä¸ºé˜Ÿåˆ—æ˜¯æŽ¥å—å—çš„ä¸œè¥¿ï¼Œé˜Ÿåˆ—æ˜¯ç»„ç»‡å—çš„ï¼Œè°ƒç”¨dispatch_asyncä¸ä¼šè®©å—è¿è¡Œï¼Œè€Œåªæ˜¯æŠŠå—æ·»åŠ åˆ°é˜Ÿåˆ—ä¸­ã€‚å‡ ä¹Žæ‰€æœ‰çš„GCDæ–¹æ³•éƒ½æ˜¯è¿™æ ·çš„ï¼Œå°±æ˜¯æŠŠå—æ·»åŠ åˆ°é˜Ÿåˆ—æœ«å°¾ã€‚ é˜Ÿåˆ—ç›®æ ‡å’Œä¼˜å…ˆçº§ GCDä¸­é˜Ÿåˆ—æ˜¯æœ‰å±‚çº§çš„ã€‚äº‹å®žä¸Šåªæœ‰å…¨å±€ç³»ç»Ÿé˜Ÿåˆ—ä¼šè¢«è°ƒåº¦è¿è¡Œï¼Œå¯ä»¥ç”¨dispatch_get_global_queueå’Œä¸‹é¢è¿™äº›ä¼˜å…ˆçº§å¸¸é‡ä¸­çš„ä¸€ä¸ªæ¥è®¿é—®è¿™äº›é˜Ÿåˆ—ã€‚ DISPATCH_QUEUE_PRIORITY_HIGH DISPATCH_QUEUE_PRIORITY_DEFAULT DISPATCH_QUEUE_PRIORITY_LOW DISPATCH_QUEUE_PRIORITY_BACKGROUND ðŸ‘‰è¿™äº›é˜Ÿåˆ—éƒ½æ˜¯å¹¶è¡Œçš„ðŸ‘ˆã€‚GCDä¼šæ ¹æ®å¯ç”¨çº¿ç¨‹ðŸ‘‰å°½å¯èƒ½ðŸ‘ˆä»Žé«˜ä¼˜å…ˆçº§é˜Ÿåˆ—è°ƒåº¦å—ï¼Œç­‰é«˜ä¼˜å…ˆçº§é˜Ÿåˆ—ç©ºäº†ä»¥åŽï¼Œä¼šç»§ç»­è°ƒç”¨é»˜è®¤ä¼˜å…ˆçº§é˜Ÿåˆ—ï¼Œä¸€æ¬¡ç±»æŽ¨ã€‚ç³»ç»Ÿä¼šæ ¹æ®å¯ç”¨çš„æ ¸å¿ƒæ•°å’Œè´Ÿè½½åˆ›å»ºå’Œé”€æ¯çº¿ç¨‹ã€‚å¼€å‘äººå‘˜è‡ªå·±åˆ›å»ºé˜Ÿåˆ—æ—¶ï¼ŒðŸ‘‰é˜Ÿåˆ—ä¼šé™„åŠ åˆ°é™„åŠ åˆ°æŸä¸ªå…¨å±€é˜Ÿåˆ—ã€‚ðŸ‘ˆé»˜è®¤é™„åŠ åˆ°é»˜è®¤ä¼˜å…ˆçº§é˜Ÿåˆ—ä¸Šã€‚å½“å—åˆ°è¾¾é˜Ÿåˆ—å¤´éƒ¨æ—¶ï¼Œå®žé™…ä¸Šä¼šç§»åŠ¨åˆ°ç›®æ ‡é˜Ÿåˆ—æœ«å°¾ï¼Œå½“åˆ°è¾¾å…¨å±€é˜Ÿåˆ—çš„å¤´éƒ¨æ—¶å°±ä¼šæ‰§è¡Œã€‚ç”¨dispatch_set_target_queueå¯ä»¥æ”¹å˜ç›®æ ‡é˜Ÿåˆ—ã€‚ dispatch_set_target_queueçš„ç”¨æ³•åŠä½œç”¨ï¼š dispatch_queue_createåˆ›å»ºé˜Ÿåˆ—çš„ä¼˜å…ˆçº§è·Ÿglobal dispatch queueçš„é»˜è®¤ä¼˜å…ˆçº§ä¸€æ ·ã€‚å¦‚æžœæˆ‘ä»¬è¦è®¾ç½®é˜Ÿåˆ—çš„ä¼˜å…ˆçº§ï¼Œå¯ä»¥ä½¿ç”¨dispatch_set_target_queueæ–¹æ³•ï¼š dispatch_set_target_queueçš„ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºè¦è®¾ç½®ä¼˜å…ˆçº§çš„queueï¼Œç¬¬äºŒä¸ªå‚æ•°ä¸ºå¯¹åº”çš„ä¼˜å…ˆçº§å‚ç…§ç‰©1234dispatch_queue_t serialQueue = dispatch_queue_create(&quot;com.example.queue&quot;,NULL);dispatch_queue_t globalQueue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_BACKGROUND,0);//serialQueue çŽ°åœ¨çš„ä¼˜å…ˆçº§å’ŒglobalQueueçš„ä¼˜å…ˆçº§ä¸€æ ·dispatch_set_target_queue(serialQueue,globalQueue); ä½¿ç”¨dispatch_set_target_queueä¿®æ”¹ç”¨æˆ·é˜Ÿåˆ—çš„ç›®æ ‡é˜Ÿåˆ—ï¼Œä½¿å¤šä¸ªserial queueåœ¨ç›®æ ‡queueä¸Šä¸€æ¬¡åªæœ‰ä¸€ä¸ªæ‰§è¡Œé˜è¿°ï¼š å½“ç”¨dispatch_queue_createå‡½æ•°ç”Ÿæˆå¤šä¸ªserial dispatch queueæ—¶ï¼Œæ¯ä¸ªserial dispatch queueå‡èŽ·å¾—ä¸€ä¸ªçº¿ç¨‹ï¼Œå³å¤šä¸ªserial dispatch queueå¯å¹¶å‘æ‰§è¡Œï¼ŒåŒæ—¶å¤„ç†å¤šä¸ªserial dispatch queueä¸­çš„ä»»åŠ¡ï¼Œä½†è¦æ³¨æ„å¦‚æžœè¿‡å¤šçš„ä½¿ç”¨å¤šçº¿ç¨‹ï¼Œå°±ä¼šæ¶ˆè€—å¤§é‡å†…å­˜ï¼Œå¼•èµ·å¤§é‡çš„ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Œå¤§å¹…åº¦é™ä½Žç³»ç»Ÿçš„ç›¸åº”æ€§èƒ½ã€‚æ‰€ä»¥æˆ‘ä»¬åªæ˜¯ä¸ºäº†é¿å…å¤šä¸ªçº¿ç¨‹æ›´æ–°ç›¸åŒèµ„æºå¯¼è‡´æ•°æ®ç«žäº‰æ—¶ï¼Œä½¿ç”¨dispatch_serial_queue. ç¬¬ä¸€ç§æƒ…å†µï¼šä½¿ç”¨dispatch_set_target_queueå®žçŽ°é˜Ÿåˆ—çš„åŠ¨æ€è°ƒåº¦ç®¡ç†1234567891011121314151617181920212223242526272829303132//1.åˆ›å»ºä¸€ä¸ªç›®æ ‡é˜Ÿåˆ—dispatch_queue_t targetQueue = dispatch_queueu_create(&quot;test.target.queue&quot;,DISPATCH_QUEUE_SERIAL);//2.åˆ›å»º3ä¸ªä¸²è¡Œé˜Ÿåˆ—dispatch_queue_t queue1 = dispatch_queue_create(&quot;test.1&quot;,DISPATCH_QUEUE_SERIAL);dispatch_queue_t queue2 = dispatch_queue_create(&quot;test.2&quot;,DISPATCH_QUEUE_SERAIL);dispatch_queue_t queue3 = dispatch_queue_create(&quot;test.3&quot;,DISPATCH_QUEUE_SERAIL);//3.å°†3ä¸ªç©¿è¡Œé˜Ÿåˆ—åˆ†åˆ«æ·»åŠ åˆ°ç›®æ ‡é˜Ÿåˆ—dispatch_set_target_queue(queue1, targetQueue);dispatch_set_target_queue(queue2, targetQueue);dispatch_set_target_queue(queue3, targetQueue);dispatch_async(queue1, ^&#123;NSLog(@&quot;%@&quot;,[NSThread currentThread]);NSLog(@&quot;1 in&quot;);[NSThread sleepForTimeInterval:3.f];NSLog(@&quot;1 out&quot;);&#125;);dispatch_async(queue2, ^&#123;NSLog(@&quot;%@&quot;,[NSThread currentThread]);NSLog(@&quot;2 in&quot;);[NSThread sleepForTimeInterval:5.f];NSLog(@&quot;2 out&quot;);&#125;);dispatch_async(queue3, ^&#123;NSLog(@&quot;%@&quot;,[NSThread currentThread]);NSLog(@&quot;3 in&quot;);[NSThread sleepForTimeInterval:1.f];NSLog(@&quot;3 out&quot;);&#125;); æ‰“å°ç»“æžœ1234567892017-03-25 16:14:19.017 test[1361:83485] &lt;NSThread: 0x6080000754c0&gt;&#123;number = 4, name = (null)&#125;2017-03-25 16:14:19.019 test[1361:83485] 1 in2017-03-25 16:14:22.091 test[1361:83485] 1 out2017-03-25 16:14:22.092 test[1361:83485] &lt;NSThread: 0x6080000754c0&gt;&#123;number = 4, name = (null)&#125;2017-03-25 16:14:22.092 test[1361:83485] 2 in2017-03-25 16:14:27.165 test[1361:83485] 2 out2017-03-25 16:14:27.166 test[1361:83485] &lt;NSThread: 0x6080000754c0&gt;&#123;number = 4, name = (null)&#125;2017-03-25 16:14:27.166 test[1361:83485] 3 in2017-03-25 16:14:28.236 test[1361:83485] 3 out ä½¿ç”¨ä¹‹é˜Ÿåˆ—æš‚åœdispatch_set_target_queue(Dispatch QueueA, Dispatch QueueB);é‚£ä¹ˆdispatchAä¸Šè¿˜æœªè¿è¡Œçš„blockä¼šåœ¨dispatchBä¸Šè¿è¡Œã€‚è¿™æ—¶å¦‚æžœæš‚åœdispatchAè¿è¡Œï¼šdispatch_suspend(dispatchA);è¿™æ—¶åˆ™åªä¼šæš‚åœdispatchAä¸ŠåŽŸæ¥çš„blockçš„æ‰§è¡Œï¼ŒdispatchBçš„blockåˆ™ä¸å—å½±å“ã€‚è€Œå¦‚æžœæš‚åœdispatchBçš„è¿è¡Œï¼Œåˆ™ä¼šæš‚åœdispatchAçš„è¿è¡Œã€‚è¿™é‡Œåªç®€å•ä¸¾ä¸ªä¾‹å­ï¼Œè¯´æ˜Ždispatché˜Ÿåˆ—è¿è¡Œçš„çµæ´»æ€§ï¼Œåœ¨å®žé™…åº”ç”¨ä¸­ä½ ä¼šé€æ­¥å‘æŽ˜å‡ºå®ƒçš„æ½œåŠ›ã€‚dispatché˜Ÿåˆ—ä¸æ”¯æŒcancelï¼ˆå–æ¶ˆï¼‰ï¼Œæ²¡æœ‰å®žçŽ°dispatch_cancel()å‡½æ•°ï¼Œä¸åƒNSOperationQueueï¼Œä¸å¾—ä¸è¯´è¿™æ˜¯ä¸ªå°å°çš„ç¼ºæ†¾ðŸ‘‰éœ€è¦æ³¨æ„çš„æ˜¯ï¼šdispatch_suspend å¿…é¡»ä¸Ždispatch_resumeç»“åˆä½¿ç”¨ï¼Œå¿…é¡»å…·æœ‰å¯¹åº”å…³ç³»ã€‚æœ‰å¤šå°‘dispatch_suspendå°±å¾—æœ‰å¤šå°‘dispatch_resume å—è¢«æ·»åŠ åˆ°é˜Ÿåˆ—åŽï¼Œå°±ä¼šæŒ‰ç…§æ·»åŠ çš„é¡ºåºæ‰§è¡Œï¼Œæ— æ³•å–æ¶ˆï¼Œä¹Ÿæ— æ³•æ›´æ”¹ç›¸å¯¹äºŽé˜Ÿåˆ—ä¸­å…¶ä»–å—çš„é¡ºåºã€‚ä½†æ˜¯å¦‚æžœä½ æƒ³è®©é«˜ä¼˜å…ˆçº§å—æ’é˜Ÿå‘¢ï¼Ÿå¦‚ä¸‹ä»£ç æ‰€ç¤ºï¼Œåˆ›å»ºä¸¤ä¸ªé˜Ÿåˆ—ï¼Œä¸€ä¸ªé«˜ä¼˜å…ˆçº§å’Œä¸€ä¸ªä½Žä¼˜å…ˆçº§ï¼Œä½¿é«˜ä¼˜å…ˆçº§é˜Ÿåˆ—æ˜¯ä½Žä¼˜å…ˆçº§é˜Ÿåˆ—çš„ç›®æ ‡é˜Ÿåˆ—ã€‚12345678910dispatch_queue_t low = dispatch_queue_create(&quot;low&quot;,DISPATCH_QUEUE_SERIAL);dispatch_queue_t high = dipatch_queue_create(&quot;hight&quot;,DISPATCH_QUEUE_SERAIL);//è®¾ç½®highä½œä¸ºlowçš„ç›®æ ‡é˜Ÿåˆ—dispatch_set_target_queue(low,high);é€šå¸¸æ˜¯åˆ†æ´¾åˆ°ä½Žä¼˜å…ˆçº§é˜Ÿåˆ—ï¼šdispatch_async(low,^&#123;/*ä½Žä¼˜å…ˆçº§å—*/&#125;);//è¦åˆ†æ´¾åˆ°é«˜ä¼˜å…ˆçº§é˜Ÿåˆ—ï¼Œæš‚åœä½Žä¼˜å…ˆçº§é˜Ÿåˆ—ï¼Œå¹¶ä¸”åœ¨é«˜ä¼˜å…ˆçº§å—ç»“æŸåŽæ¢å¤ä½Žä¼˜å…ˆçº§é˜Ÿåˆ—ï¼šdispatch_suspend(low);dispatch_async(^high,^&#123;/*é«˜ä¼˜å…ˆçº§*/&#125;);dispatch_resume(low); 3.2 ç”¨åˆ†æ´¾å±éšœåˆ›å»ºåŒæ­¥ç‚¹åˆ†æ´¾å±éšœ(dispatch barrier)å¯ä»¥åœ¨å¹¶å‘é˜Ÿåˆ—å†…éƒ¨åˆ›å»ºä¸€ä¸ªåŒæ­¥ç‚¹,å½“å®ƒè¿è¡Œæ—¶ï¼Œå³ä½¿æœ‰å¹¶å‘çš„æ¡ä»¶å’Œç©ºé—²çš„å¤„ç†å™¨æ ¸å¿ƒï¼Œé˜Ÿåˆ—ä¸­çš„å…¶ä»–å—ä¹Ÿä¸èƒ½è¿è¡Œã€‚å¬èµ·æ¥åƒæ˜¯ä¸€ä¸ªäº’æ–¥(å†™å…¥)é”ï¼Œçš„ç¡®å¦‚æ­¤ï¼Œæ²¡æœ‰å±éšœçš„å—å¯ä»¥çœ‹åšå…±äº«ï¼ˆè¯»å–ï¼‰é”ã€‚åªè¦æ‰€æœ‰å¯¹èµ„æºçš„è®¿é—®éƒ½æ˜¯é€šè¿‡é˜Ÿåˆ—è¿›è¡Œçš„ï¼Œé‚£ä¹ˆå±éšœå°±èƒ½ä»¥æžä½Žçš„ä»£ä»·æä¾›åŒæ­¥ã€‚ä½œä¸ºæ¯”è¾ƒï¼Œå¯ä»¥ç”¨@synchronize ç®¡ç†å¤šçº¿ç¨‹è®¿é—®ï¼Œå®ƒä¼šåœ¨å‚æ•°ä¸ŠåŠ ä¸€ä¸ªäº’æ–¥é”ï¼Œå¦‚ä¸‹æ‰€ç¤º12345678910-(id)objectAtIndex:(NSUInteger)index&#123;@synchronized (self) &#123;return [self.arr objectAtIndex:index];&#125;&#125;-(void)insertObject:(id)obj atIndex:(NSUInteger)index&#123;@synchronized (self) &#123;[self.arr insertObject:obj atIndex:index];&#125;&#125; @synchronezeå¾ˆæ˜“ç”¨ï¼Œä½†æ˜¯å½“ç«žäº‰èµ„æºå¾ˆå°‘æ—¶æˆæœ¬å¾ˆé«˜ã€‚æœ‰å¾ˆå¤šå…¶ä»–æ–¹æ³•ï¼Œé€Ÿåº¦å¿«çš„å¤æ‚ï¼Œç®€å•çš„åˆå¾ˆæ…¢ã€‚GCDå±éšœæä¾›äº†å¾ˆå¥½çš„å¹³è¡¡ GCDå±éšœæä¾›äº†å¾ˆå¥½çš„å¹³è¡¡12345678910111213-(id)objectAtIndex:(NSUInteger)index&#123;__block id obj;dispatch_sync(self.concurrentQueue, ^&#123;obj = [self.arr objectAtIndex:index];&#125;);return obj;&#125;-(void)insertObject:(id)obj atIndex:(NSUInteger)index&#123;//ç”¨dispatch_barrier_asyncæ¥ç¡®ä¿å†™å…¥æ—¶çš„äº’æ–¥è®¿é—®dispatch_barrier_async(self.concurrentQueue, ^&#123;[self.arr insertObject:obj atIndex:index];&#125;);&#125; æ‰€éœ€çš„åªæ˜¯ä¸€ä¸ªconcurrentQueueå±žæ€§ï¼Œç”¨dispatch_queue_create å¸¦ä¸ŠDISPATCH_QUEUE_CONCUREENTé€‰é¡¹åˆ›å»ºã€‚åœ¨è¯»å–ä»£ç ä¸­ï¼Œç”¨dispatch_syncç­‰å¾…è¯»å–ç»“æŸã€‚åœ¨GCDä¸­åˆ›å»ºå¹¶åˆ†æ´¾å—çš„å¼€é”€å¾ˆå°ï¼Œæ‰€ä»¥è¿™ç§æ–¹æ³•æ¯”äº’æ–¥é”å¿«å¾ˆå¤šã€‚å¯¹äºŽå†™å…¥ä»£ç ï¼Œç”¨dispatch_barrier_asyncæ¥ç¡®ä¿å†™å…¥æ—¶çš„äº’æ–¥è®¿é—®ã€‚é€šè¿‡å¼‚æ­¥è°ƒç”¨ï¼Œå†™å…¥ä»£ç å¯ä»¥å¾ˆå¿«è¿”å›žã€‚ 3.3 åˆ†æ´¾ç»„åˆ†æ´¾ç»„ç±»ä¼¼äºŽNSOperationä¸­çš„ä¾èµ–å…³ç³»ï¼Œé¦–å…ˆï¼Œåˆ›å»ºä¸€ä¸ªç»„ï¼šdispatch_group_t group = dispatch_group_creat();æ³¨æ„ï¼š ç»„æœ¬èº«æ²¡æœ‰ä»»ä½•çš„é…ç½®é€‰é¡¹ï¼Œå®ƒä»¬æ²¡æœ‰ç»‘åˆ°ä»»ä½•é˜Ÿåˆ—ä¸Šï¼Œåªæ˜¯ä¸€ç»„å—ã€‚ä¸€èˆ¬é€šè¿‡dispatch_group_asyncæŠŠå—æ·»åŠ åˆ°ç»„ï¼Œç±»ä¼¼äºŽdispatch_async: dispatch_group_async(group, queue, block); ç„¶åŽç”¨dispatch_group_notifyæ³¨å†Œä¸€ä¸ªå—ï¼Œå³å½“ç»„æ‰§è¡Œå®Œæ¯•åŽè°ƒç”¨å®ƒï¼šdispatch_group_notify(group,queue,block); ç»„ä¸­æ‰€æœ‰çš„å—æ‰§è¡Œå®Œæ¯•æ—¶ï¼Œblockå°±ä¼šè¢«è°ƒåº¦åˆ°queueä¸Šã€‚å¯ä»¥é€šè¿‡åŒä¸€ä¸ªç»„çš„å¤šä¸ªé€šçŸ¥ï¼Œå¦‚æžœä½ æ„¿æ„çš„è¯ï¼Œä¹Ÿå¯ä»¥æŠŠè¿™äº›é€šçŸ¥å—è°ƒåº¦åœ¨ä¸åŒçš„é˜Ÿåˆ—ä¸Šã€‚å¦‚æžœè°ƒç”¨dispatch_group_notifyæ—¶é˜Ÿåˆ—ä¸Šæ²¡æœ‰ä»»ä½•çš„blockï¼Œé‚£ä¹ˆå°±ä¼šé©¬ä¸Šè§¦å‘é€šçŸ¥ã€‚å¯ä»¥åœ¨é…ç½®ç»„æ—¶ç”¨dispatch_suspend æš‚åœé˜Ÿåˆ—æ¥é˜»æ­¢è¿™ç§æƒ…å†µï¼Œé…ç½®å®ŒæˆåŽï¼Œç”¨dispatch_resumeå¯åŠ¨é˜Ÿåˆ— A B C D 4ä¸ªå¹¶å‘ä¸‹è½½ä»»åŠ¡ï¼Œæ€Žæ ·åœ¨ç¬¬ä¸€æ—¶é—´çŸ¥é“ä»»åŠ¡å…¨éƒ¨å®Œæˆï¼Ÿ12345dispatch_group_t group = dispatch_groupo_create();//å°†æŸä¸ªä»»åŠ¡æ”¾è¿›groupä¸­dispatch_group_async(group, dispatch_get_global_queue(0,0),^&#123;//ä»»åŠ¡ä»£ç 1&#125;);dispatch_group_async(group, dispatch_get_global_queue(0,0),^&#123;//ä»»åŠ¡ä»£ç 2&#125;);dispatch_group_notify(group, dispatch_get_main_queue(),^&#123;NSLog(@&quot;isover&quot;);&#125;); é¦–å…ˆè¿›è¡Œå¼‚æ­¥æ‰§è¡Œï¼Œå› ä¸ºdispatch_group_waitæ˜¯é˜»å¡žçš„ï¼Œforé‡Œé¢å®‰æŽ’äº†ä¸‰ä¸ªä»»åŠ¡ï¼Œè¿™ä¸‰ä¸ªä»»åŠ¡éƒ½æ˜¯åŠ è½½ï¼Œåœ¨ä»»åŠ¡å¼€å§‹å‰ è°ƒç”¨ enterï¼Œä»»åŠ¡å®Œæˆæ—¶è°ƒç”¨leaveï¼Œwaitå‡½æ•°ä¸€ç›´é˜»å¡žï¼Œç›´åˆ°å®ƒå‘çŽ°groupé‡Œé¢çš„ä»»åŠ¡å…¨éƒ¨leaveï¼Œå®ƒæ‰æ”¾å¼ƒé˜»å¡žï¼ˆä»»åŠ¡å…¨éƒ¨å®Œæˆï¼‰,ç„¶åŽæˆ‘ä»¬åœ¨ä¸»çº¿ç¨‹æ›´æ–°UIå‘ŠçŸ¥ç”¨æˆ·.123456789101112131415dispatch_async(dispatch_get_global_queue(0, 0), ^&#123;for (int i = 0; i &lt; 3; i ++)&#123;dispatch_group_enter(group);NSLog(@&quot;%d&quot;,i);dispatch_group_leave(group);&#125;&#125;);//dispatch_group_waitå‡½æ•°æ˜¯é˜»å¡žçš„dispatch_group_wait(group, DISPATCH_TIME_FOREVER);dispatch_async(dispatch_get_main_queue(), ^&#123;// ä¸»çº¿ç¨‹å¤„ç†NSLog(@&quot;over&quot;);&#125;);NSLog(@&quot;-----&quot;); å®žé™…ä¸Šï¼Œç»„å¹¶ä¸åƒè¿½è¸ªä»»åŠ¡é‚£ä¹ˆè¿½è¸ªå—ï¼Œå¯ä»¥ç›´æŽ¥ç”¨dispatch_group_enterå’Œdispatch_group_leaveå¢žåŠ å’Œå‡å°‘ä»»åŠ¡æ•°é‡ã€‚æ‰€ä»¥ï¼Œdispatch_group_asyncçš„æ•ˆæžœå’Œä¸‹é¢çš„ä»£ç ä¸€æ ·ï¼š]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[æˆªå›¾æ–¹æ³•]]></title>
      <url>%2F2017%2F03%2F21%2F%E6%88%AA%E5%9B%BE%E6%96%B9%E6%B3%95%2F</url>
      <content type="text"><![CDATA[123456789101112131415161718@implementation UIImage (ShotView)+(UIImage *)shopOfView:(UIView *)view&#123;BOOL b = CGRectIsEmpty(view.bounds);NSLog(@&quot;%d&quot;,b);UIGraphicsBeginImageContextWithOptions(view.bounds.size, NO, 0);//è¿™ä¸ªæ–¹æ³•drawViewHierarchyInRect:afterScreenUpdates:å‡ºçŽ°åœ¨iOS7ï¼Œæ‰€ä»¥è¿™é‡Œå…ˆåˆ¤æ–­æ˜¯å¦å®žçŽ°äº†è¿™ä¸ªæ–¹æ³•//ä¼˜å…ˆä½¿ç”¨è¿™ä¸ªæ–¹æ³•ï¼Œå®ƒæ¯”renderInContext:æ–¹æ³•æ¸²æŸ“é€Ÿåº¦ä¸Šå¿«15å€if ([view respondsToSelector:@selector(drawViewHierarchyInRect:afterScreenUpdates:)]) &#123;[view drawViewHierarchyInRect:view.bounds afterScreenUpdates:NO];&#125;else&#123;[view.layer renderInContext:UIGraphicsGetCurrentContext()];&#125;UIImage *image = UIGraphicsGetImageFromCurrentImageContext();UIGraphicsEndImageContext();return image;&#125;@end ä½¿ç”¨drawViewHierarchyInRect:afterScreenUpdates:å¯èƒ½å‡ºçŽ°çš„å´©æºƒåŽŸå› ï¼š(1)Frameä¸ºemptyæ—¶ä¼šå´©æºƒ(iOS7)åŠ å…¥åˆ¤æ–­1if(CGRectIsEmpty(view.frame))&#123;return nil;&#125; (2)å½“è§†å›¾å¿«é€Ÿåˆ‡æ¢æ—¶çš„å´©æºƒè¿™ä¸ªå´©æºƒæ˜¯ä½¿ç”¨äº†whileå¾ªçŽ¯è¿žç»­æˆªå±100æ¬¡webviewå‘çŽ°çš„,å´©æºƒä¸ºEXE_BAD_ACCESSåŽŸå› æ˜¯afterScreenUpdatesè®¾ç½®ä¸ºäº†YES.ä¸ºä»€ä¹ˆä¼šå´©æºƒå‘¢?å› ä¸ºè®¾ç½®ä¸ºYESåŽ,è¿™äº›æ–¹æ³•ä¼šç­‰åœ¨view updateç»“æŸåœ¨æ‰§è¡Œ,å¦‚æžœåœ¨updateç»“æŸå‰viewè¢«releaseäº†,ä¼šå‡ºçŽ°æ‰¾ä¸åˆ°viewçš„é—®é¢˜.æ‰€ä»¥éœ€è¦è®¾ç½®ä¸ºNO.]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[Core Animation]]></title>
      <url>%2F2017%2F03%2F20%2FCore-Animation%2F</url>
      <content type="text"><![CDATA[ä¸¤ç§ä¸»è¦çš„åŠ¨ç”»ç³»ç»Ÿï¼š è§†å›¾åŠ¨ç”»å’ŒCore Animationæ¡†æž¶ ä½ å°†äº†è§£åˆ°å¦‚ä½•ä½¿ç”¨Core Animationå›¾å±‚è¿›è¡Œç»˜åˆ¶åŠä»¥åŠå¦‚ä½•åœ¨äºŒç»´æˆ–ä¸‰ç»´ä¸­ç§»åŠ¨å›¾å±‚ã€‚ 1.è§†å›¾åŠ¨ç”» æ”¹å˜èƒŒæ™¯é¢œè‰²çš„åŠ¨ç”»åœ¨HUDå¼ç•Œé¢ä¸­å°¤ä¸ºæœ‰ç”¨ï¼Œå¯ä»¥åœ¨è¿‘ä¹Žé€æ˜Žä¸Žä¸é€æ˜Žçš„èƒŒæ™¯é—´åˆ‡æ¢ã€‚è¿™æ¯”å•çº¯æ”¹å˜alpha(é€æ˜Žåº¦)çš„åŠ¨ç”»æ•ˆæžœæ›´å¥½ã€‚ 2.ç®¡ç†ç”¨æˆ·äº¤äº’ å¾ˆå¤šæ—¶å€™ä¸åº”è¯¥å…è®¸ç”¨æˆ·åœ¨ä¸Šä¸€ä¸ªåŠ¨ç”»å‘½ä»¤æ‰§è¡Œçš„æ—¶å€™å‘é€æ–°çš„å‘½ä»¤ã€‚æ–¹æ³•æœ‰ä¸¤ç§ï¼š1.è§†å›¾åŠ¨ç”»ä¸­è‡ªåŠ¨åœæ­¢å“åº”ç”¨æˆ·äº¤äº’ã€‚å½“å®ƒå¤„äºŽåŠ¨ç”»çš„è¿‡ç¨‹å½“ä¸­ï¼Œè§¦æ‘¸å®ƒå¹¶ä¸ä¼šç”Ÿæˆä»»ä½•çš„äº‹ä»¶ã€‚æ‰€ä»¥åªè¦ä¿è¯åŠ¨ç”»çš„å‘èµ·è€…å’ŒåŠ¨ç”»çš„æ‰§è¡Œè€…æ˜¯åŒä¸€å¯¹è±¡å°±èƒ½å¤Ÿåšåˆ°åœ¨åŠ¨ç”»è¿‡ç¨‹ä¸­ç¦æ­¢äº¤äº’ã€‚2.å¤„åœ¨åŠ¨ç”»ä¸­å¿½ç•¥è§¦æ‘¸äº‹ä»¶ï¼Œä»£ç å¦‚ä¸‹ï¼š123456789101112-(void)dropAnimate:(UIGestureRecognizer *)recognizer&#123;[UIView animateWithDuration:3 animations:^&#123;recognizer.enabled = NO;self.circleView.center = CGPointMake(100, 300);&#125; completion:^(BOOL finished) &#123;[UIView animateWithDuration:1 animations:^&#123;self.circleView.center = CGPointMake(250, 300);&#125; completion:^(BOOL finished) &#123;recognizer.enabled = YES;&#125;];&#125;];&#125; ä¸è¿‡ä½ å¯èƒ½æƒ³è¦åœ¨åŠ¨ç”»è¿›è¡Œæ—¶å¯¹è§†å›¾ç¦ç”¨æ‰€æœ‰ç”¨æˆ·äº¤äº’ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œä½ å¯ä»¥ä½¿ç”¨self.view.userInteractionEnabledæ›¿æ¢recognizer.enabled. 3.ç»˜åˆ¶å›¾å±‚ è§†å›¾åŠ¨ç”»æœ‰å¾ˆå¤šé™åˆ¶ã€‚åŠ¨ç”»çš„åŸºæœ¬å•å…ƒæ˜¯UIViewï¼Œå®ƒæ˜¯éžå¸¸é‡é‡çº§çš„å¯¹è±¡ï¼Œæ‰€ä»¥ä¸èƒ½å¤šç”¨ã€‚ Core Animationä¸­æœ€åŸºç¡€ä¹Ÿæœ€é‡è¦çš„éƒ¨åˆ†æ˜¯CALayerã€‚ CALayeråœ¨å¾ˆå¤šæ–¹é¢éƒ½ä¸ŽUIViewéžå¸¸ç›¸ä¼¼ã€‚å®ƒæ‹¥æœ‰ä½ç½®ã€å¤§å°ã€å˜å½¢å’Œå†…å®¹ã€‚å¯ä»¥ç”¨Core Graphicsæ¥è¦†ç›–ç»˜åˆ¶æ–¹æ³•ä»¥ç»˜åˆ¶å®šåˆ¶å†…å®¹ã€‚ UIViewæ˜¯ä¸€ä¸ªç›¸å½“é‡é‡çº§çš„å¯¹è±¡ï¼Œå®ƒç®¡ç†ç€ç»˜åˆ¶ä¸Žäº‹ä»¶å¤„ç†ã€‚CALayerå®Œå…¨å…³ä¹Žç»˜åˆ¶ã€‚äº‹å®žä¸Šï¼ŒUIViewä¾é CALayeræ¥ç®¡ç†ç»˜åˆ¶ã€‚ æ¯ä¸ªUIViewéƒ½æœ‰ä¸€ä¸ªCALayerç”¨äºŽç»˜åˆ¶ã€‚ å›¾å±‚ä¼šåœ¨å®ƒçš„contentså±žæ€§(å³CGImage)ä¸­ç»˜åˆ¶ä»»æ„ä¸œè¥¿ã€‚ä½ éœ€è¦è´Ÿè´£è¿›è¡Œè®¾ç½®ï¼Œè¿™é‡Œæœ‰å¤šç§æ–¹æ³•å¯ç”¨ã€‚æœ€ç®€å•çš„ä¸€ç§æ–¹æ³•æ˜¯ç›´æŽ¥åˆ†é…ï¼Œå¦‚ä»¥ä¸‹ä»£ç 123UIImage *image = ...;CALayer *layer = ...;layer.contents = (id)[image CGImage]; å¦‚æžœä½ æ²¡æœ‰ç›´æŽ¥è®¾ç½®contentså±žæ€§ï¼ŒCora Animationä¼šæŒ‰ç…§ä»¥ä¸‹é¡ºåºé€šè¿‡CALayerå’Œå§”æ‰˜æ–¹æ³•æ¥åˆ›å»ºå®ƒã€‚(1)[CALayer setNeedsDisplay] : ä½ çš„ä»£ç éœ€è¦ç›´æŽ¥è°ƒç”¨å®ƒã€‚å®ƒä¼šå°†å›¾å±‚æ ‡è®°ä¸ºéœ€è¦é‡ç»˜çš„ï¼Œè¦æ±‚é€šè¿‡åˆ—è¡¨ä¸­çš„æ­¥éª¤æ¥æ›´æ–°contentsã€‚é™¤éžè°ƒç”¨äº†setNeedsDisplayæ–¹æ³•ï¼Œå¦åˆ™contentså±žæ€§æ°¸è¿œä¸ä¼šè¢«æ›´æ–°ã€‚(2)[CALayer displayIfNeeded]: ç»˜åˆ¶ç³»ç»Ÿä¼šåœ¨éœ€è¦æ—¶è‡ªåŠ¨è°ƒç”¨å®ƒã€‚å¦‚æžœå›¾å±‚è¢«é€šè¿‡è°ƒç”¨setNeedsDisplayæ ‡è®°ä¸ºéœ€è¦é‡ç»˜çš„ï¼Œç»˜åˆ¶ç³»ç»Ÿä¼šæŽ¥ç€æ‰§è¡ŒåŽç»­æ­¥éª¤ã€‚(3)[CALayer display]: displayIfNeededæ–¹æ³•ä¼šåœ¨ä½•æ—¶çš„æ—¶å€™è°ƒç”¨å®ƒã€‚å¼€å‘è€…ä¸åº”è¯¥è‡ªåŠ¨è°ƒç”¨å®ƒï¼Œå¦‚æžœå®žçŽ°äº†å§”æ‰˜æ–¹æ³•ï¼Œé»˜è®¤å®žçŽ°ä¼šè°ƒç”¨displayLayer:å§”æ‰˜æ–¹æ³•ã€‚å¦åˆ™ï¼Œdisplayæ–¹æ³•ä¼šè°ƒç”¨drawInContext:æ–¹æ³•ã€‚å¯ä»¥åœ¨å­ç±»ä¸­è¦†ç›–displayæ–¹æ³•ä»¥ç›´æŽ¥è®¾ç½®contentså±žæ€§ã€‚(4)[delegate displayLayer]: é»˜è®¤çš„[CALayer display]ä¼šåœ¨æ–¹æ³•å®žçŽ°è¿™ä¸ªæ–¹æ³•æ—¶è°ƒç”¨å®ƒã€‚å®ƒçš„ä»»åŠ¡æ˜¯è®¾ç½®contentsã€‚å¦‚æžœå®žçŽ°äº†è¿™ä¸ªæ–¹æ³•(å³ä½¿æ²¡æœ‰ä»€ä¹ˆæ“ä½œ),åŽé¢å°±ä¸ä¼šè¿è¡Œè‡ªå®šä¹‰çš„ç»˜åˆ¶ä»£ç ã€‚(5)[CALayer drawInContext:]:é»˜è®¤çš„displayæ–¹æ³•ä¼šåˆ›å»ºä¸€ä¸ªè§†å›¾å›¾å½¢ä¸Šä¸‹æ–‡å¹¶å°†å…¶ä¼ é€’ç»™drawInContextï¼šæ–¹æ³•ã€‚å®ƒä¸Ž[UIView drawRect:]æ–¹æ³•ç›¸ä¼¼ï¼Œä½†ä¸ä¼šè‡ªåŠ¨è®¾ç½®UIKitä¸Šä¸‹æ–‡ã€‚ä¸ºäº†ä½¿ç”¨UIKitæ¥ç»˜å›¾ï¼Œä½ éœ€è¦è°ƒç”¨UIGraphicsPushContext()æ–¹æ³•åˆ¶å®šæŽ¥æ”¶åˆ°çš„ä¸Šä¸‹æ–‡ä¸ºå½“å‰ä¸Šä¸‹æ–‡ã€‚å¦åˆ™ï¼Œå®ƒåªä¼šä½¿ç”¨Core Graphicsåœ¨æŽ¥æ”¶åˆ°çš„ä¸Šä¸‹æ–‡ä¸­ç»˜å›¾ã€‚é»˜è®¤çš„displayæ–¹æ³•èŽ·å–æœ€ç»ˆçš„ä¸Šä¸‹æ–‡ï¼Œåˆ›å»ºä¸€ä¸ªCGImageå¹¶å°†å…¶åˆ†é…ç»™contentsã€‚é»˜è®¤çš„[CALayer drawInContext:]ä¼šåœ¨æ–¹æ³•å·²å®žçŽ°æ—¶è°ƒç”¨[delegate drawLayer:inContext:].å¦åˆ™ï¼Œå°±ä¸æ‰§è¡Œä»»ä½•æ“ä½œã€‚æ³¨æ„ï¼Œä½ å¯ä»¥ç›´æŽ¥è°ƒç”¨è¿™ä¸ªæ–¹æ³•ã€‚(6)[delegate drawLayer:inContext:]:å¦‚æžœå®žçŽ°äº†è¿™ä¸ªæ–¹æ³•ï¼Œé»˜è®¤çš„drawInContext:ä¼šè°ƒç”¨è¿™ä¸ªæ–¹æ³•ä»¥æ›´æ–°ä¸Šä¸‹æ–‡ï¼Œä»Žè€Œä½¿displayæ–¹æ³•å¯ä»¥åˆ›å»ºCGImageã€‚ å¯ä»¥çœ‹è§ï¼Œæœ‰å¤šç§æ–¹æ³•å¯ä»¥è®¾ç½®å›¾å±‚çš„å†…å®¹ã€‚å¯ä»¥ç›´æŽ¥è°ƒç”¨setContents:æ–¹æ³•ï¼Œä¹Ÿå¯ä»¥é€šè¿‡å®žçŽ°displayæˆ–displayLayer:æ–¹æ³•åšåˆ°ï¼Œè¿˜å¯ä»¥å®žçŽ°drawInContext:æˆ–drawLayer:inContext:æ–¹æ³•ã€‚ ç»˜å›¾ç³»ç»Ÿå‡ ä¹Žä¸ä¼šåƒUIViewä¸€æ ·ç»å¸¸è‡ªåŠ¨æ›´æ–°å†…å®¹ã€‚æ¯”å¦‚è¯´ï¼ŒUIViewåœ¨å±å¹•ä¸Šç¬¬ä¸€æ¬¡å‡ºçŽ°æ—¶ä¼šå¯¹è‡ªèº«è¿›è¡Œç»˜åˆ¶ï¼Œè€ŒCALayeråˆ™ä¸ä¼šã€‚ä½¿ç”¨setNeedsDisplayæ–¹æ³•æ ‡è®°UIViewä¸ºéœ€è¦é‡ç»˜çš„ï¼Œè¿™æ ·å°±å¯ä»¥è‡ªåŠ¨ç»˜åˆ¶æ‰€æœ‰å­è§†å›¾äº†ã€‚ä½¿ç”¨setNeedsDisplayæ–¹æ³•æ ‡è®°CALayerä¸ºéœ€è¦ç»˜åˆ¶çš„åˆ™å¹¶ä¸ä¼šå¯¹å­è§†å›¾äº§ç”Ÿå½±å“ã€‚éœ€è¦è®°ä½çš„æ˜¯ï¼šUIViewé»˜è®¤ä¼šåœ¨å®ƒè®¤ä¸ºä½ éœ€è¦çš„æ—¶å€™ç»˜åˆ¶ï¼Œè€ŒCALayeré»˜è®¤åªä¼šåœ¨ä½ æ˜Žç¡®è¦æ±‚æ—¶ç»˜åˆ¶ã€‚CALayeræ˜¯å¾ˆåº•å±‚çš„å¯¹è±¡ï¼Œå®ƒç»è¿‡äº†ä¼˜åŒ–ï¼Œé™¤éžå¼€å‘è€…æ˜Žç¡®è¦æ±‚ï¼Œå¦åˆ™å®ƒä¸ä¼šæµªè´¹æ—¶é—´æ‰§è¡Œä»»ä½•æ“ä½œã€‚ 3.1 ç›´æŽ¥è®¾ç½®å†…å®¹123456UIImage *image = [UIImage imageNamed:@&quot;ä¸‹è½½&quot;];//ç›´æŽ¥è®¾ç½®contentsæ¥è®¾ç½®å†…å®¹çš„æ˜¾ç¤ºself.view.layer.contents = (id)[image CGImage];//ç±»ä¼¼äºŽUIViewä¸­çš„contentModeself.view.layer.contentsGravity = kCAGravityCenter;self.view.layer.contentsScale = [UIScreen mainScreen].scale; 3.2 å®žçŽ°displayæ–¹æ³•displayå’ŒdisplayLayer:æ–¹æ³•çš„è®¤è¯†æ˜¯æŠŠcontentså±žæ€§è®¾ç½®ä¸ºåˆé€‚çš„CGImageã€‚ä½ å¯ä»¥ä½¿ç”¨ä»»ä½•æ–¹æ³•åšåˆ°è¿™ä¸€ç‚¹ã€‚é»˜è®¤çš„å®žçŽ°æ˜¯åˆ›å»ºä¸€ä¸ªCGContextï¼Œå¹¶å°†å…¶ä¼ é€’ç»™drawInContext:æ–¹æ³•ï¼Œç»˜åˆ¶ç»“æžœåœ¨CGImageä¸Šï¼Œç„¶åŽå¤åˆ¶ç»™contentsã€‚ä¸€èˆ¬è¦†ç›–æ–¹æ³•çš„åŽŸå› æ˜¯å›¾å±‚æœ‰å¤šç§çŠ¶æ€å¹¶ä¸”éƒ½æœ‰å„è‡ªçš„å›¾ç‰‡ï¼ŒæŒ‰é’®é€šå¸¸å°±æ˜¯è¿™æ ·ã€‚é€šè¿‡æ–‡ä»¶æŸ(bundle)åŠ è½½ã€ç”¨Core Graphicsç»˜åˆ¶æˆ–å…¶ä»–æ–¹æ³•éƒ½å¯ä»¥ã€‚åˆ°åº•æ˜¯åˆ›å»ºCALayerçš„å­ç±»è¿˜æ˜¯ä½¿ç”¨å§”æ‰˜å®Œå…¨å–å†³äºŽä¸ªäººçš„å–œå¥½å’Œæ˜¯å¦æ–¹ä¾¿ã€‚UIViewåŒ…å«äº†ä¸€ä¸ªå›¾å±‚ï¼Œè€Œä¸”å®ƒå¿…é¡»æ˜¯è¯¥å›¾å±‚çš„å§”æ‰˜ã€‚æ ¹æ®æˆ‘çš„ç»éªŒï¼Œæœ€å¥½ä¸è¦å°†UIViewä½œä¸ºä»»ä½•å­è§†å›¾çš„å§”æ‰˜ã€‚è¿™æ ·åšä¼šè®©UIViewåœ¨æ‰§è¡ŒæŸäº›å¤åˆ¶å­è§†å›¾çš„æ“ä½œ(æ¯”å¦‚è¿‡æ¸¡)æ—¶å‡ºçŽ°æ— é™æ­»å¾ªçŽ¯ã€‚å› æ­¤ï¼Œä½ å¯ä»¥åœ¨UIViewä¸­å®žçŽ°displayLayer:æ–¹æ³•æ¥ç®¡ç†å®ƒçš„å›¾å±‚ã€‚æˆ–è€…å°†å…¶ä»–å¯¹è±¡ä½œä¸ºå­å›¾å±‚çš„å§”æ‰˜ã€‚åœ¨æˆ‘ä»¬çœ‹æ¥ï¼Œåœ¨UIViewä¸­å®žçŽ°displayLayer:æ–¹æ³•æ„ä¹‰ä¸å¤§ã€‚å¦‚æžœä½ çš„è§†å›¾å†…å®¹åªæ˜¯ä¸€äº›å›¾ç‰‡ï¼Œä¸€èˆ¬å»ºè®®ä½¿ç”¨UIImageViewæˆ–ä¸€ä¸ªUIButtonï¼Œè¿™ç§æ–¹å¼æ¯”ä½¿ç”¨æ‰‹å·¥åŠ è½½å›¾å±‚å†…å®¹çš„è‡ªå®šä¹‰UIViewè¦å¥½ä¸€äº›ã€‚UIImageViewé’ˆå¯¹å›¾ç‰‡æ˜¾ç¤ºè¿›è¡Œè¿‡é«˜åº¦ä¼˜åŒ–UIButtonæ“…é•¿æ ¹æ®çŠ¶æ€è¿›è¡Œå›¾ç‰‡åˆ‡æ¢ï¼Œå¹¶ä¸”æ‹¥æœ‰å¾ˆå¤šä¼˜ç§€çš„ç”¨æˆ·ç•Œé¢æœºåˆ¶ï¼Œè€Œè¦é‡åˆ¶è¿™äº›æœºåˆ¶æ˜¯å¾ˆéº»çƒ¦çš„äº‹ã€‚ä¸è¦åœ¨Core Animationä¸­å½»åº•æ”¹é€ UIKitã€‚UIKitçš„é»˜è®¤åŠŸèƒ½ææ€–æ¯”ä½ å®žçŽ°çš„è¦å¥½ã€‚æ›´æœ‰æ„ä¹‰çš„å¯èƒ½æ˜¯å°†UIViewControllerä½œä¸ºå›¾å±‚çš„å§”æ‰˜ï¼Œå°¤å…¶æ˜¯åœ¨æ²¡æœ‰åˆ›å»ºUIViewçš„å­ç±»çš„æ—¶å€™ï¼Œå¦‚æžœä½ çš„éœ€æ±‚æ˜¯å¾ˆç®€å•çš„è¯ï¼Œè¿™æ ·å¯ä»¥é¿å…ä½¿ç”¨å…¶ä»–å¯¹è±¡æˆ–å­ç±»ã€‚åªæ˜¯ï¼Œä¸è¦è®©ä½ çš„UIViewcontrollerè¿‡äºŽå¤æ‚ã€‚ 3.3 è‡ªå®šä¹‰ç»˜åˆ¶ ä¸ŽUIViewç±»ä¼¼ï¼Œä¹Ÿå¯ä»¥å®Œå…¨è®©CALayerå®žçŽ°è‡ªå®šä¹‰ç»˜å›¾ã€‚ä¸€èˆ¬å¯ä»¥ä½¿ç”¨Core Graphicsæ¥ç»˜åˆ¶ã€‚ä¸è¿‡ä½¿ç”¨UIGraphicsPushContextæ–¹æ³•çš„è¯ï¼Œä¹Ÿå¯ä»¥é€šè¿‡UIKitç»˜åˆ¶ã€‚ ä½¿ç”¨drawInContext:æ–¹æ³•æ˜¯è®¾ç½®contentsçš„å¦ä¸€ç§æ–¹æ³•ã€‚å®ƒæ˜¯é€šè¿‡displayæ–¹æ³•è°ƒç”¨ã€‚è€Œdisplayæ–¹æ³•åªæœ‰å½“ä½ é€šè¿‡setNeedsDisplayæ–¹æ³•æ˜Žç¡®æ ‡è®°å›¾å±‚éœ€è¦é‡ç»˜æ—¶è¢«è°ƒç”¨ã€‚ä¸Žç›´æŽ¥è®¾ç½®contentsçš„æ–¹æ³•ç›¸æ¯”ï¼Œè¿™é‡Œçš„ä¼˜åŠ¿åœ¨äºŽdisplayä¼šè‡ªåŠ¨åˆ›å»ºé€‚ç”¨äºŽå›¾å±‚çš„CGContextã€‚ç‰¹åˆ«æ˜¯åæ ‡ç³»ç»Ÿçš„ç¿»è½¬ã€‚ä»¥ä¸‹ä»£ç å±•ç¤ºäº†å¦‚ä½•å®žçŽ°å§”æ‰˜æ–¹æ³•drawLayer:inContext:ï¼Œä»¥ä¾¿åœ¨å›¾å±‚é¡¶ç«¯é€šè¿‡UIKitç»˜åˆ¶å­—ç¬¦ä¸²ã€‚å› ä¸ºCore Animationä¸ä¼šè®¾ç½®UIKitä¸Šä¸‹æ–‡å†…å®¹ï¼Œæ‰€ä»¥ä½ éœ€è¦åœ¨è°ƒç”¨UIKitæ–¹æ³•ä¹‹å‰è°ƒç”¨UIGraphicsPushContextæ–¹æ³•ï¼Œå¹¶åœ¨ä»£ç ç»“æŸä¹‹å‰è°ƒç”¨UIGraphicsPopContextæ–¹æ³•ã€‚1234567891011121314151617181920212223242526272829303132333435363738394041@implementation DelegateView/*** åˆ›å»ºUIViewçš„æ—¶å€™ï¼Œå®Œæˆå¯¹è‡ªèº«layerå±‚çš„åˆå§‹è®¾ç½®**/-(void)awakeFromNib&#123;[super awakeFromNib];[self initialization];&#125;-(instancetype)initWithFrame:(CGRect)frame&#123;self = [super initWithFrame:frame];if (self) &#123;[self initialization];&#125;return self;&#125;-(void)initialization&#123;//å›¾å±‚çš„ç»˜åˆ¶éœ€è¦æ‰‹åŠ¨è°ƒç”¨setNeedsDisplay,å›¾å±‚åœ¨å±å¹•ä¸Šæ˜¾ç¤ºæ—¶ä¸èƒ½è‡ªåŠ¨é‡å›žè‡ªèº«ã€‚éœ€è¦æ‰‹åŠ¨æ ‡è®°[self.layer setNeedsDisplay];[self.layer setContentsScale:[UIScreen mainScreen].scale];&#125;//ç”±-drawInContext: defalut implementationè°ƒç”¨-(void)drawLayer:(CALayer *)layer inContext:(CGContextRef)ctx&#123;UIGraphicsPushContext(ctx);[[UIColor whiteColor] set];UIRectFill(layer.bounds);UIFont *font = [UIFont preferredFontForTextStyle:UIFontTextStyleHeadline];UIColor *color = [UIColor blackColor];NSMutableParagraphStyle *style = [NSMutableParagraphStyle new];[style setAlignment:NSTextAlignmentCenter];NSDictionary *attribs = @&#123;NSFontAttributeName: font,NSForegroundColorAttributeName: color,NSParagraphStyleAttributeName: style&#125;;NSAttributedString *text = [[NSAttributedString alloc] initWithString:@&quot;Pushing The Limits&quot; attributes:attribs];[text drawInRect:CGRectInset([layer bounds], 10, 100)];UIGraphicsPopContext();&#125;@end å½“ä½¿ç”¨drawLayer:inContext:è¿›è¡Œè‡ªå®šä¹‰ç»˜å›¾æ—¶ï¼Œå¤§éƒ¨åˆ†è‡ªåŠ¨å›¾å±‚è®¾ç½®(æ¯”å¦‚backgroundColorå’ŒcornerRadius)ä¼šè¢«å¿½ç•¥ã€‚å¦‚æžœä½ æƒ³è¦å®žçŽ°è‡ªå®šä¹‰ç»˜å›¾ä¸Žåœ†è§’æ•ˆæžœç­‰å›¾å±‚æ•ˆæžœï¼Œå¯ä»¥åœ¨å­å›¾å±‚ä¸Šè¿›è¡Œè‡ªå®šä¹‰ç»˜åˆ¶å¹¶åœ¨çˆ¶å›¾å±‚ä¸Šä½¿ç”¨åœ†è§’ã€‚3.4 åœ¨è‡ªå·±çš„ä¸Šä¸‹æ–‡ä¸­ç»˜å›¾ä¸Ž[UIView drawRect:]ä¸åŒï¼Œä½ å®Œå…¨å¯ä»¥è°ƒç”¨[CALayer drawInContext:]æ–¹æ³•ã€‚åªéœ€è¦ç”Ÿæˆä¸€ä¸ªä¸Šä¸‹æ–‡å¹¶å°†å…¶ä¼ é€’è¿›åŽ»ï¼Œè¿™æ ·ä¾¿äºŽæ•æ‰å›¾å±‚å†…å®¹åˆ°ä½å›¾æˆ–PDFï¼Œç„¶è€Œä½ å°±å¯ä»¥ä¿å­˜æˆ–æ‰“å°å®ƒäº†ã€‚å¦‚æžœæƒ³è¦æ‹¼åˆå›¾å±‚ï¼Œåƒè¿™æ ·è°ƒç”¨drawInContext:ä¼šå¾ˆæœ‰å¸®åŠ©ï¼Œå› ä¸ºå¦‚æžœä½ æƒ³è¦çš„åªæ˜¯ä½å›¾ï¼Œç›´æŽ¥ä½¿ç”¨contentså°±å¯ä»¥äº†ã€‚drawInContext:åªåœ¨å½“å‰å›¾å±‚ç»˜åˆ¶(ä¸åŒ…æ‹¬å…¶ä»»ä½•å­å›¾å±‚)ã€‚è¦ç»˜åˆ¶å›¾å±‚åŠå…¶å­å›¾å±‚ï¼Œå¯ä»¥ä½¿ç”¨renderInContext:æ–¹æ³•ï¼Œå®ƒå¯ä»¥æ•æ‰å½“å‰åŠ¨ç”»çš„çŠ¶æ€ã€‚ è¡¥å……ï¼š1.drawInContext:çš„ä½¿ç”¨ç¤ºä¾‹ä»£ç ï¼š1234567891011-(void)touchesBegan:(NSSet&lt;UITouch *&gt; *)touches withEvent:(UIEvent *)event&#123;//å¼€å¯ä¸€ä¸ªä½å›¾ä¸Šä¸‹æ–‡UIGraphicsBeginImageContextWithOptions(self.bounds.size, NO, 0);CGContextRef ctx = UIGraphicsGetCurrentContext();//è¿™ä¸ªæ–¹æ³•çš„è°ƒç”¨çš„é»˜è®¤å®žçŽ°ä¼šè°ƒç”¨drawLayer:inContext:åœ¨è¿™ä¸ªæ–¹æ³•ä¸­å®Œæˆç»˜åˆ¶ã€‚[self.layer drawInContext:ctx];UIImage *image = UIGraphicsGetImageFromCurrentImageContext();UIGraphicsEndImageContext();NSData *imageData = UIImagePNGRepresentation(image);[imageData writeToFile:@&quot;/Users/xxx/Desktop/testImg.png&quot; atomically:YES];&#125; 2.renderInContext://iOS 7ä¸ŠUIViewä¸Šæä¾›äº†drawViewHierarchyInRect:afterScreenUpdates:æ¥æˆªå›¾ï¼Œé€Ÿåº¦æ¯”renderInContext:å¿«15å€12345678UIGraphicsBeginImageContextWithOptions(self.bounds.size, NO, 0);CGContextRef ctx = UIGraphicsGetCurrentContext();//è¿™ä¸ªæ–¹æ³•çš„å†…éƒ¨å¹¶ä¸ä¼šè°ƒç”¨åˆ°drawLayer:inContext:[self.layer renderInContext:ctx];UIImage *image = UIGraphicsGetImageFromCurrentImageContext();UIGraphicsEndImageContext();NSData *imageData = UIImagePNGRepresentation(image);[imageData writeToFile:@&quot;/Users/xxx/Desktop/testImg.png&quot; atomically:YES]; 4.ç§»åŠ¨å¯¹è±¡ðŸ‘‰å›¾å±‚é»˜è®¤å°±æ˜¯å®žçŽ°åŠ¨ç”»çš„ðŸ‘ˆäº‹å®žä¸Šï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡å°‘é‡çš„å·¥ä½œé˜»æ­¢åŠ¨ç”»æ‰§è¡Œ.12345678910111213141516171819202122232425262728- (void)viewDidLoad &#123;[super viewDidLoad];CALayer *squareLayer = [CALayer layer];squareLayer.backgroundColor = [[UIColor redColor] CGColor];squareLayer.frame = CGRectMake(100, 100, 20, 20);[self.view.layer addSublayer:squareLayer];UIView *squareView = [UIView new];squareView.backgroundColor = [UIColor blueColor];squareView.frame = CGRectMake(200, 100, 20, 20);[self.view addSubview:squareView];[self.view addGestureRecognizer:[[UITapGestureRecognizer alloc]initWithTarget:selfaction:@selector(drop:)]];&#125;//éœ€è¦æ³¨æ„çš„æ˜¯æ˜¯ï¼Œè¿™é‡Œåœ¨æ‰“å¼€autoLayoutçš„æ—¶å€™ï¼Œä¸ä¼šäº§ç”Ÿä»»ä½•çš„ç§»åŠ¨ï¼Œå½“å…³é—­autolayotuçš„æ—¶å€™ï¼ŒåŠ¨ç”»äº§ç”Ÿ- (void)drop:(UIGestureRecognizer *)recognizer &#123;NSArray *layers = self.view.layer.sublayers;CALayer *layer = [layers objectAtIndex:0];CGPoint toPoint = CGPointMake(200, 250);[layer setPosition:toPoint];NSArray *views = self.view.subviews;UIView *view = [views objectAtIndex:0];[view setCenter:CGPointMake(100, 250)];&#125; è¿™æ®µä»£ç å½“ç‚¹å‡»è§†å›¾æ—¶ï¼Œå®ƒä»¬éƒ½ä¼šç§»åŠ¨ã€‚è§†å›¾ä¼šç«‹åˆ»è¹¦åˆ°æ–°çš„ä½ç½®ä¸Šã€‚å›¾å±‚åŠ¨ç”»æŒç»­ç¨å¤§äºŽ1/4ç§’ã€‚å¾ˆå¿«ï¼Œä¸è¿‡ä¸åƒè§†å›¾é‚£ä¹ˆè¿…é€Ÿã€‚CALayeréšå¼ä¸ºæ‰€æœ‰æ”¯æŒåŠ¨ç”»çš„å±žæ€§æ·»åŠ åŠ¨ç”»ã€‚(Animatableæ ‡è®°çš„å±žæ€§)ä½ å¯ä»¥ç¦æ­¢åŠ¨ç”»æ¥é˜»æ­¢åŠ¨ç”»1[CATransaction setDisableActions:YES]; 4.1 éšå¼åŠ¨ç”»ï¼šå¯ä»¥çœ‹è§ï¼Œåªéœ€è¦è®¾ç½®å›¾å±‚å±žæ€§ï¼Œå›¾å±‚å°±ä¼šä»¥é»˜è®¤æ–¹å¼æ‰§è¡ŒåŠ¨ç”»ã€‚ä¸è¿‡ï¼Œå¯èƒ½ä½ å¹¶ä¸å–œæ¬¢é»˜è®¤çš„è®¾å®šï¼Œå½“éœ€è¦æ›´æ”¹åŠ¨ç”»çš„æŒç»­æ—¶é—´ï¼Œéœ€è¦ç†è§£äº‹åŠ¡(transaction).Core AnimationæŠŠå±žæ€§çš„æ›´æ”¹ç»‘å®šåˆ°äº†åŽŸå­äº‹åŠ¡(CATransaction),å½“ä½ é¦–æ¬¡åœ¨ä¸€ä¸ªðŸ‘‰åŒ…å«è¿è¡Œå¾ªçŽ¯çš„çº¿ç¨‹ðŸ‘ˆä¸­ä¿®æ”¹ä¸€ä¸ªå›¾å±‚æ—¶,ç³»ç»Ÿä¼šä¸ºä½ åˆ›å»ºä¸€ä¸ªéšå¼CATransactionã€‚åœ¨è¿è¡Œå¾ªçŽ¯ä¸­ï¼Œæ‰€æœ‰çš„å›¾å±‚ä¿®æ”¹éƒ½ä¼šè¢«æ”¶é›†èµ·æ¥ï¼Œå½“è¿è¡Œç»“æŸçš„æ—¶å€™ï¼Œæ‰€æœ‰çš„ä¿®æ”¹éƒ½ä¼šè¢«æäº¤åˆ°å›¾å±‚æ ‘ã€‚å¦‚æžœéœ€è¦ä¿®æ”¹åŠ¨ç”»ï¼Œéœ€è¦å¯¹å½“å‰äº‹åŠ¡è¿›è¡Œä¿®æ”¹ã€‚æ¯”å¦‚æ›´æ”¹å½“å‰äº‹åŠ¡çš„æŒç»­æ—¶é—´1[CATransaction setAnimationDuration:2.0]; ä½¿ç”¨[CATransaction setCompletionBlock:]è®¾ç½®ä¸€ä¸ªå®Œæˆä»£ç å—ï¼Œå½“å½“å‰äº‹åŠ¡å®ŒæˆåŠ¨ç”»åŽè¿è¡Œã€‚å¯ä»¥ä½¿ç”¨è¿™ç§æ–¹å¼ðŸ‘‰é“¾æŽ¥å¤šä¸ªåŠ¨ç”»ðŸ‘ˆè™½ç„¶è¿è¡Œå¾ªçŽ¯ä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªäº‹åŠ¡ï¼Œä½†ä½ å¯ä»¥é€šè¿‡[CATransaction begin]å’Œ[CATransaction commit]åˆ›å»ºè‡ªå·±çš„æ˜¾ç¤ºäº‹åŠ¡ã€‚ 4.2 æ˜¾å¼åŠ¨ç”»1234567CABasicAnimation *anim = [CABasicAnimation animationWithKeyPath:@&quot;opacity&quot;];anim.fromValue = @1.0;anim.toValue = @0.0;anim.autoreverses = YES;anim.repeatCount = INFINITY;anim.duration = 2.0;[CALayer addAnimation:anim forKey:@&quot;anim&quot;]; ç§»é™¤è¿™ä¸ªåŠ¨ç”»1[CALayer removeAnimationForKey:@&quot;anim&quot;]; å¦‚æžœå›¾å±‚ä¸­æœ‰è‡ªå®šä¹‰å±žæ€§ï¼Œä½ å¯èƒ½ä¼šæ³¨æ„åˆ°å®ƒä»¬åœ¨åŠ¨ç”»è¿è¡Œä¸­æ²¡æœ‰è¢«æ­£ç¡®è®¾ç½®ã€‚è¿™æ˜¯å› ä¸ºå›¾å±‚è¢«å¤åˆ¶äº†ã€‚ 4.3 æ¨¡åž‹ä¸Žè¡¨ç¤ºé—ªå›žå†çŽ°ï¼š123456CABasicAnimation *fade;fade = [CABasicAnimation animationWithKeyPath:@&quot;opacity&quot;];fade.duration = 1.0;fade.fromValue = @1.0;fade.toValue = @0.0;[CALayer addAnimation:fade forKey:@&quot;fade&quot;]; æ¨¡åž‹å±‚æ˜¯ç”±çœŸæ­£çš„CALayerå¯¹è±¡çš„å±žæ€§å®šä¹‰çš„ã€‚CAAnimationåˆ›å»ºäº†CALayerçš„å‰¯æœ¬å¹¶å¯¹å…¶è¿›è¡Œä¿®æ”¹ï¼Œä½¿å…¶å˜æˆè¡¨ç¤ºå±‚ã€‚ CAAnimationä¿®æ”¹äº†è¡¨ç¤ºå±‚ï¼Œè¡¨ç¤ºå±‚å°†è¢«ç»˜åˆ¶åˆ°å±å¹•ï¼Œç»˜åˆ¶å®ŒæˆåŽï¼Œæ‰€æœ‰çš„æ›´æ”¹éƒ½ä¼šä¸¢å¤±å¹¶ç”±æ¨¡åž‹å±‚å†³å®šæ–°çš„çŠ¶æ€ã€‚è§£å†³åŠžæ³•å¦‚ä¸‹ï¼š123456789//è¿™é‡Œçš„æ¨¡åž‹çŠ¶æ€ä¸º0.å½“åŠ¨ç”»ç»“æŸçš„æ—¶å€™ï¼Œå›¾å±‚çš„çŠ¶æ€å°†åœç•™åœ¨æ¨¡åž‹çŠ¶æ€ã€‚layer.opacity = 0;CABasicAnimation *fade;fade = [CABasicAnimation animationWithKeyPath:@&quot;opacity&quot;];//è¿™é‡Œå°†æ˜¾ç¤ºå‡ºopacityä»Ž1åˆ°0çš„å˜åŒ–ï¼Œå¹¶ä¸”åŠ¨ç”»ç»“æŸçš„æ—¶å€™åœç•™åœ¨0.fade.duration = 1.0;fade.fromValue = @1.0;fade.toValue = @0.0;[layer addAnimation:fade forkey:@&quot;opacity&quot;]; æœ‰æ—¶å®ƒèƒ½æ­£ç¡®å·¥ä½œï¼Œä½†æ˜¯æœ‰æ—¶opacity:ä¸­çš„éšå¼åŠ¨ç”»ä¼šä¸ŽanimationWithKeyPath:çš„æ˜¾ç¤ºåŠ¨ç”»å†²çªã€‚æ‰€ä»¥æœ€å¥½çš„è§£å†³åŠžæ³•æ˜¯åœ¨æ‰§è¡Œæ˜¾å¼åŠ¨ç”»æ—¶å…³é—­éšå¼åŠ¨ç”»ï¼š123456789[CATransaction begin];//æ‰§è¡Œæ˜¾å¼åŠ¨ç”»ï¼Œå…³é—­éšå¼åŠ¨ç”»[CATransaction setDisableActions:YES];layer.opacity = 0;CABasicAnimation *fade;fade = [CABasicAnimation animationWithKeyPath:@&quot;opacity&quot;];...[layer addAnimation:fade forKey:@&quot;fade&quot;];[CATransaction commit]; 4.4 å…³äºŽå®šæ—¶ï¼šCore Animationä¸­çš„æ—¶é—´æ˜¯ç›¸å¯¹çš„ã€‚ä¸€ç§’æ—¶é—´å¹¶ä¸ä¸€å®šæ˜¯ä¸€ç§’é’Ÿï¼Œä¸Žåæ ‡ä¸€æ ·ï¼Œæ—¶é—´æ˜¯å¯ä»¥ç¼©æ”¾çš„ã€‚ CAAnimaition éµå®ˆCAMediaTimingåè®®ï¼Œå¯ä»¥è®¾ç½®å…¶speedå±žæ€§æ¥ç¼©æ”¾å®ƒçš„æ—¶é—´è·¨åº¦ã€‚å› æ­¤è‹¥è¦æ‰§è¡Œå›¾å±‚ä¹‹é—´çš„æ—¶é—´ï¼Œéœ€è¦å¯¹å®ƒè¿›è¡Œè½¬æ¢ï¼Œå°±åƒè½¬æ¢ä¸åŒè§†å›¾æˆ–å›¾å±‚ä¸­çš„ç‚¹ä¸€æ ·12localPoint = [self convertPoin:remotePoint fromLayer:otherLayer];localTime = [self convertTime:remotetime fromLayer:otherLayer]; è¿™ç§æƒ…å†µå¹¶ä¸å¤šè§ï¼Œä½†åœ¨åè°ƒåŠ¨ç”»æ—¶ä¼šå‡ºçŽ°ã€‚ä½ å¯èƒ½ä¼šä½¿ç”¨å…¶ä»–å›¾å±‚çš„ç‰¹å®šåŠ¨ç”»ï¼Œåœ¨åŠ¨ç”»è¦ç»“æŸæ—¶ä¾¿å¼€å§‹è‡ªå·±çš„åŠ¨ç”»ã€‚123CAAnimation *otherAnim = [layer animationForKey:@&quot;anim&quot;];CFTimeInterval finish = otherAnim.beginTime + otherAnim.duration;myAnim.beginTime = [self convertTime:finish fromeLayer: layer]; å¦‚æžœæƒ³è¦å¼•ç”¨å½“å‰æ—¶é—´ï¼Œå¯ä»¥ä½¿ç”¨CACurrentMediaTime(). 12345678910111213141516CALayer *squareLayer = [CALayer layer];squareLayer.backgroundColor = [[UIColor redColor] CGColor];squareLayer.frame = CGRectMake(100, 100, 20, 20);[self.view.layer addSublayer:squareLayer];[CATransaction begin];CABasicAnimation *anim;anim = [CABasicAnimation animationWithKeyPath:@&quot;opacity&quot;];anim.fillMode = kCAFillModeBoth;anim.fromValue = @1.0;anim.toValue = @0.5;anim.duration = 5.0;anim.beginTime = CACurrentMediaTime() + 3.0;[squareLayer addAnimation:anim forKey:@&quot;fade&quot;];squareLayer.opacity = 0.5;[CATransaction commit]; åœ¨å›¾å±‚ä¸­ï¼Œå¯ä»¥é€šè¿‡æ·»åŠ è§†è§’æ¥åº”ç”¨ä¸‰ç»´å˜å½¢ã€‚è¿™å¸¸ç§°ä¸º2.5Dã€‚æ—‹è½¬å›¾å±‚åŸºäºŽä¸€ä¸ªé”šç‚¹è¿›è¡Œã€‚ä¸‰ç»´åŠ¨ç”»12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576@implementation ViewControllerconst CGFloat kSize = 100.;const CGFloat kPanScale = 1./100.;-(CALayer *)layerWithColor:(UIColor *)color transform:(CATransform3D)transform&#123;CALayer *layer = [CALayer layer];layer.backgroundColor = [color CGColor];layer.bounds = CGRectMake(0, 0, kSize, kSize);//è®¾ç½®positionlayer.position = self.view.center;layer.transform = transform;[self.view.layer addSublayer:layer];return layer;&#125;static CATransform3D MakePerspectiveTransform() &#123;CATransform3D perspective = CATransform3DIdentity;perspective.m34 = -1./2000.;return perspective;&#125;- (void)viewDidLoad &#123;[super viewDidLoad];CATransform3D transform;transform = CATransform3DMakeTranslation(0, -kSize/2, 0);transform = CATransform3DRotate(transform, M_PI_2, 1.0, 0, 0);self.topLayer = [self layerWithColor:[UIColor redColor]transform:transform];transform = CATransform3DMakeTranslation(0, kSize/2, 0);transform = CATransform3DRotate(transform, M_PI_2, 1.0, 0, 0);self.bottomLayer = [self layerWithColor:[UIColor greenColor]transform:transform];transform = CATransform3DMakeTranslation(kSize/2, 0, 0);transform = CATransform3DRotate(transform, M_PI_2, 0, 1, 0);self.rightLayer = [self layerWithColor:[UIColor blueColor]transform:transform];transform = CATransform3DMakeTranslation(-kSize/2, 0, 0);transform = CATransform3DRotate(transform, M_PI_2, 0, 1, 0);self.leftLayer = [self layerWithColor:[UIColor cyanColor]transform:transform];transform = CATransform3DMakeTranslation(0, 0, -kSize/2);transform = CATransform3DRotate(transform, 0, 0, 0, 0);self.backLayer = [self layerWithColor:[UIColor yellowColor]transform:transform];transform = CATransform3DMakeTranslation(0, 0, kSize/2);transform = CATransform3DRotate(transform, 0, 0, 0, 0);self.frontLayer = [self layerWithColor:[UIColor magentaColor]transform:transform];self.view.layer.sublayerTransform = MakePerspectiveTransform();UIGestureRecognizer *g = [[UIPanGestureRecognizer alloc]initWithTarget:selfaction:@selector(pan:)];[self.view addGestureRecognizer:g];&#125;- (void)pan:(UIPanGestureRecognizer *)recognizer &#123;CGPoint translation = [recognizer translationInView:self.view];CATransform3D transform = MakePerspectiveTransform();transform = CATransform3DRotate(transform,kPanScale * translation.x,0, 1, 0);transform = CATransform3DRotate(transform,-kPanScale * translation.y,1, 0, 0);//sublayerTransform ä¸€ä¸ªé’ˆå¯¹æ‰€æœ‰å­è§†å›¾å±‚ä½†å¯¹å½“å‰å›¾å±‚æ— æ•ˆçš„å˜å½¢ self.view.layer.sublayerTransform = transform;&#125;@end åœ¨è¿™é‡Œæ‰€æœ‰çš„å›¾å±‚æ‹¥æœ‰ç›¸åŒçš„positionã€‚ï¼Œå®ƒä»¬åªæ˜¯æŠŠæ–¹å½¢ç»è¿‡å¹³ç§»å’Œæ—‹è½¬çš„å˜å½¢ç»“æžœå½¢çŠ¶æ˜¾ç¤ºåœ¨å±å¹•ä¸Šã€‚3Då˜å½¢çŸ©é˜µçš„m34ä½ç½®åº”è¯¥è®¾ç½®ä¸º-1/EYE_DISTANCE.å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œ2000ä¸ªå•ä½å°±å¯ä»¥åšåˆ°å¾ˆå¥½äº†ã€‚ 6.ç¾ŽåŒ–åœŸå›¾å±‚ 12345678910-(void)touchesBegan:(NSSet&lt;UITouch *&gt; *)touches withEvent:(UIEvent *)event&#123;CALayer *layer = self.layer;[CATransaction begin];[CATransaction setAnimationDuration:2];layer.cornerRadius = 10;layer.borderWidth = 5;layer.shadowOpacity = 0.5;layer.shadowOffset = CGSizeMake(3.0, 3.0);[CATransaction commit];&#125; 7.ç”¨åŠ¨ä½œå®žçŽ°è‡ªåŠ¨åŠ¨ç”»é€šè¿‡CATransactionå…³é—­éšå¼åŠ¨ç”»ï¼Œåªå¯¹å½“å‰äº‹åŠ¡(é€šå¸¸å°±æ˜¯å½“å‰çš„è¿è¡Œå¾ªçŽ¯)æœ‰æ•ˆ]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[åˆ©ç”¨CFAbsoluteTimeGetCurrent() è®¡ç®—æ—¶é—´å·®]]></title>
      <url>%2F2017%2F03%2F19%2F%E5%88%A9%E7%94%A8CFAbsoluteTimeGetCurrent-%E8%AE%A1%E7%AE%97%E6%97%B6%E9%97%B4%E5%B7%AE%2F</url>
      <content type="text"><![CDATA[å¼€å‘ä¸­ï¼Œé‡åˆ°è®¡ç®—æ—¶é—´å·®çš„é—®é¢˜ï¼Œåˆ©ç”¨CFAbsoluteTimeGetCurrent()å¯ä»¥æ–¹ä¾¿çš„è¿›è¡Œè®¡ç®— åœºæ™¯ï¼šç±»ä¼¼è´­ç‰©è½¦ä¸­ä¿®æ”¹å•†å“æ•°é‡çš„åŠŸèƒ½ï¼Œè¦æ±‚ï¼Œä¿®æ”¹å®Œçš„æ•°é‡ï¼Œè¦åŒæ­¥åˆ°æœåŠ¡å™¨ã€‚ åˆ†æžï¼šå¦‚æžœç‚¹å‡»â€œ+â€æˆ–è€…â€œ-â€ï¼Œç«‹å³è¿›è¡ŒæœåŠ¡å™¨åŒæ­¥çš„è¯ï¼Œä»£ä»·è²Œä¼¼æœ‰äº›é«˜ï¼Œæ‰€ä»¥é‡‡ç”¨å»¶æ—¶æäº¤çš„æ–¹æ³•ï¼šâ€œè¿žç»­â€ç‚¹å‡»çš„æ—¶å€™ï¼Œä¸æäº¤åˆ°æœåŠ¡å™¨ï¼Œç‚¹å‡»åœæ­¢ï¼Œè¿›è¡ŒåŒæ­¥ã€‚è¿™ä¸ªé¡¹ç›®ä¸­ï¼Œâ€œè¿žç»­â€ç‚¹å‡»çš„åˆ¤æ–­ï¼Œé‡‡ç”¨çš„æ˜¯åˆ¤æ–­ä¸¤æ¬¡ç‚¹å‡»çš„æ—¶é—´å·®ï¼Œå¦‚æžœæ—¶é—´å·®å°äºŽä¸€å®šçš„æ•°å€¼ï¼ˆæœ¬ä¾‹ä¸­ï¼Œè¿™ä¸ªæ•°å€¼æ˜¯2ï¼‰ï¼Œé‚£ä¹ˆå³å¯åˆ¤å®šæ˜¯è¿žç»­ç‚¹å‡»çš„æ“ä½œã€‚ä»£ç å¦‚ä¸‹ï¼š 12345678910111213141516-(void)editCount&#123; double diff = 0; if(_startTime == 0)&#123; _startTime = CFAbsoluteTimeGetCurrent(); _endTime = _startTime; &#125;else&#123; _endTime = CFAbsoluteTimeGetCurrent(); diff = _endTime - _startTime; _startTime = _endTime; &#125; if(diff &lt; 2)&#123; [NSObject cancelPreviousPerformRequestsWithTarget:self selector:@selector(willUpdateServerCartWithCount) object:nil]; &#125; [self performSelector:self withObject:@selector(willUpdateServerCartWithCount) afterDelay:2.0];&#125;]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[inline å†…è”å‡½æ•°]]></title>
      <url>%2F2017%2F03%2F19%2Finline-%E5%86%85%E8%81%94%E5%87%BD%E6%95%B0%2F</url>
      <content type="text"><![CDATA[YYKitä¸­å¯¹å¯¹å†…è”å‡½æ•°çš„ä½¿ç”¨ï¼š 12345static inline void dispatch_async_on_main_queue(void (^block)())&#123; if(pthread_main_np())&#123; block(); &#125;else&#123; dispatch_async(dispatch_get_main_queue(),block); &#125;&#125; ä½¿ç”¨è¿™ä¸ªå‡½æ•°1dispatch_async_on_main_queue(^&#123;&#125;); æ¯”ä¸‹é¢è¿™ä¸ªæ–¹å¼æ›´åŠ çš„ç®€æ´ï¼š1dispatch_async(dispatch_get_main_queue(),^&#123;&#125;); åˆæ¯”å¦‚åƒè¿™æ ·çš„ä½¿ç”¨ï¼š123456789101112static inline CGFloat CGFloatFromePixel(CGFloat value)&#123; return value/YYScreenScale();&#125;CGFloat YYScreenScale()()&#123; static CGFloat scale; static dispatch_once_t onceToken; dispatch_once(&amp;oneceToken,^&#123; scale = [UIScreen mainScreen].scale; &#125;); return scale;&#125; å†…è”å‡½æ•°æ˜¯æŒ‡inlineä¿®é¥°çš„å‡½æ•°ã€‚å†…è”å‡½æ•°ä¸æ˜¯åœ¨è°ƒç”¨æ—¶å‘ç”Ÿè½¬ç§»ï¼Œè€Œæ˜¯åœ¨ç¼–è¯‘æ—¶å°†å‡½æ•°ä½“åµŒå…¥åˆ°æ¯ä¸€ä¸ªè°ƒç”¨å¤„ã€‚ç¼–è¯‘æ—¶ï¼Œç±»ä¼¼äºŽå®æ›¿æ¢ï¼Œä½¿ç”¨å‡½æ•°ä½“æ›¿æ¢è°ƒç”¨å¤„çš„å‡½æ•°åã€‚C99ä¸­inlineå°±æ˜¯å¯¹ç¼–è¯‘å™¨çš„ä¸€ä¸ªæç¤ºã€‚ å®ƒçš„å‡ºçŽ°ï¼Œä¸»è¦æ˜¯ç”¨å®ƒæ¥æ›¿ä»£Cä¸­è¡¨è¾¾å¼å½¢å¼çš„å®å®šä¹‰ã€‚ è¡¨è¾¾å¼å½¢å¼çš„å®å®šä¹‰ä¸€ä¾‹ï¼š1#define ExpressionName(Var1,Var2) (Var1+Var2)*(Var1-Var2) ä½¿ç”¨è¿™æ ·çš„å®å®šä¹‰æ— æ³•è¿›è¡Œå‚æ•°æœ‰æ•ˆæ€§çš„æ£€éªŒã€‚å®ƒçš„è¿”å›žå€¼ä¹Ÿä¸èƒ½è¢«å¼ºåˆ¶è½¬æ¢ä¸ºå¯è½¬æ¢çš„åˆé€‚çš„ç±»åž‹ã€‚ å¯ä»¥ä½¿ç”¨inlineå‡½æ•°å®Œå…¨æ›¿ä»£è¡¨è¾¾å¼å½¢å¼çš„å®å®šä¹‰ã€‚ ä½¿ç”¨å†…è”å‡½æ•°èƒ½å¤Ÿè§£å†³å‡½æ•°è°ƒç”¨çš„æ•ˆçŽ‡é—®é¢˜ï¼š å‡½æ•°ä¹‹é—´è°ƒç”¨ï¼Œæ˜¯å†…å­˜åœ°å€ä¹‹é—´çš„è°ƒç”¨ï¼Œå½“å‡½æ•°è°ƒç”¨å®Œæ¯•ä¹‹åŽè¿˜ä¼šè¿”å›žåŽŸæ¥å‡½æ•°æ‰§è¡Œçš„åœ°å€ã€‚å‡½æ•°è°ƒç”¨æœ‰æ—¶é—´å¼€é”€ï¼Œå†…è”å‡½æ•°å°±æ˜¯ä¸ºäº†è§£å†³è¿™ä¸€é—®é¢˜ã€‚ inlineå†…è”å‡½æ•°çš„ä½¿ç”¨è¯´æ˜Žï¼š * å†…è”å‡½æ•°åªæ˜¯æˆ‘ä»¬å‘ç¼–è¯‘å™¨æä¾›çš„ç”³è¯·,ç¼–è¯‘å™¨ä¸ä¸€å®šé‡‡å–inlineå½¢å¼è°ƒç”¨å‡½æ•°. * å†…è”å‡½æ•°ä¸èƒ½æ‰¿è½½å¤§é‡çš„ä»£ç .å¦‚æžœå†…è”å‡½æ•°çš„å‡½æ•°ä½“è¿‡å¤§,ç¼–è¯‘å™¨ä¼šè‡ªåŠ¨æ”¾å¼ƒå†…è”. * å†…è”å‡½æ•°å†…ä¸å…è®¸ä½¿ç”¨å¾ªçŽ¯è¯­å¥æˆ–å¼€å…³è¯­å¥. * å†…è”å‡½æ•°çš„å®šä¹‰é¡»åœ¨è°ƒç”¨ä¹‹å‰.]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[æ›´å®Œå–„çš„è‡ªå®šä¹‰ç»˜åˆ¶]]></title>
      <url>%2F2017%2F03%2F18%2F%E6%9B%B4%E5%AE%8C%E5%96%84%E7%9A%84%E8%87%AA%E5%AE%9A%E4%B9%89%E7%BB%98%E5%88%B6%2F</url>
      <content type="text"><![CDATA[1.UIKitå’Œè§†å›¾ç»˜å›¾å‘¨æœŸï¼š å¦‚æžœè¦æ”¹å˜è§†å›¾çš„å¤§å°æˆ–æ˜¾ç¤ºï¼Œç”»ä¸€æ¡çº¿ï¼Œæˆ–è€…æ”¹å˜ä¸€ä¸ªå¯¹è±¡çš„é¢œè‰²ï¼Œè¿™äº›æ”¹å˜ä¸ä¼šç«‹åˆ»æ˜¾ç¤ºå‡ºæ¥ã€‚æœ‰æ—¶ï¼Œè¿™ä¼šè®©ç¼–å†™å¦‚ä¸‹ä¸æ°å½“ä»£ç çš„å¼€å‘äººå‘˜æ„ŸåŠ¨è¿·æƒ‘ï¼š123456&#123;progressView.hidden = NO; //è¿™ä¸€è¡Œä»€ä¹ˆä¹Ÿä¸åš//åœ¨è¿™é‡Œåšä¸€äº›è€—æ—¶çš„æ“ä½œ[self doSometingTimeConsuming];progressView.hidden = YES;&#125; ç¬¬ä¸€è¡Œï¼ˆprogressView.hidden = NOï¼‰å®žé™…ä¸Šæ ¹æœ¬æ²¡æœ‰ä½œç”¨ï¼Œç†è§£è¿™ä¸€ç‚¹å¾ˆé‡è¦ã€‚è¿™è¡Œä»£ç ä¸ä¼šä½¿è¿›åº¦è§†å›¾åœ¨æ‰§è¡Œè€—æ—¶æ“ä½œçš„æ—¶å€™æ˜¾ç¤ºå‡ºæ¥ã€‚æ— è®ºè¿™ä¸ªæ–¹æ³•è¿è¡Œå¤šä¹…ï¼Œéƒ½ä¸ä¼šçœ‹åˆ°è§†å›¾æ˜¾ç¤ºå‡ºæ¥ ä¸‹å›¾å±•ç¤ºäº†ç»˜å›¾å¾ªçŽ¯ä¸­å®žé™…ä¼šå‘ç”Ÿçš„æ­¥éª¤ï¼š æ‰€æœ‰çš„ç»˜åˆ¶éƒ½å‘ç”Ÿåœ¨ä¸»çº¿ç¨‹ï¼Œåªè¦ä»£ç è¿è¡Œåœ¨ä¸»çº¿ç¨‹ï¼Œå°±æ²¡æœ‰ä¸œè¥¿å¯ä»¥ç»˜åˆ¶ã€‚åœ¨ä¸»çº¿ç¨‹ä¸­æ‰§è¡Œé•¿æ—¶é—´è¿è¡Œæ“ä½œï¼Œä¼šé˜»ç¢äº‹ä»¶çš„å¤„ç†ï¼Œä¹Ÿä¼šé˜»ç¢ç»˜åˆ¶æ›´æ–°ã€‚ å¦‚ä½•å¼€å§‹å’Œåœæ­¢ä¸€ä¸ªé•¿æ—¶é—´è¿è¡Œæ“ä½œçš„æ´»åŠ¨æŒ‡ç¤ºå™¨ï¼Ÿé‡‡ç”¨è°ƒåº¦æˆ–æ‰§è¡Œé˜Ÿåˆ—æ¥å°†è€—æ—¶çš„ä»»åŠ¡æ”¾å…¥åŽå°ï¼ŒåŒæ—¶åˆ›å»ºå¦‚ä¸‹åœ¨ä¸»çº¿ç¨‹ä¸­è¿›è¡ŒUIKitè°ƒç”¨çš„ä»£ç ï¼š12345678910111213141516-(IBAction)doSomething:(UIButton *)sender&#123;//é¿å…æ‰§è¡Œä»»åŠ¡æœŸé—´åå¤ç‚¹å‡»[sender setEnabled:NO];[self.activity startAnimation];//æŠŠè€—æ—¶çš„æ“ä½œæ”¾åœ¨åŽå°çº¿ç¨‹ï¼Œè®©å½“å‰æ–¹æ³•è¿…é€Ÿæ‰§è¡Œå®Œï¼Œè€Œä¸æ˜¯å› ä¸ºè€—æ—¶æ“ä½œè€Œé˜»å¡žåœ¨è¿™é‡Œï¼Œè€Œé˜»ç¢ç»˜åˆ¶æ›´æ–°ï¼Œé˜»ç¢è§¦æ‘¸äº‹ä»¶dispatch_queue_t bgQueue = dispatch_get_global_queue(0, 0);dispatch_async(bgQueue, ^&#123;//è€—æ—¶æ“ä½œ[self doSomethingTimeConsuming];//å›žåˆ°ä¸»çº¿ç¨‹ç»˜å›¾dispatch_async(dispatch_get_main_queue(), ^&#123;[self.activity endAnimation];[sender setEnabled:YES];&#125;);&#125;);&#125; 2.è§†å›¾ç»˜åˆ¶ä¸Žè§†å›¾å¸ƒå±€ UIViewå°†å­è§†å›¾çš„å¸ƒå±€(é‡æ–°æŽ’åˆ—)ä»Žç»˜å›¾(æ˜¾ç¤º)ä¸­ç‹¬ç«‹å‡ºæ¥ã€‚è¿™å¯¹æžå¤§ç¨‹åº¦çš„ä¼˜åŒ–æ€§èƒ½å¾ˆé‡è¦ï¼Œå› ä¸ºå¸ƒå±€çš„æˆæœ¬é€šå¸¸è¦æ¯”ç»˜åˆ¶ä½Žã€‚å¸ƒå±€çš„æˆæœ¬ä¹‹æ‰€ä»¥ä½Žï¼Œæ˜¯å› ä¸ºUIViewçš„ç¼“å­˜é€šè¿‡GPUä¼˜åŒ–çš„ä½å›¾è¿›è¡Œç»˜å›¾æ“ä½œã€‚ä½¿ç”¨GPUï¼Œå¯ä»¥ä½¿è¿™äº›ä½å›¾çš„ç§»åŠ¨ï¼Œæ˜¾ç¤ºï¼Œéšè—ï¼Œæ—‹è½¬ï¼Œç”šè‡³å˜å½¢å’Œåˆå¹¶çš„æˆæœ¬éžå¸¸ä½Žã€‚ å¦‚æžœå¯¹ä¸€ä¸ªè§†å›¾è°ƒç”¨setNeedsDisplayæ–¹æ³•ï¼Œå®ƒè¢«æ ‡è®°ä¸ºâ€œéœ€è¦åˆ·æ–°çš„â€ï¼Œå¹¶ä¸”ä¼šåœ¨ä¸‹ä¸€æ¬¡ç»˜å›¾å‘¨æœŸä¸­é‡æ–°ç»˜åˆ¶ã€‚é™¤éžè§†å›¾çš„å†…å®¹çœŸçš„ä¼šå‘ç”Ÿå˜åŒ–ï¼Œå¦åˆ™è¯·ä¸è¦è°ƒç”¨å®ƒã€‚å¤§éƒ¨åˆ†UIKitè§†å›¾ä¼šåœ¨å…¶æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶è‡ªåŠ¨ç®¡ç†é‡ç»˜æ“ä½œï¼Œå› æ­¤é™¤äº†è‡ªå®šä¹‰çš„è§†å›¾ï¼Œä¸€èˆ¬å¹¶ä¸éœ€è¦è°ƒç”¨setNeedsDisplayã€‚ æ—‹è½¬è®¾å¤‡æˆ–æ»šåŠ¨è§†å›¾åŽï¼Œå­è§†å›¾éœ€è¦é‡æ–°æŽ’åˆ—ï¼Œè¿™æ—¶UIKitä¼šè°ƒç”¨setNeedsLayoutï¼Œä¹Ÿå°±æ˜¯å¯¹äºŽå‘ç”Ÿå˜åŒ–çš„è§†å›¾é€æ¬¡è°ƒç”¨layoutSubViewsæ–¹æ³•ã€‚è¦†ç›–layoutSubviewsçš„è¯ï¼Œå°±å¯ä»¥è®©åº”ç”¨åœ¨è®¾å¤‡æ—‹è½¬æˆ–è§†å›¾æ»šåŠ¨æ—¶æ›´åŠ æµç•…ã€‚ä¸å¿…é‡ç»˜å°±èƒ½é‡æ–°æŽ’åˆ—å­è§†å›¾çš„ä½ç½®ï¼Œè¿˜å¯ä»¥æ ¹æ®è®¾å¤‡æ–¹å‘æ˜¾ç¤ºéšè—è§†å›¾ã€‚å¦‚æžœæ•°æ®æ”¹å˜åŽåªéœ€è¦è¿›è¡Œå¸ƒå±€æ›´æ–°(è€Œéžç»˜åˆ¶)ï¼Œåˆ™å¯ä»¥è°ƒç”¨setNeedsLayoutæ–¹æ³•ã€‚ 3.è‡ªå®šä¹‰è§†å›¾ç»˜åˆ¶ è§†å›¾å¯ä»¥é€šè¿‡å­è§†å›¾ã€å›¾å±‚æˆ–å®žçŽ°drawRectï¼šæ–¹æ³•æ¥è¡¨çŽ°å†…å®¹ã€‚é€šå¸¸æ¥è¯´ï¼Œå¦‚æžœå®žçŽ°äº†drawRectï¼šæ–¹æ³•ï¼Œæœ€å¥½å°±ä¸è¦å†æ··ç”¨å›¾å±‚ä¸Žå­è§†å›¾äº†ã€‚2Dç»˜å›¾å¹¶ä¸èƒ½æ“ä½œå•ç‹¬çš„åƒç´ ï¼Œå› ä¸ºåƒç´ æ˜¯ä¾èµ–ç›®æ ‡çš„ã€‚å¯ä»¥ä»Žä½å›¾ä¸Šä¸‹æ–‡ä¸­è¯»å–å®ƒï¼Œä½†æ— æ³•ä½¿ç”¨UIKitæˆ–Core Graphicså‡½æ•°æ¥ç›´æŽ¥ä½œç”¨äºŽå®ƒã€‚ 4.ç†è§£åæ ‡ç³» åæ ‡ã€ç‚¹ã€åƒç´ ä¹‹é—´çš„å¾®å¦™è½¬æ¢ä¹Ÿå¯èƒ½é™ä½Žç»˜åˆ¶æ€§èƒ½ï¼Œåˆ°æ‰§è¡Œçº¿æ¡å’Œæ–‡å­—æ¨¡ç³Šã€‚è§‚å¯Ÿä»¥ä¸‹ä»£ç ï¼š123456789//ç»˜åˆ¶ä¸€ï¼šCGContextSetLineWidth(context,3.);CGContextMoveLineToPoint(context,10.,100.);CGContextAddLineToPoint(context,200.,100.);CGContextStrokePath(context);//ç»˜åˆ¶äºŒï¼šCGContextMoveToPoint(context,10.,105.5);CGContextAddLineToPoint(context,200.,105.5);CGContextStrokePath(context); ä¸‹å›¾å±•ç¤ºçš„æ˜¯åœ¨éžè§†ç½‘è†œå±å¹•ä¸Šçš„è¾“å‡ºç»“æžœï¼Œå½“æ”¾å¤§çš„æ—¶å€™å¯ä»¥çœ‹è§ï¼Œä¸¤æ¡çº¿æ¡ä¹‹é—´çš„åŒºåˆ«ï¼šå¯ä»¥çœ‹åˆ°ï¼Œç»˜åˆ¶ä¸€çš„ç»“æžœå°±è¦æ¨¡ç³Šå¾ˆå¤šã€‚åŽŸå› åœ¨äºŽiOSå¯¹åæ ‡ç³»çš„è§£è¯»æ–¹å¼ã€‚æž„é€ ä¸€ä¸ªCGPathæ—¶ï¼Œä¾¿æ˜¯ä½¿ç”¨äº†å‡ ä½•åæ ‡ç³»ï¼Œè¿™ä¸Žæ•°å­¦ä¸­ä½¿ç”¨çš„åæ ‡ç³»æ˜¯ä¸€æ ·çš„ï¼Œä»¥ä¸¤æ¡ç½‘æ ¼çº¿çš„äº¤ç‚¹æ¥è¡¨ç¤ºé›¶åæ ‡ç‚¹ã€‚ä½ æ— æ³•ç»˜åˆ¶å‡ºçœŸæ­£çš„å‡ ä½•ç‚¹æˆ–å‡ ä½•çº¿æ¡ï¼Œå› ä¸ºå®ƒä»¬éƒ½æ˜¯æ— é™å°å’Œæ— é™ç»†çš„ã€‚iOSç»˜åˆ¶ä¸­å¿…é¡»å°†è¿™äº›å‡ ä½•å¯¹è±¡è½¬æ¢æˆåƒç´ åæ ‡ã€‚åƒç´ æ˜¯è®¾å¤‡èƒ½æŽ§åˆ¶çš„æœ€å°æ˜¾ç¤ºåŒºåŸŸå•ä½ã€‚è°ƒç”¨CGContextStrokePathï¼ŒiOSä¼šè®©çº¿æ¡æ²¿è·¯å¾„å±…ä¸­ã€‚ç†æƒ³æƒ…å†µä¸‹ï¼Œçº¿å®½æœ‰3åƒç´ å®½ï¼Œæ‰€ä»¥y=98.5åˆ°y=101.5ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼šåœ¨å±å¹•ä¸Šï¼Œçº¿æ¡çœ‹èµ·æ¥æœ‰äº›æ¨¡ç³Šã€‚è§£å†³è¿™ä¸ªé—®é¢˜çš„åŠžæ³•å°±æ˜¯å°†æ°´å¹³æˆ–åž‚ç›´çš„çº¿æ¡ç§»åŠ¨åˆ°åŠä¸ªç‚¹çš„ä½ç½®ï¼Œè¿™æ ·å½“iOSå°†çº¿æ¡å±…ä¸­æ—¶ï¼Œè¾¹ç¼˜åˆšå¥½å°±æ˜¯åƒç´ çš„è¾¹ç•Œã€‚æˆ–è€…è®©çº¿æ¡æ›´ç²—ä¸€äº›ã€‚ä½¿ç”¨éžæ•´åž‹å®½åº¦çš„çº¿æ¡ï¼Œæˆ–è€…åæ ‡ç³»ä¸æ˜¯æ•´åž‹å’ŒåŠæ•´åž‹æ—¶(è¿™ä¸ªé—®é¢˜ä¹Ÿä½¿ç”¨äºŽretinaå±)ï¼Œä¹Ÿæœ‰å¯èƒ½é‡åˆ°è¿™ä¸ªé—®é¢˜ã€‚è®©iOSç»˜åˆ¶å°æ•°åƒç´ æ—¶å°±æœ‰å¯èƒ½å¯¼è‡´æ¨¡ç³Šã€‚ å¡«å……å·¥å…·ä¸Žç”»ç¬”ä¸ä¸€æ ·ã€‚ç”»ç¬”çš„çº¿æ¡æ˜¯ä¸­å¿ƒå¯¹é½è·¯å¾„çš„ï¼Œè€Œå¡«å……é¢œè‰²æ˜¯åŸºäºŽè·¯å¾„çš„ã€‚å¦‚æžœå¡«å……ä»Ž{10,100}åˆ°{200,103}çš„çŸ©å½¢ï¼Œæ¯ä¸ªåƒç´ éƒ½ä¼šè¢«æ­£ç¡®å¡«å……ï¼Œå¦‚å›¾ç›®å‰çš„è®¨è®ºè§†ç‚¹ä¸Žåƒç´ ç›¸åŒã€‚è€Œå¯¹äºŽretinaå±å¹•ï¼Œä¹Ÿä¾ç„¶ä¼šå› ä¸ºçº¿å®½æˆ–åæ ‡ç³»ä¸æ˜¯æ•´æ•°å¯¼è‡´æ˜¾ç¤ºæ¨¡ç³Šçš„é—®é¢˜ã€‚ 5.å˜å½¢ iOSå¹³å°ä½¿ç”¨äº†å¯ä»¥å¿«é€Ÿè¿›è¡ŒçŸ©å½¢è®¡ç®—çš„ä¼˜ç§€çš„GPUã€‚å¦‚æžœå°†ðŸ‘‰ç»˜å›¾è¿ç®—è½¬æ¢æˆçŸ©å½¢è®¡ç®—æœºðŸ‘ˆï¼Œå°±å¯ä»¥å‘æŒ¥GPUçš„èƒ½åŠ›å¹¶èŽ·å–å“è¶Šçš„åŠŸèƒ½ã€‚å˜å½¢å°±æ˜¯ä¸€ç§çŸ©å½¢è¿ç®—ã€‚iOSæœ‰ä¸¤ç§å˜å½¢ï¼šä»¿å°„ä¸Ž3Dã€‚UIViewåªèƒ½å¤„ç†ä»¿å°„å˜å½¢ã€‚ä»¿å°„å˜å½¢å¯ä»¥ç”¨çŸ©é˜µè¿ç®—æ¥è¡¨çŽ°æ—‹è½¬ã€ç¼©æ”¾ã€å‰ªåˆ‡ä»¥åŠå¹³ç§»ã€‚ iOSæ‹¥æœ‰æ”¯æŒæ—‹è½¬ã€ç¼©æ”¾ä»¥åŠå¹³ç§»çš„å‡½æ•°ã€‚ å˜å½¢å¯ä»¥å¤§å¤§ç®€åŒ–ä»£ç ï¼Œå¹¶æå‡å®ƒçš„é€Ÿåº¦ã€‚ è´´ä¸Šä¸‹é¢è¿™æ ·ä¸€æ®µä»£ç 123456789101112131415161718192021222324- (void)drawRect:(CGRect)rect &#123;// Drawing codeCGSize size = self.bounds.size;CGFloat margin = 10;CGFloat radius = rintf(MIN(size.width - margin, size.height - margin) / 4);CGFloat xOffset, yOffset;CGFloat offset = rintf((size.height - size.width)/2);if (offset &gt; 0) &#123;//rint(double x)ï¼š ä¸å¤§äºŽxçš„æœ€å¤§æ•´æ•°ï¼Œè¯¥æ•´æ•°æ˜¯åŒç²¾åº¦å®žæ•°xOffset = rint(margin / 2);yOffset = offset;&#125;else&#123;xOffset = -offset;yOffset = rint(margin / 2);&#125;[[UIColor redColor] setFill];UIBezierPath *path = [UIBezierPath bezierPath];[path addArcWithCenter:CGPointMake(radius * 2 + xOffset, radius + yOffset) radius:radius startAngle:-M_PI endAngle:0 clockwise:YES];[path addArcWithCenter:CGPointMake(radius * 3 + xOffset, radius * 2 + yOffset) radius:radius startAngle:-M_PI_2 endAngle:M_PI_2 clockwise:YES];[path addArcWithCenter:CGPointMake(radius * 2 + xOffset, radius * 3 + yOffset) radius:radius startAngle:0 endAngle:M_PI clockwise:YES];[path addArcWithCenter:CGPointMake(radius + xOffset, radius * 2 + yOffset) radius:radius startAngle:M_PI_2 endAngle:-M_PI_2 clockwise:YES];[path closePath];[path fill];&#125; è¿è¡Œå¾—åˆ°çš„æ•ˆæžœï¼šä»Žè¿™æ®µä»£ç å¯ä»¥çœ‹å‡ºï¼Œè¿™é‡ŒåŒ…æ‹¬å¤ªå¤šçš„è¾“å…¥ä¸Žè¿ç®—ï¼Œå¾ˆå¤šæ—¶å€™ï¼Œåœ¨åæ ‡ç³»ç©ºé—´ä¸­å›´ç»•åŽŸç‚¹è¿›è¡Œç»˜åˆ¶ç„¶åŽå¯¹ç»˜åˆ¶è¿›è¡Œç¼©æ”¾ã€æ—‹è½¬ã€å¹³ç§»è€Œæ›´ç®€å•ã€‚å¦‚æžœæŠŠå›¾å½¢ç»˜åˆ¶åœ¨ä¸€ä¸ª4x4çš„æ ¼å­ä¸­ä¼šæ€Žæ ·ï¼Ÿ çŽ°åœ¨ç»˜åˆ¶çš„è®¡ç®—å°±å˜å¾—éžå¸¸ç®€å•ï¼š1234567891011121314151617181920212223- (void)drawRect:(CGRect)rect &#123;CGSize size = self.bounds.size;CGFloat margin = 10;[[UIColor redColor] set];UIBezierPath *path = [UIBezierPath bezierPath];[path addArcWithCenter:CGPointMake(0, -1) radius:1 startAngle:-M_PI endAngle:0 clockwise:YES];[path addArcWithCenter:CGPointMake(1, 0) radius:1 startAngle:-M_PI_2 endAngle:M_PI_2 clockwise:YES];[path addArcWithCenter:CGPointMake(0, 1) radius:1 startAngle:0 endAngle:M_PI clockwise:YES];[path addArcWithCenter:CGPointMake(-1, 0) radius:1 startAngle:M_PI_2 endAngle:-M_PI_2 clockwise:YES];[path closePath];CGFloat scale = floorf((MIN(size.height, size.width) - margin) / 4);CGAffineTransform transform;transform = CGAffineTransformMake(scale, 0.0f, 0.f, scale, size.width/2, size.height/2);[path applyTransform:transform];[path fill];&#125; è¿™ä¸ªæŠ€æœ¯å¯ä»¥ç”¨æ¥ä»¥å„ç§è§’åº¦ç»˜åˆ¶å¤æ‚çš„å½¢çŠ¶ã€‚æ¯”å¦‚è¯´ï¼Œç»˜åˆ¶ä¸€ä¸ªæŒ‡å‘å³ä¸Šè§’çš„ç®­å¤´ï¼Œä¸€èˆ¬å…ˆç”»ä¸€æ¡æŒ‡å‘å³è¾¹çš„ç®­å¤´å†æ—‹è½¬å®ƒä¼šæ›´å®¹æ˜“ã€‚å¯ä»¥é€‰æ‹©ä½¿ç”¨applyTransform:å¯¹è·¯å¾„è¿›è¡Œå˜å½¢ã€‚ 6.é€šè¿‡Core Graphicsè¿›è¡Œç»˜åˆ¶ç»˜åˆ¶æ•ˆæžœï¼šç»˜åˆ¶ä»£ç ï¼š123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687#import &quot;TCView.h&quot;@interface TCView()@property(nonatomic, readwrite, strong) NSMutableArray *values;@property(nonatomic,readwrite, strong) dispatch_source_t timer;@end@implementation TCViewconst CGFloat kXScale = 5.0;const CGFloat kYScale = 100.0;static inline CGAffineTransform CGAffineTransformMakeScaleTranslate(CGFloat sx,CGFloat sy, CGFloat dx, CGFloat dy)&#123;return CGAffineTransformMake(sx, 0.f, 0.f, sy, dx, dy);&#125;-(void)awakeFromNib&#123;[super awakeFromNib];[self setContentMode:UIViewContentModeRight];self.values = [NSMutableArray array];__weak typeof (self) weakSelf = self;double delayInseconds = 0.25;self.timer = dispatch_source_create(DISPATCH_SOURCE_TYPE_TIMER, 0, 0, dispatch_get_main_queue());//è®¾ç½®timerdispatch_source_set_timer(self.timer, dispatch_walltime(NULL, 0), (unsigned)(delayInseconds * NSEC_PER_SEC), 0);//ç»™timeræ·»åŠ äº‹ä»¶å¤„ç†dispatch_source_set_event_handler(self.timer, ^&#123;[weakSelf updateValues];&#125;);//æ‰‹åŠ¨å¼€å§‹dispatch_resume(self.timer);&#125;-(void)updateValues&#123;//RAND_MAX rand()æ‰€èƒ½å¤ŸèŽ·å–åˆ°çš„æœ€å¤§çš„å€¼//rand()è¿”å›žçš„æ˜¯intç±»åž‹ random()è¿”å›žçš„æ˜¯longç±»åž‹//((double)rand() / (double)RAND_MAX) èŽ·å¾—ä¸€ä¸ªéšæœºçš„0-1çš„doubleç±»åž‹çš„æ•°double nextValue = sin(CFAbsoluteTimeGetCurrent()) + ((double)rand() / (double)RAND_MAX);//[self.values addObject:[NSNumber numberWithDouble:nextValue]];CGSize size = self.bounds.size;//æœ€å¤§çš„å°ºå¯¸//floor(x)è¿”å›žçš„æ˜¯å°äºŽæˆ–ç­‰äºŽxçš„æœ€å¤§æ•´æ•°//floorl(x) è¿”å›žçš„ç±»åž‹æ˜¯ long double//floorf(x) è¿”å›žç±»åž‹æ˜¯ floatCGFloat maxDimension = MAX(size.height, size.width);NSUInteger maxValues = (NSUInteger)floorl(maxDimension / kXScale);if ([self.values count] &gt; maxValues) &#123;[self.values removeObjectsInRange:NSMakeRange(0, [self.values count] - maxValues)];&#125;//ç»˜åˆ¶[self setNeedsDisplay];&#125;-(void)dealloc&#123;dispatch_source_cancel(_timer);&#125;- (void)drawRect:(CGRect)rect &#123;if ([self.values count] == 0) &#123;return;&#125;CGContextRef ctx = UIGraphicsGetCurrentContext();CGContextSetStrokeColorWithColor(ctx, [[UIColor redColor] CGColor]);CGContextSetLineJoin(ctx, kCGLineJoinRound);CGContextSetLineWidth(ctx, 5);//åŒ…å«æ‰€æœ‰çº¿æ¡çš„è·¯å¾„CGMutablePathRef path = CGPathCreateMutable();CGFloat yOffset = self.bounds.size.height / 2;//è·¯å¾„æ”¾å¤§ï¼Œå¹³ç§»è·¯å¾„()CGAffineTransform transform = CGAffineTransformMakeScaleTranslate(kXScale, kYScale, 0, yOffset);//CGFloat y = [[self.values objectAtIndex:0] floatValue];CGPathMoveToPoint(path, &amp;transform, 0, y);for (NSUInteger x = 1; x &lt; [self.values count]; ++x) &#123;y = [[self.values objectAtIndex:x] floatValue];CGPathAddLineToPoint(path, &amp;transform, x, y);&#125;CGContextAddPath(ctx, path);//create çš„ å°±è¦releaseCGPathRelease(path);//ç»˜åˆ¶CGContextStrokePath(ctx);&#125;@end 7.æ··ç”¨UIKitä¸ŽCore Graphics åœ¨drawRect:æ–¹æ³•ä¹‹å¤–ä½ å¯èƒ½ä¼šå‘çŽ°ä½¿ç”¨Core Graphicsç»˜åˆ¶çš„ä¸œè¥¿ä¼šä¸Šä¸‹é¢ å€’ã€‚UIKitéµå®ˆULOï¼ˆUpper-Left-Origin,å·¦ä¸Šè§’ä¸ºåŽŸç‚¹ï¼‰çš„åæ ‡ç³»ç»Ÿï¼Œè€ŒCore Graphicsé»˜è®¤ä½¿ç”¨LLO(Lower-Left-Originï¼Œå·¦ä¸‹è§’ä¸ºåŽŸç‚¹)çš„åæ ‡ç³»ç»Ÿã€‚åªè¦ä½¿ç”¨åœ¨drawRect:æ–¹æ³•ä¸­é€šè¿‡UIGraphicsGetCurrentContextè¿”å›žçš„ä¸Šä¸‹æ–‡ï¼Œé‚£ä¹ˆä¸€åˆ‡å°±æ­£å¸¸äº†ï¼Œå› ä¸ºè¿™ä¸ªä¸Šä¸‹æ–‡æ˜¯å·²ç»åè½¬çš„ã€‚ä¸è¿‡ä½¿ç”¨CGBitmapContextCreateè¿™æ ·çš„å‡½æ•°åˆ›å»ºè‡ªå·±çš„ä¸Šä¸‹æ–‡ï¼Œå®ƒä¼šä»¥å·¦ä¸‹è§’ä¸ºåŽŸç‚¹ã€‚å¯ä»¥è¿›è¡Œåå‘è®¡ç®—æˆ–è€…åè½¬ä¸Šä¸‹æ–‡ï¼š12CGContextTranslateCTM(ctx, 0, height);CGContextScaleCTM(ctx, 1.0f, -1.0f); è¿™æ®µä»£ç å¹³ç§»äº†ä¸Šä¸‹æ–‡çš„é«˜åº¦å¹¶ä½¿ç”¨ä¸€ä¸ªè´Ÿæ•°æ¯”ä¾‹è¿›è¡Œåè½¬ã€‚å¦‚æžœæƒ³è®©UIKitä½¿ç”¨Core graphicsï¼Œå˜å½¢åˆ™åº”è¯¥åè¿‡æ¥ï¼š12CGContextScaleCTM(ctx,1.0f,-1.0f);CGContextTranslateCTM(ctx,1.0f,-1.0f); å…ˆåè½¬ï¼Œå†å¹³ç§»ã€‚ 8.ç®¡ç†å›¾å½¢ä¸Šä¸‹æ–‡ åœ¨è°ƒç”¨drawRect:æ–¹æ³•ä¹‹å‰ï¼Œç»˜å›¾ç³»ç»Ÿè‡ªåŠ¨åˆ›å»ºäº†ä¸€ä¸ªå›¾å½¢ä¸Šä¸‹æ–‡ã€‚ä¸Šä¸‹æ–‡åŒ…æ‹¬å¤§é‡ä¿¡æ¯ï¼Œæ¯”å¦‚ç”»ç¬”é¢œè‰²ã€æ–‡å­—é¢œè‰²ã€å½“å‰å­—ä½“ã€å˜å½¢ç­‰ã€‚æœ‰æ—¶ä½ å¯èƒ½ä¿®æ”¹ä¸Šä¸‹æ–‡å¹¶ä½¿å…¶æ¢å¤åŽŸæ ·ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œä½ çŽ°åœ¨æœ‰ä¸€ä¸ªä½¿ç”¨ç‰¹å®šé¢œè‰²ç»˜åˆ¶ç‰¹å®šå½¢çŠ¶çš„å‡½æ•°ã€‚ç”±äºŽç³»ç»Ÿåªæœ‰ä¸€åªç¬”ï¼Œå› æ­¤åœ¨æ›´æ”¹é¢œè‰²åŽï¼Œå°±ä¼šå½±å“è°ƒç”¨å‡½æ•°çš„ç»“æžœã€‚ä¸ºäº†é¿å…è¿™ä¸ªå‰¯ä½œç”¨ï¼Œå¯ä»¥ä½¿ç”¨CGContextSaveGStateå’ŒCGContextRestoreGStateå°†ä¸Šä¸‹æ–‡å…¥æ ˆå’Œå‡ºæ ˆã€‚ CGContextSaveGStateè®°å½•å½“å‰ä¸Šä¸‹æ–‡çš„çŠ¶æ€ã€‚UIGraphicsPushContextæ›´æ”¹å½“å‰ä¸Šä¸‹æ–‡ã€‚ä»¥ä¸‹æ˜¯CGContextSaveGStateçš„ç¤ºä¾‹ï¼š12345[[UIColor redColor] setFill];CGContextSaveGState(UIGraphicsGetCurrentContext());[[UIColor blackColor] setFill];CGContextRestoreGState(UIGraphicsGetCurrentContext());UIRectFill(CGRectMake(10 , 10 , 100, 100)); åœ¨è¿™é‡Œè®¾ç½®äº†ç”»ç¬”çš„é¢œè‰²ä¸ºçº¢è‰²ï¼Œå¹¶ä¸”ä¿å­˜äº†ä¸Šä¸‹æ–‡ã€‚ä¹‹åŽå°†ç”»ç¬”é¢œè‰²æ”¹ä¸ºé»‘è‰²å¹¶æ¢å¤ä¸Šä¸‹æ–‡ã€‚è¿™æ ·å½“ç»˜åˆ¶çš„æ—¶å€™ï¼Œç”»ç¬”çš„é¢œè‰²å˜æˆäº†çº¢è‰²ã€‚ ä½¿ç”¨UIGraphicsPushContextå¹¶ä¸èƒ½ä¿å­˜ä¸Šä¸‹æ–‡çš„å½“å‰çŠ¶æ€(ç”»ç¬”é¢œè‰²ã€çº¿æ¡å®½åº¦ç­‰)ï¼Œè€Œæ˜¯å®Œå…¨åˆ‡æ¢ä¸Šä¸‹æ–‡ã€‚å‡è®¾ä½ æ­£åœ¨å½“å‰è§†å›¾ä¸Šä¸‹æ–‡ä¸­ç»˜åˆ¶ä»€ä¹ˆä¸œè¥¿ï¼Œè¿™æ˜¯æƒ³è¦åœ¨ä½å›¾ä¸Šä¸‹æ–‡ä¸­ç»˜åˆ¶å®Œå…¨ä¸åŒçš„ä¸œè¥¿ã€‚å¦‚æžœè¦ä½¿ç”¨UIKitæ¥è¿›è¡Œä»»æ„ç»˜å›¾ï¼Œä½ ä¼šå¸Œæœ›ä¿å­˜å½“å‰çš„UIKitä¸Šä¸‹æ–‡ï¼ŒåŒ…æ‹¬æ‰€æœ‰å·²ç»ç»˜åˆ¶çš„å†…å®¹ï¼ŒæŽ¥ç€åˆ‡æ¢åˆ°ä¸€ä¸ªå…¨æ–°çš„ç»˜å›¾ä¸Šä¸‹æ–‡ä¸­ã€‚è¿™å°±æ˜¯UIGraphicsPushContextçš„åŠŸèƒ½ã€‚åˆ›å»ºå®Œä½å›¾åŽï¼Œå†å°†ä½ çš„æ—§ä¸Šä¸‹æ–‡å‡ºæ ˆã€‚è€Œè¿™å°±æ˜¯UIGraçš„åŠŸèƒ½ã€‚è¿™ç§æƒ…å†µåªä¼šåœ¨è¦ä½¿ç”¨UIKitåœ¨æ–°çš„ä½å›¾ä¸Šä¸‹æ–‡ä¸­ç»˜å›¾æ—¶æ‰ä¼šå‘ç”Ÿã€‚åªè¦ä½ ä½¿ç”¨çš„æ˜¯Core Graphicså‡½æ•°ï¼Œå°±ä¸éœ€è¦åŽ»æ‰§è¡Œä¸Šä¸‹æ–‡å…¥æ ˆå’Œå‡ºæ ˆï¼Œå› ä¸ºCore Graphicså‡½æ•°å°†ä¸Šä¸‹æ–‡è§†ä½œå‚æ•°ã€‚ è¿™æ˜¯æžå…¶é‡è¦çš„å¸¸è§æ“ä½œã€‚å› ä¸ºå…¶å¸¸ç”¨æ€§ï¼Œè‹¹æžœå…¬å¸ä¸ºå…¶åˆ›å»ºäº†ä¸€ä¸ªå«åšUIGraphicsBeginImageContextçš„å¿«æ·æ–¹å¼ã€‚å®ƒè´Ÿè´£å°†æ—§çš„ä¸Šä¸‹æ–‡å‡ºæ ˆã€ä¸ºæ–°çš„ä¸Šä¸‹æ–‡åˆ†é…å†…å­˜ã€åˆ›å»ºæ–°çš„ä¸Šä¸‹æ–‡ï¼Œåè½¬åæ ‡ç³»ç»Ÿï¼Œå¹¶å°†å…¶ä½œä¸ºå½“å‰çš„ä¸Šä¸‹æ–‡ä½¿ç”¨ã€‚ä¸‹é¢æ˜¯åˆ›å»ºä¸€å¼ å›¾ç‰‡å¹¶ä½¿ç”¨UIGraphicsBeginImageContextè¿”å›žå®ƒçš„ç¤ºä¾‹ã€‚12345678910111213141516-(UIImage *)reverseImageForText:(NSString *)text&#123;const size_t kImageWidth = 200;const size_t kImageHeight = 200;CGImageRef textImage = NULL;UIFont *font = [UIFont preferredFontForTextStyle:UIFontTextStyleHeadline];UIColor *color = [UIColor redColor];UIGraphicsBeginImageContext(CGSizeMake(kImageWidth, kImageHeight));[text drawInRect:CGRectMake(0, 0, kImageWidth, kImageHeight) withAttributes:@&#123;NSFontAttributeName: font, NSForegroundColorAttributeName: color&#125;];//UIImage -&gt; CGImagetextImage = UIGraphicsGetImageFromCurrentImageContext().CGImage;UIGraphicsEndImageContext();//orientation: æ–¹å‘ï¼Œ UIImageOrientationDownMirroredå›¾ç‰‡æ°´å¹³åè½¬return [UIImage imageWithCGImage:textImage scale:1.0 orientation:UIImageOrientationDownMirrored];&#125; 9.ä¼˜åŒ–UIViewç»˜åˆ¶UIViewæžå…¶å­ç±»æ˜¯é«˜åº¦ä¼˜åŒ–çš„ï¼Œå¯ä»¥çš„è¯ï¼Œè¯·å°½é‡ä½¿ç”¨å®ƒä»¬ï¼Œè€Œä¸è¦ä½¿ç”¨è‡ªå®šä¹‰ç»˜å›¾ã€‚ é¿å…ç»˜å›¾æœ€å¿«çš„ç»˜å›¾æ–¹å¼å°±æ˜¯æ ¹æœ¬ä¸ç»˜åˆ¶ã€‚ðŸ‘‰iOSç«­å°½å…¨åŠ›é¿å…è°ƒç”¨drawRect:æ–¹æ³•ðŸ‘ˆã€‚å®ƒðŸ˜¨ç¼“å­˜äº†è§†å›¾çš„å›¾åƒðŸ˜¨å¹¶å¯åœ¨å¼€å‘è€…ä¸ä»‹å…¥çš„æƒ…å†µä¸‹ç§»åŠ¨ã€æ—‹è½¬å¹¶ç¼©æ”¾å®ƒã€‚ä½¿ç”¨ä¸€ä¸ªåˆé€‚çš„contentMode,ç³»ç»Ÿåœ¨æ—‹è½¬æˆ–é‡æ–°è°ƒæ•´å¤§å°ä»¥è°ƒæ•´è§†å›¾æ—¶å°±ä¸éœ€è¦è°ƒç”¨drawRectï¼šæ–¹æ³•ã€‚å¯¼è‡´drawRectï¼šæ–¹æ³•è¿è¡Œçš„æœ€å¸¸è§çš„æƒ…å†µå°±æ˜¯è°ƒç”¨äº†setNeedsDisplayã€‚è¯·é¿å…è°ƒç”¨ä¸å¿…è¦çš„setNeedsDisplayã€‚è®°ä½ï¼ŒsetNeedsDisplayåªæ˜¯æ ‡è®°è§†å›¾éœ€è¦ç»˜åˆ¶ã€‚åœ¨å•ä¸ªå¾ªçŽ¯äº‹ä»¶ä¸­è°ƒç”¨å¤šæ¬¡setNeedsDisplay,å®žé™…ä¸Šå¹¶ä¸ä¼šæ¯”è°ƒç”¨ä¸€æ¬¡çš„æƒ…å†µæˆæœ¬æ›´é«˜ã€‚ 10.è‡ªå®šä¹‰ç»˜å›¾ä¸Žé¢„æ¸²æŸ“ç®¡ç†å¤æ‚çš„ç»˜å›¾æœ‰ä¸¤ç§ä¸»è¦æ–¹æ³•ï¼š åˆ©ç”¨CGPathå’ŒCGGreadienté€šè¿‡ç¼–ç æ¥ç»˜åˆ¶ä»»æ„å›¾åƒï¼Œæˆ–è€…ä½¿ç”¨psè¿™æ ·çš„å›¾å½¢ç¨‹åºè¿›è¡Œé¢„æ¸²æŸ“å¹¶ä½œä¸ºå›¾ç‰‡å±•ç¤ºå‡ºæ¥ã€‚ç„¶è€Œé¢„æ¸²æŸ“æœ‰å¤§é‡ç¼ºç‚¹ï¼š å¯¹å„ç§åˆ†è¾¨çŽ‡çš„ä¾èµ–ã€‚å¼€å‘è€…å¯èƒ½éœ€è¦ç®¡ç†å„ç§ç‰ˆæœ¬çš„å›¾ç‰‡ã€‚è‹¹æžœå…¬å¸æœ€åˆé¼“åŠ±å¼€å‘äººå‘˜è¿›è¡Œé¢„æ¸²æŸ“ï¼Œå› ä¸ºæ—©æœŸçš„iPhoneè®¡ç®—æ¸å˜çš„é€Ÿåº¦ä¸å¤Ÿå¿«ã€‚çŽ°åœ¨è¿™ä¸ªé—®é¢˜å°±æ²¡æœ‰é‚£ä¹ˆæ˜Žæ˜¾äº†ã€‚ç›®å‰ï¼ŒæŽ¨èå¼€å‘è€…åœ¨ä»£ç é‡åˆé€‚çš„æƒ…å†µä¸‹ï¼Œå°½é‡è¿›è¡Œè‡ªå®šä¹‰ç»˜å›¾ã€‚è¿™ä¸»è¦é€‚ç”¨äºŽåƒæŒ‰é’®è¿™æ ·çš„å°å…ƒç´ ã€‚è‹¥ä½¿ç”¨äº†é¢„æ¸²æŸ“ç»˜å›¾ï¼Œå»ºè®®ä¿æŒæ–‡ä»¶çš„â€œç®€æ´â€å¹¶åœ¨ä»£ç ä¸­è¿›è¡ŒåŠ å·¥ã€‚æ¯”å¦‚è¯´ï¼Œå¼€å‘è€…å¯èƒ½ä¼šç”¨ä¸€å¼ å›¾ç‰‡ä½œä¸ºæŒ‰é’®çš„èƒŒæ™¯ï¼Œå¹¶åœ¨ä»£ç ä¸­å¤„ç†å®ƒçš„åœ†è§’ä¸Žé˜´å½±ã€‚è¿™æ ·çš„è¯ï¼Œæ¯å½“å¼€å‘è€…éœ€è¦ä½œå‡ºç»†å¾®çš„è°ƒæ•´ï¼Œå°±ä¸éœ€è¦é‡çŽ°æ¸²æŸ“èƒŒæ™¯äº†ã€‚ åƒç´ å¯¹é½ä¸Žæ¨¡ç³Šæ–‡æœ¬ä¸€ä¸ªæ˜“å¼•èµ·å¾®å¦™ç»˜å›¾é—®é¢˜çš„æžå¸¸è§çš„åŽŸå› å°±æ˜¯åƒç´ ä¸å¯¹é½ã€‚å¦‚æžœè¦Core Graphicsåœ¨æŸä¸ªæ²¡æœ‰å¯¹é½åƒç´ çš„ç‚¹è¿›è¡Œç»˜åˆ¶ï¼Œå®ƒå°†å‡ºçŽ°é”¯é½¿ã€‚é™¤éžå¯¹åƒç´ ç²¾åº¦è¦æ±‚ç‰¹åˆ«é«˜ï¼Œä¸€èˆ¬æƒ…å†µä¸‹è¦ç¡®ä¿ä½¿ç”¨æ•´åž‹åæ ‡ã€‚ é€šå¸¸ï¼Œå›¾å½¢ä¸­å¿ƒä¼šå½±å“åƒç´ å¯¹é½ã€‚å› æ­¤ï¼Œcenterå±žæ€§ä¼šå¸¦æ¥éº»çƒ¦ã€‚å¦‚æžœå°†ä¸­å¿ƒè®¾ç½®ä¸ºä¸€ä¸ªæ•´åž‹åæ ‡ï¼ŒåŽŸç‚¹å°±å¯èƒ½å‡ºçŽ°ä¸å¯¹é½ã€‚å°¤å…¶è¦æ³¨æ„æ–‡æœ¬ä¸å¯¹é½çš„æƒ…å†µï¼Œç‰¹åˆ«æ˜¯UILabelã€‚è§£å†³çš„åŠžæ³•æœ‰ä¸¤ç§ï¼Œé¦–å…ˆï¼Œå­—ä½“å¤§å°ä¸ºå¥‡æ•°ï¼ˆæ¯”å¦‚13è€Œä¸æ˜¯12ï¼‰ä¸€èˆ¬å¯ä»¥æ­£ç¡®å¯¹é½ã€‚å¦‚æžœä¹ æƒ¯ä½¿ç”¨å¥‡æ•°å·å­—ä½“é€šå¸¸å¯ä»¥é¿å…è¿™ä¸ªé—®é¢˜ã€‚è¦ç¡®å®šé¿å…äº†è¿™ä¸ªé—®é¢˜ï¼Œéœ€è¦ç¡®ä¿é€šè¿‡setFrameï¼šæ–¹æ³•æˆ–åƒsetAlignedCenterï¼šè¿™æ ·çš„UIViewåˆ†ç±»è®¾ç½®å›¾å½¢ä¸ºæ•´åž‹ã€‚1234-(void)setAlignedCenter:(CGPoint)center&#123; self.center = center; self.frame = CGRectIntegral(self.frame);&#125; é€æ˜Žã€ä¸é€æ˜Žä¸Žéšè— æ˜¯å¦å°†è§†å›¾æ ‡è®°ä¸ºopaqueå¹¶ä¸ä¼šå®žé™…å‡é«˜æˆ–é™ä½Žå®ƒçš„é€æ˜Žåº¦ã€‚ç»˜å›¾ç³»ç»Ÿå¯ä»¥ä½¿ç”¨opaqueè¿›è¡Œä¼˜åŒ–ã€‚å½“è§†å›¾æ ‡è®°ä¸ºopaqueï¼Œä¾¿æ˜¯å‘ç»˜å›¾ç³»ç»Ÿâ€è®¸è¯ºâ€å³å°†ç»˜åˆ¶çš„æ¯ä¸€ä¸ªåƒç´ éƒ½è¦ä½¿ç”¨ä¸é€æ˜Žçš„é¢œè‰²ã€‚è¿™ä¾¿å…è®¸ç»˜å›¾ç³»ç»Ÿå¿½ç•¥è¢«è¦†ç›–åœ¨ä¸‹é¢çš„è§†å›¾ï¼Œè¿™æ ·å¯ä»¥æ”¹å–„æ€§èƒ½ï¼Œå°¤å…¶æ˜¯åœ¨è¿›è¡Œå˜å½¢æ—¶ã€‚å¼€å‘è€…åº”è¯¥å°½é‡å°†è§†å›¾æ ‡è®°ä¸ºopaqueï¼Œå°¤å…¶æ˜¯åƒUITableViewCellè¿™æ ·å¯ä»¥æ»šåŠ¨çš„è§†å›¾ã€‚ä¸è¿‡ï¼Œå¦‚æžœè§†å›¾æœ‰ç‰¹å®šçš„é€æ˜ŽåŒºåŸŸï¼Œæˆ–è€…å¹¶ä¸ç»˜åˆ¶çŸ©å½¢çš„æ‰€æœ‰å…ƒç´ ï¼Œè®¾ç½®opaqueä¼šå¯¼è‡´ä¸å¯é¢„æµ‹çš„ç»“æžœã€‚ éšè—å’Œé€æ˜Žè§†å›¾å¹¶ä¸æŽ¥æ”¶è§¦æ‘¸äº‹ä»¶ã€‚ä¸èƒ½é€šè¿‡è®¾ç½®éžå¸¸ä½Žçš„alphaæ¥åˆ›å»ºâ€é€æ˜Žè¦†ç›–å±‚â€ï¼Œä»Žè€Œæ•æ‰è§¦æ‘¸äº‹ä»¶ã€‚å¯ä»¥åˆ›å»ºä¸€ä¸ªé€æ˜Žè§†å›¾å¹¶é€šè¿‡è®¾ç½®å®ƒçš„alphaå€¼ä¸º1ï¼Œopaqueä¸ºNOï¼Œä¸”backgroundColorä¸ºnilæˆ–[UIColor clearColor],æ¥æŽ¥æ”¶è§¦æ‘¸äº‹ä»¶ã€‚]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[åˆ©ç”¨è¿è¡Œæ—¶å…³è”å¯¹è±¡ä½¿ç”¨ç¤ºä¾‹]]></title>
      <url>%2F2017%2F03%2F18%2F%E5%88%A9%E7%94%A8%E8%BF%90%E8%A1%8C%E6%97%B6%E5%85%B3%E8%81%94%E5%AF%B9%E8%B1%A1%E4%BD%BF%E7%94%A8%E7%A4%BA%E4%BE%8B%2F</url>
      <content type="text"><![CDATA[ä½¿ç”¨åœºæ™¯æ¨¡æ‹Ÿï¼š æœ‰å¤šä¸ªæŒ‰é’®ï¼Œå½“ç‚¹å‡»å…¶ä¸­æŸä¸ªæŒ‰é’®çš„æ—¶å€™ï¼Œä¼šå¼¹å‡ºè­¦å‘Šæ¡†ï¼Œå½“è­¦å‘Šæ¡†å…³é—­çš„æ—¶å€™ï¼Œéœ€è¦çŸ¥é“æ˜¯ç‚¹å‡»äº†å“ªä¸€ä¸ªæŒ‰é’®ã€‚è¿™ä¸ªæ—¶å€™å°±å¯ä»¥ä½¿ç”¨å…³è”å¼•ç”¨ã€‚å½“ç‚¹å‡»è­¦å‘Šæ¡†çš„æ—¶å€™ï¼Œä¼šè°ƒç”¨ä»£ç†æ–¹æ³•ï¼Œåªæœ‰è°ƒç”¨äº†ä»£ç†æ–¹æ³•è€ŒéžæŒ‰é’®äº‹ä»¶å¤„ç†æ–¹æ³•çš„æ—¶å€™ï¼Œæ‰è¡¨ç¤ºç”¨æˆ·ç‚¹å‡»äº†è­¦å‘Šæ¡†ï¼Œæ‰€ä»¥åœ¨ä»£ç†æ–¹æ³•ä¸­èŽ·å–æŒ‰é’®æ‰æ˜¯æ­£ç¡®çš„æ—¶å€™ã€‚é€šè¿‡å…³è”å¼•ç”¨å¯ä»¥å®žçŽ°è¿™ä¸ªä¸šåŠ¡ï¼š123456789101112131415161718192021222324252627#import &quot;ViewController.h&quot;#import &lt;objc/runtime.h&gt;@implementation ViewControllerstatic const char kRepresentedObject;- (IBAction)doSomething:(id)sender &#123;UIAlertView *alert = [[UIAlertView alloc]initWithTitle:@&quot;è­¦å‘Šâš ï¸&quot; message:nildelegate:selfcancelButtonTitle:@&quot;OK&quot;otherButtonTitles:nil];objc_setAssociatedObject(alert, &amp;kRepresentedObject, sender,OBJC_ASSOCIATION_RETAIN_NONATOMIC);[alert show];&#125;- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex &#123;UIButton *sender = objc_getAssociatedObject(alertView, &amp;kRepresentedObject);self.buttonLabel.text = [[sender titleLabel] text];&#125;@end]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[Core Data å­¦ä¹ ]]></title>
      <url>%2F2017%2F03%2F17%2FCore-Data-%E5%AD%A6%E4%B9%A0%2F</url>
      <content type="text"><![CDATA[é€šè¿‡Core Data å’Œ iCloudçš„åä½œå®žçŽ°è·¨è®¾å¤‡çš„åŒæ­¥æ•°æ® Core Data å¯ä»¥ä½¿ç”¨SQLiteä½œä¸ºå…¶åŽå°æ•°æ®å­˜å‚¨ã€‚è¿™ä¸ºCore Dataæä¾›äº†ä¸€ä¸ªé«˜æ€§èƒ½çš„æŸ¥è¯¢å¼•æ“Žã€‚ç›¸æ¯”è¾ƒäºŽå¹³é¢æ•°æ®æ–‡ä»¶æˆ–æ˜¯plistæ–‡ä»¶è¿›è¡Œæœç´¢å’ŒæŽ’åºï¼ŒCore Dataèƒ½æä¾›æ›´é«˜çš„é€Ÿåº¦ã€‚ åœ¨ä»»ä½•æ—¶é—´åªè¯»å–éœ€è¦çš„æ–‡ä»¶ï¼Œ Core Data APIèƒ½å¤ŸèŠ‚çœå†…å­˜ã€‚ ä½¿ç”¨NSPredicatè¿‡æ»¤æ•°æ®ï¼Œä½¿ç”¨NSSortDescriptoræŽ’åºæ•°æ® Core Data çš„å…³é”®ç»„ä»¶æ˜¯ï¼š æ•°æ®å­˜å‚¨(data store)ã€ æŒä¹…å­˜å‚¨åè°ƒå™¨(Persistent Store Coordinator)ã€ æ‰˜ç®¡å¯¹è±¡æ¨¡åž‹(Managed Object Model)ã€æ‰˜ç®¡å¯¹è±¡ä¸Šä¸‹æ–‡(Managed Object Context) æ•°æ®å­˜å‚¨ï¼š ä¿å­˜æ•°æ®çš„ä¸€ä¸ªæˆ–ä¸€ç»„æ–‡ä»¶ã€‚å®ƒæ˜¯å½“ä¿å­˜æ•°æ®æ¶ˆæ¯å‘é€åˆ°Core DataåŽå®žé™…å†™å…¥åˆ°ç£ç›˜çš„æ–‡ä»¶ã€‚æ•°æ®å­˜å‚¨å¯ä»¥æ˜¯ä¸€ä¸ªäºŒè¿›åˆ¶æ•°æ®æ–‡ä»¶ã€ä¸€ä¸ªSQLiteæ•°æ®æ–‡ä»¶æˆ–ä¸€ä¸ªå†…å­˜ä¸­çš„æ•°æ®æ–‡ä»¶å¼€å‘äººå‘˜ä¸ä¼šç›´æŽ¥è®¿é—®æ•°æ®å­˜å‚¨ï¼ŒæŒä¹…å­˜å‚¨åè°ƒå™¨æŠ½è±¡äº†å¯¹æ•°æ®æ–‡ä»¶çš„è®¿é—®ã€‚ æŒä¹…å­˜å‚¨åè°ƒå™¨ï¼šåœ¨æ‰˜ç®¡å¯¹è±¡ä¸Šä¸‹æ–‡å’Œæ•°æ®å­˜å‚¨ä¹‹é—´æ‰®æ¼”ç€ä¸­é—´äººçš„è§’è‰²ã€‚åè°ƒå™¨ä»Žä¸Šä¸‹æ–‡ä¸­èŽ·å¾—æ•°æ®è¯·æ±‚å¹¶å°†å®ƒä»¬è½¬å‘ç»™åˆé€‚çš„æ•°æ®å­˜å‚¨ã€‚åè°ƒå™¨å°†æ•°æ®å­˜å‚¨å’Œæ‰˜ç®¡å¯¹è±¡æ¨¡åž‹å…³è”åœ¨ä¸€èµ·ã€‚æŒä¹…å­˜å‚¨åè°ƒå™¨æ˜¯NSPersistentStoreCoordinatorç±»çš„å®žä¾‹* NSPersistentStoreCoordinatorç±»ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå› æ­¤ï¼Œå¦‚æžœè®¡åˆ’è·¨å¤šçº¿ç¨‹åŒæ­¥è®¿é—®ä¸€ä¸ªæ•°æ®å­˜å‚¨ï¼Œåˆ™éœ€è¦ä¸ºæ¯ä¸ªçº¿ç¨‹åˆ›å»ºä¸€ä¸ªåè°ƒå™¨æˆ–æ‰‹åŠ¨é”å®šå’Œè§£é”å•ä¸ªåè°ƒå™¨ æ‰˜ç®¡å¯¹è±¡æ¨¡åž‹ï¼š NSManagedObjectModelã€‚ æ¨¡åž‹ç”±ä¸€ç»„å®žä½“ç»„æˆï¼Œå®ƒä»¬å®šä¹‰äº†åº”ç”¨ç¨‹åºä¸­çš„æ•°æ®å¯¹è±¡ã€‚ æ‰˜ç®¡å¯¹è±¡ä¸Šä¸‹æ–‡: NSManagedObjectContext. ä¸Šä¸‹æ–‡ç”¨äºŽä¿å­˜æ‰€æœ‰æ‰˜ç®¡æ•°æ®å¯¹è±¡ã€‚æ‰˜ç®¡æ•°æ®å¯¹è±¡æ˜¯NSManagedObjectç±»çš„å®žä¾‹æˆ–å­ç±»ã€‚æ‰˜ç®¡å¯¹è±¡ä¸Šä¸‹æ–‡ç®¡ç†æ‰€æœ‰çš„æ‰˜ç®¡å¯¹è±¡ã€‚å¯ä»¥å°†è¯¥ä¸Šä¸‹æ–‡æƒ³è±¡æˆä¿å­˜æ‰€æœ‰åº”ç”¨ç¨‹åºæ•°æ®çš„æ²™ç®±ã€‚ Core Data å¯ä»¥å°†SQLiteç”¨ä½œç£ç›˜ä¸Šçš„æ•°æ®å­˜å‚¨ä»¥æŒä¹…åŒ–æˆ‘ä»¬çš„æ•°æ®ã€‚è¿˜å¯ä»¥ä½¿ç”¨ä¸€ä¸ªä¸“æœ‰çš„äºŒè¿›åˆ¶æ–‡ä»¶ä½œä¸ºæ•°æ®å­˜å‚¨ã€‚ç›¸å¯¹äºŽä½¿ç”¨SQLiteæ ¼å¼æ—¶æŒ‰éœ€åŠ è½½éƒ¨åˆ†å¯¹è±¡å›¾ï¼ŒäºŒè¿›åˆ¶æ ¼å¼éœ€è¦å°†æ•´ä¸ªå¯¹è±¡å›¾åŠ è½½åˆ°å†…å­˜ä¸­ã€‚ iCloudæä¾›ä¸‰ç§ç±»åž‹çš„å­˜å‚¨æ–¹æ¡ˆï¼š é”®-å€¼å­˜å‚¨ã€æ–‡æ¡£å­˜å‚¨ã€Core Dataå­˜å‚¨ã€‚é”®-å€¼å­˜å‚¨ç”¨äºŽå­˜å‚¨ç‹¬ç«‹çš„é”®-å€¼å¯¹ï¼Œå¯ç”¨äºŽå­˜å‚¨å°‘é‡çš„æ•°æ®ï¼Œå¦‚ç”¨æˆ·é¦–é€‰é¡¹ã€æ¸¸æˆåˆ†æ•°å’Œåº”ç”¨ç¨‹åºè®¾ç½®ã€‚æ–‡æ¡£å­˜å‚¨ç”¨äºŽå­˜å‚¨åŸºäºŽæ–‡æ¡£çš„å†…å®¹ï¼Œå¦‚ç”µå­è¡¨æ ¼ã€æ–‡æœ¬æ–‡æ¡£å’Œç»˜å›¾æ–‡ä»¶ã€‚Core Dataå­˜å‚¨å…è®¸è·¨å¤šä¸ªè®¾å¤‡åŒæ­¥Core Data åº”ç”¨ç¨‹åºã€‚ è‹¹æžœæä¾›äº†ä¸€ä¸ªæ•°æ®ä¿æŠ¤APIç”¨äºŽå®‰å…¨åœ°åŠ å¯†åº”ç”¨ç¨‹åºæ•°æ®ã€‚é€šå¸¸å½“éœ€è¦ä¿æŠ¤æ•°æ®æ–‡ä»¶æ—¶å¯é€šè¿‡ä½¿ç”¨NSFileManagerå¯¹è±¡çš„setAttributesï¼šofItemAtPath:error:æ–¹æ³•è®¾ç½®æ–‡ä»¶çš„ä¸€ä¸ªç‰¹æ€§æ¥è¿›è¡Œé…ç½®ã€‚è¯¥APIå…è®¸å°†æ–‡ä»¶ä¿æŠ¤é”®è®¾ç½®ä¸ºä¸åŒçš„å€¼ï¼Œä»Žè€Œæä¾›ä¸€äº›å…³äºŽè¢«ä¿æŠ¤çš„æ•°æ®ä½•æ—¶å¤„äºŽåŠ å¯†æˆ–è§£å¯†çŠ¶æ€çš„é€‰é¡¹ã€‚ NSFileProtectinNone: æ–‡ä»¶æ²¡æœ‰åŠ å¯†ã€‚åº”ç”¨ç¨‹åºå¯ä»¥åœ¨ä»»ä½•æ—¶å€™è¯»å†™æ­¤æ–‡ä»¶ NSFileProtetionComplete: åœ¨è®¾å¤‡é”å®šæˆ–å¯åŠ¨æ—¶æ–‡ä»¶å¤„äºŽåŠ å¯†çŠ¶æ€ã€‚ NSFileProtetionCompleteUnlessOpen: æ–‡ä»¶åœ¨éšç€è®¾å¤‡çš„è§£é”è€Œæ‰“å¼€å‰æ˜¯åŠ å¯†çš„ï¼Œä¸€æ—¦æ–‡ä»¶æ‰“å¼€ï¼Œåº”ç”¨ç¨‹åºå¯ä»¥åœ¨ä»»ä½•æ—¶å€™è¯»å†™è¯¥æ–‡ä»¶ï¼Œè®¾ç½®æ˜¯åœ¨è®¾å¤‡é”å®šçš„æ—¶å€™ NSFileProtetionCompleteUntilFirstUserAuthentication: æ–‡ä»¶åœ¨è®¾å¤‡å¯åŠ¨æ—¶æ˜¯åŠ å¯†çš„ï¼Œå¹¶ä¸”ä¸€ç›´ä¿æŒé”å®šç›´åˆ°ç”¨æˆ·ç¬¬ä¸€æ¬¡è§£é”è®¾å¤‡ã€‚åœ¨ç”¨æˆ·ç¬¬ä¸€æ¬¡è§£é”è®¾å¤‡åŽï¼Œåº”ç”¨ç¨‹åºå¯ä»¥è¯»å†™è¯¥æ–‡ä»¶ã€‚ å½“åœ¨Core Dataä¸­ä½¿ç”¨SQLiteæ•°æ®å­˜å‚¨æ—¶ï¼Œæ•°æ®å­˜å‚¨åœ¨è®¾å¤‡ä¸Šçš„SQLiteæ•°æ®åº“ä¸­ã€‚è¯¥æ•°æ®å­˜å‚¨çš„é»˜è®¤æ–‡ä»¶ä¿æŠ¤æ˜¯NSFileProtectionCompleteUntilFirstUserAuthenticationã€‚ç„¶è€Œï¼Œé€šè¿‡ä¿®æ”¹åœ¨App Delegateä¸­åˆ›å»ºæ•°æ®åº“æ–‡ä»¶çš„ä»£ç åœ¨é¦–æ¬¡åˆ›å»ºæ•°æ®å­˜å‚¨æ—¶å¯ä»¥æŒ‡å®šæ•°æ®ä¿æŠ¤çº§åˆ«ã€‚]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[SQLiteå­¦ä¹ ]]></title>
      <url>%2F2017%2F03%2F15%2FSQLite%E5%AD%A6%E4%B9%A0%2F</url>
      <content type="text"><![CDATA[1.CoreData ä¸»è¦ç›®çš„æ˜¯æŒä¹…åŒ–åº”ç”¨ç¨‹åºåˆ›å»ºçš„å¯¹è±¡ã€‚å½“é¢„å…ˆåŠ è½½å…·æœ‰å¤§é‡æ•°æ®çš„åº”ç”¨ç¨‹åºæ—¶ï¼ŒSQLiteçš„è¡¨çŽ°æ›´çªå‡ºï¼Œè€ŒCoreDataæ“…é•¿ç®¡ç†åœ¨è®¾å¤‡ä¸Šåˆ›å»ºçš„æ•°æ®2.SQLiteçš„å¤§å°å°äºŽ300KB.åœ¨ä½¿ç”¨ä¸Šï¼Œåªéœ€è¦å°†æ•°æ®åº“æ–‡ä»¶æ‹–æ”¾åˆ°è®¾å¤‡ä¸Šï¼Œç„¶åŽåœ¨iOSé¡¹ç›®ä¸­åŒ…å«SQLiteåº“ï¼Œå°±å®Œæˆäº†å‡†å¤‡å·¥ä½œ3.å¦‚æžœåªéœ€è¦æŒä¹…åŒ–åº”ç”¨ç¨‹åºä½¿ç”¨æœŸé—´åˆ›å»ºçš„å¯¹è±¡ï¼Œåˆ™åº”è¯¥è€ƒè™‘ä½¿ç”¨Core Dataã€‚4.ç”¨æˆ·ç•Œé¢å’Œæ•°æ®åº”è¯¥æ˜¯å®Œå…¨è§£è€¦çš„ï¼Œå¹¶ä¸”åº”è¯¥ç‹¬ç«‹çš„è§„èŒƒåŒ–æ•°æ®ã€‚ å®žä½“ï¼ˆè¡¨ï¼‰ -&gt; å®žä½“çš„ç‰¹æ€§(å­—æ®µ)6.ä½¿ç”¨å‘½ä»¤è¡Œçš„ä¼˜ç‚¹ï¼š å¯ä»¥ä½¿ç”¨å‘½ä»¤è¡Œå’Œè„šæœ¬æŽ¥å£åˆ›å»ºå’Œå¡«å……æ•°æ®åº“ã€‚ä½¿ç”¨å‘½ä»¤è¡ŒæŽ¥å£å¯¼å…¥æ–‡ä»¶æ•°æ®åˆ°è¡¨ä¸­ï¼Œæ‰§è¡Œå’Œè¯»å–åŒ…å«SQLçš„æ–‡ä»¶ï¼Œä»¥å„ç§æ ¼å¼è¾“å‡ºæ•°æ®åº“ä¸­çš„æ•°æ®7.é€šè¿‡åœ¨å‘½ä»¤è¡Œæç¤ºç¬¦åŽè¾“å…¥sqlite3 catalog.dbï¼Œå¯åŠ¨å‘½ä»¤è¡Œå·¥å…·å¹¶åˆ›å»ºæ–°çš„æ•°æ®åº“ã€‚æ‰§è¡ŒATTACH DATABASEå‘½ä»¤æˆ–è€…é™„åŠ çŽ°æœ‰æ•°æ®åº“åˆ°SQLiteå·¥å…·ï¼Œæˆ–è€…åœ¨åˆ¶å®šæ–‡ä»¶ä¸å­˜åœ¨æ—¶åˆ›å»ºæ–°çš„æ•°æ®åº“ã€‚8.å¯ä»¥é™„åŠ å¤šä¸ªæ•°æ®åº“åˆ°ä¸€ä¸ªå‘½ä»¤è¡Œå·¥å…·å®žä¾‹å¹¶ä»¥æ•°æ®åº“åç§°.è¡¨åç§°çš„æ ¼å¼ä½¿ç”¨ç‚¹ç¬¦å·åœ¨æ¯ä¸ªæ•°æ®åº“ä¸­å¼•ç”¨æ•°æ®ã€‚å¯ä»¥ä½¿ç”¨è¿™ä¸ªå¼ºå¤§çš„ç‰¹æ€§å°†æ•°æ®ä»Žä¸€ä¸ªæ•°æ®åº“è¿ç§»åˆ°å¦ä¸€ä¸ªæ•°æ®åº“9.åœ¨å‘½ä»¤è¡Œä¸­è¾“å…¥.helpå¯ä»¥æ˜¾ç¤ºè¿™äº›å…ƒå‘½ä»¤ã€‚è¾“å…¥.databaseså¯ä»¥çœ‹åˆ°å“ªäº›æ•°æ®åº“é™„åŠ åˆ°å½“å‰çš„å·¥å…·å®žä¾‹ã€‚è¾“å…¥.exitæˆ–.quitå¯ä»¥é€€å‡ºå‘½ä»¤è¡Œå·¥å…·10.åœ¨SQLiteå‘½ä»¤æç¤ºç¬¦å¤„è¾“å…¥CREATE TABLEè¯­å¥ï¼š1CREATE TABLE &quot;main&quot;.&quot;Product&quot;(&quot;ID&quot; INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, &quot;Name&quot; TEXT, &quot;Manu&quot; INTEGER, &quot;Details&quot; TEXT, &quot;Price&quot; DOUBLE); åˆ›å»ºåä¸ºProductçš„è¡¨å°†IDå­—æ®µåˆ¶å®šä¸ºä¸»é”®å¹¶ä¸”å°†å…¶åˆ¶å®šä¸ºä¸€ä¸ªAUTOINCREMENTï¼ˆè‡ªåŠ¨å¢žé•¿ï¼‰å­—æ®µã€‚è¿™æ„å‘³ç€ä½ ä¸éœ€è¦æä¾›IDå€¼ï¼Œæ•°æ®åº“å¼•æ“Žå°†è‡ªåŠ¨äº§ç”Ÿå®ƒä»¬ã€‚ 11.å¤–é”®çº¦æŸå…è®¸æ•°æ®åº“éªŒè¯å­è¡¨ä¸­ç”¨ä½œå¤–é”®çš„å€¼è¢«æ˜ å°„åˆ°äº†å­˜å‚¨åœ¨çˆ¶è¡¨ä¸­çš„å€¼ã€‚12.å¯ä»¥ä½¿ç”¨ä¸‹åˆ—INSERTè¯­å¥æ’å…¥ä¸€åˆ—åˆ°Productè¡¨ä¸­12INSERT INTO &quot;main&quot;.&quot;Product&quot; (&quot;Name&quot;,&quot;ManufacturerID&quot;,&quot;DETAILS&quot;,&quot;Price&quot;,&quot;QuantityOnHand&quot;,&quot;CountryOfOriginID&quot;,&quot;Image&quot;) VALUES (&apos;WIDGET A&apos;,&apos;1&apos;,&apos;Details of Widget A&apos;,&apos;1.29&apos;,&apos;5&apos;,&apos;1&apos;,&apos;Canvas_1&apos;);sqlite&gt; 13.ä½¿ç”¨å‘½ä»¤è¡Œå·¥å…·å¯ä»¥æŠŠæ–‡æœ¬æ–‡ä»¶å¯¼å…¥åˆ°æ•°æ®åº“ã€‚å½“ä»Žå¦å¤–ä¸€ä¸ªæ•°æ®åº“è½¬å­˜æ•°æ®æ—¶å°±ä¼šè¢«æ´¾ä¸Šç”¨åœºï¼Œå¦å¤–çš„é‚£ä¸ªæ•°æ®åº“å¯ä»¥æ˜¯å¾®è½¯ç”µå­è¡¨æ ¼ï¼Œæˆ–åªæ˜¯ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ã€‚å¯ä»¥ä¸ºæ¯ä¸€ä¸ªæ•°æ®åº“è¡¨åˆ›å»ºä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶å¹¶ä½¿ç”¨å¯¼å…¥åŠŸèƒ½å°†æ•°æ®å¯¼å…¥åˆ°æ•°æ®åº“ã€‚14.è¾“å…¥å‘½ä»¤.separator â€œ\tâ€,åˆ¶å®šä½¿ç”¨åˆ¶è¡¨ç¬¦\tä½œä¸ºæ•°æ®æ–‡ä»¶ä¸­å­—æ®µçš„åˆ†éš”ç¬¦ã€‚15.è¾“å…¥.import â€œproducts.txtâ€ Product å¯¼å…¥products.txtæ–‡ä»¶åˆ°Productè¡¨ä¸­16.æŸ¥è¯¢è¡¨ä¸­çš„æ‰€æœ‰å†…å®¹ï¼š1select * from Product; 17.æŒ‰é¡ºåºæ˜¾ç¤ºæŸ¥è¯¢ï¼š1select name,price from Product order by price; 18.è¿žæŽ¥è¡¨çš„æ˜¾ç¤ºï¼š1select name,country from Product,Country where Product.CountryOfOriginID=Country.CountryID; 19.ä½¿ç”¨WHEREå­å¥è¿‡æ»¤æ•°æ®ï¼š1select name,country from Product,Country where Product.CountryOfOriginID=Country.CountryID and Country.Country=&quot;China&quot;; 20.æŠ½è±¡å¯¹æ•°æ®åº“çš„è®¿é—®æ˜¯ä¸€ä¸ªå¥½ä¸»æ„ï¼Œç¼–å†™ä¸€ä¸ªé€šç”¨ç±»æ¥æ‰§è¡Œå¸¸ç”¨æ•°æ®åº“åŠŸèƒ½ã€‚å¦‚æžœæƒ³è¦ä»¥åŽä½¿ç”¨ä¸åŒçš„æ•°æ®åº“å¼•æ“Žï¼Œè¿™æ ·åšèƒ½å¤Ÿæä¾›çµæ´»æ€§ã€‚åˆ›å»ºä¸€ä¸ªæ•°æ®åº“è®¿é—®ç±»æ¥å’Œæ•°æ®åº“äº¤äº’ã€‚]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[Git ä½¿ç”¨]]></title>
      <url>%2F2017%2F03%2F14%2FGit-%E4%BD%BF%E7%94%A8%2F</url>
      <content type="text"><![CDATA[åˆ›å»ºç‰ˆæœ¬åº“ç‰ˆæœ¬åº“åˆåä»“åº“ï¼Œè‹±æ–‡årepository.ä½ å¯ä»¥ç®€å•ç†è§£æˆä¸€ä¸ªç›®å½•ï¼Œè¿™ä¸ªç›®å½•é‡Œé¢çš„æ‰€æœ‰æ–‡ä»¶éƒ½å¯ä»¥è¢«Gitç®¡ç†èµ·æ¥ï¼Œæ¯ä¸ªæ–‡ä»¶çš„ä¿®æ”¹ã€åˆ é™¤ï¼ŒGitéƒ½èƒ½è·Ÿè¸ªï¼Œä»¥ä¾¿ä»»ä½•æ—¶åˆ»éƒ½å¯ä»¥è¿½è¸ªåŽ†å²ï¼Œæˆ–è€…åœ¨å°†æ¥æŸä¸ªæ—¶åˆ»å¯ä»¥â€œè¿˜åŽŸâ€ã€‚ æ‰€ä»¥ï¼Œåˆ›å»ºä¸€ä¸ªç‰ˆæœ¬åº“éžå¸¸ç®€å•ï¼Œé¦–å…ˆï¼Œé€‰æ‹©ä¸€ä¸ªåˆé€‚çš„åœ°æ–¹ï¼Œåˆ›å»ºä¸€ä¸ªç©ºç›®å½•ï¼š12$ mkdir learngit$ cd learngit ç¬¬äºŒæ­¥ï¼Œé€šè¿‡git initå‘½ä»¤æŠŠè¿™ä¸ªç›®å½•å˜æˆGitå¯ä»¥ç®¡ç†çš„ä»“åº“ï¼š1$ git init çŽ°åœ¨æˆ‘ä»¬ç¼–å†™ä¸€ä¸ªreadme.txtæ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š12Git is a version control system.Git is free software. ä¸€å®šè¦æ”¾åˆ°learngitç›®å½•ä¸‹ï¼ˆå­ç›®å½•ä¹Ÿè¡Œ)æŠŠä¸€ä¸ªæ–‡ä»¶æ”¾åœ¨Gitä»“åº“åªéœ€è¦ä¸¤æ­¥:ç¬¬ä¸€æ­¥ï¼Œç”¨å‘½ä»¤git addå‘Šè¯‰Gitï¼ŒæŠŠæ–‡ä»¶æ·»åŠ åˆ°ä»“åº“ï¼š1$ git add readme.txt ç¬¬äºŒæ­¥ï¼Œç”¨å‘½ä»¤git commitå‘Šè¯‰Gitï¼ŒæŠŠæ–‡ä»¶æäº¤åˆ°ä»“åº“ï¼š12345$ git commit -m &quot;wrote a readme file&quot;[master (root-commit) adedc1b] worte a readme fone1 file changed, 2 insertions(+)create mode 100644 readme.txt git commitå‘½ä»¤æ‰§è¡ŒæˆåŠŸåŽä¼šå‘Šè¯‰ä½ ï¼Œ1ä¸ªæ–‡ä»¶è¢«æ”¹åŠ¨ï¼ˆæˆ‘ä»¬æ–°æ·»åŠ çš„readme.txtæ–‡ä»¶ï¼‰ï¼Œæ’å…¥äº†ä¸¤è¡Œå†…å®¹ï¼ˆreadme.txtæœ‰ä¸¤è¡Œå†…å®¹ï¼‰ã€‚ æ—¶å…‰æœºç©¿æ¢­æˆ‘ä»¬å·²ç»æˆåŠŸåœ°æ·»åŠ å¹¶æäº¤äº†ä¸€ä¸ªreadme.txtæ–‡ä»¶ï¼ŒçŽ°åœ¨ä¿®æ”¹readme.txtæ–‡ä»¶ï¼Œæ”¹æˆå¦‚ä¸‹å†…å®¹ï¼š12Git is a distributed version control system.Git is free software. çŽ°åœ¨ï¼Œè¿è¡Œgit statuså‘½ä»¤çœ‹çœ‹ç»“æžœï¼š1$ git status git statuså‘½ä»¤å¯ä»¥è®©æˆ‘ä»¬æ—¶åˆ»æŽŒæ¡ä»“åº“å½“å‰çš„çŠ¶æ€è™½ç„¶Gitå‘Šè¯‰æˆ‘ä»¬readme.txtè¢«ä¿®æ”¹äº†,ä½†æ˜¯æ— æ³•çœ‹åˆ°å…·ä½“çš„ä¿®æ”¹å†…å®¹,ä½¿ç”¨git diffæ¥æŸ¥çœ‹1$ git diff æäº¤ä¿®æ”¹å’Œæäº¤æ–°æ–‡ä»¶æ˜¯ä¸€æ ·çš„ä¸¤æ­¥ï¼Œç¬¬ä¸€æ­¥æ˜¯git addï¼š1$ git add readme.txt åœ¨æ‰§è¡Œç¬¬äºŒæ­¥git commitä¹‹å‰ï¼Œæˆ‘ä»¬å†è¿è¡Œgit statusçœ‹çœ‹å½“å‰ä»“åº“çš„çŠ¶æ€ï¼š1$ git status æäº¤:1$ git commit -m &quot;add distributed&quot; ç‰ˆæœ¬å›žé€€ä¿®æ”¹readme.txtæ–‡ä»¶å¦‚ä¸‹ï¼š12Git is a distributed version control system.Git is free software distributed under the GPL. ç„¶åŽæäº¤:12$ git add readme.txt$ git commit -m &quot;append GPL&quot; åƒè¿™æ ·ï¼Œä½ ä¸æ–­å¯¹æ–‡ä»¶è¿›è¡Œä¿®æ”¹ï¼Œç„¶åŽä¸æ–­æäº¤ä¿®æ”¹åˆ°ç‰ˆæœ¬åº“é‡Œï¼Œå°±å¥½æ¯”çŽ©RPGæ¸¸æˆæ—¶ï¼Œæ¯é€šè¿‡ä¸€å…³å°±ä¼šè‡ªåŠ¨æŠŠæ¸¸æˆçŠ¶æ€å­˜ç›˜ï¼Œå¦‚æžœæŸä¸€å…³æ²¡è¿‡åŽ»ï¼Œä½ è¿˜å¯ä»¥é€‰æ‹©è¯»å–å‰ä¸€å…³çš„çŠ¶æ€ã€‚æœ‰äº›æ—¶å€™ï¼Œåœ¨æ‰“Bossä¹‹å‰ï¼Œä½ ä¼šæ‰‹åŠ¨å­˜ç›˜ï¼Œä»¥ä¾¿ä¸‡ä¸€æ‰“Bosså¤±è´¥äº†ï¼Œå¯ä»¥ä»Žæœ€è¿‘çš„åœ°æ–¹é‡æ–°å¼€å§‹ã€‚Gitä¹Ÿæ˜¯ä¸€æ ·ï¼Œæ¯å½“ä½ è§‰å¾—æ–‡ä»¶ä¿®æ”¹åˆ°ä¸€å®šç¨‹åº¦çš„æ—¶å€™ï¼Œå°±å¯ä»¥â€œä¿å­˜ä¸€ä¸ªå¿«ç…§â€ï¼Œè¿™ä¸ªå¿«ç…§åœ¨Gitä¸­è¢«ç§°ä¸ºcommitã€‚ä¸€æ—¦ä½ æŠŠæ–‡ä»¶æ”¹ä¹±äº†ï¼Œæˆ–è€…è¯¯åˆ äº†æ–‡ä»¶ï¼Œè¿˜å¯ä»¥ä»Žæœ€è¿‘çš„ä¸€ä¸ªcommitæ¢å¤ï¼Œç„¶åŽç»§ç»­å·¥ä½œï¼Œè€Œä¸æ˜¯æŠŠå‡ ä¸ªæœˆçš„å·¥ä½œæˆæžœå…¨éƒ¨ä¸¢å¤±ã€‚çŽ°åœ¨ï¼Œæˆ‘ä»¬å›žé¡¾ä¸€ä¸‹readme.txtæ–‡ä»¶ä¸€å…±æœ‰å‡ ä¸ªç‰ˆæœ¬è¢«æäº¤åˆ°Gitä»“åº“é‡Œäº†ï¼šç‰ˆæœ¬1ï¼šwrote a readme file12Git is a version control system.Git is free software. ç‰ˆæœ¬2ï¼šadd distributed12Git is a distributed version control system.Git is free software. ç‰ˆæœ¬3ï¼šappend GPL12Git is a distributed version control system.Git is free software distributed under the GPL. ç‰ˆæœ¬æŽ§åˆ¶ç³»ç»Ÿç”¨git logå‘½ä»¤æŸ¥çœ‹è®°å½•ï¼š12345678910111213141516171819$ git logcommit db2a1634505edec7c64ec489729ce25b35d2973bAuthor: Date: Tue Mar 14 21:25:09 2017 +0800append GPLcommit 83a96591227393b5f362df2daed351307b7e87d1Author: Date: Tue Mar 14 21:24:06 2017 +0800add distributedcommit adedc1b15172e80ce54f5997889536b71e89f64dAuthor: Date: Tue Mar 14 20:52:43 2017 +0800worte a readme fone git logå‘½ä»¤æ˜¾ç¤ºä»Žæœ€è¿‘åˆ°æœ€è¿œçš„æäº¤æ—¥å¿—å¦‚æžœå«Œè¾“å‡ºä¿¡æ¯å¤ªå¤šï¼Œçœ‹å¾—çœ¼èŠ±ç¼­ä¹±çš„ï¼Œå¯ä»¥è¯•è¯•åŠ ä¸Šâ€“pretty=onelineå‚æ•°ï¼š12345$ git log --pretty=onelinedb2a1634505edec7c64ec489729ce25b35d2973b append GPL83a96591227393b5f362df2daed351307b7e87d1 add distributedadedc1b15172e80ce54f5997889536b71e89f64d worte a readme fone å‡†å¤‡æŠŠreadme.txtå›žé€€åˆ°ä¸Šä¸€ä¸ªç‰ˆæœ¬ï¼Œä¹Ÿå°±æ˜¯â€œadd distributedâ€çš„é‚£ä¸ªç‰ˆæœ¬ é¦–å…ˆï¼ŒGitå¿…é¡»çŸ¥é“å½“å‰ç‰ˆæœ¬æ˜¯å“ªä¸ªç‰ˆæœ¬ï¼Œåœ¨Gitä¸­ï¼Œç”¨HEADè¡¨ç¤ºå½“å‰ç‰ˆæœ¬ï¼Œä¹Ÿå°±æ˜¯æœ€æ–°çš„æäº¤çš„ï¼Œä¸Šä¸€ä¸ªç‰ˆæœ¬å°±æ˜¯HEAD^ï¼Œä¸Šä¸Šä¸€ä¸ªç‰ˆæœ¬å°±æ˜¯HEAD^^ï¼Œå½“ç„¶å¾€ä¸Š100ä¸ªç‰ˆæœ¬å†™100ä¸ª^æ¯”è¾ƒå®¹æ˜“æ•°ä¸è¿‡æ¥ï¼Œæ‰€ä»¥å†™æˆHEAD~100ã€‚çŽ°åœ¨ï¼Œæˆ‘ä»¬è¦æŠŠå½“å‰ç‰ˆæœ¬â€œappend GPLâ€å›žé€€åˆ°ä¸Šä¸€ä¸ªç‰ˆæœ¬â€œadd distributedâ€ï¼Œå°±å¯ä»¥ä½¿ç”¨git resetå‘½ä»¤ï¼š1$ git reset --hard HEAD^ çœ‹çœ‹readme.txtçš„å†…å®¹æ˜¯ä¸æ˜¯ç‰ˆæœ¬add distributedï¼š123$ cat readme.txtGit is a distributed version control system.Git is free software OK!è¿™ä¸ªæ—¶å€™git logä¸€ä¸‹,123git log --pretty=oneline83a96591227393b5f362df2daed351307b7e87d1 add distributedadedc1b15172e80ce54f5997889536b71e89f64d worte a readme fone æœ€æ–°çš„é‚£ä¸ªç‰ˆæœ¬append GPLå·²ç»çœ‹ä¸åˆ°äº†ï¼Œæ‰¾åˆ°é‚£ä¸ªappend GPLçš„commit idï¼ŒäºŽæ˜¯å°±å¯ä»¥æŒ‡å®šå›žåˆ°æœªæ¥çš„æŸä¸ªç‰ˆæœ¬ï¼š12$ git reset --hard 3628164HEAD is now at db2a1634 append GPL ç‰ˆæœ¬å·æ²¡å¿…è¦å†™å…¨ï¼Œå‰å‡ ä½å°±å¯ä»¥äº†ï¼ŒGitä¼šè‡ªåŠ¨åŽ»æ‰¾ã€‚å½“ç„¶ä¹Ÿä¸èƒ½åªå†™å‰ä¸€ä¸¤ä½ï¼Œå› ä¸ºGitå¯èƒ½ä¼šæ‰¾åˆ°å¤šä¸ªç‰ˆæœ¬å·ï¼Œå°±æ— æ³•ç¡®å®šæ˜¯å“ªä¸€ä¸ªäº†ã€‚çŽ°åœ¨çœ‹ä¸€ä¸‹readme.txtçš„å†…å®¹123$ cat readme.txtGit is a distributed version control system.Git is free software distributed under the GPL. æžœç„¶ï¼Œæˆ‘èƒ¡æ±‰ä¸‰åˆå›žæ¥äº†ã€‚Gitçš„ç‰ˆæœ¬å›žé€€é€Ÿåº¦éžå¸¸å¿«ï¼Œå› ä¸ºGitåœ¨å†…éƒ¨æœ‰ä¸ªæŒ‡å‘å½“å‰ç‰ˆæœ¬çš„HEADæŒ‡é’ˆï¼Œå½“ä½ å›žé€€ç‰ˆæœ¬çš„æ—¶å€™ï¼ŒGitä»…ä»…æ˜¯æŠŠHEADä»ŽæŒ‡å‘append GPLï¼šæ”¹ä¸ºæŒ‡å‘add distributed:ç„¶åŽé¡ºä¾¿æŠŠå·¥ä½œåŒºçš„æ–‡ä»¶æ›´æ–°äº†ã€‚æ‰€ä»¥ä½ è®©HEADæŒ‡å‘å“ªä¸ªç‰ˆæœ¬å·ï¼Œä½ å°±æŠŠå½“å‰ç‰ˆæœ¬å®šä½åœ¨å“ªã€‚çŽ°åœ¨ï¼Œä½ å›žé€€åˆ°äº†æŸä¸ªç‰ˆæœ¬ï¼Œå…³æŽ‰äº†ç”µè„‘ï¼Œç¬¬äºŒå¤©æ—©ä¸Šå°±åŽæ‚”äº†ï¼Œæƒ³æ¢å¤åˆ°æ–°ç‰ˆæœ¬æ€Žä¹ˆåŠžï¼Ÿæ‰¾ä¸åˆ°æ–°ç‰ˆæœ¬çš„commit idæ€Žä¹ˆåŠžï¼Ÿå½“ä½ ç”¨$ git reset â€“hard HEAD^å›žé€€åˆ°add distributedç‰ˆæœ¬æ—¶ï¼Œå†æƒ³æ¢å¤åˆ°append GPLï¼Œå°±å¿…é¡»æ‰¾åˆ°append GPLçš„commit idã€‚Gitæä¾›äº†ä¸€ä¸ªå‘½ä»¤git reflogç”¨æ¥è®°å½•ä½ çš„æ¯ä¸€æ¬¡å‘½ä»¤ï¼š1234567$ git reflog83a9659 HEAD@&#123;0&#125;: reset: moving to 83a96591227393bdb2a163 HEAD@&#123;1&#125;: reset: moving to db2a163483a9659 HEAD@&#123;2&#125;: reset: moving to HEAD^db2a163 HEAD@&#123;3&#125;: commit: append GPL83a9659 HEAD@&#123;4&#125;: commit: add distributedadedc1b HEAD@&#123;5&#125;: commit (initial): worte a readme fone å°ç»“çŽ°åœ¨æ€»ç»“ä¸€ä¸‹ï¼š HEADæŒ‡å‘çš„ç‰ˆæœ¬å°±æ˜¯å½“å‰ç‰ˆæœ¬ï¼Œå› æ­¤ï¼ŒGitå…è®¸æˆ‘ä»¬åœ¨ç‰ˆæœ¬çš„åŽ†å²ä¹‹é—´ç©¿æ¢­ï¼Œä½¿ç”¨å‘½ä»¤git reset â€“hard commit_idã€‚ ç©¿æ¢­å‰ï¼Œç”¨git logå¯ä»¥æŸ¥çœ‹æäº¤åŽ†å²ï¼Œä»¥ä¾¿ç¡®å®šè¦å›žé€€åˆ°å“ªä¸ªç‰ˆæœ¬ã€‚ è¦é‡è¿”æœªæ¥ï¼Œç”¨git reflogæŸ¥çœ‹å‘½ä»¤åŽ†å²ï¼Œä»¥ä¾¿ç¡®å®šè¦å›žåˆ°æœªæ¥çš„å“ªä¸ªç‰ˆæœ¬ã€‚å·¥ä½œåŒºå’Œæš‚å­˜åŒºå·¥ä½œåŒº:å°±æ˜¯åœ¨ç”µè„‘é‡Œèƒ½çœ‹åˆ°çš„ç›®å½•ï¼Œæ¯”å¦‚learngitæ–‡ä»¶å¤¹å°±æ˜¯ä¸€ä¸ªå·¥ä½œåŒºï¼šç‰ˆæœ¬åº“:å·¥ä½œåŒºæœ‰ä¸€ä¸ªéšè—ç›®å½•.gitï¼Œè¿™ä¸ªä¸ç®—å·¥ä½œåŒºï¼Œè€Œæ˜¯Gitçš„ç‰ˆæœ¬åº“.Gitçš„ç‰ˆæœ¬åº“é‡Œå­˜äº†å¾ˆå¤šä¸œè¥¿ï¼Œå…¶ä¸­æœ€é‡è¦çš„å°±æ˜¯ç§°ä¸ºstageï¼ˆæˆ–è€…å«indexï¼‰çš„æš‚å­˜åŒºï¼Œè¿˜æœ‰Gitä¸ºæˆ‘ä»¬è‡ªåŠ¨åˆ›å»ºçš„ç¬¬ä¸€ä¸ªåˆ†æ”¯masterï¼Œä»¥åŠæŒ‡å‘masterçš„ä¸€ä¸ªæŒ‡é’ˆå«HEADã€‚å‰é¢è®²äº†æˆ‘ä»¬æŠŠæ–‡ä»¶å¾€Gitç‰ˆæœ¬åº“é‡Œæ·»åŠ çš„æ—¶å€™ï¼Œæ˜¯åˆ†ä¸¤æ­¥æ‰§è¡Œçš„ï¼šç¬¬ä¸€æ­¥æ˜¯ç”¨git addæŠŠæ–‡ä»¶æ·»åŠ è¿›åŽ»ï¼Œå®žé™…ä¸Šå°±æ˜¯æŠŠæ–‡ä»¶ä¿®æ”¹æ·»åŠ åˆ°æš‚å­˜åŒºï¼›ç¬¬äºŒæ­¥æ˜¯ç”¨git commitæäº¤æ›´æ”¹ï¼Œå®žé™…ä¸Šå°±æ˜¯æŠŠæš‚å­˜åŒºçš„æ‰€æœ‰å†…å®¹æäº¤åˆ°å½“å‰åˆ†æ”¯ã€‚å› ä¸ºæˆ‘ä»¬åˆ›å»ºGitç‰ˆæœ¬åº“æ—¶ï¼ŒGitè‡ªåŠ¨ä¸ºæˆ‘ä»¬åˆ›å»ºäº†å”¯ä¸€ä¸€ä¸ªmasteråˆ†æ”¯ï¼Œæ‰€ä»¥ï¼ŒçŽ°åœ¨ï¼Œgit commitå°±æ˜¯å¾€masteråˆ†æ”¯ä¸Šæäº¤æ›´æ”¹ã€‚ä½ å¯ä»¥ç®€å•ç†è§£ä¸ºï¼Œéœ€è¦æäº¤çš„æ–‡ä»¶ä¿®æ”¹é€šé€šæ”¾åˆ°æš‚å­˜åŒºï¼Œç„¶åŽï¼Œä¸€æ¬¡æ€§æäº¤æš‚å­˜åŒºçš„æ‰€æœ‰ä¿®æ”¹ã€‚æˆ‘ä»¬å†ç»ƒä¹ ä¸€éï¼Œå…ˆå¯¹readme.txtåšä¸ªä¿®æ”¹ï¼Œæ¯”å¦‚åŠ ä¸Šä¸€è¡Œå†…å®¹ï¼š 123Git is a distributed version control system.Git is free software distributed under the GPL.Git has a mutable index called stage. ç„¶åŽï¼Œåœ¨å·¥ä½œåŒºæ–°å¢žä¸€ä¸ªLICENSEæ–‡æœ¬æ–‡ä»¶ï¼ˆå†…å®¹éšä¾¿å†™ï¼‰ã€‚å…ˆç”¨git statusæŸ¥çœ‹ä¸€ä¸‹çŠ¶æ€ï¼š123456789101112131415$ git statusOn branch masterChanges not staged for commit:(use &quot;git add file...&quot; to update what will be committed)(use &quot;git checkout -- file...&quot; to discard changes in working directory)modified: readme.txtUntracked files:(use &quot;git add file...&quot; to include in what will be committed)LICENSEno changes added to commit (use &quot;git add&quot; and/or &quot;git commit -a&quot;) Gitéžå¸¸æ¸…æ¥šåœ°å‘Šè¯‰æˆ‘ä»¬ï¼Œreadme.txtè¢«ä¿®æ”¹äº†ï¼Œè€ŒLICENSEè¿˜ä»Žæ¥æ²¡æœ‰è¢«æ·»åŠ è¿‡ï¼Œæ‰€ä»¥å®ƒçš„çŠ¶æ€æ˜¯Untrackedã€‚çŽ°åœ¨ï¼Œä½¿ç”¨ä¸¤æ¬¡å‘½ä»¤git addï¼ŒæŠŠreadme.txtå’ŒLICENSEéƒ½æ·»åŠ åŽï¼Œç”¨git statuså†æŸ¥çœ‹ä¸€ä¸‹ï¼š1234567$ git statusOn branch masterChanges to be committed:(use &quot;git reset HEAD file...&quot; to unstage)new file: LICENSEmodified: readme.txt çŽ°åœ¨ï¼Œæš‚å­˜åŒºçš„çŠ¶æ€å°±å˜æˆè¿™æ ·äº†ï¼šæ‰€ä»¥ï¼Œgit addå‘½ä»¤å®žé™…ä¸Šå°±æ˜¯æŠŠè¦æäº¤çš„æ‰€æœ‰ä¿®æ”¹æ”¾åˆ°æš‚å­˜åŒºï¼ˆStageï¼‰ï¼Œç„¶åŽï¼Œæ‰§è¡Œgit commitå°±å¯ä»¥ä¸€æ¬¡æ€§æŠŠæš‚å­˜åŒºçš„æ‰€æœ‰ä¿®æ”¹æäº¤åˆ°åˆ†æ”¯ã€‚12345$ git commit -m &quot;understand how stage works&quot;[master cf3e3ef] understand how stage works2 files changed, 2 insertions(+)create mode 100644 LICENSE çŽ°åœ¨ç‰ˆæœ¬åº“å˜æˆäº†è¿™æ ·ï¼Œæš‚å­˜åŒºå°±æ²¡æœ‰ä»»ä½•å†…å®¹äº†ï¼š ç®¡ç†ä¿®æ”¹ä¸ºä»€ä¹ˆGitæ¯”å…¶ä»–ç‰ˆæœ¬æŽ§åˆ¶ç³»ç»Ÿè®¾è®¡å¾—ä¼˜ç§€ï¼Œå› ä¸ºGitè·Ÿè¸ªå¹¶ç®¡ç†çš„æ˜¯ä¿®æ”¹ï¼Œè€Œéžæ–‡ä»¶ã€‚ä»€ä¹ˆæ˜¯ä¿®æ”¹ï¼Ÿæ¯”å¦‚ä½ æ–°å¢žäº†ä¸€è¡Œï¼Œè¿™å°±æ˜¯ä¸€ä¸ªä¿®æ”¹ï¼Œåˆ é™¤äº†ä¸€è¡Œï¼Œä¹Ÿæ˜¯ä¸€ä¸ªä¿®æ”¹ï¼Œæ›´æ”¹äº†æŸäº›å­—ç¬¦ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªä¿®æ”¹ï¼Œåˆ äº†ä¸€äº›åˆåŠ äº†ä¸€äº›ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªä¿®æ”¹ï¼Œç”šè‡³åˆ›å»ºä¸€ä¸ªæ–°æ–‡ä»¶ï¼Œä¹Ÿç®—ä¸€ä¸ªä¿®æ”¹ã€‚ä¸ºä»€ä¹ˆè¯´Gitç®¡ç†çš„æ˜¯ä¿®æ”¹ï¼Œè€Œä¸æ˜¯æ–‡ä»¶å‘¢ï¼Ÿæˆ‘ä»¬è¿˜æ˜¯åšå®žéªŒã€‚ç¬¬ä¸€æ­¥ï¼Œå¯¹readme.txtåšä¸€ä¸ªä¿®æ”¹ï¼Œæ¯”å¦‚åŠ ä¸€è¡Œå†…å®¹ï¼š12345$ cat readme.txtGit is a distributed version control system.Git is free software distributed under the GPL.Git has a mutable index called stage.Git tracks changes. ç„¶åŽï¼Œæ·»åŠ ï¼š1234567$ git add readme.txt$ git statusOn branch masterChanges to be committed:(use &quot;git reset HEAD file...&quot; to unstage)modified: readme.txt ç„¶åŽï¼Œå†ä¿®æ”¹readme.txtï¼š12345$ cat readme.txtGit is a distributed version control system.Git is free software distributed under the GPL.Git has a mutable index called stage.Git tracks changes of files. æäº¤ï¼š123$ git commit -m &quot;git tracks changes&quot;[master 208dcc4] git tracks changes1 file changed, 1 insertion(+) æäº¤åŽï¼Œå†çœ‹çœ‹çŠ¶æ€ï¼š123456789$ git statusOn branch masterChanges not staged for commit:(use &quot;git add file...&quot; to update what will be committed)(use &quot;git checkout -- file...&quot; to discard changes in working directory)modified: readme.txtno changes added to commit (use &quot;git add&quot; and/or &quot;git commit -a&quot;) å’¦ï¼Œæ€Žä¹ˆç¬¬äºŒæ¬¡çš„ä¿®æ”¹æ²¡æœ‰è¢«æäº¤ï¼Ÿåˆ«æ¿€åŠ¨ï¼Œæˆ‘ä»¬å›žé¡¾ä¸€ä¸‹æ“ä½œè¿‡ç¨‹ï¼šç¬¬ä¸€æ¬¡ä¿®æ”¹ -&gt; git add -&gt; ç¬¬äºŒæ¬¡ä¿®æ”¹ -&gt; git commitä½ çœ‹ï¼Œæˆ‘ä»¬å‰é¢è®²äº†ï¼ŒGitç®¡ç†çš„æ˜¯ä¿®æ”¹ï¼Œå½“ä½ ç”¨git addå‘½ä»¤åŽï¼Œåœ¨å·¥ä½œåŒºçš„ç¬¬ä¸€æ¬¡ä¿®æ”¹è¢«æ”¾å…¥æš‚å­˜åŒºï¼Œå‡†å¤‡æäº¤ï¼Œä½†æ˜¯ï¼Œåœ¨å·¥ä½œåŒºçš„ç¬¬äºŒæ¬¡ä¿®æ”¹å¹¶æ²¡æœ‰æ”¾å…¥æš‚å­˜åŒºï¼Œæ‰€ä»¥ï¼Œgit commitåªè´Ÿè´£æŠŠæš‚å­˜åŒºçš„ä¿®æ”¹æäº¤äº†ï¼Œä¹Ÿå°±æ˜¯ç¬¬ä¸€æ¬¡çš„ä¿®æ”¹è¢«æäº¤äº†ï¼Œç¬¬äºŒæ¬¡çš„ä¿®æ”¹ä¸ä¼šè¢«æäº¤ã€‚ æäº¤åŽï¼Œç”¨git diff HEAD â€“ readme.txtå‘½ä»¤å¯ä»¥æŸ¥çœ‹å·¥ä½œåŒºå’Œç‰ˆæœ¬åº“é‡Œé¢æœ€æ–°ç‰ˆæœ¬çš„åŒºåˆ«ï¼š123456789101112$ git diff HEAD -- readme.txtdiff --git a/readme.txt b/readme.txtindex db28b2c..a9c5755 100644--- a/readme.txt+++ b/readme.txt@@ -1,4 +1,4 @@Git is a distributed version control system.Git is free software distributed under the GPL.Git has a mutable index called stage.-Git tracks changes.\ No newline at end of file+Git tracks changes of files. å¯è§ï¼Œç¬¬äºŒæ¬¡ä¿®æ”¹ç¡®å®žæ²¡æœ‰è¢«æäº¤ã€‚ é‚£æ€Žä¹ˆæäº¤ç¬¬äºŒæ¬¡ä¿®æ”¹å‘¢ï¼Ÿä½ å¯ä»¥ç»§ç»­git addå†git commitï¼Œä¹Ÿå¯ä»¥åˆ«ç€æ€¥æäº¤ç¬¬ä¸€æ¬¡ä¿®æ”¹ï¼Œå…ˆgit addç¬¬äºŒæ¬¡ä¿®æ”¹ï¼Œå†git commitï¼Œå°±ç›¸å½“äºŽæŠŠä¸¤æ¬¡ä¿®æ”¹åˆå¹¶åŽä¸€å—æäº¤äº†ï¼šç¬¬ä¸€æ¬¡ä¿®æ”¹ -&gt; git add -&gt; ç¬¬äºŒæ¬¡ä¿®æ”¹ -&gt; git add -&gt; git commit æ’¤é”€ä¿®æ”¹è‡ªç„¶ï¼Œä½ æ˜¯ä¸ä¼šçŠ¯é”™çš„ã€‚ä¸è¿‡çŽ°åœ¨æ˜¯å‡Œæ™¨ä¸¤ç‚¹ï¼Œä½ æ­£åœ¨èµ¶ä¸€ä»½å·¥ä½œæŠ¥å‘Šï¼Œä½ åœ¨readme.txtä¸­æ·»åŠ äº†ä¸€è¡Œï¼š123456$ cat readme.txtGit is a distributed version control system.Git is free software distributed under the GPL.Git has a mutable index called stage.Git tracks changes of files.My stupid boss still prefers SVN. åœ¨ä½ å‡†å¤‡æäº¤å‰ï¼Œä¸€æ¯å’–å•¡èµ·äº†ä½œç”¨ï¼Œä½ çŒ›ç„¶å‘çŽ°äº†â€œstupid bossâ€å¯èƒ½ä¼šè®©ä½ ä¸¢æŽ‰è¿™ä¸ªæœˆçš„å¥–é‡‘ï¼æ—¢ç„¶é”™è¯¯å‘çŽ°å¾—å¾ˆåŠæ—¶ï¼Œå°±å¯ä»¥å¾ˆå®¹æ˜“åœ°çº æ­£å®ƒã€‚ä½ å¯ä»¥åˆ æŽ‰æœ€åŽä¸€è¡Œï¼Œæ‰‹åŠ¨æŠŠæ–‡ä»¶æ¢å¤åˆ°ä¸Šä¸€ä¸ªç‰ˆæœ¬çš„çŠ¶æ€ã€‚å¦‚æžœç”¨git statusæŸ¥çœ‹ä¸€ä¸‹ï¼š123456789$ git statusOn branch masterChanges not staged for commit:(use &quot;git add file...&quot; to update what will be committed)(use &quot;git checkout -- file...&quot; to discard changes in working directory)modified: readme.txtno changes added to commit (use &quot;git add&quot; and/or &quot;git commit -a&quot;) ä½ å¯ä»¥å‘çŽ°ï¼ŒGitä¼šå‘Šè¯‰ä½ ï¼Œgit checkout â€“ fileå¯ä»¥ä¸¢å¼ƒå·¥ä½œåŒºçš„ä¿®æ”¹ï¼š1$ git checkout -- readme.txt å‘½ä»¤git checkout â€“ readme.txtæ„æ€å°±æ˜¯ï¼ŒæŠŠreadme.txtæ–‡ä»¶åœ¨å·¥ä½œåŒºçš„ä¿®æ”¹å…¨éƒ¨æ’¤é”€ï¼Œè¿™é‡Œæœ‰ä¸¤ç§æƒ…å†µï¼šä¸€ç§æ˜¯readme.txtè‡ªä¿®æ”¹åŽè¿˜æ²¡æœ‰è¢«æ”¾åˆ°æš‚å­˜åŒºï¼ŒçŽ°åœ¨ï¼Œæ’¤é”€ä¿®æ”¹å°±å›žåˆ°å’Œç‰ˆæœ¬åº“ä¸€æ¨¡ä¸€æ ·çš„çŠ¶æ€ï¼›ä¸€ç§æ˜¯readme.txtå·²ç»æ·»åŠ åˆ°æš‚å­˜åŒºåŽï¼Œåˆä½œäº†ä¿®æ”¹ï¼ŒçŽ°åœ¨ï¼Œæ’¤é”€ä¿®æ”¹å°±å›žåˆ°æ·»åŠ åˆ°æš‚å­˜åŒºåŽçš„çŠ¶æ€ã€‚æ€»ä¹‹ï¼Œå°±æ˜¯è®©è¿™ä¸ªæ–‡ä»¶å›žåˆ°æœ€è¿‘ä¸€æ¬¡git commitæˆ–git addæ—¶çš„çŠ¶æ€ã€‚çŽ°åœ¨ï¼Œçœ‹çœ‹readme.txtçš„æ–‡ä»¶å†…å®¹ï¼š12345$ cat readme.txtGit is a distributed version control system.Git is free software distributed under the GPL.Git has a mutable index called stage.Git tracks changes of files. æ–‡ä»¶å†…å®¹æžœç„¶å¤åŽŸäº†ã€‚git checkout â€“ fileå‘½ä»¤ä¸­çš„â€“å¾ˆé‡è¦ï¼Œæ²¡æœ‰â€“ï¼Œå°±å˜æˆäº†â€œåˆ‡æ¢åˆ°å¦ä¸€ä¸ªåˆ†æ”¯â€çš„å‘½ä»¤ï¼Œæˆ‘ä»¬åœ¨åŽé¢çš„åˆ†æ”¯ç®¡ç†ä¸­ä¼šå†æ¬¡é‡åˆ°git checkoutå‘½ä»¤ã€‚çŽ°åœ¨å‡å®šæ˜¯å‡Œæ™¨3ç‚¹ï¼Œä½ ä¸ä½†å†™äº†ä¸€äº›èƒ¡è¯ï¼Œè¿˜git addåˆ°æš‚å­˜åŒºäº†ï¼š12345678$ cat readme.txtGit is a distributed version control system.Git is free software distributed under the GPL.Git has a mutable index called stage.Git tracks changes of files.My stupid boss still prefers SVN.$ git add readme.txt åº†å¹¸çš„æ˜¯ï¼Œåœ¨commitä¹‹å‰ï¼Œä½ å‘çŽ°äº†è¿™ä¸ªé—®é¢˜ã€‚ç”¨git statusæŸ¥çœ‹ä¸€ä¸‹ï¼Œä¿®æ”¹åªæ˜¯æ·»åŠ åˆ°äº†æš‚å­˜åŒºï¼Œè¿˜æ²¡æœ‰æäº¤ï¼š123456$ git statusOn branch masterChanges to be committed:(use &quot;git reset HEAD file...&quot; to unstage)modified: readme.txt GitåŒæ ·å‘Šè¯‰æˆ‘ä»¬ï¼Œç”¨å‘½ä»¤git reset HEAD fileå¯ä»¥æŠŠæš‚å­˜åŒºçš„ä¿®æ”¹æ’¤é”€æŽ‰ï¼ˆunstageï¼‰ï¼Œé‡æ–°æ”¾å›žå·¥ä½œåŒºï¼š123$ git reset HEAD readme.txtUnstaged changes after reset:M readme.txt git resetå‘½ä»¤æ—¢å¯ä»¥å›žé€€ç‰ˆæœ¬ï¼Œä¹Ÿå¯ä»¥æŠŠæš‚å­˜åŒºçš„ä¿®æ”¹å›žé€€åˆ°å·¥ä½œåŒºã€‚å½“æˆ‘ä»¬ç”¨HEADæ—¶ï¼Œè¡¨ç¤ºæœ€æ–°çš„ç‰ˆæœ¬ã€‚ å†ç”¨git statusæŸ¥çœ‹ä¸€ä¸‹ï¼ŒçŽ°åœ¨æš‚å­˜åŒºæ˜¯å¹²å‡€çš„ï¼Œå·¥ä½œåŒºæœ‰ä¿®æ”¹ï¼š 123456789$ git statusOn branch masterChanges not staged for commit:(use &quot;git add file...&quot; to update what will be committed)(use &quot;git checkout -- file...&quot; to discard changes in working directory)modified: readme.txtno changes added to commit (use &quot;git add&quot; and/or &quot;git commit -a&quot;) è¿˜è®°å¾—å¦‚ä½•ä¸¢å¼ƒå·¥ä½œåŒºçš„ä¿®æ”¹å—ï¼Ÿ1234$ git checkout -- readme.txtjingtingchaodeMacBook-Pro:learngit jingtingchao$ git statusOn branch masternothing to commit, working tree clean åˆ é™¤æ–‡ä»¶åœ¨Gitä¸­ï¼Œåˆ é™¤ä¹Ÿæ˜¯ä¸€ä¸ªä¿®æ”¹æ“ä½œï¼Œæˆ‘ä»¬å®žæˆ˜ä¸€ä¸‹ï¼Œå…ˆæ·»åŠ ä¸€ä¸ªæ–°æ–‡ä»¶test.txtåˆ°Gitå¹¶ä¸”æäº¤ï¼š12345$ git add test.txt$ git commit -m &quot;add test.txt&quot;[master 94cdc44] add test.txt1 file changed, 1 insertion(+)create mode 100644 test.txt ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œä½ é€šå¸¸ç›´æŽ¥åœ¨æ–‡ä»¶ç®¡ç†å™¨ä¸­æŠŠæ²¡ç”¨çš„æ–‡ä»¶åˆ äº†ï¼Œæˆ–è€…ç”¨rmå‘½ä»¤åˆ äº†ï¼š1$ rm test.txt è¿™ä¸ªæ—¶å€™ï¼ŒGitçŸ¥é“ä½ åˆ é™¤äº†æ–‡ä»¶ï¼Œå› æ­¤ï¼Œå·¥ä½œåŒºå’Œç‰ˆæœ¬åº“å°±ä¸ä¸€è‡´äº†ï¼Œgit statuså‘½ä»¤ä¼šç«‹åˆ»å‘Šè¯‰ä½ å“ªäº›æ–‡ä»¶è¢«åˆ é™¤äº†ï¼š123456789$ git statusOn branch masterChanges not staged for commit:(use &quot;git add/rm file...&quot; to update what will be committed)(use &quot;git checkout -- file...&quot; to discard changes in working directory)deleted: test.txtno changes added to commit (use &quot;git add&quot; and/or &quot;git commit -a&quot;) çŽ°åœ¨ä½ æœ‰ä¸¤ä¸ªé€‰æ‹©ï¼Œä¸€æ˜¯ç¡®å®žè¦ä»Žç‰ˆæœ¬åº“ä¸­åˆ é™¤è¯¥æ–‡ä»¶ï¼Œé‚£å°±ç”¨å‘½ä»¤git rmåˆ æŽ‰ï¼Œå¹¶ä¸”git commitï¼š123456$ git rm test.txtrm &apos;test.txt&apos;$ git commit -m &quot;remove test.txt&quot;[master d17efd8] remove test.txt1 file changed, 1 deletion(-)delete mode 100644 test.txt çŽ°åœ¨ï¼Œæ–‡ä»¶å°±ä»Žç‰ˆæœ¬åº“ä¸­è¢«åˆ é™¤äº†ã€‚å¦ä¸€ç§æƒ…å†µæ˜¯åˆ é”™äº†ï¼Œå› ä¸ºç‰ˆæœ¬åº“é‡Œè¿˜æœ‰å‘¢ï¼Œæ‰€ä»¥å¯ä»¥å¾ˆè½»æ¾åœ°æŠŠè¯¯åˆ çš„æ–‡ä»¶æ¢å¤åˆ°æœ€æ–°ç‰ˆæœ¬ï¼š1$ git checkout -- test.txt git checkoutå…¶å®žæ˜¯ç”¨ç‰ˆæœ¬åº“é‡Œçš„ç‰ˆæœ¬æ›¿æ¢å·¥ä½œåŒºçš„ç‰ˆæœ¬ï¼Œæ— è®ºå·¥ä½œåŒºæ˜¯ä¿®æ”¹è¿˜æ˜¯åˆ é™¤ï¼Œéƒ½å¯ä»¥â€œä¸€é”®è¿˜åŽŸâ€ã€‚ è¿œç¨‹ä»“åº“å®žé™…æƒ…å†µå¾€å¾€æ˜¯è¿™æ ·ï¼Œæ‰¾ä¸€å°ç”µè„‘å……å½“æœåŠ¡å™¨çš„è§’è‰²ï¼Œæ¯å¤©24å°æ—¶å¼€æœºï¼Œå…¶ä»–æ¯ä¸ªäººéƒ½ä»Žè¿™ä¸ªâ€œæœåŠ¡å™¨â€ä»“åº“å…‹éš†ä¸€ä»½åˆ°è‡ªå·±çš„ç”µè„‘ä¸Šï¼Œå¹¶ä¸”å„è‡ªæŠŠå„è‡ªçš„æäº¤æŽ¨é€åˆ°æœåŠ¡å™¨ä»“åº“é‡Œï¼Œä¹Ÿä»ŽæœåŠ¡å™¨ä»“åº“ä¸­æ‹‰å–åˆ«äººçš„æäº¤ã€‚å®Œå…¨å¯ä»¥è‡ªå·±æ­å»ºä¸€å°è¿è¡ŒGitçš„æœåŠ¡å™¨ï¼Œä¸è¿‡çŽ°é˜¶æ®µï¼Œä¸ºäº†å­¦Gitå…ˆæ­ä¸ªæœåŠ¡å™¨ç»å¯¹æ˜¯å°é¢˜å¤§ä½œã€‚å¥½åœ¨è¿™ä¸ªä¸–ç•Œä¸Šæœ‰ä¸ªå«GitHubçš„ç¥žå¥‡çš„ç½‘ç«™ï¼Œä»Žåå­—å°±å¯ä»¥çœ‹å‡ºï¼Œè¿™ä¸ªç½‘ç«™å°±æ˜¯æä¾›Gitä»“åº“æ‰˜ç®¡æœåŠ¡çš„ï¼Œæ‰€ä»¥ï¼Œåªè¦æ³¨å†Œä¸€ä¸ªGitHubè´¦å·ï¼Œå°±å¯ä»¥å…è´¹èŽ·å¾—Gitè¿œç¨‹ä»“åº“ã€‚åœ¨ç»§ç»­é˜…è¯»åŽç»­å†…å®¹å‰ï¼Œè¯·è‡ªè¡Œæ³¨å†ŒGitHubè´¦å·ã€‚ç”±äºŽä½ çš„æœ¬åœ°Gitä»“åº“å’ŒGitHubä»“åº“ä¹‹é—´çš„ä¼ è¾“æ˜¯é€šè¿‡SSHåŠ å¯†çš„ï¼Œæ‰€ä»¥ï¼Œéœ€è¦ä¸€ç‚¹è®¾ç½®ï¼šç¬¬1æ­¥ï¼šåˆ›å»ºSSH Keyã€‚åœ¨ç”¨æˆ·ä¸»ç›®å½•ä¸‹ï¼Œçœ‹çœ‹æœ‰æ²¡æœ‰.sshç›®å½•ï¼Œå¦‚æžœæœ‰ï¼Œå†çœ‹çœ‹è¿™ä¸ªç›®å½•ä¸‹æœ‰æ²¡æœ‰id_rsaå’Œid_rsa.pubè¿™ä¸¤ä¸ªæ–‡ä»¶ï¼Œå¦‚æžœå·²ç»æœ‰äº†ï¼Œå¯ç›´æŽ¥è·³åˆ°ä¸‹ä¸€æ­¥ã€‚å¦‚æžœæ²¡æœ‰ï¼Œæ‰“å¼€Shellï¼ˆWindowsä¸‹æ‰“å¼€Git Bashï¼‰ï¼Œåˆ›å»ºSSH Keyï¼š1$ ssh-keygen -t rsa -C &quot;youremail@example.com&quot; ä½ éœ€è¦æŠŠé‚®ä»¶åœ°å€æ¢æˆä½ è‡ªå·±çš„é‚®ä»¶åœ°å€ï¼Œç„¶åŽä¸€è·¯å›žè½¦ï¼Œä½¿ç”¨é»˜è®¤å€¼å³å¯ï¼Œç”±äºŽè¿™ä¸ªKeyä¹Ÿä¸æ˜¯ç”¨äºŽå†›äº‹ç›®çš„ï¼Œæ‰€ä»¥ä¹Ÿæ— éœ€è®¾ç½®å¯†ç ã€‚å¦‚æžœä¸€åˆ‡é¡ºåˆ©çš„è¯ï¼Œå¯ä»¥åœ¨ç”¨æˆ·ä¸»ç›®å½•é‡Œæ‰¾åˆ°.sshç›®å½•ï¼Œé‡Œé¢æœ‰id_rsaå’Œid_rsa.pubä¸¤ä¸ªæ–‡ä»¶ï¼Œè¿™ä¸¤ä¸ªå°±æ˜¯SSH Keyçš„ç§˜é’¥å¯¹ï¼Œid_rsaæ˜¯ç§é’¥ï¼Œä¸èƒ½æ³„éœ²å‡ºåŽ»ï¼Œid_rsa.pubæ˜¯å…¬é’¥ï¼Œå¯ä»¥æ”¾å¿ƒåœ°å‘Šè¯‰ä»»ä½•äººã€‚ç¬¬2æ­¥ï¼šç™»é™†GitHubï¼Œæ‰“å¼€â€œAccount settingsâ€ï¼Œâ€œSSH Keysâ€é¡µé¢ï¼šç„¶åŽï¼Œç‚¹â€œAdd SSH Keyâ€ï¼Œå¡«ä¸Šä»»æ„Titleï¼Œåœ¨Keyæ–‡æœ¬æ¡†é‡Œç²˜è´´id_rsa.pubæ–‡ä»¶çš„å†…å®¹ï¼šç‚¹â€œAdd Keyâ€ï¼Œä½ å°±åº”è¯¥çœ‹åˆ°å·²ç»æ·»åŠ çš„Keyï¼šä¸ºä»€ä¹ˆGitHubéœ€è¦SSH Keyå‘¢ï¼Ÿå› ä¸ºGitHubéœ€è¦è¯†åˆ«å‡ºä½ æŽ¨é€çš„æäº¤ç¡®å®žæ˜¯ä½ æŽ¨é€çš„ï¼Œè€Œä¸æ˜¯åˆ«äººå†’å……çš„ï¼Œè€ŒGitæ”¯æŒSSHåè®®ï¼Œæ‰€ä»¥ï¼ŒGitHubåªè¦çŸ¥é“äº†ä½ çš„å…¬é’¥ï¼Œå°±å¯ä»¥ç¡®è®¤åªæœ‰ä½ è‡ªå·±æ‰èƒ½æŽ¨é€ã€‚å½“ç„¶ï¼ŒGitHubå…è®¸ä½ æ·»åŠ å¤šä¸ªKeyã€‚å‡å®šä½ æœ‰è‹¥å¹²ç”µè„‘ï¼Œä½ ä¸€ä¼šå„¿åœ¨å…¬å¸æäº¤ï¼Œä¸€ä¼šå„¿åœ¨å®¶é‡Œæäº¤ï¼Œåªè¦æŠŠæ¯å°ç”µè„‘çš„Keyéƒ½æ·»åŠ åˆ°GitHubï¼Œå°±å¯ä»¥åœ¨æ¯å°ç”µè„‘ä¸Šå¾€GitHubæŽ¨é€äº†ã€‚ æ·»åŠ è¿œç¨‹åº“çŽ°åœ¨çš„æƒ…æ™¯æ˜¯ï¼Œä½ å·²ç»åœ¨æœ¬åœ°åˆ›å»ºäº†ä¸€ä¸ªGitä»“åº“åŽï¼Œåˆæƒ³åœ¨GitHubåˆ›å»ºä¸€ä¸ªGitä»“åº“ï¼Œå¹¶ä¸”è®©è¿™ä¸¤ä¸ªä»“åº“è¿›è¡Œè¿œç¨‹åŒæ­¥ï¼Œè¿™æ ·ï¼ŒGitHubä¸Šçš„ä»“åº“æ—¢å¯ä»¥ä½œä¸ºå¤‡ä»½ï¼Œåˆå¯ä»¥è®©å…¶ä»–äººé€šè¿‡è¯¥ä»“åº“æ¥åä½œï¼ŒçœŸæ˜¯ä¸€ä¸¾å¤šå¾—ã€‚é¦–å…ˆï¼Œç™»é™†GitHubï¼Œç„¶åŽï¼Œåœ¨å³ä¸Šè§’æ‰¾åˆ°â€œCreate a new repoâ€æŒ‰é’®ï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„ä»“åº“ï¼šåœ¨Repository nameå¡«å…¥learngitï¼Œå…¶ä»–ä¿æŒé»˜è®¤è®¾ç½®ï¼Œç‚¹å‡»â€œCreate repositoryâ€æŒ‰é’®ï¼Œå°±æˆåŠŸåœ°åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„Gitä»“åº“ï¼šç›®å‰ï¼Œåœ¨GitHubä¸Šçš„è¿™ä¸ªlearngitä»“åº“è¿˜æ˜¯ç©ºçš„ï¼ŒGitHubå‘Šè¯‰æˆ‘ä»¬ï¼Œå¯ä»¥ä»Žè¿™ä¸ªä»“åº“å…‹éš†å‡ºæ–°çš„ä»“åº“ï¼Œä¹Ÿå¯ä»¥æŠŠä¸€ä¸ªå·²æœ‰çš„æœ¬åœ°ä»“åº“ä¸Žä¹‹å…³è”ï¼Œç„¶åŽï¼ŒæŠŠæœ¬åœ°ä»“åº“çš„å†…å®¹æŽ¨é€åˆ°GitHubä»“åº“ã€‚çŽ°åœ¨ï¼Œæˆ‘ä»¬æ ¹æ®GitHubçš„æç¤ºï¼Œåœ¨æœ¬åœ°çš„learngitä»“åº“ä¸‹è¿è¡Œå‘½ä»¤ï¼š1$ git remote add origin git@github.com:michaelliao/learngit.git è¯·åƒä¸‡æ³¨æ„ï¼ŒæŠŠä¸Šé¢çš„michaelliaoæ›¿æ¢æˆä½ è‡ªå·±çš„GitHubè´¦æˆ·åï¼Œå¦åˆ™ï¼Œä½ åœ¨æœ¬åœ°å…³è”çš„å°±æ˜¯æˆ‘çš„è¿œç¨‹åº“ï¼Œå…³è”æ²¡æœ‰é—®é¢˜ï¼Œä½†æ˜¯ä½ ä»¥åŽæŽ¨é€æ˜¯æŽ¨ä¸ä¸ŠåŽ»çš„ï¼Œå› ä¸ºä½ çš„SSH Keyå…¬é’¥ä¸åœ¨æˆ‘çš„è´¦æˆ·åˆ—è¡¨ä¸­ã€‚ æ·»åŠ åŽï¼Œè¿œç¨‹åº“çš„åå­—å°±æ˜¯originï¼Œè¿™æ˜¯Gité»˜è®¤çš„å«æ³•ï¼Œä¹Ÿå¯ä»¥æ”¹æˆåˆ«çš„ï¼Œä½†æ˜¯originè¿™ä¸ªåå­—ä¸€çœ‹å°±çŸ¥é“æ˜¯è¿œç¨‹åº“ã€‚ä¸‹ä¸€æ­¥ï¼Œå°±å¯ä»¥æŠŠæœ¬åœ°åº“çš„æ‰€æœ‰å†…å®¹æŽ¨é€åˆ°è¿œç¨‹åº“ä¸Šï¼š12345678910$ git push -u origin masterCounting objects: 19, done.Delta compression using up to 8 threads.Compressing objects: 100% (13/13), done.Writing objects: 100% (19/19), 1.54 KiB | 0 bytes/s, done.Total 19 (delta 4), reused 0 (delta 0)remote: Resolving deltas: 100% (4/4), done.To https://github.com/TCJing/learngit.git* [new branch] master -&gt; masterBranch master set up to track remote branch master from origin. æŠŠæœ¬åœ°åº“çš„å†…å®¹æŽ¨é€åˆ°è¿œç¨‹ï¼Œç”¨git pushå‘½ä»¤ï¼Œå®žé™…ä¸Šæ˜¯æŠŠå½“å‰åˆ†æ”¯masteræŽ¨é€åˆ°è¿œç¨‹ã€‚ç”±äºŽè¿œç¨‹åº“æ˜¯ç©ºçš„ï¼Œæˆ‘ä»¬ç¬¬ä¸€æ¬¡æŽ¨é€masteråˆ†æ”¯æ—¶ï¼ŒåŠ ä¸Šäº†-uå‚æ•°ï¼ŒGitä¸ä½†ä¼šæŠŠæœ¬åœ°çš„masteråˆ†æ”¯å†…å®¹æŽ¨é€çš„è¿œç¨‹æ–°çš„masteråˆ†æ”¯ï¼Œè¿˜ä¼šæŠŠæœ¬åœ°çš„masteråˆ†æ”¯å’Œè¿œç¨‹çš„masteråˆ†æ”¯å…³è”èµ·æ¥ï¼Œåœ¨ä»¥åŽçš„æŽ¨é€æˆ–è€…æ‹‰å–æ—¶å°±å¯ä»¥ç®€åŒ–å‘½ä»¤ã€‚æŽ¨é€æˆåŠŸåŽï¼Œå¯ä»¥ç«‹åˆ»åœ¨GitHubé¡µé¢ä¸­çœ‹åˆ°è¿œç¨‹åº“çš„å†…å®¹å·²ç»å’Œæœ¬åœ°ä¸€æ¨¡ä¸€æ ·ï¼šä»ŽçŽ°åœ¨èµ·ï¼Œåªè¦æœ¬åœ°ä½œäº†æäº¤ï¼Œå°±å¯ä»¥é€šè¿‡å‘½ä»¤ï¼š1$ git push origin master æŠŠæœ¬åœ°masteråˆ†æ”¯çš„æœ€æ–°ä¿®æ”¹æŽ¨é€è‡³GitHubï¼ŒçŽ°åœ¨ï¼Œä½ å°±æ‹¥æœ‰äº†çœŸæ­£çš„åˆ†å¸ƒå¼ç‰ˆæœ¬åº“ï¼SSHè­¦å‘Šå½“ä½ ç¬¬ä¸€æ¬¡ä½¿ç”¨Gitçš„cloneæˆ–è€…pushå‘½ä»¤è¿žæŽ¥GitHubæ—¶ï¼Œä¼šå¾—åˆ°ä¸€ä¸ªè­¦å‘Šï¼š123The authenticity of host &apos;github.com (xx.xx.xx.xx)&apos; can&apos;t be established.RSA key fingerprint is xx.xx.xx.xx.xx.Are you sure you want to continue connecting (yes/no)? è¿™æ˜¯å› ä¸ºGitä½¿ç”¨SSHè¿žæŽ¥ï¼Œè€ŒSSHè¿žæŽ¥åœ¨ç¬¬ä¸€æ¬¡éªŒè¯GitHubæœåŠ¡å™¨çš„Keyæ—¶ï¼Œéœ€è¦ä½ ç¡®è®¤GitHubçš„Keyçš„æŒ‡çº¹ä¿¡æ¯æ˜¯å¦çœŸçš„æ¥è‡ªGitHubçš„æœåŠ¡å™¨ï¼Œè¾“å…¥yeså›žè½¦å³å¯ã€‚ Gitä¼šè¾“å‡ºä¸€ä¸ªè­¦å‘Šï¼Œå‘Šè¯‰ä½ å·²ç»æŠŠGitHubçš„Keyæ·»åŠ åˆ°æœ¬æœºçš„ä¸€ä¸ªä¿¡ä»»åˆ—è¡¨é‡Œäº†ï¼š1Warning: Permanently added &apos;github.com&apos; (RSA) to the list of known hosts. è¿™ä¸ªè­¦å‘Šåªä¼šå‡ºçŽ°ä¸€æ¬¡ï¼ŒåŽé¢çš„æ“ä½œå°±ä¸ä¼šæœ‰ä»»ä½•è­¦å‘Šäº†ã€‚å¦‚æžœä½ å®žåœ¨æ‹…å¿ƒæœ‰äººå†’å……GitHubæœåŠ¡å™¨ï¼Œè¾“å…¥yeså‰å¯ä»¥å¯¹ç…§GitHubçš„RSA Keyçš„æŒ‡çº¹ä¿¡æ¯æ˜¯å¦ä¸ŽSSHè¿žæŽ¥ç»™å‡ºçš„ä¸€è‡´ã€‚ å°ç»“ è¦å…³è”ä¸€ä¸ªè¿œç¨‹åº“ï¼Œä½¿ç”¨å‘½ä»¤git remote add origin git@server-name:path/repo-name.gitï¼› å…³è”åŽï¼Œä½¿ç”¨å‘½ä»¤git push -u origin masterç¬¬ä¸€æ¬¡æŽ¨é€masteråˆ†æ”¯çš„æ‰€æœ‰å†…å®¹ï¼› æ­¤åŽï¼Œæ¯æ¬¡æœ¬åœ°æäº¤åŽï¼Œåªè¦æœ‰å¿…è¦ï¼Œå°±å¯ä»¥ä½¿ç”¨å‘½ä»¤git push origin masteræŽ¨é€æœ€æ–°ä¿®æ”¹ï¼› ä»Žè¿œç¨‹åº“å…‹éš†ä¸Šæ¬¡æˆ‘ä»¬è®²äº†å…ˆæœ‰æœ¬åœ°åº“ï¼ŒåŽæœ‰è¿œç¨‹åº“çš„æ—¶å€™ï¼Œå¦‚ä½•å…³è”è¿œç¨‹åº“ã€‚çŽ°åœ¨ï¼Œå‡è®¾æˆ‘ä»¬ä»Žé›¶å¼€å‘ï¼Œé‚£ä¹ˆæœ€å¥½çš„æ–¹å¼æ˜¯å…ˆåˆ›å»ºè¿œç¨‹åº“ï¼Œç„¶åŽï¼Œä»Žè¿œç¨‹åº“å…‹éš†ã€‚é¦–å…ˆï¼Œç™»é™†GitHubï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„ä»“åº“ï¼Œåå­—å«gitskillsï¼šæˆ‘ä»¬å‹¾é€‰Initialize this repository with a READMEï¼Œè¿™æ ·GitHubä¼šè‡ªåŠ¨ä¸ºæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªREADME.mdæ–‡ä»¶ã€‚åˆ›å»ºå®Œæ¯•åŽï¼Œå¯ä»¥çœ‹åˆ°README.mdæ–‡ä»¶çŽ°åœ¨ï¼Œè¿œç¨‹åº“å·²ç»å‡†å¤‡å¥½äº†ï¼Œä¸‹ä¸€æ­¥æ˜¯ç”¨å‘½ä»¤git cloneå…‹éš†ä¸€ä¸ªæœ¬åœ°åº“ï¼š12345$ git clone https://github.com/TCJing/gitskills.gitCloning into &apos;gitskills&apos;...remote: Counting objects: 3, done.remote: Total 3 (delta 0), reused 0 (delta 0), pack-reused 0Unpacking objects: 100% (3/3), done. åˆ†æ”¯ç®¡ç†åˆ†æ”¯å°±æ˜¯ç§‘å¹»ç”µå½±é‡Œé¢çš„å¹³è¡Œå®‡å®™ï¼Œå½“ä½ æ­£åœ¨ç”µè„‘å‰åŠªåŠ›å­¦ä¹ Gitçš„æ—¶å€™ï¼Œå¦ä¸€ä¸ªä½ æ­£åœ¨å¦ä¸€ä¸ªå¹³è¡Œå®‡å®™é‡ŒåŠªåŠ›å­¦ä¹ SVNã€‚å¦‚æžœä¸¤ä¸ªå¹³è¡Œå®‡å®™äº’ä¸å¹²æ‰°ï¼Œé‚£å¯¹çŽ°åœ¨çš„ä½ ä¹Ÿæ²¡å•¥å½±å“ã€‚ä¸è¿‡ï¼Œåœ¨æŸä¸ªæ—¶é—´ç‚¹ï¼Œä¸¤ä¸ªå¹³è¡Œå®‡å®™åˆå¹¶äº†ï¼Œç»“æžœï¼Œä½ æ—¢å­¦ä¼šäº†Gitåˆå­¦ä¼šäº†SVNï¼åˆ†æ”¯åœ¨å®žé™…ä¸­æœ‰ä»€ä¹ˆç”¨å‘¢ï¼Ÿå‡è®¾ä½ å‡†å¤‡å¼€å‘ä¸€ä¸ªæ–°åŠŸèƒ½ï¼Œä½†æ˜¯éœ€è¦ä¸¤å‘¨æ‰èƒ½å®Œæˆï¼Œç¬¬ä¸€å‘¨ä½ å†™äº†50%çš„ä»£ç ï¼Œå¦‚æžœç«‹åˆ»æäº¤ï¼Œç”±äºŽä»£ç è¿˜æ²¡å†™å®Œï¼Œä¸å®Œæ•´çš„ä»£ç åº“ä¼šå¯¼è‡´åˆ«äººä¸èƒ½å¹²æ´»äº†ã€‚å¦‚æžœç­‰ä»£ç å…¨éƒ¨å†™å®Œå†ä¸€æ¬¡æäº¤ï¼Œåˆå­˜åœ¨ä¸¢å¤±æ¯å¤©è¿›åº¦çš„å·¨å¤§é£Žé™©ã€‚çŽ°åœ¨æœ‰äº†åˆ†æ”¯ï¼Œå°±ä¸ç”¨æ€•äº†ã€‚ä½ åˆ›å»ºäº†ä¸€ä¸ªå±žäºŽä½ è‡ªå·±çš„åˆ†æ”¯ï¼Œåˆ«äººçœ‹ä¸åˆ°ï¼Œè¿˜ç»§ç»­åœ¨åŽŸæ¥çš„åˆ†æ”¯ä¸Šæ­£å¸¸å·¥ä½œï¼Œè€Œä½ åœ¨è‡ªå·±çš„åˆ†æ”¯ä¸Šå¹²æ´»ï¼Œæƒ³æäº¤å°±æäº¤ï¼Œç›´åˆ°å¼€å‘å®Œæ¯•åŽï¼Œå†ä¸€æ¬¡æ€§åˆå¹¶åˆ°åŽŸæ¥çš„åˆ†æ”¯ä¸Šï¼Œè¿™æ ·ï¼Œæ—¢å®‰å…¨ï¼Œåˆä¸å½±å“åˆ«äººå·¥ä½œã€‚å…¶ä»–ç‰ˆæœ¬æŽ§åˆ¶ç³»ç»Ÿå¦‚SVNç­‰éƒ½æœ‰åˆ†æ”¯ç®¡ç†ï¼Œä½†æ˜¯ç”¨è¿‡ä¹‹åŽä½ ä¼šå‘çŽ°ï¼Œè¿™äº›ç‰ˆæœ¬æŽ§åˆ¶ç³»ç»Ÿåˆ›å»ºå’Œåˆ‡æ¢åˆ†æ”¯æ¯”èœ—ç‰›è¿˜æ…¢ï¼Œç®€ç›´è®©äººæ— æ³•å¿å—ï¼Œç»“æžœåˆ†æ”¯åŠŸèƒ½æˆäº†æ‘†è®¾ï¼Œå¤§å®¶éƒ½ä¸åŽ»ç”¨ã€‚ åˆ›å»ºä¸Žåˆå¹¶åˆ†æ”¯åœ¨ç‰ˆæœ¬å›žé€€é‡Œï¼Œä½ å·²ç»çŸ¥é“ï¼Œæ¯æ¬¡æäº¤ï¼ŒGitéƒ½æŠŠå®ƒä»¬ä¸²æˆä¸€æ¡æ—¶é—´çº¿ï¼Œè¿™æ¡æ—¶é—´çº¿å°±æ˜¯ä¸€ä¸ªåˆ†æ”¯.æˆªæ­¢åˆ°ç›®å‰ï¼Œåªæœ‰ä¸€æ¡æ—¶é—´çº¿ï¼Œåœ¨Gité‡Œï¼Œè¿™ä¸ªåˆ†æ”¯å«ä¸»åˆ†æ”¯ï¼Œå³masteråˆ†æ”¯.HEADä¸¥æ ¼æ¥è¯´ä¸æ˜¯æŒ‡å‘æäº¤ï¼Œè€Œæ˜¯æŒ‡å‘masterï¼Œmasteræ‰æ˜¯æŒ‡å‘æäº¤çš„ï¼Œæ‰€ä»¥ï¼ŒHEADæŒ‡å‘çš„å°±æ˜¯å½“å‰åˆ†æ”¯ã€‚ä¸€å¼€å§‹çš„æ—¶å€™ï¼Œmasteråˆ†æ”¯æ˜¯ä¸€æ¡çº¿ï¼ŒGitç”¨masteræŒ‡å‘æœ€æ–°çš„æäº¤ï¼Œå†ç”¨HEADæŒ‡å‘masterï¼Œå°±èƒ½ç¡®å®šå½“å‰åˆ†æ”¯ï¼Œä»¥åŠå½“å‰åˆ†æ”¯çš„æäº¤ç‚¹ï¼šæ¯æ¬¡æäº¤ï¼Œmasteråˆ†æ”¯éƒ½ä¼šå‘å‰ç§»åŠ¨ä¸€æ­¥ï¼Œè¿™æ ·ï¼Œéšç€ä½ ä¸æ–­æäº¤ï¼Œmasteråˆ†æ”¯çš„çº¿ä¹Ÿè¶Šæ¥è¶Šé•¿å½“æˆ‘ä»¬åˆ›å»ºæ–°çš„åˆ†æ”¯ï¼Œä¾‹å¦‚devæ—¶ï¼ŒGitæ–°å»ºäº†ä¸€ä¸ªæŒ‡é’ˆå«devï¼ŒæŒ‡å‘masterç›¸åŒçš„æäº¤ï¼Œå†æŠŠHEADæŒ‡å‘devï¼Œå°±è¡¨ç¤ºå½“å‰åˆ†æ”¯åœ¨devä¸Šï¼šä½ çœ‹ï¼ŒGitåˆ›å»ºä¸€ä¸ªåˆ†æ”¯å¾ˆå¿«ï¼Œå› ä¸ºé™¤äº†å¢žåŠ ä¸€ä¸ªdevæŒ‡é’ˆï¼Œæ”¹æ”¹HEADçš„æŒ‡å‘ï¼Œå·¥ä½œåŒºçš„æ–‡ä»¶éƒ½æ²¡æœ‰ä»»ä½•å˜åŒ–ï¼ä¸è¿‡ï¼Œä»ŽçŽ°åœ¨å¼€å§‹ï¼Œå¯¹å·¥ä½œåŒºçš„ä¿®æ”¹å’Œæäº¤å°±æ˜¯é’ˆå¯¹devåˆ†æ”¯äº†ï¼Œæ¯”å¦‚æ–°æäº¤ä¸€æ¬¡åŽï¼ŒdevæŒ‡é’ˆå¾€å‰ç§»åŠ¨ä¸€æ­¥ï¼Œè€ŒmasteræŒ‡é’ˆä¸å˜ï¼šå‡å¦‚æˆ‘ä»¬åœ¨devä¸Šçš„å·¥ä½œå®Œæˆäº†ï¼Œå°±å¯ä»¥æŠŠdevåˆå¹¶åˆ°masterä¸Šã€‚Gitæ€Žä¹ˆåˆå¹¶å‘¢ï¼Ÿæœ€ç®€å•çš„æ–¹æ³•ï¼Œå°±æ˜¯ç›´æŽ¥æŠŠmasteræŒ‡å‘devçš„å½“å‰æäº¤ï¼Œå°±å®Œæˆäº†åˆå¹¶ï¼šæ‰€ä»¥Gitåˆå¹¶åˆ†æ”¯ä¹Ÿå¾ˆå¿«ï¼å°±æ”¹æ”¹æŒ‡é’ˆï¼Œå·¥ä½œåŒºå†…å®¹ä¹Ÿä¸å˜ï¼åˆå¹¶å®Œåˆ†æ”¯åŽï¼Œç”šè‡³å¯ä»¥åˆ é™¤devåˆ†æ”¯ã€‚åˆ é™¤devåˆ†æ”¯å°±æ˜¯æŠŠdevæŒ‡é’ˆç»™åˆ æŽ‰ï¼Œåˆ æŽ‰åŽï¼Œæˆ‘ä»¬å°±å‰©ä¸‹äº†ä¸€æ¡masteråˆ†æ”¯ï¼šçœŸæ˜¯å¤ªç¥žå¥‡äº†ï¼Œä½ çœ‹å¾—å‡ºæ¥æœ‰äº›æäº¤æ˜¯é€šè¿‡åˆ†æ”¯å®Œæˆçš„å—ï¼Ÿä¸‹é¢å¼€å§‹å®žæˆ˜ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬åˆ›å»ºdevåˆ†æ”¯ï¼Œç„¶åŽåˆ‡æ¢åˆ°devåˆ†æ”¯ï¼š12$ git checkout -b devSwitched to a new branch &apos;dev&apos; git checkoutå‘½ä»¤åŠ ä¸Š-bå‚æ•°è¡¨ç¤ºåˆ›å»ºå¹¶åˆ‡æ¢ï¼Œç›¸å½“äºŽä»¥ä¸‹ä¸¤æ¡å‘½ä»¤ï¼š123$ git branch dev$ git checkout devSwitched to branch &apos;dev&apos; ç„¶åŽï¼Œç”¨git branchå‘½ä»¤æŸ¥çœ‹å½“å‰åˆ†æ”¯ï¼š123$ git branch* devmaster git branchå‘½ä»¤ä¼šåˆ—å‡ºæ‰€æœ‰åˆ†æ”¯ï¼Œå½“å‰åˆ†æ”¯å‰é¢ä¼šæ ‡ä¸€ä¸ª*å·ã€‚ç„¶åŽï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨devåˆ†æ”¯ä¸Šæ­£å¸¸æäº¤ï¼Œæ¯”å¦‚å¯¹readme.txtåšä¸ªä¿®æ”¹ï¼ŒåŠ ä¸Šä¸€è¡Œï¼š1Creating a new branch is quick. ç„¶åŽæäº¤ï¼š1234$ git add readme.txt$ git commit -m &quot;branch test&quot;[dev fec145a] branch test1 file changed, 1 insertion(+) çŽ°åœ¨ï¼Œdevåˆ†æ”¯çš„å·¥ä½œå®Œæˆï¼Œæˆ‘ä»¬å°±å¯ä»¥åˆ‡æ¢å›žmasteråˆ†æ”¯ï¼š12$ git checkout masterSwitched to branch &apos;master&apos; åˆ‡æ¢å›žmasteråˆ†æ”¯åŽï¼Œå†æŸ¥çœ‹ä¸€ä¸ªreadme.txtæ–‡ä»¶ï¼Œåˆšæ‰æ·»åŠ çš„å†…å®¹ä¸è§äº†ï¼å› ä¸ºé‚£ä¸ªæäº¤æ˜¯åœ¨devåˆ†æ”¯ä¸Šï¼Œè€Œmasteråˆ†æ”¯æ­¤åˆ»çš„æäº¤ç‚¹å¹¶æ²¡æœ‰å˜ï¼šçŽ°åœ¨ï¼Œæˆ‘ä»¬æŠŠdevåˆ†æ”¯çš„å·¥ä½œæˆæžœåˆå¹¶åˆ°masteråˆ†æ”¯ä¸Šï¼š12345$ git merge devUpdating 14402cd..ddd16d5Fast-forwardREADME.md | 3 ++-1 file changed, 2 insertions(+), 1 deletion(-) git mergeå‘½ä»¤ç”¨äºŽåˆå¹¶æŒ‡å®šåˆ†æ”¯åˆ°å½“å‰åˆ†æ”¯ã€‚åˆå¹¶åŽï¼Œå†æŸ¥çœ‹readme.txtçš„å†…å®¹ï¼Œå°±å¯ä»¥çœ‹åˆ°ï¼Œå’Œdevåˆ†æ”¯çš„æœ€æ–°æäº¤æ˜¯å®Œå…¨ä¸€æ ·çš„ã€‚æ³¨æ„åˆ°ä¸Šé¢çš„Fast-forwardä¿¡æ¯ï¼ŒGitå‘Šè¯‰æˆ‘ä»¬ï¼Œè¿™æ¬¡åˆå¹¶æ˜¯â€œå¿«è¿›æ¨¡å¼â€ï¼Œä¹Ÿå°±æ˜¯ç›´æŽ¥æŠŠmasteræŒ‡å‘devçš„å½“å‰æäº¤ï¼Œæ‰€ä»¥åˆå¹¶é€Ÿåº¦éžå¸¸å¿«ã€‚å½“ç„¶ï¼Œä¹Ÿä¸æ˜¯æ¯æ¬¡åˆå¹¶éƒ½èƒ½Fast-forwardï¼Œæˆ‘ä»¬åŽé¢ä¼šè®²å…¶ä»–æ–¹å¼çš„åˆå¹¶ã€‚åˆå¹¶å®ŒæˆåŽï¼Œå°±å¯ä»¥æ”¾å¿ƒåœ°åˆ é™¤devåˆ†æ”¯äº†ï¼š12$ git branch -d devDeleted branch dev (was ddd16d5). åˆ é™¤åŽï¼ŒæŸ¥çœ‹branchï¼Œå°±åªå‰©ä¸‹masteråˆ†æ”¯äº†ï¼š12$ git branch* master å› ä¸ºåˆ›å»ºã€åˆå¹¶å’Œåˆ é™¤åˆ†æ”¯éžå¸¸å¿«ï¼Œæ‰€ä»¥Gité¼“åŠ±ä½ ä½¿ç”¨åˆ†æ”¯å®ŒæˆæŸä¸ªä»»åŠ¡ï¼Œåˆå¹¶åŽå†åˆ æŽ‰åˆ†æ”¯ï¼Œè¿™å’Œç›´æŽ¥åœ¨masteråˆ†æ”¯ä¸Šå·¥ä½œæ•ˆæžœæ˜¯ä¸€æ ·çš„ï¼Œä½†è¿‡ç¨‹æ›´å®‰å…¨ã€‚å°ç»“Gité¼“åŠ±å¤§é‡ä½¿ç”¨åˆ†æ”¯ï¼šæŸ¥çœ‹åˆ†æ”¯ï¼šgit branch åˆ›å»ºåˆ†æ”¯ï¼šgit branch nameåˆ‡æ¢åˆ†æ”¯ï¼šgit checkout nameåˆ›å»º+åˆ‡æ¢åˆ†æ”¯ï¼šgit checkout -b nameåˆå¹¶æŸåˆ†æ”¯åˆ°å½“å‰åˆ†æ”¯ï¼šgit merge nameåˆ é™¤åˆ†æ”¯ï¼šgit branch -d name è§£å†³å†²çªäººç”Ÿä¸å¦‚æ„ä¹‹äº‹åä¹‹å…«ä¹ï¼Œåˆå¹¶åˆ†æ”¯å¾€å¾€ä¹Ÿä¸æ˜¯ä¸€å¸†é£Žé¡ºçš„ã€‚å‡†å¤‡æ–°çš„feature1åˆ†æ”¯ï¼Œç»§ç»­æˆ‘ä»¬çš„æ–°åˆ†æ”¯å¼€å‘ï¼š12$ git checkout -b feature1Switched to a new branch &apos;feature1&apos; ä¿®æ”¹readme.txtæœ€åŽä¸€è¡Œï¼Œæ”¹ä¸ºï¼š1Creating a new branch is quick AND simple. åœ¨feature1åˆ†æ”¯ä¸Šæäº¤ï¼š1234$ git add README.mdjingtingchaodeMacBook-Pro:gitskills jingtingchao$ git commit -m &quot;AND simple&quot;[feature1 f9128e8] AND simple1 file changed, 1 insertion(+), 1 deletion(-) åˆ‡æ¢åˆ°masteråˆ†æ”¯ï¼š1234$ git checkout masterSwitched to branch &apos;master&apos;Your branch is ahead of &apos;origin/master&apos; by 1 commit.(use &quot;git push&quot; to publish your local commits) Gitè¿˜ä¼šè‡ªåŠ¨æç¤ºæˆ‘ä»¬å½“å‰masteråˆ†æ”¯æ¯”è¿œç¨‹çš„masteråˆ†æ”¯è¦è¶…å‰1ä¸ªæäº¤ã€‚åœ¨masteråˆ†æ”¯ä¸ŠæŠŠreadme.txtæ–‡ä»¶çš„æœ€åŽä¸€è¡Œæ”¹ä¸ºï¼š1Creating a new branch is quick &amp; simple. æäº¤:12345$ git add README.mdjingtingchaodeMacBook-Pro:gitskills jingtingchao$jingtingchaodeMacBook-Pro:gitskills jingtingchao$ git commit -m &quot;&amp; simple&quot;[master 20986f2] &amp; simple1 file changed, 1 insertion(+), 1 deletion(-) çŽ°åœ¨ï¼Œmasteråˆ†æ”¯å’Œfeature1åˆ†æ”¯å„è‡ªéƒ½åˆ†åˆ«æœ‰æ–°çš„æäº¤ï¼Œå˜æˆäº†è¿™æ ·ï¼šè¿™ç§æƒ…å†µä¸‹ï¼ŒGitæ— æ³•æ‰§è¡Œâ€œå¿«é€Ÿåˆå¹¶â€ï¼Œåªèƒ½è¯•å›¾æŠŠå„è‡ªçš„ä¿®æ”¹åˆå¹¶èµ·æ¥ï¼Œä½†è¿™ç§åˆå¹¶å°±å¯èƒ½ä¼šæœ‰å†²çªï¼Œæˆ‘ä»¬è¯•è¯•çœ‹ï¼š1234$ git merge feature1Auto-merging readme.txtCONFLICT (content): Merge conflict in readme.txtAutomatic merge failed; fix conflicts and then commit the result. æžœç„¶å†²çªäº†ï¼Gitå‘Šè¯‰æˆ‘ä»¬ï¼Œreadme.txtæ–‡ä»¶å­˜åœ¨å†²çªï¼Œå¿…é¡»æ‰‹åŠ¨è§£å†³å†²çªåŽå†æäº¤ã€‚git statusä¹Ÿå¯ä»¥å‘Šè¯‰æˆ‘ä»¬å†²çªçš„æ–‡ä»¶ï¼š1234567891011121314$ git statusOn branch masterYour branch is ahead of &apos;origin/master&apos; by 2 commits.(use &quot;git push&quot; to publish your local commits)You have unmerged paths.(fix conflicts and run &quot;git commit&quot;)(use &quot;git merge --abort&quot; to abort the merge)Unmerged paths:(use &quot;git add file...&quot; to mark resolution)both modified: README.mdno changes added to commit (use &quot;git add&quot; and/or &quot;git commit -a&quot;) æˆ‘ä»¬å¯ä»¥ç›´æŽ¥æŸ¥çœ‹readme.txtçš„å†…å®¹ï¼š1234567$ cat README.md# gitskills&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEADCreating a new branch is quick &amp; simple.=======Creating a new branch is quick AND simple.&gt;&gt;&gt;&gt;&gt;&gt;&gt; feature1 Gitç”¨&lt;&lt;&lt;&lt;&lt;&lt;&lt;ï¼Œ=======ï¼Œ&gt;&gt;&gt;&gt;&gt;&gt;&gt;æ ‡è®°å‡ºä¸åŒåˆ†æ”¯çš„å†…å®¹ï¼Œæˆ‘ä»¬ä¿®æ”¹å¦‚ä¸‹åŽä¿å­˜ï¼š1Creating a new branch is quick and simple. å†æäº¤:123$ git add README.mdjingtingchaodeMacBook-Pro:gitskills jingtingchao$ git commit -m &quot;conflict fixed&quot;[master 7e86ad6] conflict fixed çŽ°åœ¨ï¼Œmasteråˆ†æ”¯å’Œfeature1åˆ†æ”¯å˜æˆäº†ä¸‹å›¾æ‰€ç¤ºï¼šç”¨å¸¦å‚æ•°çš„git logä¹Ÿå¯ä»¥çœ‹åˆ°åˆ†æ”¯çš„åˆå¹¶æƒ…å†µï¼š12345678$ git log --graph --pretty=oneline --abbrev-commit* 59bc1cb conflict fixed|\| * 75a857c AND simple* | 400b400 &amp; simple|/* fec145a branch test... æœ€åŽï¼Œåˆ é™¤feature1åˆ†æ”¯ï¼š12$ git branch -d feature1Deleted branch feature1 (was f9128e8). å°ç»“å½“Gitæ— æ³•è‡ªåŠ¨åˆå¹¶åˆ†æ”¯æ—¶ï¼Œå°±å¿…é¡»é¦–å…ˆè§£å†³å†²çªã€‚è§£å†³å†²çªåŽï¼Œå†æäº¤ï¼Œåˆå¹¶å®Œæˆã€‚ç”¨git log â€“graphå‘½ä»¤å¯ä»¥çœ‹åˆ°åˆ†æ”¯åˆå¹¶å›¾ã€‚ åˆ†æ”¯ç®¡ç†ç­–ç•¥é€šå¸¸ï¼Œåˆå¹¶åˆ†æ”¯æ—¶ï¼Œå¦‚æžœå¯èƒ½ï¼ŒGitä¼šç”¨Fast forwardæ¨¡å¼ï¼Œä½†è¿™ç§æ¨¡å¼ä¸‹ï¼Œåˆ é™¤åˆ†æ”¯åŽï¼Œä¼šä¸¢æŽ‰åˆ†æ”¯ä¿¡æ¯ã€‚å¦‚æžœè¦å¼ºåˆ¶ç¦ç”¨Fast forwardæ¨¡å¼ï¼ŒGitå°±ä¼šåœ¨mergeæ—¶ç”Ÿæˆä¸€ä¸ªæ–°çš„commitï¼Œè¿™æ ·ï¼Œä»Žåˆ†æ”¯åŽ†å²ä¸Šå°±å¯ä»¥çœ‹å‡ºåˆ†æ”¯ä¿¡æ¯ã€‚ä¸‹é¢æˆ‘ä»¬å®žæˆ˜ä¸€ä¸‹â€“no-ffæ–¹å¼çš„git mergeï¼šé¦–å…ˆï¼Œä»ç„¶åˆ›å»ºå¹¶åˆ‡æ¢devåˆ†æ”¯ï¼š12$ git checkout -b devSwitched to a new branch &apos;dev&apos; ä¿®æ”¹readme.txtæ–‡ä»¶ï¼Œå¹¶æäº¤ä¸€ä¸ªæ–°çš„commitï¼š1234$ git add README.mdjingtingchaodeMacBook-Pro:gitskills jingtingchao$ git commit -m &quot;add merge&quot;[dev 0a5e364] add merge1 file changed, 1 insertion(+), 1 deletion(-) çŽ°åœ¨ï¼Œæˆ‘ä»¬åˆ‡æ¢å›žmasterï¼š12$ git checkout masterSwitched to branch &apos;master&apos; å‡†å¤‡åˆå¹¶devåˆ†æ”¯ï¼Œè¯·æ³¨æ„â€“no-ffå‚æ•°ï¼Œè¡¨ç¤ºç¦ç”¨Fast forwardï¼š1234$ git merge --no-ff -m &quot;merge with no-ff&quot; devMerge made by the &apos;recursive&apos; strategy.readme.txt | 1 +1 file changed, 1 insertion(+) å› ä¸ºæœ¬æ¬¡åˆå¹¶è¦åˆ›å»ºä¸€ä¸ªæ–°çš„commitï¼Œæ‰€ä»¥åŠ ä¸Š-må‚æ•°ï¼ŒæŠŠcommitæè¿°å†™è¿›åŽ»ã€‚ åˆå¹¶åŽï¼Œæˆ‘ä»¬ç”¨git logçœ‹çœ‹åˆ†æ”¯åŽ†å²ï¼š1234567$ git log --graph --pretty=oneline --abbrev-commit* 7825a50 merge with no-ff|\| * 6224937 add merge|/* 59bc1cb conflict fixed... å¯ä»¥çœ‹åˆ°ï¼Œä¸ä½¿ç”¨Fast forwardæ¨¡å¼ï¼ŒmergeåŽå°±åƒè¿™æ ·åˆ†æ”¯ç­–ç•¥åœ¨å®žé™…å¼€å‘ä¸­ï¼Œæˆ‘ä»¬åº”è¯¥æŒ‰ç…§å‡ ä¸ªåŸºæœ¬åŽŸåˆ™è¿›è¡Œåˆ†æ”¯ç®¡ç†ï¼šé¦–å…ˆï¼Œmasteråˆ†æ”¯åº”è¯¥æ˜¯éžå¸¸ç¨³å®šçš„ï¼Œä¹Ÿå°±æ˜¯ä»…ç”¨æ¥å‘å¸ƒæ–°ç‰ˆæœ¬ï¼Œå¹³æ—¶ä¸èƒ½åœ¨ä¸Šé¢å¹²æ´»ï¼›é‚£åœ¨å“ªå¹²æ´»å‘¢ï¼Ÿå¹²æ´»éƒ½åœ¨devåˆ†æ”¯ä¸Šï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œdevåˆ†æ”¯æ˜¯ä¸ç¨³å®šçš„ï¼Œåˆ°æŸä¸ªæ—¶å€™ï¼Œæ¯”å¦‚1.0ç‰ˆæœ¬å‘å¸ƒæ—¶ï¼Œå†æŠŠdevåˆ†æ”¯åˆå¹¶åˆ°masterä¸Šï¼Œåœ¨masteråˆ†æ”¯å‘å¸ƒ1.0ç‰ˆæœ¬ï¼›ä½ å’Œä½ çš„å°ä¼™ä¼´ä»¬æ¯ä¸ªäººéƒ½åœ¨devåˆ†æ”¯ä¸Šå¹²æ´»ï¼Œæ¯ä¸ªäººéƒ½æœ‰è‡ªå·±çš„åˆ†æ”¯ï¼Œæ—¶ä¸æ—¶åœ°å¾€devåˆ†æ”¯ä¸Šåˆå¹¶å°±å¯ä»¥äº†ã€‚æ‰€ä»¥ï¼Œå›¢é˜Ÿåˆä½œçš„åˆ†æ”¯çœ‹èµ·æ¥å°±åƒè¿™æ ·ï¼šå°ç»“Gitåˆ†æ”¯ååˆ†å¼ºå¤§ï¼Œåœ¨å›¢é˜Ÿå¼€å‘ä¸­åº”è¯¥å……åˆ†åº”ç”¨ã€‚åˆå¹¶åˆ†æ”¯æ—¶ï¼ŒåŠ ä¸Šâ€“no-ffå‚æ•°å°±å¯ä»¥ç”¨æ™®é€šæ¨¡å¼åˆå¹¶ï¼Œåˆå¹¶åŽçš„åŽ†å²æœ‰åˆ†æ”¯ï¼Œèƒ½çœ‹å‡ºæ¥æ›¾ç»åšè¿‡åˆå¹¶ï¼Œè€Œfast forwardåˆå¹¶å°±çœ‹ä¸å‡ºæ¥æ›¾ç»åšè¿‡åˆå¹¶ã€‚ Bugåˆ†æ”¯è½¯ä»¶å¼€å‘ä¸­ï¼Œbugå°±åƒå®¶å¸¸ä¾¿é¥­ä¸€æ ·ã€‚æœ‰äº†bugå°±éœ€è¦ä¿®å¤ï¼Œåœ¨Gitä¸­ï¼Œç”±äºŽåˆ†æ”¯æ˜¯å¦‚æ­¤çš„å¼ºå¤§ï¼Œæ‰€ä»¥ï¼Œæ¯ä¸ªbugéƒ½å¯ä»¥é€šè¿‡ä¸€ä¸ªæ–°çš„ä¸´æ—¶åˆ†æ”¯æ¥ä¿®å¤ï¼Œä¿®å¤åŽï¼Œåˆå¹¶åˆ†æ”¯ï¼Œç„¶åŽå°†ä¸´æ—¶åˆ†æ”¯åˆ é™¤ã€‚å½“ä½ æŽ¥åˆ°ä¸€ä¸ªä¿®å¤ä¸€ä¸ªä»£å·101çš„bugçš„ä»»åŠ¡æ—¶ï¼Œå¾ˆè‡ªç„¶åœ°ï¼Œä½ æƒ³åˆ›å»ºä¸€ä¸ªåˆ†æ”¯issue-101æ¥ä¿®å¤å®ƒï¼Œä½†æ˜¯ï¼Œç­‰ç­‰ï¼Œå½“å‰æ­£åœ¨devä¸Šè¿›è¡Œçš„å·¥ä½œè¿˜æ²¡æœ‰æäº¤ï¼š12345678910111213$ git status# On branch dev# Changes to be committed:# (use &quot;git reset HEAD file...&quot; to unstage)## new file: hello.py## Changes not staged for commit:# (use &quot;git add file...&quot; to update what will be committed)# (use &quot;git checkout -- file...&quot; to discard changes in working directory)## modified: readme.txt# å¹¶ä¸æ˜¯ä½ ä¸æƒ³æäº¤ï¼Œè€Œæ˜¯å·¥ä½œåªè¿›è¡Œåˆ°ä¸€åŠï¼Œè¿˜æ²¡æ³•æäº¤ï¼Œé¢„è®¡å®Œæˆè¿˜éœ€1å¤©æ—¶é—´ã€‚ä½†æ˜¯ï¼Œå¿…é¡»åœ¨ä¸¤ä¸ªå°æ—¶å†…ä¿®å¤è¯¥bugï¼Œæ€Žä¹ˆåŠžï¼Ÿå¹¸å¥½ï¼ŒGitè¿˜æä¾›äº†ä¸€ä¸ªstashåŠŸèƒ½ï¼Œå¯ä»¥æŠŠå½“å‰å·¥ä½œçŽ°åœºâ€œå‚¨è—â€èµ·æ¥ï¼Œç­‰ä»¥åŽæ¢å¤çŽ°åœºåŽç»§ç»­å·¥ä½œï¼š123$ git stashSaved working directory and index state WIP on dev: 6224937 add mergeHEAD is now at 6224937 add merge çŽ°åœ¨ï¼Œç”¨git statusæŸ¥çœ‹å·¥ä½œåŒºï¼Œå°±æ˜¯å¹²å‡€çš„ï¼ˆé™¤éžæœ‰æ²¡æœ‰è¢«Gitç®¡ç†çš„æ–‡ä»¶ï¼‰ï¼Œå› æ­¤å¯ä»¥æ”¾å¿ƒåœ°åˆ›å»ºåˆ†æ”¯æ¥ä¿®å¤bugã€‚é¦–å…ˆç¡®å®šè¦åœ¨å“ªä¸ªåˆ†æ”¯ä¸Šä¿®å¤bugï¼Œå‡å®šéœ€è¦åœ¨masteråˆ†æ”¯ä¸Šä¿®å¤ï¼Œå°±ä»Žmasteråˆ›å»ºä¸´æ—¶åˆ†æ”¯ï¼š12345$ git checkout masterSwitched to branch &apos;master&apos;Your branch is ahead of &apos;origin/master&apos; by 6 commits.$ git checkout -b issue-101Switched to a new branch &apos;issue-101&apos; çŽ°åœ¨ä¿®å¤bugï¼Œéœ€è¦æŠŠâ€œGit is free software â€¦â€æ”¹ä¸ºâ€œGit is a free software â€¦â€ï¼Œç„¶åŽæäº¤ï¼š1234$ git add readme.txt$ git commit -m &quot;fix bug 101&quot;[issue-101 cc17032] fix bug 1011 file changed, 1 insertion(+), 1 deletion(-) ä¿®å¤å®ŒæˆåŽï¼Œåˆ‡æ¢åˆ°masteråˆ†æ”¯ï¼Œå¹¶å®Œæˆåˆå¹¶ï¼Œæœ€åŽåˆ é™¤issue-101åˆ†æ”¯ï¼š123456789$ git checkout masterSwitched to branch &apos;master&apos;Your branch is ahead of &apos;origin/master&apos; by 2 commits.$ git merge --no-ff -m &quot;merged bug fix 101&quot; issue-101Merge made by the &apos;recursive&apos; strategy.readme.txt | 2 +-1 file changed, 1 insertion(+), 1 deletion(-)$ git branch -d issue-101Deleted branch issue-101 (was cc17032). å¤ªæ£’äº†ï¼ŒåŽŸè®¡åˆ’ä¸¤ä¸ªå°æ—¶çš„bugä¿®å¤åªèŠ±äº†5åˆ†é’Ÿï¼çŽ°åœ¨ï¼Œæ˜¯æ—¶å€™æŽ¥ç€å›žåˆ°devåˆ†æ”¯å¹²æ´»äº†ï¼12345$ git checkout devSwitched to branch &apos;dev&apos;$ git status# On branch devnothing to commit (working directory clean) å·¥ä½œåŒºæ˜¯å¹²å‡€çš„ï¼Œåˆšæ‰çš„å·¥ä½œçŽ°åœºå­˜åˆ°å“ªåŽ»äº†ï¼Ÿç”¨git stash listå‘½ä»¤çœ‹çœ‹ï¼š12$ git stash liststash@&#123;0&#125;: WIP on dev: 6224937 add merge å·¥ä½œçŽ°åœºè¿˜åœ¨ï¼ŒGitæŠŠstashå†…å®¹å­˜åœ¨æŸä¸ªåœ°æ–¹äº†ï¼Œä½†æ˜¯éœ€è¦æ¢å¤ä¸€ä¸‹ï¼Œæœ‰ä¸¤ä¸ªåŠžæ³•ï¼š ä¸€æ˜¯ç”¨git stash applyæ¢å¤ï¼Œä½†æ˜¯æ¢å¤åŽï¼Œstashå†…å®¹å¹¶ä¸åˆ é™¤ï¼Œä½ éœ€è¦ç”¨git stash dropæ¥åˆ é™¤ï¼› å¦ä¸€ç§æ–¹å¼æ˜¯ç”¨git stash popï¼Œæ¢å¤çš„åŒæ—¶æŠŠstashå†…å®¹ä¹Ÿåˆ äº†ï¼š1234567891011121314$ git stash pop# On branch dev# Changes to be committed:# (use &quot;git reset HEAD file...&quot; to unstage)## new file: hello.py## Changes not staged for commit:# (use &quot;git add file...&quot; to update what will be committed)# (use &quot;git checkout -- file...&quot; to discard changes in working directory)## modified: readme.txt#Dropped refs/stash@&#123;0&#125; (f624f8e5f082f2df2bed8a4e09c12fd2943bdd40) å†ç”¨git stash listæŸ¥çœ‹ï¼Œå°±çœ‹ä¸åˆ°ä»»ä½•stashå†…å®¹äº†ï¼š1$ git stash list ä½ å¯ä»¥å¤šæ¬¡stashï¼Œæ¢å¤çš„æ—¶å€™ï¼Œå…ˆç”¨git stash listæŸ¥çœ‹ï¼Œç„¶åŽæ¢å¤æŒ‡å®šçš„stashï¼Œç”¨å‘½ä»¤ï¼š1$ git stash apply stash@&#123;0&#125; å°ç»“ä¿®å¤bugæ—¶ï¼Œæˆ‘ä»¬ä¼šé€šè¿‡åˆ›å»ºæ–°çš„bugåˆ†æ”¯è¿›è¡Œä¿®å¤ï¼Œç„¶åŽåˆå¹¶ï¼Œæœ€åŽåˆ é™¤ï¼›å½“æ‰‹å¤´å·¥ä½œæ²¡æœ‰å®Œæˆæ—¶ï¼Œå…ˆæŠŠå·¥ä½œçŽ°åœºgit stashä¸€ä¸‹ï¼Œç„¶åŽåŽ»ä¿®å¤bugï¼Œä¿®å¤åŽï¼Œå†git stash popï¼Œå›žåˆ°å·¥ä½œçŽ°åœºã€‚ Featureåˆ†æ”¯è½¯ä»¶å¼€å‘ä¸­ï¼Œæ€»æœ‰æ— ç©·æ— å°½çš„æ–°çš„åŠŸèƒ½è¦ä¸æ–­æ·»åŠ è¿›æ¥ã€‚æ·»åŠ ä¸€ä¸ªæ–°åŠŸèƒ½æ—¶ï¼Œä½ è‚¯å®šä¸å¸Œæœ›å› ä¸ºä¸€äº›å®žéªŒæ€§è´¨çš„ä»£ç ï¼ŒæŠŠä¸»åˆ†æ”¯æžä¹±äº†ï¼Œæ‰€ä»¥ï¼Œæ¯æ·»åŠ ä¸€ä¸ªæ–°åŠŸèƒ½ï¼Œæœ€å¥½æ–°å»ºä¸€ä¸ªfeatureåˆ†æ”¯ï¼Œåœ¨ä¸Šé¢å¼€å‘ï¼Œå®ŒæˆåŽï¼Œåˆå¹¶ï¼Œæœ€åŽï¼Œåˆ é™¤è¯¥featureåˆ†æ”¯ã€‚çŽ°åœ¨ï¼Œä½ ç»ˆäºŽæŽ¥åˆ°äº†ä¸€ä¸ªæ–°ä»»åŠ¡ï¼šå¼€å‘ä»£å·ä¸ºVulcançš„æ–°åŠŸèƒ½ï¼Œè¯¥åŠŸèƒ½è®¡åˆ’ç”¨äºŽä¸‹ä¸€ä»£æ˜Ÿé™…é£žèˆ¹ã€‚äºŽæ˜¯å‡†å¤‡å¼€å‘ï¼š12$ git checkout -b feature-vulcanSwitched to a new branch &apos;feature-vulcan&apos; 5åˆ†é’ŸåŽï¼Œå¼€å‘å®Œæ¯•ï¼š123456789101112$ git add vulcan.py$ git status# On branch feature-vulcan# Changes to be committed:# (use &quot;git reset HEAD file...&quot; to unstage)## new file: vulcan.py#$ git commit -m &quot;add feature vulcan&quot;[feature-vulcan 756d4af] add feature vulcan1 file changed, 2 insertions(+)create mode 100644 vulcan.py åˆ‡å›ždevï¼Œå‡†å¤‡åˆå¹¶ï¼š1$ git checkout dev ä¸€åˆ‡é¡ºåˆ©çš„è¯ï¼Œfeatureåˆ†æ”¯å’Œbugåˆ†æ”¯æ˜¯ç±»ä¼¼çš„ï¼Œåˆå¹¶ï¼Œç„¶åŽåˆ é™¤ã€‚ä½†æ˜¯ï¼Œ å°±åœ¨æ­¤æ—¶ï¼ŒæŽ¥åˆ°ä¸Šçº§å‘½ä»¤ï¼Œå› ç»è´¹ä¸è¶³ï¼Œæ–°åŠŸèƒ½å¿…é¡»å–æ¶ˆï¼ è™½ç„¶ç™½å¹²äº†ï¼Œä½†æ˜¯è¿™ä¸ªåˆ†æ”¯è¿˜æ˜¯å¿…é¡»å°±åœ°é”€æ¯ï¼š123$ git branch -d feature-vulcanerror: The branch &apos;feature-vulcan&apos; is not fully merged.If you are sure you want to delete it, run &apos;git branch -D feature-vulcan&apos;. é”€æ¯å¤±è´¥ã€‚Gitå‹æƒ…æé†’ï¼Œfeature-vulcanåˆ†æ”¯è¿˜æ²¡æœ‰è¢«åˆå¹¶ï¼Œå¦‚æžœåˆ é™¤ï¼Œå°†ä¸¢å¤±æŽ‰ä¿®æ”¹ï¼Œå¦‚æžœè¦å¼ºè¡Œåˆ é™¤ï¼Œéœ€è¦ä½¿ç”¨å‘½ä»¤git branch -D feature-vulcanã€‚çŽ°åœ¨æˆ‘ä»¬å¼ºè¡Œåˆ é™¤ï¼š12$ git branch -D feature-vulcanDeleted branch feature-vulcan (was 756d4af). ç»ˆäºŽåˆ é™¤æˆåŠŸï¼å°ç»“å¼€å‘ä¸€ä¸ªæ–°featureï¼Œæœ€å¥½æ–°å»ºä¸€ä¸ªåˆ†æ”¯ï¼›å¦‚æžœè¦ä¸¢å¼ƒä¸€ä¸ªæ²¡æœ‰è¢«åˆå¹¶è¿‡çš„åˆ†æ”¯ï¼Œå¯ä»¥é€šè¿‡git branch -D nameå¼ºè¡Œåˆ é™¤ã€‚ è¯¯åˆ åˆ†æ”¯æ¢å¤æ–¹æ³•é¦–å…ˆç”¨ä»¥ä¸‹æ­¥éª¤åˆ›å»ºä¸€ä¸ªæ–°åˆ†æ”¯ï¼Œä¿®æ”¹ä¸€äº›æ–‡ä»¶åŽåˆ é™¤ï¼Œä»¥ä¾¿è¿›è¡Œæ¢å¤ã€‚1.åˆ›å»ºåˆ†æ”¯ abc1$ git branch myDev 2.åˆ‡æ¢åˆ°abcåˆ†æ”¯ï¼Œéšä¾¿ä¿®æ”¹ä¸€ä¸‹ä¸œè¥¿åŽ commit123456789101112$ git checkout myDevSwitched to branch &apos;myDev&apos;$ git add README.mdjingtingchaodeMacBook-Pro:gitskills jingtingchao$ git commit -m &quot;ä¿®æ”¹README.md&quot;[myDev 38e7342] ä¿®æ”¹README.md1 file changed, 1 insertion(+)$ git checkout masterSwitched to branch &apos;master&apos;Your branch is ahead of &apos;origin/master&apos; by 30 commits.(use &quot;git push&quot; to publish your local commits) 3.åˆ é™¤åˆ†æ”¯abc12$ git branch -D myDevDeleted branch myDev (was 38e7342). 4.æŸ¥çœ‹åˆ†æ”¯åˆ—è¡¨ï¼Œabcåˆ†æ”¯å·²ä¸å­˜åœ¨123$ git branchdev* master 5.ä½¿ç”¨git log -g æ‰¾å›žä¹‹å‰æäº¤çš„commit123456789$ git log -g//è¿™é‡Œå°±æ˜¯commit_idcommit 38e7342e7ec64624e1c2ea69c228ace103ddea10Reflog: HEAD@&#123;1&#125; (xx@163.com)Reflog message: commit: ä¿®æ”¹README.mdAuthor: jtc xx@163.comDate: Wed Mar 15 19:47:41 2017 +0800ä¿®æ”¹README.md 6.ä½¿ç”¨git branch [æ–°åˆ†æ”¯] commit_idå‘½ä»¤ç”¨è¿™ä¸ªcommitåˆ›å»ºä¸€ä¸ªåˆ†æ”¯12345678$ git branch myDev 38e7342e7ec646//æŸ¥çœ‹åˆ†æ”¯$ git branchdev* mastermyDev$ git checkout myDevSwitched to branch &apos;recover_branch_myDev&apos; over! å¤šäººåä½œå½“ä½ ä»Žè¿œç¨‹ä»“åº“å…‹éš†æ—¶ï¼Œå®žé™…ä¸ŠGitè‡ªåŠ¨æŠŠæœ¬åœ°çš„masteråˆ†æ”¯å’Œè¿œç¨‹çš„masteråˆ†æ”¯å¯¹åº”èµ·æ¥äº†ï¼Œå¹¶ä¸”ï¼Œè¿œç¨‹ä»“åº“çš„é»˜è®¤åç§°æ˜¯originã€‚è¦æŸ¥çœ‹è¿œç¨‹åº“çš„ä¿¡æ¯ï¼Œç”¨git remoteï¼š12$ git remoteorigin æˆ–è€…ï¼Œç”¨git remote -væ˜¾ç¤ºæ›´è¯¦ç»†çš„ä¿¡æ¯ï¼š123$ git remote -vorigin git@github.com:michaelliao/learngit.git (fetch)origin git@github.com:michaelliao/learngit.git (push) ä¸Šé¢æ˜¾ç¤ºäº†å¯ä»¥æŠ“å–å’ŒæŽ¨é€çš„originçš„åœ°å€ã€‚å¦‚æžœæ²¡æœ‰æŽ¨é€æƒé™ï¼Œå°±çœ‹ä¸åˆ°pushçš„åœ°å€ã€‚ æŽ¨é€åˆ†æ”¯æŽ¨é€åˆ†æ”¯ï¼Œå°±æ˜¯æŠŠè¯¥åˆ†æ”¯ä¸Šçš„æ‰€æœ‰æœ¬åœ°æäº¤æŽ¨é€åˆ°è¿œç¨‹åº“ã€‚æŽ¨é€æ—¶ï¼Œè¦æŒ‡å®šæœ¬åœ°åˆ†æ”¯ï¼Œè¿™æ ·ï¼ŒGitå°±ä¼šæŠŠè¯¥åˆ†æ”¯æŽ¨é€åˆ°è¿œç¨‹åº“å¯¹åº”çš„è¿œç¨‹åˆ†æ”¯ä¸Šï¼š1$ git push origin master å¦‚æžœè¦æŽ¨é€å…¶ä»–åˆ†æ”¯ï¼Œæ¯”å¦‚devï¼Œå°±æ”¹æˆï¼š1$ git push origin dev ä½†æ˜¯ï¼Œå¹¶ä¸æ˜¯ä¸€å®šè¦æŠŠæœ¬åœ°åˆ†æ”¯å¾€è¿œç¨‹æŽ¨é€ï¼Œé‚£ä¹ˆï¼Œå“ªäº›åˆ†æ”¯éœ€è¦æŽ¨é€ï¼Œå“ªäº›ä¸éœ€è¦å‘¢ï¼Ÿ masteråˆ†æ”¯æ˜¯ä¸»åˆ†æ”¯ï¼Œå› æ­¤è¦æ—¶åˆ»ä¸Žè¿œç¨‹åŒæ­¥ï¼› devåˆ†æ”¯æ˜¯å¼€å‘åˆ†æ”¯ï¼Œå›¢é˜Ÿæ‰€æœ‰æˆå‘˜éƒ½éœ€è¦åœ¨ä¸Šé¢å·¥ä½œï¼Œæ‰€ä»¥ä¹Ÿéœ€è¦ä¸Žè¿œç¨‹åŒæ­¥ï¼› bugåˆ†æ”¯åªç”¨äºŽåœ¨æœ¬åœ°ä¿®å¤bugï¼Œå°±æ²¡å¿…è¦æŽ¨åˆ°è¿œç¨‹äº†ï¼Œé™¤éžè€æ¿è¦çœ‹çœ‹ä½ æ¯å‘¨åˆ°åº•ä¿®å¤äº†å‡ ä¸ªbugï¼› featureåˆ†æ”¯æ˜¯å¦æŽ¨åˆ°è¿œç¨‹ï¼Œå–å†³äºŽä½ æ˜¯å¦å’Œä½ çš„å°ä¼™ä¼´åˆä½œåœ¨ä¸Šé¢å¼€å‘ã€‚æ€»ä¹‹ï¼Œå°±æ˜¯åœ¨Gitä¸­ï¼Œåˆ†æ”¯å®Œå…¨å¯ä»¥åœ¨æœ¬åœ°è‡ªå·±è—ç€çŽ©ï¼Œæ˜¯å¦æŽ¨é€ï¼Œè§†ä½ çš„å¿ƒæƒ…è€Œå®šï¼ æŠ“å–åˆ†æ”¯å¤šäººåä½œæ—¶ï¼Œå¤§å®¶éƒ½ä¼šå¾€masterå’Œdevåˆ†æ”¯ä¸ŠæŽ¨é€å„è‡ªçš„ä¿®æ”¹ã€‚çŽ°åœ¨ï¼Œæ¨¡æ‹Ÿä¸€ä¸ªä½ çš„å°ä¼™ä¼´ï¼Œå¯ä»¥åœ¨å¦ä¸€å°ç”µè„‘ï¼ˆæ³¨æ„è¦æŠŠSSH Keyæ·»åŠ åˆ°GitHubï¼‰æˆ–è€…åŒä¸€å°ç”µè„‘çš„å¦ä¸€ä¸ªç›®å½•ä¸‹å…‹éš†ï¼š1234567$ git clone git@github.com:michaelliao/learngit.gitCloning into &apos;learngit&apos;...remote: Counting objects: 46, done.remote: Compressing objects: 100% (26/26), done.remote: Total 46 (delta 16), reused 45 (delta 15)Receiving objects: 100% (46/46), 15.69 KiB | 6 KiB/s, done.Resolving deltas: 100% (16/16), done. å½“ä½ çš„å°ä¼™ä¼´ä»Žè¿œç¨‹åº“cloneæ—¶ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œä½ çš„å°ä¼™ä¼´åªèƒ½çœ‹åˆ°æœ¬åœ°çš„masteråˆ†æ”¯ã€‚ä¸ä¿¡å¯ä»¥ç”¨git branchå‘½ä»¤çœ‹çœ‹ï¼š12$ git branch* master çŽ°åœ¨ï¼Œä½ çš„å°ä¼™ä¼´è¦åœ¨devåˆ†æ”¯ä¸Šå¼€å‘ï¼Œå°±å¿…é¡»åˆ›å»ºè¿œç¨‹originçš„devåˆ†æ”¯åˆ°æœ¬åœ°ï¼ŒäºŽæ˜¯ä»–ç”¨è¿™ä¸ªå‘½ä»¤åˆ›å»ºæœ¬åœ°devåˆ†æ”¯ï¼š1$ git checkout -b dev origin/dev çŽ°åœ¨ï¼Œä»–å°±å¯ä»¥åœ¨devä¸Šç»§ç»­ä¿®æ”¹ï¼Œç„¶åŽï¼Œæ—¶ä¸æ—¶åœ°æŠŠdevåˆ†æ”¯pushåˆ°è¿œç¨‹ï¼š1234567891011$ git commit -m &quot;add /usr/bin/env&quot;[dev 291bea8] add /usr/bin/env1 file changed, 1 insertion(+)$ git push origin devCounting objects: 5, done.Delta compression using up to 4 threads.Compressing objects: 100% (2/2), done.Writing objects: 100% (3/3), 349 bytes, done.Total 3 (delta 0), reused 0 (delta 0)To git@github.com:michaelliao/learngit.gitfc38031..291bea8 dev -&gt; dev ä½ çš„å°ä¼™ä¼´å·²ç»å‘origin/devåˆ†æ”¯æŽ¨é€äº†ä»–çš„æäº¤ï¼Œè€Œç¢°å·§ä½ ä¹Ÿå¯¹åŒæ ·çš„æ–‡ä»¶ä½œäº†ä¿®æ”¹ï¼Œå¹¶è¯•å›¾æŽ¨é€ï¼š123456789101112$ git add hello.py$ git commit -m &quot;add coding: utf-8&quot;[dev bd6ae48] add coding: utf-81 file changed, 1 insertion(+)$ git push origin devTo git@github.com:michaelliao/learngit.git! [rejected] dev -&gt; dev (non-fast-forward)error: failed to push some refs to &apos;git@github.com:michaelliao/learngit.git&apos;hint: Updates were rejected because the tip of your current branch is behindhint: its remote counterpart. Merge the remote changes (e.g. &apos;git pull&apos;)hint: before pushing again.hint: See the &apos;Note about fast-forwards&apos; in &apos;git push --help&apos; for details. æŽ¨é€å¤±è´¥ï¼Œå› ä¸ºä½ çš„å°ä¼™ä¼´çš„æœ€æ–°æäº¤å’Œä½ è¯•å›¾æŽ¨é€çš„æäº¤æœ‰å†²çªï¼Œè§£å†³åŠžæ³•ä¹Ÿå¾ˆç®€å•ï¼ŒGitå·²ç»æç¤ºæˆ‘ä»¬ï¼Œå…ˆç”¨git pullæŠŠæœ€æ–°çš„æäº¤ä»Žorigin/devæŠ“ä¸‹æ¥ï¼Œç„¶åŽï¼Œåœ¨æœ¬åœ°åˆå¹¶ï¼Œè§£å†³å†²çªï¼Œå†æŽ¨é€ï¼š12345678910111213141516$ git pullremote: Counting objects: 5, done.remote: Compressing objects: 100% (2/2), done.remote: Total 3 (delta 0), reused 3 (delta 0)Unpacking objects: 100% (3/3), done.From github.com:michaelliao/learngitfc38031..291bea8 dev -&gt; origin/devThere is no tracking information for the current branch.Please specify which branch you want to merge with.See git-pull(1) for detailsgit pull remote branchIf you wish to set tracking information for this branch you can do so with:git branch --set-upstream dev origin/branch git pullä¹Ÿå¤±è´¥äº†ï¼ŒåŽŸå› æ˜¯æ²¡æœ‰æŒ‡å®šæœ¬åœ°devåˆ†æ”¯ä¸Žè¿œç¨‹origin/devåˆ†æ”¯çš„é“¾æŽ¥ï¼Œæ ¹æ®æç¤ºï¼Œè®¾ç½®devå’Œorigin/devçš„é“¾æŽ¥ï¼š12$ git branch --set-upstream-to=origin/dev devBranch dev set up to track remote branch dev from origin. å†pullï¼š1234$ git pullAuto-merging hello.pyCONFLICT (content): Merge conflict in hello.pyAutomatic merge failed; fix conflicts and then commit the result. è¿™å›žgit pullæˆåŠŸï¼Œä½†æ˜¯åˆå¹¶æœ‰å†²çªï¼Œéœ€è¦æ‰‹åŠ¨è§£å†³ï¼Œè§£å†³çš„æ–¹æ³•å’Œåˆ†æ”¯ç®¡ç†ä¸­çš„è§£å†³å†²çªå®Œå…¨ä¸€æ ·ã€‚è§£å†³åŽï¼Œæäº¤ï¼Œå†pushï¼š12345678910$ git commit -m &quot;merge &amp; fix hello.py&quot;[dev adca45d] merge &amp; fix hello.py$ git push origin devCounting objects: 10, done.Delta compression using up to 4 threads.Compressing objects: 100% (5/5), done.Writing objects: 100% (6/6), 747 bytes, done.Total 6 (delta 0), reused 0 (delta 0)To git@github.com:michaelliao/learngit.git291bea8..adca45d dev -&gt; dev å› æ­¤ï¼Œå¤šäººåä½œçš„å·¥ä½œæ¨¡å¼é€šå¸¸æ˜¯è¿™æ ·ï¼š1.é¦–å…ˆï¼Œå¯ä»¥è¯•å›¾ç”¨git push origin branch-nameæŽ¨é€è‡ªå·±çš„ä¿®æ”¹ï¼›2.å¦‚æžœæŽ¨é€å¤±è´¥ï¼Œåˆ™å› ä¸ºè¿œç¨‹åˆ†æ”¯æ¯”ä½ çš„æœ¬åœ°æ›´æ–°ï¼Œéœ€è¦å…ˆç”¨git pullè¯•å›¾åˆå¹¶ï¼›3.å¦‚æžœåˆå¹¶æœ‰å†²çªï¼Œåˆ™è§£å†³å†²çªï¼Œå¹¶åœ¨æœ¬åœ°æäº¤ï¼›4.æ²¡æœ‰å†²çªæˆ–è€…è§£å†³æŽ‰å†²çªåŽï¼Œå†ç”¨git push origin branch-nameæŽ¨é€å°±èƒ½æˆåŠŸï¼å¦‚æžœgit pullæç¤ºâ€œno tracking informationâ€ï¼Œåˆ™è¯´æ˜Žæœ¬åœ°åˆ†æ”¯å’Œè¿œç¨‹åˆ†æ”¯çš„é“¾æŽ¥å…³ç³»æ²¡æœ‰åˆ›å»ºï¼Œç”¨å‘½ä»¤git branch â€“set-upstream-to=origin/branch-name branch-nameè¿™å°±æ˜¯å¤šäººåä½œçš„å·¥ä½œæ¨¡å¼ï¼Œä¸€æ—¦ç†Ÿæ‚‰äº†ï¼Œå°±éžå¸¸ç®€å•ã€‚å°ç»“ æŸ¥çœ‹è¿œç¨‹åº“ä¿¡æ¯ï¼Œä½¿ç”¨git remote -vï¼› æœ¬åœ°æ–°å»ºçš„åˆ†æ”¯å¦‚æžœä¸æŽ¨é€åˆ°è¿œç¨‹ï¼Œå¯¹å…¶ä»–äººå°±æ˜¯ä¸å¯è§çš„ï¼› ä»Žæœ¬åœ°æŽ¨é€åˆ†æ”¯ï¼Œä½¿ç”¨git push origin branch-nameï¼Œå¦‚æžœæŽ¨é€å¤±è´¥ï¼Œå…ˆç”¨git pullæŠ“å–è¿œç¨‹çš„æ–°æäº¤ï¼› åœ¨æœ¬åœ°åˆ›å»ºå’Œè¿œç¨‹åˆ†æ”¯å¯¹åº”çš„åˆ†æ”¯ï¼Œä½¿ç”¨git checkout -b branch-name origin/branch-nameï¼Œæœ¬åœ°å’Œè¿œç¨‹åˆ†æ”¯çš„åç§°æœ€å¥½ä¸€è‡´ï¼› å»ºç«‹æœ¬åœ°åˆ†æ”¯å’Œè¿œç¨‹åˆ†æ”¯çš„å…³è”ï¼Œä½¿ç”¨git branch â€“set-upstream-to=origin/branch-name branch-name ä»Žè¿œç¨‹æŠ“å–åˆ†æ”¯ï¼Œä½¿ç”¨git pullï¼Œå¦‚æžœæœ‰å†²çªï¼Œè¦å…ˆå¤„ç†å†²çªã€‚æ ‡ç­¾ç®¡ç†å‘å¸ƒä¸€ä¸ªç‰ˆæœ¬æ—¶ï¼Œæˆ‘ä»¬é€šå¸¸å…ˆåœ¨ç‰ˆæœ¬åº“ä¸­æ‰“ä¸€ä¸ªæ ‡ç­¾ï¼ˆtagï¼‰ï¼Œè¿™æ ·ï¼Œå°±å”¯ä¸€ç¡®å®šäº†æ‰“æ ‡ç­¾æ—¶åˆ»çš„ç‰ˆæœ¬ã€‚å°†æ¥æ— è®ºä»€ä¹ˆæ—¶å€™ï¼Œå–æŸä¸ªæ ‡ç­¾çš„ç‰ˆæœ¬ï¼Œå°±æ˜¯æŠŠé‚£ä¸ªæ‰“æ ‡ç­¾çš„æ—¶åˆ»çš„åŽ†å²ç‰ˆæœ¬å–å‡ºæ¥ã€‚æ‰€ä»¥ï¼Œæ ‡ç­¾ä¹Ÿæ˜¯ç‰ˆæœ¬åº“çš„ä¸€ä¸ªå¿«ç…§ã€‚Gitçš„æ ‡ç­¾è™½ç„¶æ˜¯ç‰ˆæœ¬åº“çš„å¿«ç…§ï¼Œä½†å…¶å®žå®ƒå°±æ˜¯æŒ‡å‘æŸä¸ªcommitçš„æŒ‡é’ˆï¼ˆè·Ÿåˆ†æ”¯å¾ˆåƒå¯¹ä¸å¯¹ï¼Ÿä½†æ˜¯åˆ†æ”¯å¯ä»¥ç§»åŠ¨ï¼Œæ ‡ç­¾ä¸èƒ½ç§»åŠ¨ï¼‰ï¼Œæ‰€ä»¥ï¼Œåˆ›å»ºå’Œåˆ é™¤æ ‡ç­¾éƒ½æ˜¯çž¬é—´å®Œæˆçš„ã€‚Gitæœ‰commitï¼Œä¸ºä»€ä¹ˆè¿˜è¦å¼•å…¥tagï¼Ÿâ€œè¯·æŠŠä¸Šå‘¨ä¸€çš„é‚£ä¸ªç‰ˆæœ¬æ‰“åŒ…å‘å¸ƒï¼Œcommitå·æ˜¯6a5819eâ€¦â€â€œä¸€ä¸²ä¹±ä¸ƒå…«ç³Ÿçš„æ•°å­—ä¸å¥½æ‰¾ï¼â€å¦‚æžœæ¢ä¸€ä¸ªåŠžæ³•ï¼šâ€œè¯·æŠŠä¸Šå‘¨ä¸€çš„é‚£ä¸ªç‰ˆæœ¬æ‰“åŒ…å‘å¸ƒï¼Œç‰ˆæœ¬å·æ˜¯v1.2â€â€œå¥½çš„ï¼ŒæŒ‰ç…§tag v1.2æŸ¥æ‰¾commitå°±è¡Œï¼â€æ‰€ä»¥ï¼Œtagå°±æ˜¯ä¸€ä¸ªè®©äººå®¹æ˜“è®°ä½çš„æœ‰æ„ä¹‰çš„åå­—ï¼Œå®ƒè·ŸæŸä¸ªcommitç»‘åœ¨ä¸€èµ·ã€‚åˆ›å»ºæ ‡ç­¾åœ¨Gitä¸­æ‰“æ ‡ç­¾éžå¸¸ç®€å•ï¼Œé¦–å…ˆï¼Œåˆ‡æ¢åˆ°éœ€è¦æ‰“æ ‡ç­¾çš„åˆ†æ”¯ä¸Šï¼š12345$ git branch* devmaster$ git checkout masterSwitched to branch &apos;master&apos; ç„¶åŽï¼Œæ•²å‘½ä»¤git tag nameå°±å¯ä»¥æ‰“ä¸€ä¸ªæ–°æ ‡ç­¾ï¼š1$ git tag v1.0 å¯ä»¥ç”¨å‘½ä»¤git tagæŸ¥çœ‹æ‰€æœ‰æ ‡ç­¾ï¼š12$ git tagv1.0 é»˜è®¤æ ‡ç­¾æ˜¯æ‰“åœ¨æœ€æ–°æäº¤çš„commitä¸Šçš„ã€‚æœ‰æ—¶å€™ï¼Œå¦‚æžœå¿˜äº†æ‰“æ ‡ç­¾ï¼Œæ¯”å¦‚ï¼ŒçŽ°åœ¨å·²ç»æ˜¯å‘¨äº”äº†ï¼Œä½†åº”è¯¥åœ¨å‘¨ä¸€æ‰“çš„æ ‡ç­¾æ²¡æœ‰æ‰“ï¼Œæ€Žä¹ˆåŠžï¼Ÿæ–¹æ³•æ˜¯æ‰¾åˆ°åŽ†å²æäº¤çš„commit idï¼Œç„¶åŽæ‰“ä¸Šå°±å¯ä»¥äº†ï¼š1234567891011$ git log --pretty=oneline --abbrev-commit6a5819e merged bug fix 101cc17032 fix bug 1017825a50 merge with no-ff6224937 add merge59bc1cb conflict fixed400b400 &amp; simple75a857c AND simplefec145a branch testd17efd8 remove test.txt... æ¯”æ–¹è¯´è¦å¯¹add mergeè¿™æ¬¡æäº¤æ‰“æ ‡ç­¾ï¼Œå®ƒå¯¹åº”çš„commit idæ˜¯6224937ï¼Œæ•²å…¥å‘½ä»¤ï¼š1$ git tag v0.9 6224937 å†ç”¨å‘½ä»¤git tagæŸ¥çœ‹æ ‡ç­¾ï¼š123$ git tagv0.9v1.0 æ³¨æ„ï¼Œæ ‡ç­¾ä¸æ˜¯æŒ‰æ—¶é—´é¡ºåºåˆ—å‡ºï¼Œè€Œæ˜¯æŒ‰å­—æ¯æŽ’åºçš„ã€‚å¯ä»¥ç”¨git show tagnameæŸ¥çœ‹æ ‡ç­¾ä¿¡æ¯ï¼š1234567$ git show v0.9commit 622493706ab447b6bb37e4e2a2f276a20fed2ab4Author:Date: Thu Aug 22 11:22:08 2013 +0800add merge... å¯ä»¥çœ‹åˆ°ï¼Œv0.9ç¡®å®žæ‰“åœ¨add mergeè¿™æ¬¡æäº¤ä¸Šã€‚è¿˜å¯ä»¥åˆ›å»ºå¸¦æœ‰è¯´æ˜Žçš„æ ‡ç­¾ï¼Œç”¨-aæŒ‡å®šæ ‡ç­¾åï¼Œ-mæŒ‡å®šè¯´æ˜Žæ–‡å­—ï¼š1$ git tag -a v0.1 -m &quot;version 0.1 released&quot; 3628164 ç”¨å‘½ä»¤git show tagnameå¯ä»¥çœ‹åˆ°è¯´æ˜Žæ–‡å­—ï¼š123456789101112$ git show v0.1tag v0.1Tagger:Date: Mon Aug 26 07:28:11 2013 +0800version 0.1 releasedcommit 3628164fb26d48395383f8f31179f24e0882e1e0Author:Date: Tue Aug 20 15:11:49 2013 +0800append GPL æ“ä½œæ ‡ç­¾å¦‚æžœæ ‡ç­¾æ‰“é”™äº†ï¼Œä¹Ÿå¯ä»¥åˆ é™¤ï¼š12$ git tag -d v0.1Deleted tag &apos;v0.1&apos; (was e078af9) å› ä¸ºåˆ›å»ºçš„æ ‡ç­¾éƒ½åªå­˜å‚¨åœ¨æœ¬åœ°ï¼Œä¸ä¼šè‡ªåŠ¨æŽ¨é€åˆ°è¿œç¨‹ã€‚æ‰€ä»¥ï¼Œæ‰“é”™çš„æ ‡ç­¾å¯ä»¥åœ¨æœ¬åœ°å®‰å…¨åˆ é™¤ã€‚ å¦‚æžœè¦æŽ¨é€æŸä¸ªæ ‡ç­¾åˆ°è¿œç¨‹ï¼Œä½¿ç”¨å‘½ä»¤git push origin tagnameï¼š1234$ git push origin v1.0Total 0 (delta 0), reused 0 (delta 0)To git@github.com:michaelliao/learngit.git* [new tag] v1.0 -&gt; v1.0 æˆ–è€…ï¼Œä¸€æ¬¡æ€§æŽ¨é€å…¨éƒ¨å°šæœªæŽ¨é€åˆ°è¿œç¨‹çš„æœ¬åœ°æ ‡ç­¾ï¼š1234567$ git push origin --tagsCounting objects: 1, done.Writing objects: 100% (1/1), 554 bytes, done.Total 1 (delta 0), reused 0 (delta 0)To git@github.com:michaelliao/learngit.git* [new tag] v0.2 -&gt; v0.2* [new tag] v0.9 -&gt; v0.9 å¦‚æžœæ ‡ç­¾å·²ç»æŽ¨é€åˆ°è¿œç¨‹ï¼Œè¦åˆ é™¤è¿œç¨‹æ ‡ç­¾å°±éº»çƒ¦ä¸€ç‚¹ï¼Œå…ˆä»Žæœ¬åœ°åˆ é™¤ï¼š12$ git tag -d v0.9Deleted tag &apos;v0.9&apos; (was 6224937) ç„¶åŽï¼Œä»Žè¿œç¨‹åˆ é™¤ã€‚åˆ é™¤å‘½ä»¤ä¹Ÿæ˜¯pushï¼Œä½†æ˜¯æ ¼å¼å¦‚ä¸‹ï¼š123$ git push origin :refs/tags/v0.9To git@github.com:michaelliao/learngit.git- [deleted] v0.9 è¦çœ‹çœ‹æ˜¯å¦çœŸçš„ä»Žè¿œç¨‹åº“åˆ é™¤äº†æ ‡ç­¾ï¼Œå¯ä»¥ç™»é™†GitHubæŸ¥çœ‹ã€‚ å°ç»“ å‘½ä»¤git push origin tagnameå¯ä»¥æŽ¨é€ä¸€ä¸ªæœ¬åœ°æ ‡ç­¾ï¼› å‘½ä»¤git push origin â€“tagså¯ä»¥æŽ¨é€å…¨éƒ¨æœªæŽ¨é€è¿‡çš„æœ¬åœ°æ ‡ç­¾ï¼› å‘½ä»¤git tag -d tagnameå¯ä»¥åˆ é™¤ä¸€ä¸ªæœ¬åœ°æ ‡ç­¾ï¼› å‘½ä»¤git push origin :refs/tags/tagnameå¯ä»¥åˆ é™¤ä¸€ä¸ªè¿œç¨‹æ ‡ç­¾ã€‚ åŽŸæ–‡åœ°å€]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[UITableView+FDTemplateLayoutCellç†è§£ç¬”è®°]]></title>
      <url>%2F2017%2F03%2F14%2FUITableView-FDTemplateLayoutCell%E7%90%86%E8%A7%A3%E7%AC%94%E8%AE%B0%2F</url>
      <content type="text"><![CDATA[UITableView+FDTemplateLayoutCell Demoéƒ¨åˆ†ï¼š storyboardéƒ¨åˆ†ï¼šâ‘ ï¼šè¿™é‡Œæ˜¯é€šè¿‡storyboardæ¥æ·»åŠ tableHeadViewã€‚ æ·»åŠ çš„æ–¹å¼å°±æ˜¯ç›´æŽ¥é€šè¿‡åœ¨cellçš„ä¸Šé¢ç›´æŽ¥æ‹–å…¥ä¸€ä¸ªUIViewï¼Œè¿™ä¸ªUIViewå°±å¯ä»¥ä½œä¸ºtableHeadViewã€‚ç„¶åŽå¯ä»¥åœ¨è¿™ä¸ªtableHeadViewä¸­æ·»åŠ ä¸€ä¸ªæŽ§ä»¶å’Œçº¦æŸã€‚â‘¡ï¼š è¿™é‡Œæ˜¯è‡ªå®šä¹‰äº†ä¸€ä¸ªåŠ¨æ€cellã€‚ åœ¨æ·»åŠ çº¦æŸçš„æ—¶å€™ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼šè¿™é‡Œçš„å›¾ç‰‡æ˜¯æ— æ³•ç¡®å®šé«˜åº¦çš„ï¼Œè¿™é‡Œçº¦æŸäº†å›¾ç‰‡çš„å®½åº¦&lt;=æŸä¸ªå€¼ï¼Œä¿è¯å›¾ç‰‡ä¸ä¼šè¶…è¿‡å±å¹•ï¼Œå›¾ç‰‡çš„é«˜åº¦æ ¹æ®å›¾ç‰‡çš„å®½åº¦æ¥ç¡®å®šã€‚æ‰€ä»¥ï¼Œåœ¨åšçº¦æŸçš„æ—¶å€™ï¼Œä¸èƒ½å°†Username Labelçš„åž‚ç›´ä½ç½®ç›¸å¯¹äºŽå›¾ç‰‡æ¥è®¾ç½®ï¼Œusername Labelçš„åº•éƒ¨ç›¸å¯¹äºŽcontentViewæ¥è®¾ç½®ï¼ŒUIImageViewçš„åº•éƒ¨ç›¸å¯¹äºŽusername Labelæ¥è®¾ç½®ã€‚â‘¢ï¼š åœ¨storyboardå½“ä¸­æ·»åŠ äº†ä¸€ä¸ªrefresh controlï¼Œé€šè¿‡storyboardæ¥æ·»åŠ refresh controlçš„æ–¹å¼ä¸ºï¼š ç›‘å¬refresh controlçš„äº‹ä»¶çš„æ–¹å¼æ˜¯é€šè¿‡å¯¹value changeçš„ç›‘å¬;é€šè¿‡æ‹–çº¿çš„æ–¹å¼æ·»åŠ äº‹ä»¶å¤„ç†ï¼š æˆ‘ä»¬åªéœ€è¦åœ¨è¯·æ±‚åˆ°æ•°æ®åŽè°ƒç”¨refresh controlçš„endRefreshingæ–¹æ³•å¹¶ä¸”åˆ·æ–°è¡¨æ ¼ ä»£ç éƒ¨åˆ†ï¼š1.æžšä¸¾çš„ä½¿ç”¨ï¼š12345typedef NS_ENUM(NSInteger, FDSimulatedCacheMode) &#123;FDSimulatedCacheModeNone = 0,FDSimulatedCacheModeCacheByIndexPath,FDSimulatedCacheModeCacheByKey&#125;; è¿™é‡Œå°†UISegment Controlçš„indexä¸Žæžšä¸¾å»ºç«‹å…³è”ï¼šç›´æŽ¥å°†indexå€¼èµ‹å€¼ç»™æžšä¸¾å˜é‡ã€‚è¿™æ ·çš„å¥½å¤„æ˜¯ï¼š 1.å…åŽ»äº†if elseçš„åˆ¤æ–­ã€‚2.ç›¸æ¯”è¾ƒif(0) else if(1)è¿™æ ·çš„ä»£ç if(FDSimulatedCacheModeNone) else if (FDSimulatedCacheModeCacheByIndexPath)..å…·æœ‰æ›´é«˜çš„å¯è¯»æ€§ 2.å¼€å¯æ‰“å°ï¼š1self.tableView.fd_debugLogEnabled = YES; 3.blockçš„ä½¿ç”¨ï¼š1234567891011121314151617181920212223242526272829303132333435363738//è¿™é‡Œçš„ä»£ç å†…å®¹ä¸»è¦åŒ…æ‹¬äº†1.å°†jsonè½¬ä¸ºæ¨¡åž‹æ•°ç»„ï¼Œå°†æ¨¡åž‹æ•°ç»„ä½œä¸ºå…ƒç´ æ·»åŠ åˆ°å¯å˜æ•°ç»„å½“ä¸­- (void)viewDidLoad &#123;[super viewDidLoad];//è¿™é‡Œé‡‡ç”¨blockå›žè°ƒçš„æ–¹å¼çš„å¥½å¤„æ˜¯ï¼š å¯¹ä»£ç è¿›è¡Œäº†å°è£…ï¼Œå› ä¸ºè¿™é‡Œä¸¤ä¸ªæ•°ç»„ä¹‹é—´æœ¬èº«å°±å­˜åœ¨ä¾èµ–å…³ç³»ï¼ŒfeedEntitySectionsä¾èµ–äºŽprototypeEntitiesFromJSONï¼Œæ‰€ä»¥é€šè¿‡blockçš„æ–¹å¼ï¼Œé¿å…è¢«è°ƒæ¢é¡ºåºï¼Œè€Œå¯¼è‡´é”™è¯¯ã€‚blockå›žè°ƒå°±å®Œæˆäº†å°è£…ã€‚é€šè¿‡å½“æ¨¡åž‹æ•°ç»„åˆ›å»ºå®Œæ¯•çš„æ—¶å€™å›žè°ƒçš„æ–¹å¼æ¥åˆ›å»ºfeedEntitySectionsæ•°ç»„[self buildTestDataThen:^&#123;self.feedEntitySections = @[].mutableCopy;[self.feedEntitySections addObject:self.prototypeEntitiesFromJSON.mutableCopy];[self.tableView reloadData];&#125;];&#125;//è¿™é‡ŒåŠ è½½æ–‡ä»¶æ•°æ®ä»¥åŠjsonè½¬æ¨¡åž‹ï¼Œæ”¾åœ¨äº†å­çº¿ç¨‹æ¥æ‰§è¡Œï¼Œé¿å…å¯¹ä¸»çº¿ç¨‹å¯èƒ½é€ æˆçš„å¡é¡¿å’Œä¸æµç•…//ç›¸å¯¹äºŽä½¿ç”¨for inä½¿ç”¨enumerateObjectsUsingBlockï¼Œæ•ˆçŽ‡æ›´é«˜//æœ€åŽéœ€è¦å›žåˆ°ä¸»çº¿ç¨‹è°ƒç”¨blockï¼Œè€Œéžåœ¨å­çº¿ç¨‹ç›´æŽ¥è°ƒç”¨- (void)buildTestDataThen:(void (^)(void))then &#123;// Simulate an async requestdispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^&#123;// Data from `data.json`NSString *dataFilePath = [[NSBundle mainBundle] pathForResource:@&quot;data&quot; ofType:@&quot;json&quot;];NSData *data = [NSData dataWithContentsOfFile:dataFilePath];NSDictionary *rootDict = [NSJSONSerialization JSONObjectWithData:data options:NSJSONReadingAllowFragments error:nil];NSArray *feedDicts = rootDict[@&quot;feed&quot;];// Convert to `FDFeedEntity`NSMutableArray *entities = @[].mutableCopy;[feedDicts enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop) &#123;[entities addObject:[[FDFeedEntity alloc] initWithDictionary:obj]];&#125;];self.prototypeEntitiesFromJSON = entities;// Callbackdispatch_async(dispatch_get_main_queue(), ^&#123;!then ?: then();&#125;);&#125;);&#125; IMP12345678910111213//æ ¹æ®buttonIndexæ¥è°ƒç”¨ä¸åŒçš„æ–¹æ³•ã€‚é€šè¿‡å¯¹IMPçš„ä½¿ç”¨ï¼Œå…åŽ»äº†if elseçš„ä½¿ç”¨ã€‚- (void)actionSheet:(UIActionSheet *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex &#123;SEL selectors[] = &#123;@selector(insertRow),@selector(insertSection),@selector(deleteSection)&#125;;if (buttonIndex &lt; sizeof(selectors) / sizeof(SEL)) &#123;void(*imp)(id, SEL) = (typeof(imp))[self methodForSelector:selectors[buttonIndex]];imp(self, selectors[buttonIndex]);&#125;&#125;]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[runloop]]></title>
      <url>%2F2017%2F03%2F13%2Frunloop%2F</url>
      <content type="text"><![CDATA[åˆ©ç”¨RunLoopç©ºé—²æ—¶é—´æ‰§è¡Œä»»åŠ¡ ç©ºé—²RunLoopMode: å½“ç”¨æˆ·æ­£åœ¨æ»‘åŠ¨ UIScrollView æ—¶ï¼ŒRunLoop å°†åˆ‡æ¢åˆ° UITrackingRunLoopMode,æŽ¥å—æ»‘åŠ¨æ‰‹åŠ¿å’Œå¤„ç†æ»‘åŠ¨äº‹ä»¶ï¼ˆåŒ…æ‹¬å‡é€Ÿå’Œå¼¹ç°§æ•ˆæžœï¼‰,æ­¤æ—¶ï¼Œå…¶ä»– Mode ï¼ˆé™¤ NSRunLoopCommonModes è¿™ä¸ªç»„åˆ Modeï¼‰ä¸‹çš„äº‹ä»¶å°†å…¨éƒ¨æš‚åœæ‰§è¡Œï¼Œæ¥ä¿è¯æ»‘åŠ¨äº‹ä»¶çš„ä¼˜å…ˆå¤„ç†ï¼Œè¿™ä¹Ÿæ˜¯ iOS æ»‘åŠ¨é¡ºç•…çš„é‡è¦åŽŸå› ã€‚ å½“ UI æ²¡åœ¨æ»‘åŠ¨æ—¶ï¼Œé»˜è®¤çš„ Mode æ˜¯ NSDefaultRunLoopModeï¼ˆåŒ CF ä¸­çš„ kCFRunLoopDefaultModeï¼‰ï¼ŒåŒæ—¶ä¹Ÿæ˜¯ CF ä¸­å®šä¹‰çš„ â€œç©ºé—²çŠ¶æ€ Modeâ€ã€‚å½“ç”¨æˆ·å•¥ä¹Ÿä¸ç‚¹ï¼Œæ­¤æ—¶ä¹Ÿæ²¡æœ‰ä»€ä¹ˆç½‘ç»œ IO æ—¶ï¼Œå°±æ˜¯åœ¨è¿™ä¸ª Mode ä¸‹ã€‚ ç”¨RunLoopObserveræ‰¾å‡†æ—¶æœº: æ³¨å†Œ RunLoopObserver å¯ä»¥è§‚æµ‹å½“å‰ RunLoop çš„è¿è¡ŒçŠ¶æ€ï¼Œå¹¶åœ¨çŠ¶æ€æœºåˆ‡æ¢æ—¶æ”¶åˆ°é€šçŸ¥ï¼š1.RunLoopå¼€å§‹2.RunLoopå³å°†å¤„ç†Timer3.RunLoopå³å°†å¤„ç†Source4.RunLoopå³å°†è¿›å…¥ä¼‘çœ çŠ¶æ€5.RunLoopå³å°†ä»Žä¼‘çœ çŠ¶æ€è¢«äº‹ä»¶å”¤é†’6.RunLoopé€€å‡º ç©ºé—²æ—¶é—´æ‰§è¡Œä»»ä½•åº”å½“æ»¡è¶³ï¼šRunLoop å¤„äºŽâ€œç©ºé—²â€çŠ¶æ€ Modeå½“è¿™ä¸€æ¬¡ RunLoop è¿­ä»£å¤„ç†å®Œæˆäº†æ‰€æœ‰äº‹ä»¶ï¼Œé©¬ä¸Šè¦ä¼‘çœ æ—¶1234567CFRunLoopRef runLoop = CFRunLoopGetCurrent();CFStringRef runLoopMode = kCFRunLoopDefaultMode;CFRunLoopObserverRef observer = CFRunLoopObserverCreateWithHandler(kCFAllocatorDefault, kCFRunLoopBeforeWaiting, true, 0, ^(CFRunLoopObserverRef observer, CFRunLoopActivity _) &#123;// TODO here&#125;);CFRunLoopAddObserver(runLoop, observer, runLoopMode); åœ¨å…¶ä¸­çš„ TODO ä½ç½®ï¼Œå°±å¯ä»¥å¼€å§‹ä»»åŠ¡çš„æ”¶é›†å’Œåˆ†å‘äº†ï¼Œå½“ç„¶ï¼Œä¸èƒ½å¿˜è®°é€‚æ—¶çš„ç§»é™¤è¿™ä¸ª observer åˆ†è§£æˆå¤šä¸ªRunLoop Sourceä»»åŠ¡ï¼š å‡è®¾åˆ—è¡¨æœ‰ 20 ä¸ª cellï¼ŒåŠ è½½åŽå±•ç¤ºäº†å‰ 5 ä¸ªï¼Œé‚£ä¹ˆå¼€å¯ä¼°ç®—åŽ table view åªè®¡ç®—äº†è¿™ 5 ä¸ªçš„é«˜åº¦ï¼Œæ­¤æ—¶å‰©ä¸‹ 15 ä¸ªå°±æ˜¯â€œé¢„ç¼“å­˜â€çš„ä»»åŠ¡ï¼Œè€Œæˆ‘ä»¬å¹¶ä¸å¸Œæœ›è¿™ 15 ä¸ªè®¡ç®—ä»»åŠ¡åœ¨åŒä¸€ä¸ª RunLoop è¿­ä»£ä¸­åŒæ­¥æ‰§è¡Œï¼Œè¿™æ ·ä¼šå¡é¡¿ UIï¼Œæ‰€ä»¥åº”è¯¥æŠŠå®ƒä»¬åˆ†åˆ«åˆ†è§£åˆ° 15 ä¸ª RunLoop è¿­ä»£ä¸­æ‰§è¡Œï¼Œè¿™æ—¶å°±éœ€è¦æ‰‹åŠ¨å‘ RunLoop ä¸­æ·»åŠ  Source ä»»åŠ¡ï¼ˆç”±åº”ç”¨å‘èµ·å’Œå¤„ç†çš„æ˜¯ Source 0 ä»»åŠ¡ï¼‰ Foundation å±‚æ²¡å¯¹ RunLoopSource æä¾›ç›´æŽ¥æž„å»ºçš„ APIï¼Œä½†æ˜¯æä¾›äº†ä¸€ä¸ªé—´æŽ¥çš„ã€æ—¢ç†Ÿæ‚‰åˆé™Œç”Ÿçš„ APIï¼š 12345- (void)performSelector:(SEL)aSelectoronThread:(NSThread *)thrwithObject:(id)argwaitUntilDone:(BOOL)waitmodes:(NSArray *)array; è¿™ä¸ªæ–¹æ³•å°†åˆ›å»ºä¸€ä¸ª Source 0 ä»»åŠ¡ï¼Œåˆ†å‘åˆ°æŒ‡å®šçº¿ç¨‹çš„ RunLoop ä¸­ï¼Œåœ¨ç»™å®šçš„ Mode ä¸‹æ‰§è¡Œï¼Œè‹¥æŒ‡å®šçš„ RunLoop å¤„äºŽä¼‘çœ çŠ¶æ€ï¼Œåˆ™å”¤é†’å®ƒå¤„ç†äº‹ä»¶ 1234567891011121314151617181920static int i = 100000;- (void)viewDidLoad &#123;//èŽ·å¾—å½“å‰çš„runloopCFRunLoopRef runLoop = CFRunLoopGetCurrent();CFStringRef runLoopMode = kCFRunLoopDefaultMode;//åˆ›å»ºä¸€ä¸ªobserverç›‘å¬è¿™ä¸ªçŠ¶æ€kCFRunLoopBeforeWaitingCFRunLoopObserverRef observer = CFRunLoopObserverCreateWithHandler(kCFAllocatorDefault, kCFRunLoopBeforeWaiting, true, 0, ^(CFRunLoopObserverRef observer, CFRunLoopActivity _) &#123;if (i == 0) &#123;CFRunLoopRemoveObserver(runLoop, observer, runLoopMode);CFRelease(observer);return ;&#125;i = i - 1;[self performSelector:@selector(downLoad) onThread:[NSThread mainThread] withObject:nil waitUntilDone:NO modes:@[NSDefaultRunLoopMode]];&#125;);CFRunLoopAddObserver(runLoop, observer, runLoopMode);&#125;-(void)downLoad&#123;NSLog(@&quot;%@&quot;,[NSThread currentThread]);&#125;]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[iOSå°æŠ€å·§ç§¯ç´¯]]></title>
      <url>%2F2017%2F03%2F12%2FiOS%E5%B0%8F%E6%8A%80%E5%B7%A7%E7%A7%AF%E7%B4%AF%2F</url>
      <content type="text"><![CDATA[1.ç¦æ­¢ç¬¬ä¸‰æ–¹é”®ç›˜åœ¨è¦å¡«å¯†ç çš„åœ°æ–¹ï¼Œ ä¸ºäº†å®‰å…¨è€ƒè™‘ï¼è¦ä¹ˆç¦ç”¨ç¬¬ä¸‰æ–¹é”®ç›˜ï¼Œè¦ä¹ˆè‡ªå®šä¹‰é”®ç›˜ï¼1234//ç¦æ­¢ç¬¬ä¸‰æ–¹é”®ç›˜çš„ä½¿ç”¨- (BOOL)application:(UIApplication *)application shouldAllowExtensionPointIdentifier:(NSString *)extensionPointIdentifier&#123;return NO;&#125; 2.ç¦æ­¢ç³»ç»Ÿçš„é¢æ¿æ‰‹æœºé»˜è®¤çš„è¾“å…¥æ¡†å³é”®æˆ–è€…é€‰ä¸­æ–‡å­—å³é”®ä¼šå¼¹å‡ºèœå•ï¼Œä½†æ˜¯æœ‰æ—¶å€™æˆ‘ä»¬åœ¨åšå¯¹æ–‡æœ¬ä¸¥æ ¼è¦æ±‚çš„æ—¶å€™ (æ¯”å¦‚è¯´ä¸èƒ½ä½¿æ–‡å­—å•Š)ï¼Œå°±è¦å…³é—­è¿™ä¸ªåŠŸèƒ½ï¼Œ åªéœ€è¦åœ¨è‡ªå®šä¹‰çš„UITextfieldæˆ–UITextviewé‡Œé¢æ·»åŠ ä¸‹é¢è¿™ä¸€å¥è¯ï¼š123-(BOOL)canPerformAction:(SEL)action withSender:(id)sender&#123;return NO;&#125; 3.ç‚¹å‡»éƒ¨åˆ†æ–‡å­—å“åº”æœ‰æ—¶å€™ä½ éœ€è¦åœ¨ä¸€è¡Œæ–‡æœ¬ä¸­ç‚¹å‡»æŸå‡ ä¸ªç‰¹æ®Šçš„æ–‡å­—ï¼Œæ¥å®žçŽ°è·³è½¬ç½‘é¡µæˆ–è€…æ‰“ç”µè¯çš„åŠŸèƒ½ã€‚æ¯”å¦‚ç‚¹å‡»ç”µè¯å·ç ï¼Œæ‹¨æ‰“ç”µè¯ï¼š12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455#import &quot;TCTextView.h&quot;@implementation TCTextView- (instancetype)initWithCoder:(NSCoder *)coder&#123;self = [super initWithCoder:coder];if (self) &#123;&#125;return self;&#125;- (void)setText:(NSString *)text&#123;[super setText:text];//ç›®æ ‡æ–‡å­—æ˜¯ä½ å·²çŸ¥çš„æ–‡å­—ï¼Œæˆ–è€…å–æœåŠ¡å™¨å­—æ®µçŸ¥é“çš„NSRange range = [self.text rangeOfString:@&quot;110&quot;];//text -&gt; attributedStringNSMutableAttributedString *attributedString = [[NSMutableAttributedString alloc]initWithString:text];NSMutableParagraphStyle *paragraphStyle = [[NSMutableParagraphStyle alloc]init];//[paragraphStyle setLineSpacing:10];// è¡Œé—´è·[attributedString addAttribute:NSParagraphStyleAttributeName value:paragraphStyle range:NSMakeRange(0, text.length)];//æ”¹å˜ç”µè¯å·ç çš„èƒŒæ™¯è‰²[attributedString addAttribute:NSForegroundColorAttributeName value:[UIColor redColor] range:range];// ä¸‹åˆ’çº¿[attributedString addAttribute:NSUnderlineStyleAttributeName value:@(NSUnderlineStyleSingle) range:range];[attributedString addAttribute:NSFontAttributeName value:[UIFont fontWithName:@&quot;HelveticaNeue-Light&quot; size:16] range:NSMakeRange(0, text.length)];self.attributedText = attributedString;&#125;- (void)touchesBegan:(NSSet&lt;UITouch *&gt; *)touches withEvent:(UIEvent *)event&#123;NSSet *allTouches = [event allTouches]; //è¿”å›žä¸Žå½“å‰æŽ¥æ”¶è€…æœ‰å…³çš„æ‰€æœ‰çš„è§¦æ‘¸å¯¹è±¡UITouch *touch = [allTouches anyObject]; //è§†å›¾ä¸­çš„æ‰€æœ‰å¯¹è±¡CGPoint point = [touch locationInView:[touch view]];NSRange range = [self.text rangeOfString:@&quot;110&quot;];// self.selectedRange = range;// ä¸èƒ½è®¾ç½®æ˜¯å› ä¸º selectedable[self setSelectedRange:range];//The current selection range of the receiver.NSArray * arr = [self selectionRectsForRange:self.selectedTextRange];//å–æ¶ˆé€‰ä¸­çŠ¶æ€self.selectedRange = NSMakeRange(0, 0);for(UITextSelectionRect * textrect in arr)&#123;if(CGRectContainsPoint(textrect.rect, point))&#123;// è¿™é‡Œå°±æ˜¯å“åº”çš„åœ°æ–¹NSLog(@&quot;æ˜¯æˆ‘&quot;);&#125;&#125;&#125;@end 4ã€èŽ·å–ç½‘ç»œå›¾ç‰‡çš„å°ºå¯¸ 1234567891011121314151617181920212223242526NSArray * urlArr = @[@&quot;http://upload-images.jianshu.io/upload_images/31282-390513513494ede8.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot;,@&quot;http://upload-images.jianshu.io/upload_images/1931381-12109e9d6666bb0e.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot;,@&quot;http://upload-images.jianshu.io/upload_images/3375207-6adc6a22441681ce.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot;,@&quot;http://upload-images.jianshu.io/upload_images/3375207-6adc6a22441681ce.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot;,@&quot;http://upload-images.jianshu.io/upload_images/1336788-2ac84707ce22e970.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1080/q/50&quot;];dispatch_group_t grounp = dispatch_group_create();for(NSString * str in urlArr)&#123;// å°†å½“å‰çš„ä¸‹è½½æ“ä½œæ·»åŠ åˆ°ç»„ä¸­dispatch_group_enter(grounp);// ç¼“å­˜å›¾ç‰‡[[SDWebImageDownloader sharedDownloader] downloadImageWithURL:[NSURL URLWithString:str] options:SDWebImageDownloaderUseNSURLCache progress:^(NSInteger receivedSize, NSInteger expectedSize) &#123;&#125; completed:^(UIImage *image, NSData *data, NSError *error, BOOL finished) &#123;// æŠŠç¼“å­˜åˆ°æœ¬åœ°çš„imgæ·»åŠ åˆ°æ•°æ®ï¼Œ ä¹Ÿå¯ä»¥é€šè¿‡image.sizeå–åˆ°å®½é«˜æ¯”ä¾‹[_arr addObject:image];//å®Œæˆå•å¼ å›¾ç‰‡ä¸‹è½½ç¦»å¼€å½“å‰ç»„dispatch_group_leave(grounp);&#125;];&#125;dispatch_group_notify(grounp, dispatch_get_main_queue(), ^&#123;// æ¥åˆ°è¿™é‡Œæ‰€æœ‰å›¾ç‰‡éƒ½ä¸‹è½½å®Œæˆ// æ›´æ–°UI, å°±å¥½äº†&#125;);]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[è¯»JZTableViewRowActionç†è§£ç¬”è®°]]></title>
      <url>%2F2017%2F03%2F12%2F%E8%AF%BBJZTableViewRowAction%E7%90%86%E8%A7%A3%E7%AC%94%E8%AE%B0%2F</url>
      <content type="text"><![CDATA[è¦ç‚¹ï¼š 1.éœ€è¦èŽ·å¾—ç³»ç»Ÿæä¾›çš„cellä¾§æ»‘åŠŸèƒ½ï¼Œæˆ‘ä»¬éœ€è¦å®žçŽ°:1- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath æˆ–è€…å®žçŽ°ï¼š1- (nullable NSArray&lt;UITableViewRowAction *&gt; *)tableView:(UITableView *)tableView editActionsForRowAtIndexPath:(NSIndexPath *)indexPath å½“ä¸¤è€…éƒ½æ²¡æœ‰å®žçŽ°çš„æ—¶å€™ï¼Œå°±ä¸èƒ½èŽ·å¾—ç³»ç»Ÿæä¾›çš„ä¾§æ»‘åŠŸèƒ½ æ•ˆæžœå›¾ï¼š ä¾§æ»‘åˆ é™¤æ˜¯iOSéžå¸¸å®¹æ˜“å®žçŽ°çš„ä¸€ä¸ªæ•ˆæžœï¼Œåªéœ€è¦ä¸ºä½ çš„UITableViewDataSourceé‡æ–°è¿™ä¸ªæ–¹æ³•ï¼Œç³»ç»Ÿå°±ä¼šè‡ªåŠ¨æ·»åŠ è¿™ç§æ“ä½œï¼š 123//åªè¦å®žçŽ°äº†è¿™ä¸ªæ–¹æ³•ï¼Œå°±èƒ½å¤ŸèŽ·å¾—ç³»ç»Ÿæä¾›çš„ä¾§æ»‘åˆ é™¤åŠŸèƒ½ï¼Œå½“ç‚¹å‡»åˆ é™¤æŒ‰é’®çš„æ—¶å€™ï¼Œå°±ä¼šå›žè°ƒè¿™ä¸ªæ–¹æ³•ï¼Œå¯ä»¥åœ¨è¿™ä¸ªæ–¹æ³•å½“ä¸­å®Œæˆåˆ é™¤cellä»¥åŠåœ¨æ¨¡åž‹å½“ä¸­åˆ é™¤å¯¹åº”è¡Œçš„æ•°æ®å®Œæˆåˆ·æ–°tableView//- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath ä»ŽiOS8å¼€å§‹ï¼Œè‹¹æžœå¼€æ”¾äº†è¿™æ ·ä¸€ä¸ªAPIï¼š1- (nullable NSArray&lt;UITableViewRowAction *&gt; *)tableView:(UITableView *)tableView editActionsForRowAtIndexPath:(NSIndexPath *)indexPath æ–¹æ³•åˆ†æžï¼š è¿™ä¸ªæ–¹æ³•çš„è¿”å›žå€¼ç±»åž‹ä¸ºï¼šnullable NSArray *ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªæ¨¡åž‹æ•°ç»„ï¼Œåªè¦æˆ‘ä»¬å®žçŽ°äº†è¿™ä¸ªæ–¹æ³•ï¼Œå¹¶ä¸”æä¾›äº†è¿™ä¸ªæ¨¡åž‹æ•°ç»„ï¼Œç³»ç»Ÿå°±ä¼šè‡ªåŠ¨çš„æ ¹æ®æ•°ç»„ä¸­æ¨¡åž‹çš„ä¸ªæ•°ä»¥åŠå†…å®¹å®Œæˆå¯¹åº”ä¸ªæ•°çš„ä¾§æ»‘æŒ‰é’®çš„åˆ›å»ºï¼Œä¸éœ€è¦æˆ‘ä»¬æ¥åˆ›å»ºæŒ‰é’®ï¼Œåªè¦æˆ‘ä»¬æä¾›äº†æ¨¡åž‹å°±OKã€‚é€šè¿‡è¿™ä¸ªæ–¹æ³•ï¼Œå°±èƒ½å¤Ÿæä¾›æ›´å¤šçš„æŒ‰é’®ä¸Žç”¨æˆ·äº¤äº’ã€‚æ•ˆæžœå›¾ï¼š æ‰€ä»¥ï¼Œå¯¹äºŽiOS8ä»¥ä¸Šçš„ç³»ç»Ÿæ¥è¯´ï¼ŒèŽ·å¾—è¿™æ ·çš„æ‹¥æœ‰å•ä¸ªæˆ–å¤šä¸ªçš„ä¾§æ»‘æŒ‰é’®çš„ä¾§æ»‘åŠŸèƒ½æ˜¯éžå¸¸å®¹æ˜“çš„ã€‚è¿™ç¯‡æ–‡ç« çš„ä¸»è¦å†…å®¹å°±æ˜¯å¯¹iOS8ä»¥ä¸‹çš„ç³»ç»Ÿæä¾›è¿™æ ·çš„ä¸€ä¸ªä¾§æ»‘åŠŸèƒ½ã€‚ åœ¨æ•°æ®æºå½“ä¸­1234567891011121314151617181920212223242526272829303132//éœ€è¦ä¸»è¦çš„æ˜¯ï¼Œå½“æˆ‘ä»¬éœ€è¦å¤šæŒ‰é’®ä¾§æ»‘åŠŸèƒ½æ—¶ï¼Œå¹¶ä¸”éœ€è¦é€‚é…åˆ°iOS7æˆ–æ›´ä½Žç‰ˆæœ¬ï¼Œé‚£ä¹ˆå°±ä¸€å®šè¦å®žçŽ°è¿™ä¸ªæ–¹æ³•ã€‚//å› ä¸ºï¼š åœ¨iOS8åŠä»¥ä¸Šç‰ˆæœ¬ï¼Œå½“æˆ‘ä»¬å®žçŽ°äº†tableView:editActionsForRowAtIndexPath:ï¼Œ(tableView:commitEditingStyle:forRowAtIndexPath:)å®žçŽ°äº†ä¹Ÿä¸ä¼šè°ƒç”¨ï¼Œæ‰€ä»¥ä¸å®žçŽ°ä¹Ÿæ²¡æœ‰ä»€ä¹ˆå½±å“ã€‚ä½†æ˜¯ï¼ŒiOS7æ²¡æœ‰tableView:editActionsForRowAtIndexPath:,å¦‚æžœä¸å®žçŽ°(tableView:commitEditingStyle:forRowAtIndexPath:),é‚£ä¹ˆå°±ä¸ä¼šæœ‰ä¾§æ»‘çš„åŠŸèƒ½ã€‚æ‰€ä»¥å®žçŽ°äº†è¿™ä¸ªæ–¹æ³•ä¿è¯äº†iOS7ç‰ˆæœ¬ä¸‹å¼€å¯ä¾§æ»‘åŠŸèƒ½- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath &#123;// [self setEditing:NO animated:true];&#125;//è¿™ä¸ªæ–¹æ³•è¿”å›žçš„ç±»åž‹æ˜¯NSStringç±»åž‹ï¼Œè¿”å›žçš„æ˜¯åˆ é™¤æŒ‰é’®çš„æ˜¾ç¤ºæ–‡å­—ï¼Œåœ¨åªæœ‰ä¸€ä¸ªåˆ é™¤æŒ‰é’®çš„æ—¶å€™ï¼Œå¯ä»¥å®žçŽ°è¿™ä¸ªæ–¹æ³•æ¥è‡ªå®šä¹‰åˆ é™¤æŒ‰é’®çš„å†…å®¹æ˜¾ç¤ºã€‚è¿™é‡Œå®žçŽ°çš„å¤šæŒ‰é’®çš„ä¾§æ»‘ï¼Œæ‰€ä»¥ï¼Œä¸éœ€è¦å®žçŽ°è¿™ä¸ªåŠŸèƒ½//-(NSString *)tableView:(UITableView *)tableView titleForDeleteConfirmationButtonForRowAtIndexPath:(NSIndexPath *)indexPath&#123;//return @&quot;abc&quot;;//&#125;//è¿™ä¸ªæ–¹æ³•çš„è¿”å›žå€¼æ˜¯æ¨¡åž‹ï¼Œæä¾›è¿™ä¸ªæ¨¡åž‹æ•°ç»„ï¼Œå°±èƒ½å¤Ÿæ ¹æ®æ¨¡åž‹å†…å®¹å®ŒæˆæŒ‰é’®çš„åˆ›å»ºã€‚è¿™ä¸ªæ–¹æ³•å‡ºçŽ°åœ¨iOS8ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬è®©æ›´ä½Žç‰ˆæœ¬ä¹Ÿè°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼Œå®žçŽ°äº†ç‰ˆæœ¬çš„é€‚é…çš„åŒæ—¶ï¼Œä¹Ÿç®€åŒ–äº†ç‰ˆæœ¬çš„é€‚é…ï¼Œè¿™æ ·åœ¨ä½¿ç”¨çš„æ—¶å€™ï¼Œå°±åƒæ˜¯å®ƒæœ¬èº«å°±ä¸å­˜åœ¨é€‚é…é—®é¢˜ä¸€æ ·ã€‚å…¶å®žè¿™é‡Œæˆ‘ä»¬å°†é€‚é…é—®é¢˜åœ¨å…¶ä»–æ–‡ä»¶å½“ä¸­è¿›è¡Œäº†å®žçŽ°//éœ€è¦æ³¨æ„çš„æ˜¯è¿™ä¸ªæ–¹æ³•æ˜¯iOS8æ‰æœ‰çš„æ–¹æ³•ï¼Œè€Œä¸”UITableViewRowActionè¿™ä¸ªç±»ä¹Ÿæ˜¯iOS8æ‰æœ‰çš„ã€‚çŽ°åœ¨ï¼Œæˆ‘ä»¬åœ¨åƒiOS7è¿™æ ·çš„æ›´ä½Žçš„ç³»ç»Ÿä¸Šä½¿ç”¨è¿™ä¸ªUITableViewRowActionï¼Œé‚£ä¹ˆï¼Œå®ƒå°±ä¸€å®šæ˜¯æˆ‘ä»¬è¿ç”¨runtimeæ¥åŠ¨æ€æ·»åŠ çš„ä¸€ä¸ªç±»ã€‚å½“æˆ‘ä»¬ä½¿ç”¨objc_getClass(&quot;UITableViewRowAction&quot;)èƒ½å¤ŸèŽ·å¾—è¿™ä¸ªç±»çš„æ—¶å€™ï¼Œå°±è¡¨ç¤ºå®ƒæœ‰ï¼Œé‚£å°±ä¸éœ€è¦åšä»»ä½•äº‹æƒ…ï¼Œå¦‚æžœæ²¡æœ‰èŽ·å–åˆ°è¿™ä¸ªç±»ï¼Œå°±éœ€è¦æ¥åŠ¨æ€åˆ›å»ºè¿™ä¸ªç±»ã€‚ã€‚ã€‚ã€‚ã€‚- (nullable NSArray&lt;UITableViewRowAction *&gt; *)tableView:(UITableView *)tableView editActionsForRowAtIndexPath:(NSIndexPath *)indexPath &#123;void(^rowActionHandler)(UITableViewRowAction *, NSIndexPath *) = ^(UITableViewRowAction * _Nonnull action, NSIndexPath * _Nonnull indexPath) &#123;NSLog(@&quot;%@&quot;, action);[self setEditing:false animated:true];&#125;;//åˆ›å»ºDisclosureç±»åž‹çš„button//é€šè¿‡è¿™ä¸ªæŒ‰é’®èƒ½å¤ŸèŽ·å¾—æŒ‰é’®å½“ä¸­çš„å›¾ç‰‡UIButton *buttonForImage = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];//è¿™é‡Œè°ƒç”¨çš„æ–¹æ³•æ˜¯UITableViewRowActionåˆ†ç±»å½“ä¸­æä¾›çš„æ–¹æ³•ï¼Œå¢žåŠ äº†ä¸€ä¸ªä¼ å…¥å›¾ç‰‡çš„åŠŸèƒ½UITableViewRowAction *action1 = [UITableViewRowAction rowActionWithStyle:UITableViewRowActionStyleDefault image:[buttonForImage imageForState:UIControlStateNormal] handler:rowActionHandler];UITableViewRowAction *action2 = [UITableViewRowAction rowActionWithStyle:UITableViewRowActionStyleNormal title:@&quot;disenable&quot; handler:rowActionHandler];//å¹¶ä¸”æŠŠç¬¬äºŒä¸ªæŒ‰é’®çš„enabledè®¾ç½®ä¸ºfalseaction2.enabled = false;UITableViewRowAction *action3 = [UITableViewRowAction rowActionWithStyle:UITableViewRowActionStyleDefault title:@&quot;emjoyðŸ‘&quot; handler:rowActionHandler];return @[action1,action2,action3];&#125; çŽ°åœ¨æ¥çœ‹çœ‹UITableViewRowActionåˆ†ç±»ï¼š123456789101112131415161718192021222324252627282930313233//è¿™ä¸ªç±»æ˜¯ä¸€ä¸ªæ¨¡åž‹ç±»ï¼Œå°±æ˜¯æ¥æä¾›æ•°æ®çš„ï¼Œæ‰€ä»¥æ— è®ºæ˜¯æä¾›çš„æ–¹æ³•è¿˜æ˜¯å±žæ€§ï¼Œéƒ½åªæ˜¯ä¸ºäº†æ•°æ®çš„å½•å…¥å’Œè¾“å‡ºã€‚#import &quot;UITableViewRowAction+JZExtension.h&quot;#import &lt;objc/runtime.h&gt;@implementation UITableViewRowAction (JZExtension)//è¿™é‡Œæ–°æ·»åŠ äº†ä¸€ä¸ªåˆ›å»ºæ–¹æ³• è¿™ä¸ªæ–¹æ³•å¸®åŠ©æˆ‘ä»¬åœ¨åŽŸæ¥çš„åªèƒ½å¤Ÿåœ¨æŒ‰é’®ä¸Šæ˜¾ç¤ºæ–‡å­—çš„åŸºç¡€ä¸Šï¼Œè¿˜èƒ½å¤Ÿæ˜¾ç¤ºå›¾ç‰‡ + (instancetype)rowActionWithStyle:(UITableViewRowActionStyle)style image:(UIImage *)image handler:(void (^)(UITableViewRowAction * _Nullable, NSIndexPath * _Nullable))handler &#123;//é¦–å…ˆè°ƒç”¨è¿™ä¸ªåŸºæœ¬æž„é€ æ–¹æ³•UITableViewRowAction *rowAction = [self rowActionWithStyle:style title:@&quot;holder&quot; handler:handler];//å› ä¸ºè¿™ä¸ªä¸€ä¸ªæ¨¡åž‹å¯¹è±¡ï¼Œæ‰€ä»¥è¿™é‡Œåªéœ€è¦å°†è¿™ä¸ªå›¾ç‰‡å­˜å‚¨èµ·æ¥ï¼Œå› ä¸ºåœ¨åˆ†ç±»å½“ä¸­æ— æ³•æä¾›å±žæ€§ï¼Œæ‰€ä»¥é‡‡ç”¨è¿è¡Œæ—¶å…³è”å¯¹è±¡çš„æ–¹å¼ä¿ç•™å›¾ç‰‡rowAction.image = image;return rowAction;&#125;- (void)setImage:(UIImage *)image &#123;objc_setAssociatedObject(self, @selector(image), image, OBJC_ASSOCIATION_RETAIN_NONATOMIC);&#125;- (void)setEnabled:(BOOL)enabled &#123;objc_setAssociatedObject(self, @selector(enabled), @(enabled), OBJC_ASSOCIATION_ASSIGN);&#125;- (UIImage *)image &#123;return objc_getAssociatedObject(self, _cmd);&#125;- (BOOL)enabled &#123;id enabled = objc_getAssociatedObject(self, _cmd);//å¦‚æžœæ²¡æœ‰è®¾ç½®enabledçš„å€¼ï¼Œå°±æä¾›ä¸€ä¸ªé»˜è®¤å€¼ï¼štruereturn enabled ? [enabled boolValue] : true;&#125;@end çŽ°åœ¨æ¥çœ‹çœ‹UITableViewRowAction.m æ–‡ä»¶ï¼šè¿™ä¸ªæ–‡ä»¶å°±æ˜¯ç»™iOS8ä»¥ä¸‹çš„ç³»ç»Ÿæ¥ä½¿ç”¨çš„ã€‚å› ä¸ºiOS8ä»¥ä¸‹çš„ç³»ç»Ÿæ²¡æœ‰è¿™æ ·çš„ä¸€ä¸ªç±»ï¼ŒäºŽæ˜¯æˆ‘ä»¬åŠ¨æ€æ¥åˆ›å»ºè¿™ä¸ªç±»ã€‚å¦‚ä½•æ›´å®¹æ˜“çš„æ¥åˆ›å»ºä¸€ä¸ªè·Ÿç³»ç»Ÿæä¾›çš„UITableViewRowActionå·®ä¸å¤šçš„ç±»å‘¢ï¼Ÿæ³¨å†Œä¸€ä¸ªåå­—ç›¸åŒçš„ç±»ï¼Œè®©è¿™ä¸ªç±»ç»§æ‰¿æˆ‘ä»¬çš„JZTableViewRowActionï¼ŒJZTableViewRowActionç±»å½“ä¸­çš„å±žæ€§æ–¹æ³•éƒ½æ˜¯ç›´æŽ¥copyäºŽç³»ç»Ÿçš„UITableViewRowActionç±»ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103#import &lt;Foundation/Foundation.h&gt;#import &lt;UIKit/UITableView.h&gt;#import &lt;objc/runtime.h&gt;@interface JZTableViewRowAction : NSObject&lt;NSCopying&gt;&#123;UITableViewRowActionStyle _style;&#125;@property (nonatomic, readonly) UITableViewRowActionStyle style;@property (nonatomic, copy, nullable) NSString *title;@property (nonatomic, copy, nullable) UIColor *backgroundColor; // default background color is dependent on style@property (nonatomic, copy, nullable) UIVisualEffect* backgroundEffect;@property (nonatomic, copy, nullable) void (^handler)(UITableViewRowAction *, NSIndexPath *);@property (nonatomic, strong, nullable) UIImage *image;@property (nonatomic, strong, nonnull) NSIndexPath *indexPath;@property (nonatomic, assign) BOOL enabled;+ (instancetype)rowActionWithStyle:(UITableViewRowActionStyle)style title:(nullable NSString *)title handler:(void (^)(UITableViewRowAction *action, NSIndexPath *indexPath))handler;+ (nonnull instancetype)rowActionWithStyle:(UITableViewRowActionStyle)style image:(nullable UIImage *)image handler:(nullable void (^)(UITableViewRowAction * _Nullable action, NSIndexPath * _Nullable indexPath))handler;@end@implementation JZTableViewRowAction+ (instancetype)rowActionWithStyle:(UITableViewRowActionStyle)style title:(NSString *)title handler:(void (^)(UITableViewRowAction *, NSIndexPath *))handler &#123;JZTableViewRowAction *rowAction = [[JZTableViewRowAction alloc] init];rowAction.title = title;rowAction.handler = handler;rowAction-&gt;_style = style;rowAction.enabled = true;return rowAction;&#125;+ (instancetype)rowActionWithStyle:(UITableViewRowActionStyle)style image:(UIImage *)image handler:(void (^)(UITableViewRowAction * _Nullable, NSIndexPath * _Nullable))handler &#123;JZTableViewRowAction *rowAction = [self rowActionWithStyle:style title:@&quot;holder&quot; handler:handler];rowAction.image = image;return rowAction;&#125;- (id)copyWithZone:(NSZone *)zone &#123;return [self copy];&#125;//äº‹ä»¶è§¦å‘çš„æ—¶å€™- (void)actionTriggered:(id)sender &#123;!self.handler ?: self.handler((__kindof UITableViewRowAction *)self, self.indexPath);&#125;@end/*** åŠ¨æ€åˆ›å»ºä¸€ä¸ªç±»UITableViewRowAction*/__asm(&quot;.section __DATA,__objc_classrefs,regular,no_dead_strip\n&quot;#if TARGET_RT_64_BIT&quot;.align 3\n&quot;&quot;L_OBJC_CLASS_UITableViewRowAction:\n&quot;&quot;.quad _OBJC_CLASS_$_UITableViewRowAction\n&quot;#else&quot;.align 2\n&quot;&quot;_OBJC_CLASS_UITableViewRowAction:\n&quot;&quot;.long _OBJC_CLASS_$_UITableViewRowAction\n&quot;#endif&quot;.weak_reference _OBJC_CLASS_$_UITableViewRowAction\n&quot;);__attribute__((constructor)) static void JZTableViewRowActionPatchEntry(void) &#123;static dispatch_once_t onceToken;dispatch_once(&amp;onceToken, ^&#123;@autoreleasepool &#123;if (objc_getClass(&quot;UITableViewRowAction&quot;)) &#123;return;&#125;Class *tableViewRowActionClassLocation = NULL;#if TARGET_CPU_ARM__asm(&quot;movw %0, :lower16:(_OBJC_CLASS_UITableViewRowAction-(LPC0+4))\n&quot;&quot;movt %0, :upper16:(_OBJC_CLASS_UITableViewRowAction-(LPC0+4))\n&quot;&quot;LPC0: add %0, pc&quot; : &quot;=r&quot;(tableViewRowActionClassLocation));#elif TARGET_CPU_ARM64__asm(&quot;adrp %0, L_OBJC_CLASS_UITableViewRowAction@PAGE\n&quot;&quot;add %0, %0, L_OBJC_CLASS_UITableViewRowAction@PAGEOFF&quot; : &quot;=r&quot;(tableViewRowActionClassLocation));#elif TARGET_CPU_X86_64__asm(&quot;leaq L_OBJC_CLASS_UITableViewRowAction(%%rip), %0&quot; : &quot;=r&quot;(tableViewRowActionClassLocation));#elif TARGET_CPU_X86void *pc = NULL;__asm(&quot;calll L0\n&quot;&quot;L0: popl %0\n&quot;&quot;leal _OBJC_CLASS_UITableViewRowAction-L0(%0), %1&quot; : &quot;=r&quot;(pc), &quot;=r&quot;(tableViewRowActionClassLocation));#else#error Unsupported CPU#endifif (tableViewRowActionClassLocation &amp;&amp; !*tableViewRowActionClassLocation) &#123;Class class = objc_allocateClassPair(JZTableViewRowAction.class, &quot;UITableViewRowAction&quot;, 0);if (class) &#123;objc_registerClassPair(class);*tableViewRowActionClassLocation = class;&#125;&#125;&#125;&#125;);&#125; åœ¨æ¥çœ‹çœ‹UITableViewCell+JZExtension.m123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181#import &lt;UIKit/UIKit.h&gt;#import &lt;objc/runtime.h&gt;#import &quot;UITableViewRowAction+JZExtension.h&quot;@implementation UITableViewCell (JZExtension)+ (void)load &#123;[super load];static dispatch_once_t onceToken;dispatch_once(&amp;onceToken, ^&#123;//äº¤æ¢äº†willTransitionToStateï¼šå’Œ __willTransitionToStateçš„æ–¹æ³•å®žçŽ°//willTransitionToState:å½“ç”¨æˆ·åœ¨æŸä¸€è¡Œåˆšå¼€å§‹è¿›è¡Œä¾§æ»‘å¹¶ä¸”ä¾§æ»‘çš„Buttonè¿˜æ²¡æœ‰å±•çŽ°å‡ºæ¥æ—¶è°ƒç”¨//ä¸Žä¹‹å¯¹åº”çš„è¿˜æœ‰ä¸€ä¸ªæ–¹æ³•ï¼š- (void)didTransitionToState:(UITableViewCellStateMask)stateã€‚ è¿™ä¸ªæ–¹æ³•è°ƒç”¨çš„æ—¶å€™ï¼ŒæŒ‰é’®å°±å·²ç»å±•ç¤ºç»™ç”¨æˆ·äº†ã€‚è€Œè°ƒç”¨willTransitionToStateçš„æ—¶å€™ï¼Œå› ä¸ºcellçš„ä¾§æ»‘viewæ˜¯æ‡’åŠ è½½ï¼Œè¿˜æ²¡æœ‰åˆ›å»ºå‡ºæ¥ã€‚Method willTransitionToState = class_getInstanceMethod(self, @selector(willTransitionToState:));Method __willTransitionToState = class_getInstanceMethod(self, @selector(__willTransitionToState:));method_exchangeImplementations(willTransitionToState, __willTransitionToState);Method titleForDeleteConfirmationButton = class_getInstanceMethod([UITableView class], NSSelectorFromString(@&quot;_titleForDeleteConfirmationButtonForRowAtIndexPath:&quot;));Method _titleForDeleteConfirmationButton = class_getInstanceMethod([UITableView class], NSSelectorFromString(@&quot;titleForDeleteConfirmationButtonForRowAtIndexPath:&quot;));method_exchangeImplementations(titleForDeleteConfirmationButton, _titleForDeleteConfirmationButton);&#125;);&#125;/*** å¼€å§‹è¿›è¡Œä¾§æ»‘ï¼Œå¹¶ä¸”buttonè¿˜æ²¡æœ‰å‡ºçŽ°çš„æ—¶å€™* è¿™ä¸ªæ–¹æ³•è°ƒç”¨çš„æ—¶å€™ï¼ŒæŒ‰é’®è¿˜æ²¡æœ‰åˆ›å»º** @param state &lt;#state description#&gt;*///åœ¨å‘ç”Ÿä¾§æ»‘çš„æ—¶å€™ï¼Œè¿™ä¸ªæ–¹æ³•å…ˆè°ƒç”¨ï¼Œç„¶åŽå†è°ƒç”¨èŽ·å–æ¨¡åž‹çš„æ–¹æ³•//å½“ç”¨æˆ·åœ¨æŸä¸€è¡Œåˆšå¼€å§‹è¿›è¡Œä¾§æ»‘å¹¶ä¸”ä¾§æ»‘çš„Buttonè¿˜æ²¡æœ‰å±•çŽ°å‡ºæ¥æ—¶ï¼Œstateçš„å€¼å°±ä¸º UITableViewCellStateShowingDeleteConfirmationMask//è¿™ä¸ªæ–¹æ³•æ— è®ºæ˜¯å®žçŽ°äº†tableView:editActionsForRowAtIndexPath:æ–¹æ³•ï¼Œè¿˜æ˜¯å®žçŽ°äº†tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPathï¼Œéƒ½ä¼šè¢«è°ƒç”¨ï¼Œåªæœ‰åœ¨ä¸¤ä¸ªæ–¹æ³•éƒ½æ²¡æœ‰å®žçŽ°çš„æƒ…å†µä¸‹ï¼Œæ‰ä¸ä¼šè¢«è°ƒç”¨- (void)__willTransitionToState:(UITableViewCellStateMask)state &#123;//é¦–å…ˆè®©ç³»ç»Ÿå®Œæˆè‡ªå·±çš„äº‹æƒ…[self __willTransitionToState:state];if (state == UITableViewCellStateShowingDeleteConfirmationMask) &#123;//åœ¨cellå½“ä¸­ï¼Œé€šè¿‡kvcçš„æ–¹æ³•æ¥èŽ·å¾—tableViewUITableView *tableView = [self valueForKey:@&quot;_tableView&quot;];// //ä¸ºä»€ä¹ˆè¦åšåˆ¤æ–­ï¼Ÿï¼š å› ä¸ºå•ç‹¬çš„åˆ é™¤æŒ‰é’®æ˜¯ä¹Ÿä¼šè¿›å…¥åˆ°è¿™ä¸ªæ–¹æ³•çš„ï¼Œè€Œå¯¹äºŽå•ç‹¬çš„åˆ é™¤æŒ‰é’®æˆ‘ä»¬ä¸éœ€è¦å†åšé¢å¤–çš„æ“ä½œï¼Œè¦æŽ’é™¤è¿™ç§æƒ…å†µã€‚if (![tableView.delegate respondsToSelector:@selector(tableView:editActionsForRowAtIndexPath:)]) &#123;return;&#125;//ä»¥ä¸‹ä»£ç é’ˆå¯¹iOS7çš„// dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(0.001 * NSEC_PER_SEC)), dispatch_get_main_queue(), ^&#123;//é€šè¿‡kvcèŽ·å–åˆ°åˆ›å»ºçš„_swipeToDeleteConfirmationViewï¼Œè¿™ä¸ªæ˜¯æŒ‰é’®çš„å®¹å™¨view//é€šè¿‡æ–­ç‚¹è°ƒè¯•ï¼Œå¯ä»¥å‘çŽ°ï¼Œè¿™ä¸ªæ–¹æ³•å±žäºŽæ‡’åŠ è½½ï¼Œåœ¨è°ƒç”¨willTransitionToStateï¼š çš„æ–¹æ³•çš„æ—¶å€™è¿˜æ²¡æœ‰åˆ›å»ºã€‚è¿™é‡Œé‡‡ç”¨äº†å»¶è¿Ÿæ‰§è¡Œä»£ç å—çš„æ–¹å¼ï¼Œæ¥èŽ·å–è¿™ä¸ªcontainerViewUIView *swipeToDeleteConfirmationView = [self valueForKey:@&quot;_swipeToDeleteConfirmationView&quot;];//å½“ç³»ç»Ÿç‰ˆæœ¬å¤§äºŽç­‰äºŽ8.0çš„æ—¶å€™if ([[[UIDevice currentDevice] systemVersion] compare:@&quot;8.0&quot; options:NSNumericSearch] != NSOrderedAscending) &#123;//èŽ·å–å®¹å™¨viewå½“ä¸­æ‰€æœ‰çš„subViewsfor (UIButton *deleteButton in swipeToDeleteConfirmationView.subviews) &#123;//ç”¨kvcï¼ŒèŽ·å–åˆ°æŒ‰é’®å½“ä¸­UITableViewRowActionæ¨¡åž‹UITableViewRowAction *rowAction = [deleteButton valueForKey:@&quot;_action&quot;];if (rowAction.backgroundColor) &#123;deleteButton.backgroundColor = rowAction.backgroundColor;&#125;//deleteButton.enabled = rowAction.enabled;//if (rowAction.image) &#123;NSTextAttachment *imageAtt = [[NSTextAttachment alloc] init];imageAtt.image = rowAction.image;//è®¾ç½®å¯Œæ–‡æœ¬title[deleteButton setAttributedTitle:[NSAttributedString attributedStringWithAttachment:imageAtt] forState:UIControlStateNormal];&#125;&#125;return;&#125;//systemVersion &lt; 8.0//åœ¨cellå½“ä¸­èŽ·å¾—tableView è°ƒç”¨indexPathForCellæ¥èŽ·å–åˆ°NSIndexPathNSIndexPath *indexPath = [tableView indexPathForCell:self];//æ‰‹åŠ¨æ¥è°ƒç”¨è¿™ä¸ªæ–¹æ³•NSArray *rowActions = [tableView.delegate tableView:tableView editActionsForRowAtIndexPath:indexPath];//åˆ©ç”¨å…³è”å¯¹è±¡è¿›è¡Œå­˜å‚¨self.rowActions = rowActions;//èŽ·å–åˆ°ç¬¬ä¸€ä¸ªå­æŽ§ä»¶UIButton *deleteConfirmButton = swipeToDeleteConfirmationView.subviews.firstObject;//èƒŒæ™¯é¢œè‰²ç­‰äºŽæ–‡å­—é¢œè‰²deleteConfirmButton.titleLabel.textColor = deleteConfirmButton.backgroundColor;//CGFloat buttonWidth = deleteConfirmButton.bounds.size.width / rowActions.count;//CGFloat buttonHeight = deleteConfirmButton.bounds.size.height;for (NSInteger index = 0; index &lt; rowActions.count; index++) &#123;UITableViewRowAction *rowAction = rowActions[index];[rowAction setValue:indexPath forKey:@&quot;indexPath&quot;];//åˆ›å»ºæŒ‰é’®UIButton *rowActionButton = [UIButton buttonWithType:UIButtonTypeCustom];//if (rowAction.backgroundColor) &#123;rowActionButton.backgroundColor = rowAction.backgroundColor;&#125; else &#123;//style==UITableViewRowActionStyleDestructive?//YES: æŒ‰é’®çš„èƒŒæ™¯é¢œè‰²ç­‰äºŽdeleteConfirmButtonæŒ‰é’®çš„èƒŒæ™¯é¢œè‰²//NO:rowActionButton.backgroundColor = rowAction.style == UITableViewRowActionStyleDestructive ? deleteConfirmButton.backgroundColor : [UIColor colorWithRed:187.0/255.0 green:187.0/255.0 blue:193.0/255.0 alpha:1.0];&#125;//if (rowAction.enabled) &#123;//è°ƒç”¨æ¨¡åž‹ï¼Œå½“ä¸­çš„æ–¹æ³•[rowActionButton addTarget:rowAction action:NSSelectorFromString(@&quot;actionTriggered:&quot;) forControlEvents:UIControlEventTouchUpInside];&#125;rowActionButton.frame = CGRectMake((rowActions.count - 1 - index) * buttonWidth, 0, buttonWidth, buttonHeight);//rowAction.image ? [rowActionButton setImage:rowAction.image forState:UIControlStateNormal]: [rowActionButton setTitle:rowAction.title forState:UIControlStateNormal];//å°†å­æŽ§ä»¶æ·»åŠ åˆ°deleteConfirmButtonä¸Š[deleteConfirmButton addSubview:rowActionButton];&#125;// &#125;);&#125;&#125;#pragma mark -set and get/*** æ–¹æ³•å½“ä¸­çš„keyç”¨çš„SELä½œä¸ºkeyï¼Œå› ä¸ºkeyéœ€è¦æ˜¯å”¯ä¸€çš„ï¼Œæ‰€ä»¥å‘¢ï¼Œå› ä¸ºsetRowActionsä½¿ç”¨çš„æ˜¯_cmd ,é‚£ä¹ˆsetRowActionså°±ä¸èƒ½ä½¿ç”¨cmdäº†ï¼Œå¦åˆ™å°±ä¸å”¯ä¸€äº†ï¼Œå°±éœ€è¦é€šè¿‡@selector()æ¥èŽ·å–setRowActionsçš„_cmd* åˆ†ç±»å½“ä¸­å†…éƒ¨ä½¿ç”¨çš„å±žæ€§ï¼ˆå…³è”å¯¹è±¡ï¼‰* UITableViewRowAction åœ¨iOS8çš„æ—¶å€™æ‰æœ‰çš„* @param rowActions &lt;#rowActions description#&gt; &amp;key*/- (void)setRowActions:(NSArray *)rowActions &#123;objc_setAssociatedObject(self, @selector(rowActions), rowActions, OBJC_ASSOCIATION_RETAIN_NONATOMIC);&#125;- (NSArray *)rowActions &#123;return objc_getAssociatedObject(self, _cmd);&#125;@end@implementation UITableView (JZExtension)//è¿™ä¸ªæ–¹æ³•åªä¼šåœ¨iOSä»¥ä¸Šï¼Œå¹¶ä¸”æ²¡æœ‰å®žçŽ°tableView:editActionsForRowAtIndexPath:çš„æ—¶å€™æ‰ä¼šè°ƒç”¨//è€Œå¯¹äºŽiOS7åŠå…¶ä»¥ä¸‹ä¼šè¢«è°ƒç”¨/*** è¿™ä¸ªæ–¹æ³•çš„ç›®çš„æ˜¯è®¾ä¹ˆï¼ŸèŽ·å–æ˜¾ç¤ºçš„å­—ç¬¦ä¸²ï¼Œé€šè¿‡å­—ç¬¦ä¸²æ¥è®¡ç®—æŒ‰é’®çš„å®½åº¦ï¼Œæ‰€ä»¥ï¼Œåªè¦è¿”å›žä¸€ä¸ªæ°å½“çš„å­—ç¬¦ä¸²ï¼Œå°±èƒ½å¤Ÿç”±ç³»ç»Ÿæä¾›ç»™æˆ‘ä»¬ä¸€ä¸ªæ°å½“å®½åº¦çš„æŒ‰é’®ã€‚ç„¶åŽåœ¨è¿™ä¸ªæŒ‰é’®ä¸Šæ·»åŠ å­æŽ§ä»¶** @param indexPath &lt;#indexPath description#&gt;** @return &lt;#return value description#&gt;*/- (id)titleForDeleteConfirmationButtonForRowAtIndexPath:(NSIndexPath *)indexPath &#123;// å¦‚æžœä»£ç†æ²¡æœ‰å®žçŽ°tableView:editActionsForRowAtIndexPath:è¿™ä¸ªæ–¹æ³•ï¼Œå°±è¡¨ç¤ºæ²¡æœ‰å¤šæŒ‰é’®ä¾§æ»‘åŠŸèƒ½ï¼Œé‚£å°±åªéœ€è¦æ‰§è¡Œç³»ç»ŸåŽŸæœ‰çš„æ–¹æ³•å®žçŽ°ï¼Œç„¶åŽç›´æŽ¥è¿”å›žif (![self.delegate respondsToSelector:@selector(tableView:editActionsForRowAtIndexPath:)]) &#123;return [self titleForDeleteConfirmationButtonForRowAtIndexPath:indexPath];&#125;//æ‰€ä»¥è¿™é‡Œè¿™ä¸ªæ–¹æ³•æ˜¯é’ˆå¯¹iOS7ä»¥ä¸‹çš„å¹¶ä¸”å®žçŽ°äº†tableView:editActionsForRowAtIndexPath:// System version above iOS7 will not go on.//èŽ·å–åˆ°rowActionsNSArray *rowActions = [self.delegate tableView:self editActionsForRowAtIndexPath:indexPath];NSMutableString *placeholder = [NSMutableString string];//NSString *longestString = @&quot; &quot;; //A placeholder string for the default width.&#123;CGFloat fontSize = 12;for (UITableViewRowAction *action in rowActions) &#123;//CGFloat actionTitleWidth = [action.title sizeWithFont:[UIFont systemFontOfSize:fontSize]].width;//CGFloat currentLongestStringWidth = [longestString sizeWithFont:[UIFont systemFontOfSize:fontSize]].width;//å¦‚æžœactionä¸­çš„æ ‡é¢˜å®½åº¦å¤§äºŽ@â€œ â€//é»˜è®¤å€¼ @â€œ â€ï¼› å®½åº¦&gt;= @&quot; &quot;if (actionTitleWidth &gt; currentLongestStringWidth) &#123;longestString = action.title;&#125;&#125;&#125;for (int index = 0; index &lt; rowActions.count; index++) &#123;[placeholder appendString:longestString];&#125;return placeholder;&#125;@end https://github.com/JazysYu/JZTableViewRowActionåŽŸæ–‡åœ°å€]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[IMPæŒ‡é’ˆ]]></title>
      <url>%2F2017%2F03%2F11%2FIMP%E6%8C%87%E9%92%88%2F</url>
      <content type="text"><![CDATA[Method Swizzling åˆ©ç”¨è¿è¡Œæ—¶ï¼Œåœ¨ç¨‹åºè¿è¡ŒæœŸé—´ï¼Œå¯ä»¥åŠ¨æ€çš„ç»™ä¸¤ä¸ªæ–¹æ³•äº’æ¢å®žçŽ°ï¼Œå¯ä»¥åˆ©ç”¨è¿™ä¸ªå‡½æ•°å®žçŽ°ï¼š1void method_exchangeImplementations(Method m1, Method m2) ä½¿ç”¨åœºæ™¯ï¼š å½“æˆ‘ä»¬ç†è§£ä¸€ä¸ªæ–°çš„é¡¹ç›®çš„æ—¶å€™ï¼Œé€šå¸¸é€šè¿‡åœ¨ç±»åˆ›å»ºçš„æ—¶å€™ï¼ŒæŠŠè‡ªå·±çš„åå­—æ‰“å°å‡ºæ¥ï¼Œä»Žè€Œäº†è§£ç¨‹åºçš„è°ƒç”¨é¡ºåºã€‚é‚£ä¹ˆï¼Œå°±éœ€è¦æˆ‘ä»¬åœ¨æ¯ä¸ªç±»çš„viewDidLoadæ–¹æ³•å½“ä¸­ï¼Œæ·»åŠ ä¸€ä¸ªlogæ–¹æ³•ï¼Ÿæ˜¾ç„¶è¿™æ ·åšæ˜¯éžå¸¸éº»çƒ¦çš„ã€‚ä¹Ÿè®¸ä¼šæƒ³åˆ°ï¼Œè®©æ‰€æœ‰çš„ç±»éƒ½ç»§æ‰¿ä¸€ä¸ªåŸºç¡€ç±»ï¼Œåœ¨åŸºç¡€ç±»å½“ä¸­æ·»åŠ logæ–¹æ³•ï¼Œè¿™æ ·å°±OKå•¦ã€‚å¦‚æ­¤åšæ³•å°±éœ€è¦æˆ‘ä»¬æ›´æ”¹å¾ˆå¤šç±»çš„ç»§æ‰¿å…³ç³»ï¼Œæ‰€ä»¥ä¹Ÿä¸æ˜¯å®Œç¾Žçš„è§£å†³åŠžæ³•ã€‚ è¿™ä¸ªæ—¶å€™ï¼Œäº¤æ¢æ–¹æ³•å®žçŽ°çš„æ–¹æ³•å°±é—ªäº®ç™»åœºäº†ã€‚åªéœ€è¦ç»™UIViewControlleræ·»åŠ ä¸€ä¸ªåˆ†ç±»ï¼Œæ·»åŠ å‡ è¡Œä»£ç ã€‚1234567891011121314#import &quot;UIViewController+Log.h&quot;#import &lt;objc/runtime.h&gt;@implementation UIViewController (Log)+(void)load&#123;Method m1 = class_getInstanceMethod([self class], @selector(viewDidLoad));Method m2 = class_getInstanceMethod([self class], @selector(viewDidLoaded));//äº¤æ¢viewDidLoadå’ŒviewDidLoadedæ–¹æ³•çš„å®žçŽ°ï¼Œè¿™æ ·å½“è°ƒç”¨viewDidLoadæ–¹æ³•çš„æ—¶å€™ï¼Œå°±ç›¸å½“äºŽè¢«æ‹¦æˆªäº†ä¸€æ ·ï¼Œè°ƒç”¨åˆ°viewDidLoadedæ–¹æ³•ï¼Œåœ¨viewDidLoadedå®žçŽ°ä¸­ï¼Œå¯¹è‡ªå·±çš„è°ƒç”¨ï¼Œè¢«è½¬ç§»åˆ°å¯¹viewDidLoadæ–¹æ³•çš„è°ƒç”¨ï¼Œç„¶åŽå†æ·»åŠ Logæ–¹æ³•method_exchangeImplementations(m1, m2);&#125;-(void)viewDidLoaded&#123;[self viewDidLoaded];NSLog(@&quot;%@&quot;,[self class]);&#125;@end IMPæŒ‡é’ˆIMPï¼š Implementationçš„ç¼©å†™ã€‚ IMPæŒ‡é’ˆï¼šæŒ‡å‘æ–¹æ³•å®žçŽ°çš„æŒ‡é’ˆã€‚ å¦‚ä½•è°ƒç”¨IMPï¼š1IMP(target,SEL,params...); //ä¸Žæ™®é€šCå‡½æ•°çš„è°ƒç”¨æ–¹å¼æ˜¯ç›¸åŒçš„ ä¸è¿‡å¦‚æžœä½ çš„é¡¹ç›®æ²¡æœ‰åšå…¶ä»–é…ç½®çš„è¯è¿™æ ·è°ƒç”¨ç¼–è¯‘å™¨æ˜¯ä¸ä¼šé€šè¿‡çš„ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹å…ˆå®ƒçš„å®šä¹‰ï¼š1234567if !OBJC_OLD_DISPATCH_PROTOTYPES//IMP ï¼š æ— å‚æ— è¿”å›žå€¼typedef void (*IMP)(void /* id, SEL, ... */ ); else//æœ‰å‚æœ‰è¿”å›žå€¼typedef id (*IMP)(id, SEL, ...); endif å¯¹IMPæŒ‡é’ˆçš„ä½¿ç”¨ï¼Œéœ€è¦æ›´æ”¹é…ç½®æ–‡ä»¶ï¼šé™¤äº†é€šè¿‡æ›´æ”¹é…ç½®æ–‡ä»¶çš„æ–¹å¼å¤–ï¼Œè¿˜æœ‰ä¸€ç§æ–¹å¼å°±æ˜¯è‡ªå·±æ¥å®šä¹‰ä¸€ä¸ªå’Œæœ‰å‚çš„IMPæŒ‡é’ˆç›¸åŒç±»åž‹çš„æŒ‡é’ˆç±»åž‹123456789101112131415161718192021#import &quot;UIViewController+Log.h&quot;#import &lt;objc/runtime.h&gt;typedef id (*_IMP) (id, SEL, ...);@implementation UIViewController (Log)+(void)load&#123;static dispatch_once_t onceToken;dispatch_once(&amp;onceToken, ^&#123;//èŽ·å¾—åŽŸå§‹æ–¹æ³•Method viewDidLoad = class_getInstanceMethod(self, @selector(viewDidLoad));//èŽ·å¾—æ–¹æ³•å®žçŽ°IMP viewDIdLoadIMP = method_getImplementation(viewDidLoad);//é‡çŽ°è®¾ç½®æ–¹æ³•å®žçŽ°method_setImplementation(viewDidLoad, imp_implementationWithBlock(^(id target, SEL action)&#123;viewDIdLoadIMP(target, @selector(viewDidLoad));NSLog(@&quot;%@ did load&quot;,target);&#125;));&#125;);&#125;@end]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[åˆ©ç”¨Runtimeæ›´æ”¹popæ‰‹åŠ¿èŒƒå›´]]></title>
      <url>%2F2017%2F03%2F11%2F%E5%88%A9%E7%94%A8Runtime%E6%9B%B4%E6%94%B9pop%E6%89%8B%E5%8A%BF%E8%8C%83%E5%9B%B4%2F</url>
      <content type="text"><![CDATA[æ€è·¯ï¼š 1.å¯¼èˆªæŽ§åˆ¶å™¨æä¾›äº†interactivePopGestureRecognizerå±žæ€§ï¼Œè¿™ä¸ªå±žæ€§å°±æ˜¯æŽ§åˆ¶popæŽ§åˆ¶å™¨æ»‘åŠ¨çš„æ‰‹åŠ¿ã€‚è€Œç³»ç»Ÿæä¾›çš„æ»‘åŠ¨æ“ä½œåªèƒ½æ˜¯å±å¹•è¾¹ç¼˜è§¦å‘æ»‘åŠ¨ï¼Œè€Œæœ‰çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦æä¾›å…¨å±æ»‘åŠ¨çš„æ•ˆæžœã€‚æ‰€ä»¥ï¼Œå¼€å§‹å¯»æ±‚åŠžæ³•ï¼š 2.è¿™ä¸ªinteractivePopGestureRecognizeræ‰‹åŠ¿ï¼Œä¸€å®šä¼šè§¦å‘æ–¹æ³•æ¥å®Œæˆè½¬åœºåŠ¨ç”»ï¼Œä»¥åŠæŽ§åˆ¶è½¬åœºè¿›åº¦ã€‚æ— è®ºæ˜¯é€šè¿‡è¾¹ç¼˜æ»‘åŠ¨ï¼Œè¿˜æ˜¯é€šè¿‡å…¨å±å¹•æ»‘åŠ¨è§¦å‘æ–¹æ³•çš„è°ƒç”¨ï¼Œå…¶è§¦å‘çš„æ–¹æ³•çš„å†…éƒ¨å®žçŽ°åŽŸç†å’Œäº§ç”Ÿæ•ˆæžœéƒ½æ˜¯ä¸€æ ·çš„ï¼Œä¸åŒçš„æ˜¯å…¶æ‰‹åŠ¿çš„ä½œç”¨èŒƒå›´ã€‚é‚£ä¹ˆï¼Œç³»ç»Ÿå·²ç»æä¾›äº†æ‰‹åŠ¿è§¦å‘åŽæ‰€è°ƒç”¨çš„æ–¹æ³•ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç›´æŽ¥æ¥ä½¿ç”¨è¿™ä¸ªæ–¹æ³•ï¼Œæˆ‘ä»¬åªæ˜¯è‡ªå®šä¹‰ä¸€ä¸ªæ‰‹åŠ¿ï¼Œæ¥è°ƒç”¨è¿™ä¸ªçŽ°æˆçš„æ–¹æ³•å³å¯ã€‚ 1.è¯•å›¾å¯»æ±‚åœ¨æ‰‹åŠ¿å¯¹è±¡çš„å†…éƒ¨æœ‰æ²¡æœ‰æˆå‘˜å±žæ€§ç±»ä¼¼äºŽtargetå’Œactionã€‚ é€šè¿‡è¿è¡Œæ—¶æ¥æ‰“å°å‡ºæ‰‹åŠ¿æ‰€æœ‰çš„æˆè¯­å±žæ€§å’Œå±žæ€§ç±»åž‹ï¼š1234567891011unsigned int count;Ivar *ivars = class_copyIvarList([UIGestureRecognizer class], &amp;count);for (int i = 0; i &lt; count; i ++) &#123;Ivar ivar = ivars[i];const char *nameChar = ivar_getName(ivar);const char *typeChar =ivar_getTypeEncoding(ivar);NSString *typeStr = [NSString stringWithUTF8String:typeChar];NSString *nameStr = [NSString stringWithUTF8String:nameChar];NSLog(@&quot;%@&quot;,nameStr);NSLog(@&quot;%@&quot;,typeStr);&#125; ä»Žæ‰“å°ç»“æžœæ¥çœ‹ï¼Œå¯èƒ½æœ‰ç”¨çš„å°±æ˜¯å›¾ä¸­è¿™ä¸ªï¼šå› ä¸ºè¿™æ˜¯ä¸€ä¸ªæ•°ç»„ï¼ŒæŽ¨æµ‹ä¸€ä¸‹æ¥çœ‹ï¼Œå¯èƒ½å…¶ä¸­çš„å…ƒç´ å°±æ˜¯æ‹¥æœ‰targetå’Œactionå±žæ€§çš„å¯¹è±¡ï¼Œå°è¯•æ¥æ‰“å°è¿™ä¸ªå…ƒç´ èŽ·å–ä¿¡æ¯ï¼š å› ä¸ºè¿™ä¸ª_targetæ˜¯ç§æœ‰å±žæ€§ï¼Œæ‰€ä»¥åˆ©ç”¨kvcæ¥èŽ·å–å®ƒï¼š123NSMutableArray *targets = [gesture valueForKey:@&quot;_targets&quot;];NSLog(@&quot;%@&quot;,targets);NSLog(@&quot;%@&quot;,targets[0]); ä»Žæ‰“å°ç»“æžœæ¥çœ‹ï¼Œæˆ‘ä»¬å¹¶æ²¡æœ‰èŽ·å–åˆ°è¿™ä¸ªå¯¹è±¡ï¼Œé‚£ä¹ˆåº”è¯¥æ˜¯ç³»ç»Ÿé‡æ–°äº†descriptionæ–¹æ³•ï¼Œä½¿å¾—æˆ‘ä»¬æ— æ³•ç›´æŽ¥æ¥èŽ·å–åˆ°è¿™ä¸ªç§æœ‰çš„å¯¹è±¡ã€‚å€’æ˜¯çœ‹è§äº†å®ƒçš„å±žæ€§_UINavigationInteractiveTransitionï¼ˆactionï¼‰å’ŒhandleNavigationTransition(action),è€Œè¿™ä¸ªå±žæ€§éœ€è¦æˆ‘ä»¬é€šè¿‡å¯¹è±¡æ¥èŽ·å–ï¼Œé‚£ä¹ˆï¼Œåˆå°è¯•é€šè¿‡æ‰“æ–­ç‚¹çš„æ–¹æ³•æ¥æŸ¥çœ‹ï¼š å¯ä»¥çœ‹åˆ°è¿™ä¸ªå¯¹è±¡å°±æ˜¯UIGestureRecognizerTargetçŽ°åœ¨å°±èƒ½å¤ŸèŽ·å–åˆ°targetå’Œactionçš„å€¼äº†ï¼š12id target = [gestureRecognizerTarget valueForKey:@&quot;_target&quot;];SEL action = NSSelectorFromString(@&quot;handleNavigationTransition:&quot;); é‚£ä¹ˆï¼Œæˆ‘ä»¬æŠŠè‡ªå·±åˆ›å»ºçš„æ‰‹åŠ¿æ·»åŠ åˆ°interactivePopGestureRecognizerçš„viewä¸Šï¼Œå¹¶ä¸”è°ƒç”¨æ‰‹åŠ¿addTarget:action:æ–¹æ³•ï¼Œè¿™é‡Œçš„å‚æ•°targetå’Œactionå°±æ˜¯æˆ‘ä»¬ä¹‹å‰æ‰€èŽ·å–åˆ°çš„ å®Œæ•´çš„ä»£ç ï¼š1234567891011121314151617181920212223242526272829UIGestureRecognizer *gesture = self.interactivePopGestureRecognizer;gesture.enabled = NO;//èŽ·å–åˆ°æ‰‹åŠ¿ä½œç”¨çš„viewUIView *gestureView = gesture.view;//åˆ›å»ºä¸€ä¸ªpanæ‰‹åŠ¿UIPanGestureRecognizer *popRecognizer = [[UIPanGestureRecognizer alloc] init];//selfæˆä¸ºæ‰‹åŠ¿çš„ä»£ç†popRecognizer.delegate = self;popRecognizer.maximumNumberOfTouches = 1;//é‡æ–°æ·»åŠ ä¸€ä¸ªæ‰‹åŠ¿[gestureView addGestureRecognizer:popRecognizer];/*** èŽ·å–ç³»ç»Ÿæ‰‹åŠ¿çš„targetæ•°ç»„*/NSMutableArray *_targets = [gesture valueForKey:@&quot;_targets&quot;];/*** èŽ·å–å®ƒçš„å”¯ä¸€å¯¹è±¡ï¼Œæˆ‘ä»¬çŸ¥é“å®ƒæ˜¯ä¸€ä¸ªå«UIGestureRecognizerTargetçš„ç§æœ‰ç±»ï¼Œå®ƒæœ‰ä¸€ä¸ªå±žæ€§å«_target*/id gestureRecognizerTarget = [_targets firstObject];id target = [gestureRecognizerTarget valueForKey:@&quot;_target&quot;];SEL action = NSSelectorFromString(@&quot;handleNavigationTransition:&quot;);/*** åˆ›å»ºä¸€ä¸ªä¸Žç³»ç»Ÿä¸€æ¨¡ä¸€æ ·çš„æ‰‹åŠ¿ï¼Œæˆ‘ä»¬åªæŠŠå®ƒçš„ç±»æ”¹ä¸ºUIPanGestureRecognizer*/[popRecognizer addTarget:target action:action];]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[OCæ¶ˆæ¯è½¬å‘]]></title>
      <url>%2F2017%2F03%2F10%2FOC%E6%B6%88%E6%81%AF%E8%BD%AC%E5%8F%91%2F</url>
      <content type="text"><![CDATA[åœ¨è°ƒç”¨æ–¹æ³•çš„æ—¶å€™ï¼Œç³»ç»Ÿä¼šé¦–å…ˆæ¥æŸ¥æ‰¾æœ‰æ²¡æœ‰å¯¹åº”çš„æ–¹æ³•çš„å®žçŽ°ï¼Œåœ¨æ²¡æœ‰å¯¹åº”çš„å®žçŽ°çš„æ—¶å€™ï¼Œç³»ç»Ÿä¼šéšåŽè°ƒç”¨ä¸€äº›è¡¥æ•‘æ–¹æ³•ï¼Œå½“è¿™äº›æ–¹æ³•ä¹Ÿæ²¡æœ‰å®žçŽ°çš„æ—¶å€™ï¼Œæ‰ä¼šcrashï¼Œè¿™æ˜¯ä¸€ä¸ªæ–¹æ³•è°ƒç”¨çš„å®Œæ•´è¿‡ç¨‹ã€‚å½“æ²¡æœ‰æ–¹æ³•çš„å®žçŽ°çš„æ—¶å€™ï¼Œè¡¥æ•‘æ–¹æ³•çš„è°ƒç”¨é¡ºåºä¾æ¬¡ä¸ºï¼šï¼ˆä¸€ä¸ªæ˜¯ç±»æ–¹æ³•çš„è°ƒç”¨æ‰€å¯¹åº”çš„æ–¹æ³•ï¼Œä¸€ä¸ªæ˜¯å¯¹è±¡æ–¹æ³•ï¼‰+(BOOL)resolveInstanceMethod:(SEL)sel æˆ–è€… +(BOOL)resolveClassMethod:(SEL)sel å½“è¿™ä¸ªæ–¹æ³•ä¾ç„¶æ— æ³•æä¾›æ–¹æ³•çš„å®žçŽ°çš„æ—¶å€™ï¼Œé‚£ä¹ˆï¼Œç³»ç»Ÿä¼šè°ƒç”¨ä¸‹é¢çš„æ–¹æ³•ï¼š -(id)forwardingTargetForSelector:(SEL)aSelector è€Œå½“è¿™ä¸ªæ–¹æ³•ä¹Ÿæ— æ³•æä¾›è°ƒç”¨æ–¹æ³•çš„å®žçŽ°ï¼Œé‚£ä¹ˆï¼Œæœ€åŽä¸€æ¬¡è¡¥æ•‘æœºä¼šå°±æ˜¯ä¸‹é¢æ–¹æ³•ï¼š -(NSMethodSignature *)methodSignatureForSelector:(SEL)aSelector -(void)forwardInvocation:(NSInvocation *)anInvocation å½“è¿™ä¸‰æ¬¡è¡¥æ•‘æœºä¼šéƒ½æœªèƒ½æä¾›æ–¹æ³•å®žçŽ°çš„æƒ…å†µä¸‹ï¼Œé‚£ä¹ˆï¼Œå°±crash è¿™å°±æ˜¯æ•´ä¸ªçš„è°ƒç”¨é¡ºåºã€‚ ä»¥ä¸‹é€šè¿‡ä»£ç çš„æ¥è¡¥å……è¯´æ˜Žï¼š é¦–å…ˆæ˜¯åœ¨æ²¡æœ‰æä¾›è°ƒç”¨æ–¹æ³•çš„å®žçŽ°ï¼Œå¹¶ä¸”æ²¡æœ‰é‡‡å–ä»»ä½•çš„è¡¥æ•‘æŽªæ–½çš„æƒ…å†µä¸‹çš„è°ƒç”¨æƒ…å†µï¼š è¿™ä¸ªæ—¶å€™è°ƒç”¨å°±ç›´æŽ¥æŠ¥é”™ï¼š æ–¹æ³•æ‰¾ä¸åˆ° æ–¹æ³•ä¸€ï¼š åœ¨Man.må½“ä¸­ï¼Œé‡å†™+(BOOL)resolveInstanceMethod:(SEL)selæ–¹æ³• 1234567891011121314151617#import &quot;Man.h&quot;#import &lt;objc/runtime.h&gt;@implementation Man+(BOOL)resolveInstanceMethod:(SEL)sel&#123;if (sel == @selector(cook)) &#123;//æŠŠè¿™ä¸ªæ–¹æ³•å®žçŽ°åŠ¨æ€çš„æ·»åŠ è¿›åŽ»(çŽ°åœ¨æ˜¯åœ¨è°ƒç”¨åˆ°è¿™ä¸ªæ–¹æ³•çš„æ—¶å€™æ‰æ·»åŠ )//å½“è¿™ä¸ªæ–¹æ³•çš„å®žçŽ°è¢«æ·»åŠ è¿›åŽ»äº†ä¹‹åŽï¼Œä¸‹æ¬¡å†è°ƒç”¨cookæ–¹æ³•å°±ä¸ä¼šå†è¿›å…¥åˆ°è¿™ä¸ªæ–¹æ³•å½“ä¸­ï¼Œå› ä¸ºçŽ°åœ¨å·²ç»æ·»åŠ äº†cookæ–¹æ³•çš„æ—¶å€™ï¼Œè€ŒresolveInstanceMethodåªä¼šåœ¨æ²¡æœ‰cookæ–¹æ³•çš„å®žçŽ°çš„æ—¶å€™ï¼Œæ‰ä¼šè¢«è°ƒç”¨class_addMethod([self class], sel, (IMP)cook, &quot;v@:&quot;);return YES;&#125;return [super resolveInstanceMethod:sel];&#125;void cook (id self, SEL _cmd)&#123;NSLog(@&quot;man åšé¥­å‘¢&quot;);&#125;@end æ–¹æ³•äºŒï¼š (æ²¡æœ‰é‡æ–°æ–¹æ³•ä¸€ï¼Œæˆ–è€…æ–¹æ³•ä¸€æ²¡æœ‰è§£å†³é—®é¢˜çš„æƒ…å†µä¸‹ï¼Œå°±ä¼šé‡‡å–æ–¹æ³•äºŒ)1.é¦–å…ˆæ˜¯åˆ›å»ºä¸€ä¸ªæ–°çš„ç±»womanç±»ï¼Œè¿™ä¸ªç±»æœ‰cookæ–¹æ³•çš„å®žçŽ° 12345@implementation Woman-(void)cook&#123;NSLog(@&quot;woman cook&quot;);&#125;@end åœ¨è°ƒç”¨mançš„cookæ–¹æ³•çš„æ—¶å€™ï¼Œè¿›å…¥åˆ°ä¸‹é¢æ–¹æ³•ï¼š12345678-(id)forwardingTargetForSelector:(SEL)aSelector&#123;NSString *aSelectorStr = NSStringFromSelector(aSelector);if ([aSelectorStr isEqualToString:@&quot;cook&quot;]) &#123;//è¿™ä¸ªåœ°æ–¹å°±ç›¸å½“äºŽè‡ªå·±å®žçŽ°ä¸äº† ï¼Œé‚£ä¹ˆå°±äº¤ç»™åˆ«çš„å¯¹è±¡æ¥æä¾›å®žçŽ°ï¼Œå°±æ˜¯è½¬ç§»return [[Woman alloc] init];&#125;return [super forwardingTargetForSelector:aSelector];&#125; æ–¹æ³•ä¸‰ï¼š å½“ä»¥ä¸Šä¸¤ä¸ªæ–¹æ³•éƒ½æ— æ³•è§£å†³çš„æƒ…å†µä¸‹ï¼Œé‚£ä¹ˆä»¥ä¸‹æ–¹æ³•å°±æˆä¸ºäº†æœ€åŽçš„ä¸€æ¬¡è¡¥æ•‘æœºä¼šï¼š123456789101112131415-(NSMethodSignature *)methodSignatureForSelector:(SEL)aSelector&#123;NSString *aSelectorStr = NSStringFromSelector(aSelector);if ([aSelectorStr isEqualToString:@&quot;cook&quot;]) &#123;return [NSMethodSignature signatureWithObjCTypes:&quot;v@:&quot;];&#125;return [super methodSignatureForSelector:aSelector];&#125;-(void)forwardInvocation:(NSInvocation *)anInvocation&#123;SEL selector = anInvocation.selector;NSString *aSelectorStr = NSStringFromSelector(selector);if ([aSelectorStr isEqualToString:@&quot;cook&quot;]) &#123;[anInvocation invokeWithTarget:[[Woman alloc] init]];&#125;&#125;]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[ç”¨ Runtime ä¸º UIStackView æ·»åŠ åˆ†å‰²çº¿]]></title>
      <url>%2F2017%2F03%2F10%2F%E7%94%A8-Runtime-%E4%B8%BA-UIStackView-%E6%B7%BB%E5%8A%A0%E5%88%86%E5%89%B2%E7%BA%BF%2F</url>
      <content type="text"><![CDATA[ç”¨ Runtime ä¸º UIStackView æ·»åŠ åˆ†å‰²çº¿ ä½¿ç”¨æ–¹æ³•ï¼šå¯¼å…¥åˆ†ç±»ï¼š #import &quot;UIStackView+Separator.h&quot; ä½¿ç”¨æ–¹å¼ - (void)viewDidLoad { [super viewDidLoad]; //ç»™UIStackViewæ·»åŠ æ–¹æ³•ï¼Œå¹¶ä¸”ä¸é‡‡ç”¨ç»§æ‰¿çš„æ–¹å¼ self.stackView.separatorColor = [UIColor grayColor]; self.stackView.separatorThickness = 1; self.stackView.separatorLength = 50; } UIStackView+Separator.hï¼š #import &lt;UIKit/UIKit.h&gt; @interface UIStackView (Separator) @property UIColor *separatorColor; @property CGFloat separatorLength; @property CGFloat separatorThickness; @end UIStackView+Separator.mï¼š #import &quot;UIStackView+Separator.h&quot; #import &lt;objc/runtime.h&gt; @interface UIStackViewSeparatorHelper : NSObject @property (nonatomic, strong) UIColor *separatorColor; @property (nonatomic, assign) CGFloat separatorLength; @property (nonatomic, assign) CGFloat separatorThickness; @property (nonatomic, weak) UIStackView *stackView; @property (strong, nonatomic) NSMutableArray&lt;UIView *&gt; *separatorViews; -(void)makeSeparators; @end @implementation UIStackViewSeparatorHelper -(instancetype)init{ if (self = [super init]) { self.separatorThickness = 1; self.separatorViews = [NSMutableArray array]; } return self; } -(void)makeSeparators{ UIStackView * __strong strongStackView = self.stackView; // if (!strongStackView || !self.separatorColor || (self.separatorLength &lt;= 0)) { return; } //ä»ŽSuperviewå½“ä¸­ç§»é™¤ [self.separatorViews enumerateObjectsUsingBlock:^(UIView * _Nonnull obj, NSUInteger idx, BOOL * _Nonnull stop) { [obj removeFromSuperview]; }]; //ç§»é™¤æ‰€æœ‰çš„å…ƒç´  [self.separatorViews removeAllObjects]; // [strongStackView.arrangedSubviews enumerateObjectsUsingBlock:^(__kindof UIView * _Nonnull obj, NSUInteger idx, BOOL * _Nonnull stop) { if (idx == 0) { return; } //idx == 1 å–å‡ºç¬¬0ä¸ª éåŽ†å‡ºå½“å‰çš„ä¸€ä¸ªçš„æ—¶å€™ï¼Œå–å‡ºä¸Šä¸€ä¸ª UIView *previousView = strongStackView.arrangedSubviews[idx - 1]; //åˆ›å»ºäº†ä¸€ä¸ªåˆ†å‰²çº¿ UIView *separatorView = [[UIView alloc] init]; //è®¾ç½®èƒŒæ™¯é¢œè‰² separatorView.backgroundColor = self.separatorColor; // CGFloat center; //å¦‚æžœæŽ’å¸ƒçš„æ–¹å¼æ˜¯æ°´å¹³çš„æ—¶å€™ if (strongStackView.axis == UILayoutConstraintAxisHorizontal) { // center = (CGRectGetMaxX(previousView.frame) + CGRectGetMinX(obj.frame)) / 2.0; separatorView.frame = CGRectMake(center, (CGRectGetHeight(strongStackView.frame) - self.separatorLength) / 2.0, self.separatorThickness, self.separatorLength); } else { center = (CGRectGetMaxY(previousView.frame) + CGRectGetMinY(obj.frame)) / 2.0; separatorView.frame = CGRectMake((CGRectGetWidth(strongStackView.frame) - self.separatorLength) / 2.0, center, self.separatorLength, self.separatorThickness); } //è¿™é‡Œä½¿ç”¨addSubview: è€Œä¸èƒ½ä½¿ç”¨arrangedSubviewsï¼Œè¿™æ ·å°±èƒ½å¤Ÿé¿å…ç³»ç»Ÿçš„å¸ƒå±€ï¼Œè€Œç”±è‡ªå·±æ¥å¸ƒå±€separater [strongStackView addSubview:separatorView]; //å°†separatorViewæ·»åŠ åˆ°å®¹å™¨æ•°ç»„å½“ä¸­ [self.separatorViews addObject:separatorView]; }]; } @end @implementation UIStackView (Separator) static const char kHelperKey; +(void)load{ // Method m1 = class_getInstanceMethod([self class], @selector(layoutSubviews)); // Method m2 = class_getInstanceMethod([self class], @selector(tc_layoutSubviews)); // method_exchangeImplementations(m1, m2); // Class cls = [self class]; Method oriMethod = class_getInstanceMethod(cls, @selector(layoutSubviews)); Method newMethod = class_getInstanceMethod(cls, @selector(tc_layoutSubviews)); //v@: method_getTypeEncoding BOOL didAddMethod = class_addMethod([self class], @selector(layoutSubviews), method_getImplementation(newMethod), &quot;v@:&quot;); if (didAddMethod) { class_replaceMethod([self class], @selector(tc_layoutSubviews), method_getImplementation(oriMethod), &quot;v@:&quot;); }else{ method_exchangeImplementations(oriMethod, newMethod); } } #pragma mark --setter and getter /*-------è¿™é‡Œçš„å±žæ€§å› ä¸ºåˆ†ç±»æ— æ³•å­˜å‚¨çš„ç¼˜æ•…ï¼Œæ‰€ä»¥é‡‡ç”¨äº†è½¬ç§»åˆ°å…¶ä»–ç±»ï¼Œæˆ‘ä»¬åªè¦æ‹¥æœ‰è¿™ä¸ªå…¶ä»–ç±»ï¼Œå°±èƒ½å¤ŸèŽ·å–åˆ°ä»–çš„å±žæ€§-------*/ /*------------å½“è§¦å‘setæ–¹æ³•çš„æ—¶å€™ï¼Œä¸ä»…è¦è§¦å‘å‡ºä¼ å…¥å€¼å¾—å­˜å‚¨ï¼ŒåŒæ—¶è¦åˆ›å»ºå’Œå¸ƒå±€åˆ†å‰²çº¿----------------*/ -(void)setSeparatorColor:(UIColor *)separatorColor{ [self stackViewSeparatorHelper].separatorColor = separatorColor; [[self stackViewSeparatorHelper] makeSeparators]; } -(void)setSeparatorLength:(CGFloat)separatorLength{ [self stackViewSeparatorHelper].separatorLength = separatorLength; [[self stackViewSeparatorHelper] makeSeparators]; } -(void)setSeparatorThickness:(CGFloat)separatorThickness{ [self stackViewSeparatorHelper].separatorThickness = separatorThickness; [[self stackViewSeparatorHelper] makeSeparators]; } -(CGFloat)separatorThickness{ return [self stackViewSeparatorHelper].separatorThickness; } -(UIColor *)separatorColor{ return [self stackViewSeparatorHelper].separatorColor; } -(CGFloat)separatorLength{ return [self stackViewSeparatorHelper].separatorLength; } -(UIStackViewSeparatorHelper *)stackViewSeparatorHelper{ UIStackViewSeparatorHelper *stackViewSeparatorHelper = objc_getAssociatedObject(self, &amp;kHelperKey); //åœ¨è¿™ä¸ªgetæ–¹æ³•å½“ä¸­ï¼Œå¦‚æžœæ²¡æœ‰getåˆ°ï¼Œé‚£ä¹ˆå°±è§¦å‘setçš„æ“ä½œ if (!stackViewSeparatorHelper) { UIStackViewSeparatorHelper * helper = [[UIStackViewSeparatorHelper alloc] init]; helper.stackView = self; objc_setAssociatedObject(self, &amp;kHelperKey, helper, OBJC_ASSOCIATION_RETAIN_NONATOMIC); stackViewSeparatorHelper = helper; } return stackViewSeparatorHelper; } /** *åœ¨å¸ƒå±€stackViewçš„æ—¶å€™ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œå°±éœ€è¦åŒæ—¶å¸ƒå±€åˆ†å‰²çº¿ï¼Œæ‰€ä»¥ï¼Œå¿…é¡»è¦ç›‘å¬åˆ°layoutSubViewsæ–¹æ³• * æ¯”å¦‚è¯´ï¼ŒUIStackViewæ·»åŠ äº†å­æŽ§ä»¶ï¼ˆé€šè¿‡arrangedSubviewsæ·»åŠ ï¼‰ï¼Œé‚£ä¹ˆå°±ä¼šè°ƒç”¨è¿™ä¸ªæ–¹æ³•æ¥å¸ƒå±€ ï¼Œè¿™ä¸ªæ—¶å€™ ï¼Œå°±éœ€è¦é‡æ–°å¸ƒå±€separator * UIStackView åªä¼šè´Ÿè´£ arrangedSubviews çš„å¸ƒå±€ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬åˆ©ç”¨è¿™ä¸ªç‰¹æ€§æ¥å°†åˆ†å‰²çº¿ç›´æŽ¥åŠ åˆ° stack view ä¸Šè€Œä¸å—å…¶å¸ƒå±€ï¼Œåªè¦æˆ‘ä»¬ä¸ä½¿ç”¨ addArrangedSubView å³å¯ã€‚ */ -(void)tc_layoutSubviews{ //å…ˆè®©UIStackViewçš„arrangedSubviewså®Œæˆå¸ƒå±€ [self tc_layoutSubviews]; //å¸ƒå±€separater [[self stackViewSeparatorHelper] makeSeparators]; } @end]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[UIVisualEffect æ¨¡ç³ŠåŠ¨ç”»]]></title>
      <url>%2F2017%2F03%2F09%2FUIVisualEffect-%E6%A8%A1%E7%B3%8A%E5%8A%A8%E7%94%BB%2F</url>
      <content type="text"><![CDATA[UIVisualEffect æ¨¡ç³ŠåŠ¨ç”»Demo @interface ViewController () @property (weak, nonatomic) IBOutlet UIVisualEffectView visualEffect; @property (weak, nonatomic) IBOutlet UILabel label; @property (weak, nonatomic) IBOutlet NSLayoutConstraint *topLayoutConstraint; @end @implementation ViewController - (IBAction)visualEffectViewClick:(id)sender { if (self.label.hidden == YES) { self.label.hidden = NO; self.topLayoutConstraint.constant = 160; UIBlurEffect *blurEffect = [UIBlurEffect effectWithStyle:(UIBlurEffectStyleDark)]; [UIView animateWithDuration:1 delay:0 usingSpringWithDamping:1 initialSpringVelocity:0 options:(UIViewAnimationOptionCurveEaseInOut) animations:^{ self.visualEffect.effect = blurEffect; self.label.textColor = [UIColor colorWithWhite:1 alpha:1]; [self.view layoutIfNeeded]; } completion:nil]; }else{ self.topLayoutConstraint.constant = 0; [UIView animateWithDuration:0.2 delay:0 usingSpringWithDamping:1 initialSpringVelocity:0 options:(0) animations:^{ self.label.textColor = [UIColor colorWithWhite:1 alpha:0.2]; [self.view layoutIfNeeded]; self.visualEffect.effect = nil; } completion:^(BOOL finished) { self.label.hidden = YES; self.topLayoutConstraint.constant = 360; }]; } } @end]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[å½©è™¹æ¸å˜çš„æ»šåŠ¨åˆ—è¡¨]]></title>
      <url>%2F2017%2F03%2F09%2F%E5%BD%A9%E8%99%B9%E6%B8%90%E5%8F%98%E7%9A%84%E6%BB%9A%E5%8A%A8%E5%88%97%E8%A1%A8%2F</url>
      <content type="text"><![CDATA[å½©è™¹æ¸å˜çš„æ»šåŠ¨åˆ—è¡¨åŽŸæ–‡é“¾æŽ¥ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110#import &quot;ViewController.h&quot;@interface ViewController()&lt;UITableViewDelegate,UITableViewDataSource&gt;//æ•°ç»„ç”¨æ¥å­˜å‚¨èµ·å§‹é¢œè‰²å’Œç»ˆç‚¹é¢œè‰²&#123;NSArray *_color;&#125;@property(nonatomic,strong) UITableView *tableView;@end@implementation ViewController- (void)viewDidLoad &#123;[super viewDidLoad];//å­˜å‚¨é¢œè‰²å˜åŒ–çš„èµ·å§‹å€¼å’Œç»ˆå€¼self-&gt;_color = @[[UIColor colorWithRed:0.85 green:0 blue:0.09 alpha:1],[UIColor colorWithRed:0.9 green:0.56 blue:0.11 alpha:1]];self.view.backgroundColor = [UIColor blackColor];self.tableView = [[UITableView alloc] initWithFrame:self.view.bounds];self.tableView.separatorStyle = UITableViewCellSelectionStyleNone;self.tableView.contentInset = UIEdgeInsetsMake(20, 0, 0, 0);self.tableView.delegate =self;self.tableView.dataSource = self;UIVisualEffectView *veView = [[UIVisualEffectView alloc] initWithEffect:[UIBlurEffect effectWithStyle:UIBlurEffectStyleDark]];veView.frame = CGRectMake(0, 0, self.view.bounds.size.width, 20);[self.view addSubview:self.tableView];[self.view addSubview:veView];&#125;//åˆ›å»ºçš„UIColorå¯¹è±¡æ— æ³•å†èŽ·å–åˆ°å…¶ä¸­çš„é¢œè‰²ç»„ä»¶ï¼Œå°†è¿™é‡Œçš„é¢œè‰²æ•°ç»„ä½œä¸ºå‚æ•°ä¼ å…¥ï¼Œè¿™æ ·é€šè¿‡è¿™ä¸ªæ–¹æ³•å¯èŽ·å¾—åœ¨ä»»ä½•é¢œè‰²è®¾å®šåŸºç¡€ä¸Šçš„å¯¹åº”é¢œè‰²-(UIColor *)calculateColorWithProgress:(float)progress usingColors:(NSArray&lt;UIColor *&gt;*)colors&#123;UIColor *color1 = [colors firstObject];UIColor *color2 = [colors lastObject];// UIColor -&gt; CGColorconst CGFloat *color1Components = CGColorGetComponents(color1.CGColor);const CGFloat *color2Components = CGColorGetComponents(color2.CGColor);// è¿™é‡Œä»Žç»ˆç‚¹å€¼åˆ°åˆå§‹å€¼çš„å·®å€¼ * progress = ã€0 - å·®å€¼ã€‘float red = color1Components[0] + (color2Components[0] - color1Components[0]) * progress;float green = color1Components[1] + (color2Components[1] - color1Components[1]) * progress;float blue = color1Components[2] + (color2Components[2] - color1Components[2]) * progress;return [UIColor colorWithRed:red green:green blue:blue alpha:1];&#125;-(float)calculateProgressWithView:(UIView *)view&#123;//converRect: toView: è½¬æ¢åæ ‡ç³»//ä»Žç›¸å¯¹äºŽtableViewçš„åæ ‡ç³» è½¬æ¢åˆ°viewä¸ŠåŽ»CGRect convertedRect = [view convertRect:view.bounds toView:self.view];CGFloat convertedY = convertedRect.origin.y;//[0 - 1]return convertedY / (self.view.bounds.size.height - 60);&#125;-(UITableViewCell *)makeTableViewCell&#123;UITableViewCell *cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@&quot;Cell&quot;];cell.selectionStyle = UITableViewCellSeparatorStyleNone;cell.textLabel.font = [UIFont boldSystemFontOfSize:16];cell.textLabel.textColor = [UIColor whiteColor];//è®¾ç½®æ–‡å­—çš„é˜´å½±cell.textLabel.shadowColor = [UIColor colorWithWhite:0 alpha:0.4];cell.textLabel.shadowOffset = CGSizeMake(0, 1);//ä¸‹é¢çš„ä¸¤ä¸ª CAShapeLayer ä¸»è¦æ˜¯ä¸ºäº†å®žçŽ°é«˜å…‰é˜´å½±çš„æ•ˆæžœï¼Œä¹Ÿå°±æ˜¯è¿™ä¸ª cell çš„ä¸Šè¾¹æœ‰ä¸€æ¡äº®è¾¹ï¼Œä¸‹è¾¹æœ‰å±‚é˜´å½±CAShapeLayer *topHighlightLayer = [CAShapeLayer layer];topHighlightLayer.path = CGPathCreateWithRect(CGRectMake(0, 0, self.view.bounds.size.width, 1), nil);topHighlightLayer.fillColor = [UIColor whiteColor].CGColor;topHighlightLayer.opacity = 0.1;[cell.layer addSublayer:topHighlightLayer];CAShapeLayer *bottomShadowLayer = [CAShapeLayer layer];bottomShadowLayer.path = CGPathCreateWithRect(CGRectMake(0, 59, self.view.bounds.size.width, 1), nil);bottomShadowLayer.fillColor = [UIColor blackColor].CGColor;bottomShadowLayer.opacity = 0.2;[cell.layer addSublayer:bottomShadowLayer];return cell;&#125;-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section&#123;return 30;&#125;-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath&#123;static NSString *CellIdentifiter = @&quot;Cell&quot;;UITableViewCell *cell = [self.tableView dequeueReusableCellWithIdentifier:CellIdentifiter];if (!cell) &#123; cell = [self makeTableViewCell];&#125;cell.textLabel.text = [NSString stringWithFormat:@&quot;This is test item %ld&quot;,indexPath.row];cell.detailTextLabel.text = @&quot;1&quot;;return cell;&#125;//éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œcell åˆšåˆ›å»ºå®Œæ¯•åŽæ»šåŠ¨çš„ä»£ç†æ–¹æ³•æ˜¯ä¸ä¼šè§¦å‘çš„//æ‰€ä»¥æˆ‘ä»¬éœ€è¦ç”¨åˆ°tableView:willDisplayCell:forRowAtIndexPath:è¿™ä¸ªä»£ç†æ–¹æ³•æ¥å¯¹æ¯ä¸ªæ–°å»ºçš„ cell ä½œç›¸åº”è®¾ç½®ã€‚-(void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath&#123;//è®¾ç½®cellçš„èƒŒæ™¯è‰²cell.backgroundColor = [self calculateColorWithProgress:[self calculateProgressWithView:cell] usingColors:self -&gt; _color];&#125;-(CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath&#123;return 60;&#125;-(void)scrollViewDidScroll:(UIScrollView *)scrollView&#123;if ([scrollView isEqual:self.tableView]) &#123; //èŽ·å–æ‰€æœ‰å¯è§çš„cell [self.tableView.visibleCells enumerateObjectsUsingBlock:^(__kindof UITableViewCell * _Nonnull obj, NSUInteger idx, BOOL * _Nonnull stop) &#123; float progress = [self calculateProgressWithView:obj]; UIColor *color = [self calculateColorWithProgress:progress usingColors:self -&gt; _color]; obj.backgroundColor = color; &#125;];&#125;&#125;]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[å·§å¦™è¿ç”¨å¯¹è±¡å…³è”è®¾è®¡alertview]]></title>
      <url>%2F2017%2F03%2F07%2F%E5%B7%A7%E5%A6%99%E8%BF%90%E7%94%A8%E5%AF%B9%E8%B1%A1%E5%85%B3%E8%81%94%E8%AE%BE%E8%AE%A1alertview%2F</url>
      <content type="text"><![CDATA[UIAlertViewäº‹ä»¶å¤„ç†æ–¹å¼ä¸€ï¼šé€šè¿‡è¿™ç§æ–¹å¼ï¼Œå­˜åœ¨çš„ç¼ºé™·æœ‰ï¼šæŽ§ä»¶çš„åˆ›å»ºå’Œäº‹ä»¶çš„å¤„ç†æ˜¯åˆ†å¸ƒçš„ï¼Œè¿™æ ·çš„é˜…è¯»æ€§æ˜¯è¾ƒå·®çš„ï¼ŒåŒæ—¶ï¼Œåœ¨äº‹ä»¶å¤„ç†æ–¹æ³•å½“ä¸­ï¼Œå½“é¢å¯¹å¤šä¸ªUIAlertViewçš„æ—¶å€™ï¼Œéœ€è¦è¿›è¡Œif elseçš„åˆ¤æ–­ï¼Œä»£ç é€‰å¾—ç‰¹åˆ«å†—ä½™ // button1 ç‚¹å‡»æ‰§è¡Œçš„æ–¹æ³• - (IBAction)alertClick:(id)sender { UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:@&quot;title&quot; message:@&quot;message&quot; delegate:self cancelButtonTitle:@&quot;cancel&quot; otherButtonTitles:@&quot;ok&quot;, nil]; alertView.tag = 1000; [alertView show]; } // button2 ç‚¹å‡»æ‰§è¡Œçš„æ–¹æ³• - (IBAction)alertClick2:(id)sender { UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:@&quot;title&quot; message:@&quot;message&quot; delegate:self cancelButtonTitle:@&quot;cancel&quot; otherButtonTitles:@&quot;ok&quot;, nil]; alertView.tag = 2000; [alertView show]; } // alertview ç‚¹å‡»æ‰§è¡Œçš„delegateæ–¹æ³•,å‰æ éœ€è¦selfå®žçŽ°UIAlertViewDelegateåè®® - (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex { if (alertView.tag == 1000) { NSLog(@&quot;alertView1 æ‰§è¡Œé€»è¾‘æ“ä½œ&quot;); } else if (alertView.tag == 2000) { NSLog(@&quot;alertView2 æ‰§è¡Œé€»è¾‘æ“ä½œ&quot;); } else if (alertView.tag == 3000) { NSLog(@&quot;alertView3 æ‰§è¡Œé€»è¾‘æ“ä½œ&quot;); } // ...ç­‰ç­‰å¾ˆå¤šalertview } UIAlertViewäº‹ä»¶å¤„ç†æ–¹å¼äºŒï¼š åœ¨UIAlertViewçš„åˆ†ç±»å½“ä¸­UIAlertView+tc.h @interface UIAlertView (tc) -(void)tc_clickButtonAtIndexWithBlock:(void(^)()) block; @end UIAlertView+tc.m typedef void(^block)(); static char const *TCAlertViewKey = â€œTCAlertViewKeyâ€; #import &quot;UIAlertView+tc.h&quot; #import &lt;objc/message.h&gt; @interface UIAlertView()&lt;UIAlertViewDelegate&gt; @end @implementation UIAlertView (tc) -(void)tc_clickButtonAtIndexWithBlock:(void (^)())block{ objc_setAssociatedObject(self, TCAlertViewKey, block, OBJC_ASSOCIATION_COPY_NONATOMIC); self.delegate = self; } #pragma mark -UIAlertViewDelegate -(void)alertView:(UIAlertView *)alertView clickedButtonAtIndex: (NSInteger)buttonIndex{ block block = objc_getAssociatedObject(self, TCAlertViewKey); block(alertView, buttonIndex); } @end è°ƒç”¨çš„éƒ¨åˆ†ï¼š - (IBAction)buttonClick:(id)sender { UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:@&quot;a&quot; message:@&quot;b&quot; delegate:nil cancelButtonTitle:@&quot;c&quot; otherButtonTitles:@&quot;d&quot;, nil]; [alertView show]; [alertView tc_clickButtonAtIndexWithBlock:^(UIAlertView *alertView, NSInteger index){ NSLog(@&quot;%@---- %zd&quot;,alertView, index); }]; } - (IBAction)buttonClick2:(id)sender { UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:@&quot;a&quot; message:@&quot;b&quot; delegate:nil cancelButtonTitle:@&quot;c&quot; otherButtonTitles:@&quot;d&quot;, nil]; [alertView show]; [alertView tc_clickButtonAtIndexWithBlock:^(UIAlertView *alertView, NSInteger index){ NSLog(@&quot;%@ +++++ %zd&quot;,alertView, index); }]; } UIAlertViewäº‹ä»¶å¤„ç†æ–¹å¼ä¸‰ï¼š typedef void(^block)(); #import &lt;objc/message.h&gt; #import &quot;UIAlertView+tc.h&quot; static char const *TCAlertViewKey = &quot;TCAlertViewKey&quot;; /** * ä¸€ä¸ªä¸“é—¨çš„ç±»ï¼Œç”¨æ¥å¤„ç†ä»£ç†äº‹ä»¶ï¼ŒåŒ…æ‹¬blockçš„å­˜å‚¨ä»¥åŠäº‹ä»¶çš„å¤„ç† */ @interface TCAlertViewDelegate : NSObject&lt;UIAlertViewDelegate&gt; { block _block; } -(instancetype)initWithBlock:(block) block; @end @implementation TCAlertViewDelegate -(instancetype)initWithBlock:(block)block{ if (self = [super init]) { objc_setAssociatedObject(self, TCAlertViewKey, self, OBJC_ASSOCIATION_COPY_NONATOMIC); _block = block; } return self; } -(void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex{ if (_block) { _block(alertView, buttonIndex); } } @end @implementation UIAlertView (tc) //delegate -&gt; weak ï¼Œå¦‚æžœç›´æŽ¥è®©TCAlertViewDelegateå¯¹è±¡æˆä¸ºä»£ç†ï¼Œä¼šé©¬ä¸Š æŒ‚æŽ‰ -(void)tc_clickButtonAtIndexWithBlock:(void (^)())block{ //æ·»åŠ äº†ä¸€ä¸ªå…³è”å¯¹è±¡ï¼Œå› ä¸ºè¿™ä¸ªå¯¹è±¡çš„å­˜å‚¨æ–¹å¼æ˜¯copyï¼Œæ‰€ä»¥è¿™ä¸ªå¯¹è±¡å°±ä¸ä¼šè¢«é‡Šæ”¾ id delegate = objc_getAssociatedObject( [[TCAlertViewDelegate alloc] initWithBlock:block],TCAlertViewKey); //è®©è¿™ä¸ªä¸“é—¨çš„ç±»æˆä¸ºä»£ç† self.delegate = delegate; } @end]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[runtime]]></title>
      <url>%2F2017%2F03%2F07%2Fruntime%2F</url>
      <content type="text"><![CDATA[runtimeä½œç”¨ 1.å‘é€æ¶ˆæ¯ 2.äº¤æ¢æ–¹æ³• 3.åŠ¨æ€æ·»åŠ æ–¹æ³• 4 ç»™åˆ†ç±»æ·»åŠ å±žæ€§ 5.å­—å…¸è½¬æ¨¡åž‹ ä¸€ã€runtimeç®€ä»‹ å¯¹äºŽCè¯­è¨€ï¼Œå‡½æ•°çš„è°ƒç”¨åœ¨ç¼–è¯‘çš„æ—¶å€™ï¼Œå°±å†³å®šè°ƒç”¨å“ªä¸ªå‡½æ•°ã€‚ å¯¹äºŽOCçš„å‡½æ•°ï¼Œå±žäºŽåŠ¨æ€è°ƒç”¨è¿‡ç¨‹ï¼Œåœ¨ç¼–è¯‘çš„æ—¶å€™ï¼Œå¹¶ä¸èƒ½çœŸæ­£çš„å†³å®šè°ƒç”¨å“ªä¸ªå‡½æ•°ï¼Œåªæœ‰åœ¨çœŸæ­£çš„è¿è¡Œçš„æ—¶å€™æ‰ä¼šæ ¹æ®å‡½æ•°çš„åç§°æ‰¾åˆ°å¯¹åº”çš„å‡½æ•°æ¥è°ƒç”¨ äº‹å®žè¯æ˜Žï¼š åœ¨ç¼–è¯‘é˜¶æ®µï¼ŒOCå¯ä»¥è°ƒç”¨ä»»ä½•å‡½æ•°ï¼Œå³ä½¿è¿™ä¸ªå‡½æ•°å¹¶æœªå®žçŽ°ï¼Œåªè¦ç”³æ˜Žè¿‡å°±ä¸ä¼šæŠ¥é”™ åœ¨ç¼–è¯‘é˜¶æ®µï¼ŒCè¯­è¨€è°ƒç”¨æœªå®žçŽ°çš„å‡½æ•°å°±ä¼šæŠ¥é”™ äºŒã€runtimeä½œç”¨ 1.å‘é€æ¶ˆæ¯ æ–¹æ³•è°ƒç”¨çš„æœ¬è´¨ï¼Œå°±æ˜¯è®©å¯¹è±¡å‘é€æ¶ˆæ¯ objc_megSend,åªæœ‰å¯¹è±¡æ‰èƒ½å‘é€æ¶ˆæ¯ï¼Œå› æ­¤ä»¥objcå¼€å¤´ ä½¿ç”¨æ¶ˆæ¯æœºåˆ¶å‰æï¼Œå¿…é¡»å¯¼å…¥#import clang -rewrite-objc main.m æŸ¥çœ‹æœ€ç»ˆç”Ÿæˆä»£ç  123@autoreleasepool &#123;Person *person = [[Person alloc] init];&#125; 123456int main(int argc, const char * argv[]) &#123;/* @autoreleasepool */ &#123; __AtAutoreleasePool __autoreleasepool;Person *person = ((Person *(*)(id, SEL))(void *)objc_msgSend)((id)((Person *(*)(id, SEL))(void *)objc_msgSend)((id)objc_getClass(&quot;Person&quot;), sel_registerName(&quot;alloc&quot;)), sel_registerName(&quot;init&quot;));&#125;return 0;&#125; æˆ–è€…12Person *person = ((Person *(*)(id, SEL))(void *)objc_msgSend)((id)objc_getClass(&quot;Person&quot;), sel_registerName(&quot;alloc&quot;));person = ((Person *(*)(id, SEL))(void *)objc_msgSend)((id)person, sel_registerName(&quot;init&quot;)); åˆ›å»ºpersonå¯¹è±¡12345678910111213Person *p = [[Person alloc] init];// è°ƒç”¨å¯¹è±¡æ–¹æ³•[p eat];// æœ¬è´¨ï¼šè®©å¯¹è±¡å‘é€æ¶ˆæ¯objc_msgSend(p, @selector(eat));// è°ƒç”¨ç±»æ–¹æ³•çš„æ–¹å¼ï¼šä¸¤ç§// ç¬¬ä¸€ç§é€šè¿‡ç±»åè°ƒç”¨[Person eat];// ç¬¬äºŒç§é€šè¿‡ç±»å¯¹è±¡è°ƒç”¨[[Person class] eat];// ç”¨ç±»åè°ƒç”¨ç±»æ–¹æ³•ï¼Œåº•å±‚ä¼šè‡ªåŠ¨æŠŠç±»åè½¬æ¢æˆç±»å¯¹è±¡è°ƒç”¨// æœ¬è´¨ï¼šè®©ç±»å¯¹è±¡å‘é€æ¶ˆæ¯objc_msgSend([Person class], @selector(eat)); ç¤ºä¾‹12345Person.h@interface Person : NSObject- (void)run:(NSInteger)metre;- (void)eat;@end Person.m123456789101112131415161718192021222324#import &quot;Person.h&quot;@implementation Person- (void)eat&#123;NSLog(@&quot;åƒ&quot;);&#125;- (void)run:(NSInteger)metre&#123;NSLog(@&quot;è·‘äº†%ld&quot;,metre);&#125;@endæ¶ˆæ¯çš„å‘é€ï¼ˆæ–¹æ³•çš„è°ƒç”¨åº•å±‚å®žçŽ°æ˜¯å¯¹æ¶ˆæ¯çš„å‘é€ï¼‰Person *p = objc_msgSend([Person class], @selector(alloc));//Person *p = objc_msgSend(objc_getClass(&quot;Person&quot;), sel_registerName(&quot;alloc&quot;));p = objc_msgSend(p, @selector(&quot;init&quot;));//è°ƒç”¨eatæ–¹æ³•[p eat];//æˆ–è€…//msgSend(p, @selector(&quot;eat&quot;));//msgSend(p, sel_registerName(&quot;eat&quot;));//è°ƒç”¨runï¼šæ–¹æ³•[p run:20];//msgSend(p , @selector(run:), 20);//msgSend(p, sel_register(&quot;run:&quot;), 20); 2.äº¤æ¢æ–¹æ³• å¼€å‘åœºæ™¯ï¼š ç³»ç»Ÿè‡ªåŠ¨çš„æ–¹æ³•åŠŸèƒ½ä¸å¤Ÿç”¨ï¼Œç»™ç³»ç»Ÿè‡ªå¸¦çš„æ–¹æ³•æ‰©å±•ä¸€äº›åŠŸèƒ½ï¼Œå¹¶ä¸”ä¿æŒåŽŸæœ‰çš„åŠŸèƒ½ï¼Œä½¿ç”¨runtimeäº¤æ¢æ–¹æ³•éœ€æ±‚ï¼šåœ¨é¡¹ç›®å½“ä¸­ï¼Œæˆ‘ä»¬ä¸€ç›´ä»¥æ¥é€šè¿‡imageNamedï¼šæ–¹æ³•æ¥åŠ è½½å›¾ç‰‡ï¼Œä½†æ˜¯æˆ‘ä»¬æ— æ³•å¾—çŸ¥å›¾ç‰‡æ˜¯å¦åŠ è½½æˆåŠŸï¼ŒçŽ°åœ¨ï¼Œæå‡ºè¿™æ ·çš„éœ€æ±‚ï¼Œéœ€è¦æˆ‘ä»¬åœ¨è°ƒç”¨è¿™ä¸ªæ–¹æ³•çš„æ—¶å€™ï¼ŒåŒæ—¶å¾—çŸ¥å›¾ç‰‡æ˜¯å¦åŠ è½½æˆåŠŸã€‚åˆ†æžï¼š ä½¿ç”¨ç»§æ‰¿ï¼š éœ€è¦æˆ‘ä»¬åœ¨æ‰€æœ‰ä½¿ç”¨åˆ°imageNamd:æ–¹æ³•çš„åœ°æ–¹éƒ½å¯¼å…¥ç»§æ‰¿ç±»çš„å¤´æ–‡ä»¶ï¼Œå¹¶ä¸”æ›´æ”¹æ–¹æ³•çš„è°ƒç”¨è€…ï¼Œè€Œä¸”éœ€è¦å‘ŠçŸ¥å…¶ä»–çš„å¼€å‘äººå‘˜ï¼Œéœ€è¦è°ƒç”¨è¿™ä¸ªç»§æ‰¿çš„ç±»ï¼Œæ‰€ä»¥ï¼Œä½¿ç”¨èµ·æ¥å¾ˆä¸æ–¹ä¾¿ä½¿ç”¨åˆ†ç±»ï¼šè¿™æ ·ä¼šè¦†ç›–ç³»ç»Ÿçš„å®žçŽ°ï¼Œ å°±æ˜¯å®Œå…¨çš„é‡æ–°å®žçŽ°è¿™ä¸ªæ–¹æ³•æ‰€ä»¥ï¼Œå¯¹äºŽè¿™æ ·çš„å¼€å‘éœ€æ±‚ï¼Œæ›´å¥½çš„å®žçŽ°æ–¹æ³•æ˜¯é€šè¿‡runtimeçš„äº¤æ¢æ–¹æ³•æ¥å®žçŽ° é€šè¿‡ç»§æ‰¿çš„æ–¹å¼æ¥å®žçŽ°éœ€æ±‚ï¼š123456789101112#import &quot;TCImage.h&quot;@implementation TCImage+(UIImage *)imageNamed:(NSString *)name&#123;UIImage *image = [super imageNamed:name];if (!image) &#123;NSLog(@&quot;åŠ è½½å›¾ç‰‡å¤±è´¥&quot;);&#125;else&#123;NSLog(@&quot;åŠ è½½å›¾ç‰‡æˆåŠŸ&quot;);&#125;return image;&#125;@end åœ¨è°ƒç”¨çš„æ—¶å€™ï¼Œå°±ä¼šéº»çƒ¦ä¸€äº›ï¼šé¦–å…ˆéœ€è¦å¯¼å…¥å¤´æ–‡ä»¶ #import â€œTCImage.hâ€åœ¨è°ƒç”¨æ–¹æ³•çš„æ—¶å€™ï¼Œå°±éœ€è¦é€šè¿‡ä¸€ä¸ªæ–°çš„ç±»æ¥è°ƒç”¨UIImage *image = [UIImage imageNamed:@â€â€];è€Œè¿ç”¨runtimeï¼Œé€šè¿‡äº¤æ¢æ–¹æ³•çš„å®žçŽ°ï¼š123456789101112131415161718#import &quot;UIImage+Image.h&quot;#import &lt;objc/message.h&gt;@implementation UIImage (Image)+(void)load&#123;Method m1 = class_getClassMethod(objc_getClass(&quot;UIImage&quot;), @selector(imageNamed:));Method m2 = class_getClassMethod(objc_getClass(&quot;UIImage&quot;), @selector(tcimageNamed:));method_exchangeImplementations(m1, m2);&#125;+(instancetype)tcimageNamed:(NSString *)name&#123;UIImage *image = [self tcimageNamed:name];if (!image) &#123;NSLog(@&quot;åŠ è½½å›¾ç‰‡å¤±è´¥&quot;);&#125;else&#123;NSLog(@&quot;åŠ è½½å›¾ç‰‡æˆåŠŸ&quot;);&#125;return image;&#125;@end åœ¨è°ƒç”¨çš„æ—¶å€™ï¼Œæ²¡æœ‰ä»»ä½•çš„æ”¹å˜ï¼Œä½†å·²ç»åœ¨ç³»ç»Ÿå®žçŽ°çš„åŸºç¡€ä¸Šï¼Œå¤šäº†èŽ·å–æ˜¯å¦åŠ è½½æˆåŠŸçš„åŠŸèƒ½ 3.åŠ¨æ€æ·»åŠ æ–¹æ³•å¼€å‘ä½¿ç”¨åœºæ™¯ï¼š å¦‚æžœä¸€ä¸ªç±»æ–¹æ³•éžå¸¸å¤šï¼ŒåŠ è½½åˆ°å†…å­˜çš„æ—¶å€™ä¹Ÿæ¯”è¾ƒè€—èµ„æºï¼Œéœ€è¦ç»™æ¯ä¸ªæ–¹æ³•ç”Ÿæˆæ˜ å°„è¡¨ï¼Œå¯ä»¥é€šè¿‡åŠ¨æ€ç»™æŸä¸ªç±»æ·»åŠ æ–¹æ³•æ¯”å¦‚ï¼šå¾ˆå¤šåº”ç”¨éƒ½åˆ†äº†ä¼šå‘˜å’Œéžä¼šå‘˜ï¼Œå¾ˆå¤šæ–¹æ³•ï¼Œåœ¨éžä¼šå‘˜çš„æ—¶å€™ï¼Œå®Œå…¨éƒ½ä¸ä¼šä½¿ç”¨åˆ°ï¼Œè¿™ä¸ªæ—¶å€™æŠŠæ–¹æ³•åŠ è½½åˆ°å†…å­˜æ˜¯æ¯”è¾ƒè´¹èµ„æºçš„ï¼Œæ²¡æœ‰å¿…è¦ç”Ÿæˆè¿™äº›ä¸ä¼šç”¨åˆ°çš„æ–¹æ³•çš„æ˜ å°„è¡¨ è¿™ä¸ªæ—¶å€™ï¼Œå°±å¯ä»¥é€šè¿‡åŠ¨æ€æ·»åŠ æ–¹æ³•æ¥è§£å†³è¿™ä¸€é—®é¢˜ï¼Œå½“ç”¨åˆ°è¿™ä¸ªæ–¹æ³•çš„æ—¶å€™å†åŽ»æ·»åŠ å®žçŽ°è°ƒç”¨ä¸€ä¸ªå¹¶æ²¡æœ‰æ·»åŠ å®žçŽ°çš„æ–¹æ³•ï¼Œéœ€è¦ç”¨åˆ°performSelector12Person *p = [[Person alloc] init];[p performSelector:@selector(run:) withObject:@10]; åœ¨Person.mæ–‡ä»¶ä¸­1234567891011121314void aaa(id self, SEL _cmd, NSNumber *meter) &#123;NSLog(@&quot;è·‘äº†%@&quot;, meter);&#125;// ä»»ä½•æ–¹æ³•é»˜è®¤éƒ½æœ‰ä¸¤ä¸ªéšå¼å‚æ•°,self,_cmd// ä»€ä¹ˆæ—¶å€™è°ƒç”¨:åªè¦ä¸€ä¸ªå¯¹è±¡è°ƒç”¨äº†ä¸€ä¸ªæœªå®žçŽ°çš„æ–¹æ³•å°±ä¼šè°ƒç”¨è¿™ä¸ªæ–¹æ³•,è¿›è¡Œå¤„ç†// ä½œç”¨:åŠ¨æ€æ·»åŠ æ–¹æ³•,å¤„ç†æœªå®žçŽ°+ (BOOL)resolveInstanceMethod:(SEL)sel&#123;if (sel == NSSelectorFromString(@&quot;run:&quot;)) &#123;class_addMethod(self, sel, (IMP)aaa, &quot;v@:@&quot;);return YES;&#125;return [super resolveInstanceMethod:sel];&#125; 4 ç»™åˆ†ç±»æ·»åŠ å±žæ€§åˆ†æžï¼š ç»™ä¸€ä¸ªç±»å£°æ˜Žå±žæ€§ï¼Œæœ¬è´¨å°±æ˜¯ç»™è¿™ä¸ªç±»æ·»åŠ å…³è”å¯¹è±¡ï¼Œè€Œä¸æ˜¯ç›´æŽ¥æŠŠè¿™ä¸ªå€¼çš„å†…å­˜æ·»åŠ åˆ°ç±»å†…å­˜å½“ä¸­åº”ç”¨åœºæ™¯ï¼š ç»™ä¸€ä¸ªç³»ç»Ÿçš„ç±»æ·»åŠ ä¸€ä¸ªå…³è”å¯¹è±¡ï¼ˆæ–°å¢žå±žæ€§ï¼‰ç»™ç³»ç»Ÿç±»NSObjectæ·»åŠ ä¸€ä¸ªé‚£ä¹ˆå±žæ€§ 1234@interface NSObject (Property)//åœ¨åˆ†ç±»å½“ä¸­ï¼Œè¿™é‡Œåªä¼šç”Ÿæˆgetå’Œsetæ–¹æ³•çš„å£°æ˜Žï¼Œå¹¶ä¸ä¼šç”Ÿæˆæ–¹æ³•çš„å®žçŽ°ï¼Œæ‰€ä»¥ï¼Œä¹Ÿå°±æ²¡æœ‰å¿…è¦è¯´æ˜Žå­˜å‚¨æœºåˆ¶@property NSString *name;@end .mæ–‡ä»¶12345678910#import &quot;NSObject+Property.h&quot;#import &lt;objc/message.h&gt;@implementation NSObject (Property)-(NSString *)name&#123;return objc_getAssociatedObject(self, &quot;name&quot;);&#125;-(void)setName:(NSString *)name&#123;objc_setAssociatedObject(self, &quot;name&quot;, name,OBJC_ASSOCIATION_COPY_NONATOMIC);&#125;@end 5.å­—å…¸è½¬æ¨¡åž‹ è®¾è®¡æ¨¡åž‹ï¼šå­—å…¸è½¬æ¨¡åž‹çš„ç¬¬ä¸€æ­¥ æ¨¡åž‹å±žæ€§ï¼Œé€šå¸¸éœ€è¦è·Ÿå­—å…¸ä¸­çš„keyä¸€ä¸€å¯¹åº” é—®é¢˜ï¼š ä¸€ä¸ªä¸€ä¸ªçš„æ·»åŠ æ¨¡åž‹å±žæ€§æ˜¯ä¸€ä»¶ä¹å‘³æ²¡æœ‰æŠ€æœ¯å«é‡è€—æ—¶çš„æ“ä½œ éœ€æ±‚ï¼šèƒ½ä¸èƒ½è‡ªåŠ¨æ ¹æ®å­—å…¸ï¼Œç”Ÿæˆå¯¹åº”çš„å±žæ€§ è§£å†³ï¼š æä¾›ä¸€ä¸ªåˆ†ç±»ï¼Œä¸“é—¨æ ¹æ®å­—å…¸ç”Ÿæˆå¯¹åº”çš„å±žæ€§å­—ç¬¦ä¸² 1234567891011121314151617181920212223242526272829303132@implementation NSObject (Log)// è‡ªåŠ¨æ‰“å°å±žæ€§å­—ç¬¦ä¸²+ (void)resolveDict:(NSDictionary *)dict&#123;// æ‹¼æŽ¥å±žæ€§å­—ç¬¦ä¸²ä»£ç NSMutableString *strM = [NSMutableString string];// 1.éåŽ†å­—å…¸ï¼ŒæŠŠå­—å…¸ä¸­çš„æ‰€æœ‰keyå–å‡ºæ¥ï¼Œç”Ÿæˆå¯¹åº”çš„å±žæ€§ä»£ç [dict enumerateKeysAndObjectsUsingBlock:^(id _Nonnull key, id _Nonnull obj, BOOL * _Nonnull stop) &#123;// ç±»åž‹ç»å¸¸å˜ï¼ŒæŠ½å‡ºæ¥NSString *type;if ([obj isKindOfClass:NSClassFromString(@&quot;__NSCFString&quot;)]) &#123;type = @&quot;NSString&quot;;&#125;else if ([obj isKindOfClass:NSClassFromString(@&quot;__NSCFArray&quot;)])&#123;type = @&quot;NSArray&quot;;&#125;else if ([obj isKindOfClass:NSClassFromString(@&quot;__NSCFNumber&quot;)])&#123;type = @&quot;int&quot;;&#125;else if ([obj isKindOfClass:NSClassFromString(@&quot;__NSCFDictionary&quot;)])&#123;type = @&quot;NSDictionary&quot;;&#125;// å±žæ€§å­—ç¬¦ä¸²NSString *str;if ([type containsString:@&quot;NS&quot;]) &#123;str = [NSString stringWithFormat:@&quot;@property (nonatomic, strong) %@ *%@;&quot;,type,key];&#125;else&#123;str = [NSString stringWithFormat:@&quot;@property (nonatomic, assign) %@ %@;&quot;,type,key];&#125;// æ¯ç”Ÿæˆå±žæ€§å­—ç¬¦ä¸²ï¼Œå°±è‡ªåŠ¨æ¢è¡Œã€‚[strM appendFormat:@&quot;\n%@\n&quot;,str];&#125;];// æŠŠæ‹¼æŽ¥å¥½çš„å­—ç¬¦ä¸²æ‰“å°å‡ºæ¥ï¼Œå°±å¥½äº†ã€‚NSLog(@&quot;%@&quot;,strM);&#125;@end å­—å…¸è½¬æ¨¡åž‹çš„æ–¹å¼ä¸€ï¼šKVC 12345678@implementation Status+ (instancetype)statusWithDict:(NSDictionary *)dict&#123;Status *status = [[self alloc] init];[status setValuesForKeysWithDictionary:dict];return status;&#125;@end è½¬æ¨¡åž‹å¼Šç«¯ï¼šå¿…é¡»ä¿è¯ï¼Œæ¨¡åž‹ä¸­çš„å±žæ€§å’Œå­—å…¸ä¸­çš„keyä¸€ä¸€å¯¹åº”ã€‚ å¦‚æžœä¸ä¸€è‡´ï¼Œå°±ä¼šè°ƒç”¨[ setValue:forUndefinedKey:] æŠ¥keyæ‰¾ä¸åˆ°çš„é”™ã€‚ åˆ†æž:æ¨¡åž‹ä¸­çš„å±žæ€§å’Œå­—å…¸çš„keyä¸ä¸€ä¸€å¯¹åº”ï¼Œç³»ç»Ÿå°±ä¼šè°ƒç”¨setValue:forUndefinedKey:æŠ¥é”™ã€‚ è§£å†³:é‡å†™å¯¹è±¡çš„setValue:forUndefinedKey:,æŠŠç³»ç»Ÿçš„æ–¹æ³•è¦†ç›–ï¼Œ å°±èƒ½ç»§ç»­ä½¿ç”¨KVCï¼Œå­—å…¸è½¬æ¨¡åž‹äº†ã€‚ //å› ä¸ºé€šè¿‡keyæ²¡æœ‰æ‰¾åˆ°å¯¹åº”çš„å±žæ€§ï¼Œæ‰€ä»¥è°ƒç”¨setValue:forUndefinedKey:æŠ¥é”™ï¼Œé‚£ä¹ˆï¼Œé€šè¿‡é€šè¿‡é‡æ–°è¿™ä¸ªæ–¹æ³•çš„å®žçŽ°å°±é¿å…äº†æŠ¥é”™123- (void)setValue:(id)value forUndefinedKey:(NSString *)key &#123; &#125; å­—å…¸è½¬æ¨¡åž‹çš„æ–¹å¼äºŒï¼šRuntime æ€è·¯ï¼šåˆ©ç”¨è¿è¡Œæ—¶ï¼ŒéåŽ†æ¨¡åž‹ä¸­æ‰€æœ‰å±žæ€§ï¼Œæ ¹æ®æ¨¡åž‹çš„å±žæ€§åï¼ŒåŽ»å­—å…¸ä¸­æŸ¥æ‰¾keyï¼Œå–å‡ºå¯¹åº”çš„å€¼ï¼Œç»™æ¨¡åž‹çš„å±žæ€§èµ‹å€¼ã€‚ æ­¥éª¤ï¼šæä¾›ä¸€ä¸ªNSObjectåˆ†ç±»ï¼Œä¸“é—¨å­—å…¸è½¬æ¨¡åž‹ï¼Œä»¥åŽæ‰€æœ‰æ¨¡åž‹éƒ½å¯ä»¥é€šè¿‡è¿™ä¸ªåˆ†ç±»è½¬ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110@implementation ViewController- (void)viewDidLoad &#123;[super viewDidLoad];// è§£æžPlistæ–‡ä»¶NSString *filePath = [[NSBundle mainBundle] pathForResource:@&quot;status.plist&quot; ofType:nil];NSDictionary *statusDict = [NSDictionary dictionaryWithContentsOfFile:filePath];// èŽ·å–å­—å…¸æ•°ç»„NSArray *dictArr = statusDict[@&quot;statuses&quot;];// è‡ªåŠ¨ç”Ÿæˆæ¨¡åž‹çš„å±žæ€§å­—ç¬¦ä¸²// [NSObject resolveDict:dictArr[0][@&quot;user&quot;]];_statuses = [NSMutableArray array];// éåŽ†å­—å…¸æ•°ç»„for (NSDictionary *dict in dictArr) &#123;Status *status = [Status modelWithDict:dict];[_statuses addObject:status];&#125;// æµ‹è¯•æ•°æ®NSLog(@&quot;%@ %@&quot;,_statuses,[_statuses[0] user]);&#125;@end@implementation NSObject (Model)+ (instancetype)modelWithDict:(NSDictionary *)dict&#123;// æ€è·¯ï¼šéåŽ†æ¨¡åž‹ä¸­æ‰€æœ‰å±žæ€§-ã€‹ä½¿ç”¨è¿è¡Œæ—¶// 0.åˆ›å»ºå¯¹åº”çš„å¯¹è±¡id objc = [[self alloc] init];// 1.åˆ©ç”¨runtimeç»™å¯¹è±¡ä¸­çš„æˆå‘˜å±žæ€§èµ‹å€¼// class_copyIvarList:èŽ·å–ç±»ä¸­çš„æ‰€æœ‰æˆå‘˜å±žæ€§// Ivarï¼šæˆå‘˜å±žæ€§çš„æ„æ€// ç¬¬ä¸€ä¸ªå‚æ•°ï¼šè¡¨ç¤ºèŽ·å–å“ªä¸ªç±»ä¸­çš„æˆå‘˜å±žæ€§// ç¬¬äºŒä¸ªå‚æ•°ï¼šè¡¨ç¤ºè¿™ä¸ªç±»æœ‰å¤šå°‘æˆå‘˜å±žæ€§ï¼Œä¼ å…¥ä¸€ä¸ªIntå˜é‡åœ°å€ï¼Œä¼šè‡ªåŠ¨ç»™è¿™ä¸ªå˜é‡èµ‹å€¼// è¿”å›žå€¼Ivar *ï¼šæŒ‡çš„æ˜¯ä¸€ä¸ªivaræ•°ç»„ï¼Œä¼šæŠŠæ‰€æœ‰æˆå‘˜å±žæ€§æ”¾åœ¨ä¸€ä¸ªæ•°ç»„ä¸­ï¼Œé€šè¿‡è¿”å›žçš„æ•°ç»„å°±èƒ½å…¨éƒ¨èŽ·å–åˆ°ã€‚/* ç±»ä¼¼ä¸‹é¢è¿™ç§å†™æ³•Ivar ivar;Ivar ivar1;Ivar ivar2;// å®šä¹‰ä¸€ä¸ªivarçš„æ•°ç»„aIvar a[] = &#123;ivar,ivar1,ivar2&#125;;// ç”¨ä¸€ä¸ªIvar *æŒ‡é’ˆæŒ‡å‘æ•°ç»„ç¬¬ä¸€ä¸ªå…ƒç´ Ivar *ivarList = a;// æ ¹æ®æŒ‡é’ˆè®¿é—®æ•°ç»„ç¬¬ä¸€ä¸ªå…ƒç´ ivarList[0];*/unsigned int count;// èŽ·å–ç±»ä¸­çš„æ‰€æœ‰æˆå‘˜å±žæ€§Ivar *ivarList = class_copyIvarList(self, &amp;count);for (int i = 0; i &lt; count; i++) &#123;// æ ¹æ®è§’æ ‡ï¼Œä»Žæ•°ç»„å–å‡ºå¯¹åº”çš„æˆå‘˜å±žæ€§Ivar ivar = ivarList[i];// èŽ·å–æˆå‘˜å±žæ€§åNSString *name = [NSString stringWithUTF8String:ivar_getName(ivar)];// å¤„ç†æˆå‘˜å±žæ€§å-&gt;å­—å…¸ä¸­çš„key// ä»Žç¬¬ä¸€ä¸ªè§’æ ‡å¼€å§‹æˆªå–NSString *key = [name substringFromIndex:1];// æ ¹æ®æˆå‘˜å±žæ€§ååŽ»å­—å…¸ä¸­æŸ¥æ‰¾å¯¹åº”çš„valueid value = dict[key];// äºŒçº§è½¬æ¢:å¦‚æžœå­—å…¸ä¸­è¿˜æœ‰å­—å…¸ï¼Œä¹Ÿéœ€è¦æŠŠå¯¹åº”çš„å­—å…¸è½¬æ¢æˆæ¨¡åž‹// åˆ¤æ–­ä¸‹valueæ˜¯å¦æ˜¯å­—å…¸if ([value isKindOfClass:[NSDictionary class]]) &#123;// å­—å…¸è½¬æ¨¡åž‹// èŽ·å–æ¨¡åž‹çš„ç±»å¯¹è±¡ï¼Œè°ƒç”¨modelWithDict// æ¨¡åž‹çš„ç±»åå·²çŸ¥ï¼Œå°±æ˜¯æˆå‘˜å±žæ€§çš„ç±»åž‹// èŽ·å–æˆå‘˜å±žæ€§ç±»åž‹NSString *type = [NSString stringWithUTF8String:ivar_getTypeEncoding(ivar)];// ç”Ÿæˆçš„æ˜¯è¿™ç§@&quot;@\&quot;User\&quot;&quot; ç±»åž‹ -ã€‹ @&quot;User&quot; åœ¨OCå­—ç¬¦ä¸²ä¸­ \&quot; -&gt; &quot;ï¼Œ\æ˜¯è½¬ä¹‰çš„æ„æ€ï¼Œä¸å ç”¨å­—ç¬¦// è£å‰ªç±»åž‹å­—ç¬¦ä¸²NSRange range = [type rangeOfString:@&quot;\&quot;&quot;];type = [type substringFromIndex:range.location + range.length];range = [type rangeOfString:@&quot;\&quot;&quot;];// è£å‰ªåˆ°å“ªä¸ªè§’æ ‡ï¼Œä¸åŒ…æ‹¬å½“å‰è§’æ ‡type = [type substringToIndex:range.location];// æ ¹æ®å­—ç¬¦ä¸²ç±»åç”Ÿæˆç±»å¯¹è±¡Class modelClass = NSClassFromString(type);if (modelClass) &#123; // æœ‰å¯¹åº”çš„æ¨¡åž‹æ‰éœ€è¦è½¬// æŠŠå­—å…¸è½¬æ¨¡åž‹value = [modelClass modelWithDict:value];&#125;&#125;// ä¸‰çº§è½¬æ¢ï¼šNSArrayä¸­ä¹Ÿæ˜¯å­—å…¸ï¼ŒæŠŠæ•°ç»„ä¸­çš„å­—å…¸è½¬æ¢æˆæ¨¡åž‹.// åˆ¤æ–­å€¼æ˜¯å¦æ˜¯æ•°ç»„if ([value isKindOfClass:[NSArray class]]) &#123;// åˆ¤æ–­å¯¹åº”ç±»æœ‰æ²¡æœ‰å®žçŽ°å­—å…¸æ•°ç»„è½¬æ¨¡åž‹æ•°ç»„çš„åè®®if ([self respondsToSelector:@selector(arrayContainModelClass)]) &#123;// è½¬æ¢æˆidç±»åž‹ï¼Œå°±èƒ½è°ƒç”¨ä»»ä½•å¯¹è±¡çš„æ–¹æ³•id idSelf = self;// èŽ·å–æ•°ç»„ä¸­å­—å…¸å¯¹åº”çš„æ¨¡åž‹NSString *type = [idSelf arrayContainModelClass][key];// ç”Ÿæˆæ¨¡åž‹Class classModel = NSClassFromString(type);NSMutableArray *arrM = [NSMutableArray array];// éåŽ†å­—å…¸æ•°ç»„ï¼Œç”Ÿæˆæ¨¡åž‹æ•°ç»„for (NSDictionary *dict in value) &#123;// å­—å…¸è½¬æ¨¡åž‹id model = [classModel modelWithDict:dict];[arrM addObject:model];&#125;// æŠŠæ¨¡åž‹æ•°ç»„èµ‹å€¼ç»™valuevalue = arrM;&#125;&#125;if (value) &#123; // æœ‰å€¼ï¼Œæ‰éœ€è¦ç»™æ¨¡åž‹çš„å±žæ€§èµ‹å€¼// åˆ©ç”¨KVCç»™æ¨¡åž‹ä¸­çš„å±žæ€§èµ‹å€¼[objc setValue:value forKey:key];&#125;&#125;return objc;&#125;@end]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[UITableView é¡¶éƒ¨åŠ å…¥è§†å·®å›¾ç‰‡çš„æ•ˆæžœ]]></title>
      <url>%2F2017%2F03%2F07%2FUITableView-%E9%A1%B6%E9%83%A8%E5%8A%A0%E5%85%A5%E8%A7%86%E5%B7%AE%E5%9B%BE%E7%89%87%E7%9A%84%E6%95%88%E6%9E%9C%2F</url>
      <content type="text"><![CDATA[UITableView é¡¶éƒ¨åŠ å…¥è§†å·®å›¾ç‰‡çš„æ•ˆæžœ12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182#import &quot;ViewController.h&quot;@interface ViewController ()&lt;UITableViewDelegate,UITableViewDataSource&gt;@property(nonatomic,weak) UIImageView *imageView;@property(nonatomic,weak) UITableView *tableView;@end@implementation ViewController-(UITableView *)tableView&#123;if (_tableView == nil) &#123;UITableView *tableView = [[UITableView alloc] initWithFrame:self.view.bounds];_tableView = tableView;_tableView.contentInset = UIEdgeInsetsMake(300, 0, 0, 0);_tableView.dataSource = self;_tableView.delegate = self;[self.view addSubview:tableView];&#125;return _tableView;&#125;-(UIImageView *)imageView&#123;if (_imageView == nil) &#123;UIImageView *imageView = [[UIImageView alloc] initWithFrame:CGRectMake(0, -150, self.view.bounds.size.width, 300)];imageView.layer.anchorPoint = CGPointMake(0.5, 0);_imageView = imageView;_imageView.image = [UIImage imageNamed:@&quot;IMG_0084&quot;];[self.view addSubview:_imageView];&#125;return _imageView;&#125;-(void)viewWillAppear:(BOOL)animated&#123;[super viewWillAppear:animated];[self.tableView addObserver:self forKeyPath:@&quot;contentOffset&quot; options:NSKeyValueObservingOptionNew context:nil];[UIView beginAnimations:nil context:nil];[self makeParallaxEffect];[UIView commitAnimations];&#125;-(void)viewWillDisappear:(BOOL)animated&#123;[super viewWillDisappear:animated];[self.tableView removeObserver:self forKeyPath:@&quot;contentOffset&quot;];[UIView beginAnimations:nil context:nil];self.navigationController.navigationBar.alpha = 1.0;[UIView commitAnimations];&#125;-(void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary&lt;NSKeyValueChangeKey,id&gt; *)change context:(void *)context&#123;if (object == _tableView) &#123;[self makeParallaxEffect];&#125;&#125;-(void)makeParallaxEffect&#123;CGFloat y = [[self.tableView valueForKey:@&quot;contentOffset&quot;] CGPointValue].y;if (y &lt; - 300.0) &#123;CGFloat scale = fabs(y) / 300;_imageView.transform = CGAffineTransformMakeScale(scale, scale);&#125;else if(y &lt; 0)&#123;_imageView.transform = CGAffineTransformMakeTranslation(0, -(300 + y));//y=0 alp=1 y=-300 alp=0self.navigationController.navigationBar.alpha = (y + 300)/300.0;_imageView.alpha = (1 - self.navigationController.navigationBar.alpha);&#125;&#125;-(void)viewDidLoad&#123;//è¿™é‡Œè‡ªå·±æ¥è®¡ç®—contentInsetï¼Œæ‰€ä»¥ï¼Œå°†automaticallyAdjustsScrollViewInsetså±žæ€§å€¼è®¾ç½®ä¸ºNOself.automaticallyAdjustsScrollViewInsets = NO;//éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™é‡Œçš„_tableViewè¦å…ˆäºŽ_imageViewæ·»åŠ ï¼Œæ‰èƒ½ä¿è¯_imageViewèƒ½å¤Ÿæ˜¾ç¤ºå‡ºæ¥self.tableView.backgroundColor = [UIColor whiteColor];self.imageView.backgroundColor = [UIColor whiteColor];&#125;-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section&#123;return 200;&#125;-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath&#123;UITableViewCell *cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:nil];cell.textLabel.text = @&quot;test&quot;;return cell;&#125;-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath&#123;[self performSegueWithIdentifier:@&quot;tag&quot; sender:nil];&#125;@end]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[innerHTMLå’ŒcreatTextCodeåŒºåˆ†]]></title>
      <url>%2F2017%2F03%2F05%2FinnerHTML%E5%92%8CcreatTextCode%E5%8C%BA%E5%88%86%2F</url>
      <content type="text"><![CDATA[innerHTML ä¸Ž createTextNodeinnerHTMLåœ¨jsæ˜¯åŒå‘åŠŸèƒ½:èŽ·å–å¯¹è±¡çš„å†…å®¹æˆ–å‘å¯¹è±¡æ’å…¥å†…å®¹1234567891011121314&lt;p id=&quot;pid&quot;&gt;æˆ‘å°†è¢«æ›¿æ¢&lt;/p&gt;&lt;button onclick=&quot;replaceContentFunction()&quot;&gt;ç‚¹å‡»æ›¿æ¢æ ‡ç­¾&lt;/button&gt;&lt;p id=&quot;getInnerHTMLID&quot;&gt;æˆ‘çš„å†…å®¹å°†è¢«èŽ·å–&lt;/p&gt;&lt;button onclick=&quot;getInnerHTMLFuncation()&quot;&gt;ç‚¹æˆ‘èŽ·å–å†…å®¹&lt;/button&gt;&lt;script&gt;function replaceContentFunction() &#123;var node = document.getElementById(&quot;pid&quot;);node.innerHTML = &quot;æˆ‘å·²ç»è¢«æ›¿æ¢å•¦ðŸ˜­&quot;;&#125;function getInnerHTMLFuncation() &#123;var node = document.getElementById(&quot;getInnerHTMLID&quot;);alert(node.innerHTML);&#125;&lt;/script&gt; æˆ‘å°†è¢«æ›¿æ¢ ç‚¹å‡»æ›¿æ¢æ ‡ç­¾ æˆ‘çš„å†…å®¹å°†è¢«èŽ·å– ç‚¹æˆ‘èŽ·å–å†…å®¹ function replaceContentFunction() { var node = document.getElementById("pid"); node.innerHTML = "æˆ‘å·²ç»è¢«æ›¿æ¢å•¦ðŸ˜­"; } function getInnerHTMLFuncation() { var node = document.getElementById("getInnerHTMLID"); alert(node.innerHTML); } innerHTMLä¸ŽcreateTextNodeåŒºåˆ«:éƒ½å¯ä»¥æŠŠä¸€æ®µå†…å®¹æ·»åŠ åˆ°ä¸€ä¸ªèŠ‚ç‚¹ä¸­,åŒºåˆ«åœ¨äºŽ:å¦‚æžœæ·»åŠ çš„å†…å®¹å½“ä¸­æœ‰htmlæ ‡ç­¾,è€Œè¿™æ®µæ ‡ç­¾åœ¨createTextNodeæ–¹æ³•ä¸­ä¼šè¢«å½“åšæ–‡æœ¬å†…å®¹æ¥å¤„ç†,ä¸ä¼šè¢«æµè§ˆå™¨è§£æž,è€Œåœ¨innerHTMLä¸­ä¼šè¢«å½“åšæ ‡ç­¾è¿›è¡Œè§£æž.]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[HTMLå­¦ä¹ ä¹‹Locationå¯¹è±¡]]></title>
      <url>%2F2017%2F03%2F05%2FHTML%E5%AD%A6%E4%B9%A0%E4%B9%8BLocation%E5%AF%B9%E8%B1%A1%2F</url>
      <content type="text"><![CDATA[Locationå¯¹è±¡åŒ…å«æœ‰å…³å½“å‰URLçš„ä¿¡æ¯,Locationå¯¹è±¡æ˜¯windowå¯¹è±¡çš„ä¸€éƒ¨åˆ†,å¯é€šè¿‡window.locationæ¥è®¿é—® Locationå¯¹è±¡æ–¹æ³• reload()å®šä¹‰å’Œç”¨æ³•reload() æ–¹æ³•ç”¨äºŽé‡æ–°åŠ è½½å½“å‰æ–‡æ¡£ã€‚å¦‚æžœè¯¥æ–¹æ³•æ²¡æœ‰è§„å®šå‚æ•°ï¼Œæˆ–è€…å‚æ•°æ˜¯ falseï¼Œå®ƒå°±ä¼šç”¨ HTTP å¤´ If-Modified-Sinceæ¥æ£€æµ‹æœåŠ¡å™¨ä¸Šçš„æ–‡æ¡£æ˜¯å¦å·²æ”¹å˜ã€‚å¦‚æžœæ–‡æ¡£å·²æ”¹å˜ï¼Œreload() ä¼šå†æ¬¡ä¸‹è½½è¯¥æ–‡æ¡£ã€‚å¦‚æžœæ–‡æ¡£æœªæ”¹å˜ï¼Œåˆ™è¯¥æ–¹æ³•å°†ä»Žç¼“å­˜ä¸­è£…è½½æ–‡æ¡£ã€‚è¿™ä¸Žç”¨æˆ·å•å‡»æµè§ˆå™¨çš„åˆ·æ–°æŒ‰é’®çš„æ•ˆæžœæ˜¯å®Œå…¨ä¸€æ ·çš„ã€‚ å¦‚æžœæŠŠè¯¥æ–¹æ³•çš„å‚æ•°è®¾ç½®ä¸º trueï¼Œé‚£ä¹ˆæ— è®ºæ–‡æ¡£çš„æœ€åŽä¿®æ”¹æ—¥æœŸæ˜¯ä»€ä¹ˆï¼Œå®ƒéƒ½ä¼šç»•è¿‡ç¼“å­˜ï¼Œä»ŽæœåŠ¡å™¨ä¸Šé‡æ–°ä¸‹è½½è¯¥æ–‡æ¡£ã€‚è¿™ä¸Žç”¨æˆ·åœ¨å•å‡»æµè§ˆå™¨çš„åˆ·æ–°æŒ‰é’®æ—¶æŒ‰ä½ Shiftå¥çš„æ•ˆæžœæ˜¯å®Œå…¨ä¸€æ ·ã€‚ å®žä¾‹1234&lt;script&gt;function btnClickFunc() &#123; window.location.reload()&#125;&lt;/script&gt;&lt;button onclick=&quot;btnClickFunc()&quot;&gt;ç‚¹å‡»åˆ·æ–°å½“å‰é¡µé¢&lt;/button&gt; function btnClickFunc() { window.location.reload()} ç‚¹å‡»åˆ·æ–°å½“å‰é¡µé¢ assign()å®šä¹‰å’Œç”¨æ³•assign() æ–¹æ³•å¯åŠ è½½ä¸€ä¸ªæ–°çš„æ–‡æ¡£ã€‚è¯­æ³•1location.assign(URL) å®žä¾‹1234&lt;script&gt;function reloadNewPageBtnClickFunc() &#123;window.location.assign(&quot;https:www.baidu.com&quot;)&#125;&lt;/script&gt;&lt;button onclick=&quot;reloadNewPageBtnClickFunc()&quot;&gt;ç‚¹å‡»åŠ è½½ä¸€ä¸ªæ–°çš„url&lt;/button&gt; function reloadNewPageBtnClickFunc() {window.location.assign(â€œhttps:www.baidu.comâ€)} ç‚¹å‡»åŠ è½½ä¸€ä¸ªæ–°çš„url Locationå¯¹è±¡å±žæ€§ å±žæ€§æè¿°hostnameè®¾ç½®æˆ–è¿”å›žå½“å‰ URL çš„ä¸»æœºåã€‚hrefè®¾ç½®æˆ–è¿”å›žå®Œæ•´çš„ URLã€‚pathnameè®¾ç½®æˆ–è¿”å›žå½“å‰ URL çš„è·¯å¾„éƒ¨åˆ†ã€‚protocolè®¾ç½®æˆ–è¿”å›žå½“å‰ URL çš„åè®®ã€‚searchè®¾ç½®æˆ–è¿”å›žä»Žé—®å· (?) å¼€å§‹çš„ URLï¼ˆæŸ¥è¯¢éƒ¨åˆ†ï¼‰ã€‚]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[URL Scheme]]></title>
      <url>%2F2017%2F03%2F04%2FURL-Scheme%2F</url>
      <content type="text"><![CDATA[URL Schemeç»å¸¸ä½¿ç”¨çš„åœ°æ–¹æœ‰:APPé—´è·³è½¬,æœåŠ¡å™¨é€šçŸ¥å®¢æˆ·ç«¯çš„è·³è½¬ä»¥åŠH5ä¸ŽNaativeè·³è½¬ schemeä¸‰æ–¹é¢çš„ä½œç”¨: æœåŠ¡å™¨ä¸‹å‘è·³è½¬è·¯å¾„,å®¢æˆ·ç«¯æ ¹æ®æœåŠ¡å™¨å‘é€çš„è·³è½¬è·¯å¾„è¿›è¡Œè·³è½¬H5é¡µé¢ç‚¹å‡»é”šç‚¹æ ¹æ®é”šç‚¹å…·ä½“è·³è½¬è·¯å¾„APPç«¯è·³è½¬å…·ä½“çš„é¡µé¢APPç«¯æ”¶åˆ°æœåŠ¡å™¨ç«¯ä¸‹å‘çš„PUSHé€šçŸ¥æ æ¶ˆæ¯,æ ¹æ®æ¶ˆæ¯çš„è·³è½¬è·¯å¾„,è·³è½¬ç›¸å…³é¡µé¢ URL Scheme æ¦‚è¿°å®¢æˆ·ç«¯åº”ç”¨å¯ä»¥å‘æ“ä½œç³»ç»Ÿæ³¨å†Œä¸€ä¸ª URL schemeï¼Œè¯¥ scheme ç”¨äºŽä»Žæµè§ˆå™¨æˆ–å…¶ä»–åº”ç”¨ä¸­å¯åŠ¨æœ¬åº”ç”¨ã€‚é€šè¿‡æŒ‡å®šçš„ URL å­—æ®µï¼Œå¯ä»¥è®©åº”ç”¨åœ¨è¢«è°ƒèµ·åŽç›´æŽ¥æ‰“å¼€æŸäº›ç‰¹å®šé¡µé¢ï¼Œæ¯”å¦‚è½¦è¾†è¯¦æƒ…é¡µã€è®¢å•è¯¦æƒ…é¡µã€æ¶ˆæ¯é€šçŸ¥é¡µã€ä¿ƒé”€å¹¿å‘Šé¡µç­‰ç­‰ã€‚ä¹Ÿå¯ä»¥æ‰§è¡ŒæŸäº›æŒ‡å®šåŠ¨ä½œï¼Œå¦‚è®¢å•æ”¯ä»˜ç­‰ã€‚ä¹Ÿå¯ä»¥åœ¨åº”ç”¨å†…é€šè¿‡ html é¡µæ¥ç›´æŽ¥è°ƒç”¨æ˜¾ç¤º app å†…çš„æŸä¸ªé¡µé¢ã€‚ URL scheme çš„æ ¼å¼å®¢æˆ·ç«¯è‡ªå®šä¹‰çš„ URL ä½œä¸ºä»Žä¸€ä¸ªåº”ç”¨è°ƒç”¨å¦ä¸€ä¸ªçš„åŸºç¡€ï¼Œéµå¾ª RFC 1808 (Relative Uniform Resource Locators) æ ‡å‡†ã€‚è¿™è·Ÿæˆ‘ä»¬å¸¸è§çš„ç½‘é¡µå†…å®¹ URL æ ¼å¼ä¸€æ ·ã€‚ä¸€ä¸ªæ™®é€šçš„ URL åˆ†ä¸ºå‡ ä¸ªéƒ¨åˆ†ï¼Œschemeã€hostã€relativePathã€queryã€‚æˆ‘ä»¬ç”¨åˆ°çš„NSURL123NSURL *url = [NSURL URLWithString:@&quot;http://www.testurl.com:8080/subpath/subsubpath?uid=123&amp;gid=456&quot;];[url scheme]ä¸ºhttp, [url host]ä¸ºwww.testurl.comï¼Œ[url port]ä¸º8080ï¼Œ[url path]ä¸º/subpath/subsubpathï¼Œ[url lastPathComponent]ä¸ºsubsubpathï¼Œ[url query]ä¸ºuid=123&amp;gid=456 ä¸€ä¸ªåº”ç”¨ä¸­ä½¿ç”¨çš„ URL ä¾‹å­ï¼ˆè¯¥ URL ä¼šè°ƒèµ·è½¦è¾†è¯¦æƒ…é¡µï¼‰ï¼š12zqprojectmobile://project/carDetail?car_id=123456schemeä¸ºzqprojectmobile,hostä¸ºproject,relativePathä¸º/carDetail,queryä¸ºcar_id=123456 é¡¹ç›®ä¸­å®šä¹‰äº†ä¸“é—¨çš„ç±»å‘½åä¸ºJumpURLHandleï¼Œé€šè¿‡ç±»æ–¹æ³•parseURL:æ¥å¤„ç†å‚æ•°ä¸­çš„urlã€‚æœ¬æ–‡ä»¥æ­¤ä¸ºä¾‹è®²è§£schemeçš„å®šä¹‰ä¸Žè§£æžã€‚é¦–å…ˆå®¢æˆ·ç«¯åº”ç”¨å‘æ“ä½œç³»ç»Ÿæ³¨å†Œä¸€ä¸ªæˆ–è€…å¤šä¸ª URL schemeï¼Œä¾‹å¦‚é¡¹ç›®ä¸­å°±å®š ä¹‰äº†å¤šä¸ªåˆ†åˆ«schemeï¼Œåˆ†åˆ«ä¸ºï¼š 123zqprojectmobile: å¯¹åº”æ™®é€šAPPé—´è·³è½¬schemezqprojectwxpay: å¯¹åº”å¾®ä¿¡æ”¯ä»˜å®Œæˆä¹‹åŽè·³è½¬å›žæ¥çš„schemezqprojectalipayï¼šå¯¹åº”æ”¯ä»˜å®æ”¯ä»˜å®Œæˆä¹‹åŽè·³è½¬å›žæ¥çš„scheme å¯¹åº”çš„parseURL:æ–¹æ³•é‡Œè§£æžä¸ºï¼š1234567891011121314151617181920212223//ä¸€ä¸ªä¸“é—¨çš„ç±»ç”¨äºŽå¤„ç†è·³è½¬,å¹¶ä¸”æä¾›äº†ä¸€ä¸ªæ–¹æ³•è§£æžurl+ (BOOL)parseURL:(NSURL *)url&#123;//å¯¹èŽ·å–åˆ°çš„urlè¿›è¡Œè§£æžåˆ¤æ–­,ç¡®å®šè·³è½¬çš„æ€§è´¨// æ”¯ä»˜å®å®¢æˆ·ç«¯æ”¯ä»˜åŽçš„å›žè°ƒif ([[url scheme] isEqualToString:@&quot;zqprojectalipay&quot;]|| ([[[url scheme] lowercaseString] isEqualToString:kUuyongcheAlipayScheme]))&#123;return æ”¯ä»˜å®æ”¯ä»˜å®ŒæˆåŽçš„å›žè°ƒå¤„ç†æ–¹æ³•;&#125;// å¾®ä¿¡å®¢æˆ·ç«¯æ”¯ä»˜åŽçš„å›žè°ƒ åè®®æ˜¯zqprojectwxpayå¹¶ä¸”hostæ˜¯pay,åˆ™å±žäºŽå¾®ä¿¡æ”¯ä»˜å®Œæˆä¹‹åŽçš„å›žè°ƒelse if ([url.scheme isEqualToString:@&quot;zqprojectwxpay&quot;] &amp;&amp; [url.host isEqualToString:@&quot;pay&quot;])&#123;return å¾®ä¿¡æ”¯ä»˜å®ŒæˆåŽçš„å›žè°ƒå¤„ç†æ–¹æ³•;&#125;// æœ¬åº”ç”¨ scheme è°ƒç”¨else if (([[url scheme] isEqualToString:@&quot;zqprojectmobile&quot;])|| ([[[url scheme] lowercaseString] isEqualToString:@&quot;zqprojectmobile&quot;]))&#123;return [[JumpURLHandle getInstance] parseAppUrl:url];&#125;return NO;&#125; å®šä¹‰relativePathï¼Œå¹¶é€šè¿‡relativePathæ¥åˆ¤æ–­æ˜¯æ‰§è¡ŒåŠ¨ä½œè¿˜æ˜¯è·³è½¬é¡µé¢ï¼Œå½“æ‰§è¡ŒåŠ¨ä½œæ—¶æŠŠrelativePathå®šä¹‰ä¸ºâ€/actionâ€ï¼Œåœ¨è§£æžæ—¶å¦‚æžœurlçš„relativePathæ˜¯â€/actionâ€åˆ™è·³è½¬åˆ°æ‰§è¡ŒåŠ¨ä½œçš„å¤„ç†æ–¹æ³•é‡Œï¼Œå¦åˆ™æ‰§è¡Œè·³è½¬é¡µé¢çš„é€»è¾‘ã€‚ä¾‹å¦‚ï¼š12345zqprojectmobile://project/action?name=backï¼ŒrelativePathä¸º/actionï¼Œæ‰§è¡ŒåŠ¨ä½œï¼ˆè¿”å›žå‰é¡µï¼‰zqprojectmobile://project/order?order_id=42347645&amp;type=2relativePathä¸º/orderï¼Œæ‰§è¡Œè·³è½¬é¡µé¢çš„é€»è¾‘ ä»£ç ï¼š12345678910111213141516- (BOOL)parseAppUrl:(NSURL *)url&#123;NSString *relativePath = [url relativePath];// scheme è°ƒèµ·æ‰§è¡ŒåŠ¨ä½œif ([relativePath isEqualToString:@&quot;/action&quot;])&#123;[self jumpActions:url];&#125;// scheme è°ƒèµ·è·³è½¬é¡µé¢else&#123;[self jumpNativeViewControllers:url];&#125;return YES;&#125; å¦‚æžœæ˜¯æ‰§è¡ŒåŠ¨ä½œçš„é€»è¾‘ï¼ŒèŽ·å–queryï¼Œå­—ç¬¦ä¸²å¤„ç†ï¼ŒèŽ·å–é”®å€¼å¯¹ï¼ŒèŽ·å–åç§°ä¸ºâ€nameâ€çš„keyå¯¹åº”çš„å­—ç¬¦ä¸²ï¼Œå­—ç¬¦ä¸²å¯¹æ¯”åˆ¤æ–­æ‰§è¡Œç›¸åº”çš„åŠ¨ä½œä¾‹å¦‚ï¼š12qprojectmobile://project/action?name=backï¼ŒrelativePathä¸º/actionï¼Œqueryä¸ºname=backï¼Œå­—ç¬¦ä¸²å¤„ç†åŽå¾—åˆ°å­—å…¸@&#123;name:back&#125;, ä»£ç ï¼š1234567891011- (void)jumpActions:(NSURL *)url&#123;//dictionaryFromQueryComponentsä¸ºå­—ç¬¦ä¸²å¤„ç†æ–¹æ³•ï¼Œå¤„ç†queryå¾—åˆ°å­—å…¸NSDictionary *dictionaryQuery = [[url query] dictionaryFromQueryComponents];NSString *actionName = [dictionaryQuery objectForKey:@&quot;name&quot;];// è¿”å›žå‰é¢çš„é¡µé¢if ([actionName isEqualToString:@&quot;back&quot;])&#123;//è¿”å›žä¸Šä¸€ä¸ªé¡µé¢çš„åŠ¨ä½œ&#125; å¦‚æžœæ˜¯æ‰§è¡Œè·³è½¬é¡µé¢çš„é€»è¾‘ï¼Œå¯ä»¥ç›´æŽ¥å°†è¦è·³è½¬çš„é¡µé¢è®¾ç½®ä¸ºrelativePathçš„å€¼ï¼Œç„¶åŽèŽ·å–relativePathå­—ç¬¦ä¸²è¿›è¡Œå¯¹æ¯”è·³è½¬ç›¸åº”çš„é¡µé¢ã€‚å¦‚æžœé¡µé¢è·³è½¬éœ€è¦ä¼ å€¼å¯ä»¥æ”¾åˆ°queryé‡Œï¼ŒèŽ·å–urlçš„queryï¼Œå­—ç¬¦ä¸²å¤„ç†ï¼ŒèŽ·å–é”®å€¼å¯¹ï¼Œä¸€ä¸€èµ‹å€¼ï¼Œä¾‹å¦‚ï¼š1234zqprojectmobile://project/order?order_id=42347645&amp;type=2relativePathä¸º/orderï¼Œè·³è½¬åˆ°è®¢å•è¯¦æƒ…é¡µé¢queryä¸ºorder_id=42347645&amp;type=2ï¼Œå­—ç¬¦ä¸²å¤„ç†èŽ·å–å­—å…¸@&#123;order_id:42347645,type:2&#125;,è®¢å•è¯¦æƒ…é¡µé¢çš„è®¢å•idä¸ºorder_idå¯¹åº”çš„å€¼42347645ï¼Œè®¢å•ç±»åž‹ä¸º2 ä»£ç ï¼š123456789101112131415161718- (void)jumpNativeViewControllers:(NSURL *)url&#123;NSString *relativePath = [url relativePath];if ([relativePath isEqualToString:@&quot;/order&quot;])&#123;[self jumpOrder:url];&#125;&#125;- (void)jumpOrder:(NSURL *)url&#123;//dictionaryFromQueryComponentsä¸ºå­—ç¬¦ä¸²å¤„ç†æ–¹æ³•ï¼Œå¤„ç†queryå¾—åˆ°å­—å…¸NSDictionary *dictionaryQuery = [[url query] dictionaryFromQueryComponents];NSString *orderId = [dictionaryQuery objectForKey:@&quot;orderId&quot;];NSString *type = [dictionaryQuery objectForKey:@&quot;type&quot;];// åˆ›å»ºæ–°çš„è®¢å•é¡µé¢å¹¶ä¸”ä¼ å€¼&#125; é€šè¿‡ä»¥ä¸Šå‡ æ­¥å°±å¯ä»¥å®šä¹‰å‡ºä¸€ä¸ªå®Œæ•´çš„schemeåè®®å¹¶ä¸”åœ¨JumpURLHandleç±»é‡Œå®Œæˆè§£æž éœ€è¦ç”¨åˆ°JumpURLHandleè§£æžschemeçš„åœ°æ–¹APPç«¯æ”¶åˆ°æœåŠ¡å™¨ç«¯ä¸‹å‘çš„PUSHé€šçŸ¥æ æ¶ˆæ¯å’ŒAPPç›¸äº’è·³è½¬æ—¶éœ€è¦åœ¨AppDelegateé‡Œå¤„ç†12345678910/ åºŸå¼ƒ- (BOOL)application:(UIApplication *)application openURL:(NSURL *)url sourceApplication:(nullable NSString *)sourceApplication annotation:(id)annotation&#123;return [JumpURLHandle parseURL:url];&#125;æˆ–è€…- (BOOL)application:(UIApplication *)app openURL:(NSURL *)url options:(NSDictionary&lt;NSString*, id&gt; *)options&#123;return [JumpURLHandle parseURL:url];&#125; æœåŠ¡å™¨ä¸‹å‘è·³è½¬è·¯å¾„ï¼Œå®¢æˆ·ç«¯æ ¹æ®æœåŠ¡å™¨ä¸‹å‘è·³è½¬è·¯å¾„è·³è½¬ç›¸åº”çš„é¡µé¢,åœ¨ä¸€ä¸ªç½‘ç»œè¯·æ±‚æˆåŠŸçš„å›žè°ƒæ–¹æ³•æˆ–è€…blocké‡Œæ‹¿åˆ°urlï¼Œè°ƒç”¨[JumpURLHandle parseURL:url]; H5é¡µé¢ç‚¹å‡»é”šç‚¹ï¼Œæ ¹æ®é”šç‚¹å…·ä½“è·³è½¬è·¯å¾„APPç«¯è·³è½¬å…·ä½“çš„é¡µé¢ï¼Œåœ¨UIWebViewçš„ä»£ç†æ–¹æ³•12- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)requestnavigationType:(UIWebViewNavigationType)navigationType ä¸­è°ƒç”¨ï¼Œè¯¥å›žè°ƒæ–¹æ³•è¿”å›žYESæ—¶webViewæ‰ç»§ç»­åŠ è½½é¡µé¢ï¼Œå½“æˆ‘ä»¬é€šè¿‡schemeè§£æžå¤„ç†äº‹ä»¶æ—¶å°±ä¸éœ€è¦å†ç»§ç»­åŠ è½½é¡µé¢è¿”å›žNO.UIWebViewNavigationTypeçš„ç±»åž‹æœ‰ï¼šUIWebViewNavigationTypeLinkClickedï¼Œç”¨æˆ·è§¦å‡»äº†ä¸€ä¸ªé“¾æŽ¥ã€‚UIWebViewNavigationTypeFormSubmittedï¼Œç”¨æˆ·æäº¤äº†ä¸€ä¸ªè¡¨å•ã€‚UIWebViewNavigationTypeBackForwardï¼Œç”¨æˆ·è§¦å‡»å‰è¿›æˆ–è¿”å›žæŒ‰é’®ã€‚UIWebViewNavigationTypeReloadï¼Œç”¨æˆ·è§¦å‡»é‡æ–°åŠ è½½çš„æŒ‰é’®ã€‚UIWebViewNavigationTypeFormResubmittedï¼Œç”¨æˆ·é‡å¤æäº¤è¡¨å•UIWebViewNavigationTypeOtherï¼Œå‘ç”Ÿå…¶å®ƒè¡Œä¸ºã€‚å¹¶ä¸”ä¸èƒ½æ‰€æœ‰åœ¨webViewä¸Šå‘ç”Ÿçš„åŠ¨ä½œéƒ½é schemeåè®®è§£æžè§£å†³ï¼Œåªæœ‰åœ¨webViewå‘ç”Ÿç”¨æˆ·ç‚¹å‡»äº‹ä»¶æˆ–è€…å…¶ä»–è¡Œä¸ºæ—¶æˆ‘ä»¬æ‰æ ¹æ®request.urlè¿›ä¸€æ­¥åˆ¤æ–­æ˜¯å¦éœ€è¦schemeè§£æžï¼Œä»£ç å¦‚ä¸‹ï¼š12345678910111213141516-(BOOL)webView:(UIWebView *)webViewshouldStartLoadWithRequest:(NSURLRequest *)requestnavigationType:(UIWebViewNavigationType)navigationType&#123;if (navigationType == UIWebViewNavigationTypeLinkClicked|| navigationType == UIWebViewNavigationTypeOther)&#123;if (([[request.URL scheme] isEqualToString:@&quot;zqprojectmobile&quot;])|| ([[[request.URL scheme] lowercaseString] isEqualToString:@&quot;zqprojectmobile&quot;]))&#123;[JumpURLHandle parseURL:request.URL];return NO;&#125;&#125;return YES;&#125;]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[UIWebViewè®¤è¯†]]></title>
      <url>%2F2017%2F03%2F04%2FUIWebView%E8%AE%A4%E8%AF%86%2F</url>
      <content type="text"><![CDATA[Objective-Cå’ŒJavaScriptç›¸äº’è°ƒç”¨ é€šè¿‡éžæ¡†æž¶çš„æ–¹å¼å®Œæˆç›¸äº’çš„è°ƒç”¨OCè°ƒç”¨JavaScriptè¯­è¨€,é€šè¿‡UIWebViewçš„ä¸‹é¢æ–¹æ³•æ¥å®žçŽ°1- (nullable NSString *)stringByEvaluatingJavaScriptFromString:(NSString *)script; è¯¥æ–¹æ³•å‘UIWebViewä¼ é€’ä¸€æ®µéœ€è¦æ‰§è¡Œçš„JavaScriptæ–‡ä»¶,æ¥èŽ·å¾—æ‰§è¡Œçš„ç»“æžœJavaScriptè°ƒç”¨OCè¯­è¨€,åˆ©ç”¨UIWebViewçš„ç‰¹æ€§:åœ¨UIWebViewå†…å‘èµ·çš„æ‰€æœ‰ç½‘ç»œè¯·æ±‚éƒ½å¯ä»¥é€šè¿‡delegteå‡½æ•°åœ¨åŽŸç”Ÿç•Œé¢å¾—åˆ°é€šçŸ¥,æˆ‘ä»¬åœ¨UIWebViewä¸­å‘èµ·ä¸€ä¸ªç‰¹æ®Šçš„ç½‘ç»œè¯·æ±‚,è¯·æ±‚åŠ è½½çš„ç½‘å€å†…å®¹é€šå¸¸ä¸æ˜¯çœŸå®žçš„åœ°å€,åœ°å€å¾€å¾€ç±»ä¼¼è¿™æ ·:gap://methodname?argumentåœ¨delegateçš„å‡½æ•°ä¸­,æˆ‘ä»¬åªéœ€è¦å‘çŽ°æ˜¯gap://å¼€å¤´åœ°å€,å°±ä¸è¿›è¡ŒåŠ è½½è½¬è€Œæ‰§è¡Œç›¸åº”çš„è°ƒç”¨é€»è¾‘.123456789101112-(BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType&#123;NSURL *url = [request url];if ([[url scheme] isEqualToString:@&quot;gap&quot;])&#123;//åœ¨è¿™é‡ŒåšJavaScriptè°ƒç”¨ocçš„äº‹æƒ…...//åšå®Œä¹‹åŽç”¨ä»¥ä¸‹æ–¹æ³•è°ƒç”¨JavaScript[webView stringByEvaluatingJavaScriptFromString:@&quot;alert(&apos;done&apos;)&quot;];return NO;&#125;return YES;&#125; åœ¨UIWebViewå‘èµ·ä¸€ä¸ªç‰¹æ®Šçš„ç½‘ç»œè¯·æ±‚ä¹Ÿæœ‰å¾ˆå¤šçš„åŠžæ³•,æœ€åˆé€‚çš„æ–¹å¼æ˜¯ä¸€ä¸ªä¸´æ—¶çš„éšè—çš„iFrame,åœ¨iFrameä¸­åŠ è½½è¿™ä¸ªç‰¹æ®Šçš„ç½‘ç»œè¯·æ±‚12345678910111213141516171819function loadURL(url)&#123;var iFrame;//åˆ›å»ºä¸€ä¸ªä¸´æ—¶çš„å…ƒç´ iframe = document.createElement(&quot;IFRAME&quot;);//è®¾ç½®ä¸´æ—¶å…ƒç´ çš„å±žæ€§å’Œå±žæ€§å€¼//æ·»åŠ å±žæ€§,æºå¸¦urliFrame.setAttribute(&quot;src&quot;,url);//è®¾ç½®styleå±žæ€§,å¹¶ä¸”éšè—å…ƒç´ iFrame.setAttribute(&quot;style&quot;,&quot;display: none;&quot;);iFrame.setAttribute(&quot;height&quot;,&quot;Opx&quot;);iFrame.setAttribute(&quot;width&quot;,&quot;Opx&quot;);//è§„å®šæ˜¯å¦æ˜¾ç¤ºæ¡†æž¶å‘¨å›´çš„è¾¹æ¡†ã€‚iFrame.setAttribute(&quot;frameborder&quot;,&quot;0&quot;);//æ·»åŠ å±žæ€§åˆ°bodydocument.body.appendChild(iFrame);//å‘èµ·è¯·æ±‚åŽè¿™ä¸ªiFrameå°±æ²¡ç”¨äº†,æ‰€ä»¥éœ€è¦æŠŠå®ƒä»Ždomä¸Šç§»é™¤æŽ‰iFrame.parentNode.removeChild(iFrame);iFrame = null;&#125; å½“ç‚¹å‡»æŒ‰é’®çš„æ—¶å€™1&lt;button onclick=&quot;loadURL(&apos;abc&apos;)&quot;&gt;click&lt;/button&gt; ,é€šè¿‡è°ƒç”¨è¿™ä¸ªfunction,å°±èƒ½å¤Ÿåœ¨1- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType; æ–¹æ³•ä¸­æˆªå–åˆ°è¯·æ±‚å†…å®¹,ä»Žè€Œåˆ¤æ–­æ¥è‡ªäºŽjsçš„äº‹ä»¶ WebViewJavascriptBridgeçš„ä½¿ç”¨ iOSç«¯å¦‚ä½•ä½¿ç”¨1.å¼€å¯æ—¥å¿—12// å¼€å¯æ—¥å¿—ï¼Œæ–¹ä¾¿è°ƒè¯•[WebViewJavascriptBridge enableLogging]; 2.ç»™ObjCä¸ŽJSå»ºç«‹æ¡¥æ¢1234567ç»™å“ªä¸ªwebViewå»ºç«‹jsä¸Žobjcçš„æ²Ÿé€šæ¡¥æ¢self.bridge = [WebViewJavascriptBridge bridgeForWebView:webView];//ä»£ç†çš„è®¾ç½® è¿™ä¸ªåœ°æ–¹,é€šè¿‡è°ƒç”¨è¿™ä¸ªæ–¹æ³•,å°†è‡ªå·±è®¾ç½®ä¸ºä»£ç†,åªæ˜¯æ²¡æœ‰ç›´æŽ¥çš„é€šè¿‡.delegateæ¥è®¾ç½®,è€Œæ˜¯é€šè¿‡è°ƒç”¨WebViewJavascriptBridgeçš„setWebViewDelegate:æ–¹æ³•,éƒ½æ˜¯å°†è‡ªå·±è®¾ä¸ºä»£ç†,ä¸åŒçš„æ˜¯,é€šè¿‡.delegateæ˜¯ç›´æŽ¥å°†è‡ªå·±è®¾ç½®ä¸ºä»£ç†,è€Œé€šè¿‡è°ƒç”¨WebViewJavascriptBridgeçš„setWebViewDelegate,å®žçŽ°äº†åœ¨WebViewJavascriptBridgeä¸­å°†WebViewJavascriptBridgeè‡ªèº«è®¾ç½®ä¸ºçœŸæ­£çš„ä»£ç†,å®Œæˆå¯¹UIWebVieViewçš„ç›‘å¬,è€ŒåŒæ—¶å°†ä»£ç†çš„å›žè°ƒä¼ é€’å‡ºåŽ».è¿™æ ·å°±æ˜¯åŒä¸€å¯¹è±¡çš„ä¸¤ä¸ªç›‘å¬è€…[self.bridge setWebViewDelegate:self]; 3.æ³¨å†ŒHandleNameï¼Œç”¨äºŽç»™JSç«¯è°ƒç”¨iOSç«¯12345678910111213141516171819// JSä¸»åŠ¨è°ƒç”¨OjbCçš„æ–¹æ³•// è¿™æ˜¯JSä¼šè°ƒç”¨getUserIdFromObjCæ–¹æ³•ï¼Œè¿™æ˜¯OCæ³¨å†Œç»™JSè°ƒç”¨çš„// JSéœ€è¦å›žè°ƒï¼Œå½“ç„¶JSä¹Ÿå¯ä»¥ä¼ å‚æ•°è¿‡æ¥ã€‚dataå°±æ˜¯JSæ‰€ä¼ çš„å‚æ•°ï¼Œä¸ä¸€å®šéœ€è¦ä¼ // OCç«¯é€šè¿‡responseCallbackå›žè°ƒJSç«¯ï¼ŒJSå°±å¯ä»¥å¾—åˆ°æ‰€éœ€è¦çš„æ•°æ®[self.bridge registerHandler:@&quot;getUserIdFromObjC&quot; handler:^(id data, WVJBResponseCallback responseCallback) &#123;NSLog(@&quot;js call getUserIdFromObjC, data from js is %@&quot;, data);if (responseCallback) &#123;// åé¦ˆç»™JSresponseCallback(@&#123;@&quot;userId&quot;: @&quot;123456&quot;&#125;);&#125;&#125;];[self.bridge registerHandler:@&quot;getBlogNameFromObjC&quot; handler:^(id data, WVJBResponseCallback responseCallback) &#123;NSLog(@&quot;js call getBlogNameFromObjC, data from js is %@&quot;, data);if (responseCallback) &#123;// åé¦ˆç»™JSresponseCallback(@&#123;@&quot;blogName&quot;: @&quot;é¢ å€’ç¢Žç¢Žå¿µ&quot;&#125;);&#125;&#125;]; JSç«¯å¦‚ä½•ä½¿ç”¨1.å°†ä¸‹é¢çš„ä»£ç æ”¾åœ¨JSä¸­123456789101112/*è¿™æ®µä»£ç æ˜¯å›ºå®šçš„ï¼Œå¿…é¡»è¦æ”¾åˆ°jsä¸­*///è¿™æ®µä»£ç æ˜¯å›ºå®šçš„ä¹¦å†™å†…å®¹,å°†è¿™æ®µä»£ç copy and pasteåˆ°jså½“ä¸­function setupWebViewJavascriptBridge(callback) &#123;if (window.WebViewJavascriptBridge) &#123; return callback(WebViewJavascriptBridge); &#125;if (window.WVJBCallbacks) &#123; return window.WVJBCallbacks.push(callback); &#125;window.WVJBCallbacks = [callback];var WVJBIframe = document.createElement(&apos;iframe&apos;);WVJBIframe.style.display = &apos;none&apos;;WVJBIframe.src = &apos;wvjbscheme://__BRIDGE_LOADED__&apos;;document.documentElement.appendChild(WVJBIframe);setTimeout(function() &#123; document.documentElement.removeChild(WVJBIframe) &#125;, 0)&#125; 2.åœ¨ä¸‹é¢çš„æ–¹æ³•å½“ä¸­å†™ç›¸å…³çš„jsä»£ç :1234setupWebViewJavascriptBridge(function(bridge) &#123;/* Initialize your app here */æ‰€æœ‰ä¸ŽiOSäº¤äº’çš„JSä»£ç æ”¾è¿™é‡Œï¼&#125;) 3.JSè°ƒç”¨iOSä»£ç é€šè¿‡bridge.callHandleræ¥è°ƒç”¨ï¼š123456bridge.callHandler(&apos;getBlogNameFromObjC&apos;,&#123;&apos;blogURL&apos;: &apos;http://www.huangyibiao.com&apos;&#125;,function callback(response) &#123;log(&apos;JS got response&apos;, response)&#125;&#125;) å…¶ä¸­çš„å„ä¸ªå‚æ•°è¯´æ˜Ž,getBlogNameFromObjCæ˜¯iOSç«¯æ³¨å†Œçš„handleName,åœ¨iOSç«¯ä¹Ÿé€šè¿‡è¿™ä¸ªhanleNameå®Œæˆæ³¨å†ŒåŽJSç›´æŽ¥é€šè¿‡è¿™ä¸ªhandleNameä¸ŽiOSäº¤äº’.æ¯”å¦‚,å½“ç‚¹å‡»æŒ‰é’®çš„æ—¶å€™å°±æ‰§è¡Œä¸Šé¢çš„æ“ä½œ,è¿™æ ·ä¸€æ¥,jså°±å°†å‚æ•°ä¼ é€’ç»™äº†iOSç«¯,iOSæ”¶åˆ°ä¼ é€’çš„å‚æ•°ç„¶åŽé€šè¿‡å›žè°ƒç»™js.callback:jså‡½æ•°å,åœ¨iOSç«¯æ”¶åˆ°å›žè°ƒåŽæ‹¿åˆ°äº†å‚æ•°,ç„¶åŽé€šè¿‡é—­åŒ…å›žè°ƒåé¦ˆç»™jsç«¯. å¦‚ä½•ä¼ é€’å‚æ•°å‚æ•°ä¼ é€’æœ€ç®€å•çš„æ–¹å¼æ˜¯å°†å‚æ•°ä½œä¸ºURLçš„ä¸€éƒ¨åˆ†æ”¾åˆ°iFrameçš„srcä¸­.UIWebViewé€šè¿‡æˆªå–åˆ†æžURLåŽé¢çš„å†…å®¹å³å¯èŽ·å¾—å‚æ•°.ä½†æ˜¯,å¦‚æžœå‚æ•°æ˜¯ä¸€ä¸ªå¾ˆå¤æ‚çš„å¯¹è±¡,é‚£ä¹ˆè¿™ä¸ªURLçš„ç¼–ç å°±ä¼šå¾ˆå¤æ‚.å¯¹æ­¤å¯é‡‡å–çš„æ–¹æ¡ˆæ˜¯: å°†å‚æ•°ä»¥JSONçš„å½¢å¼ä¼ é€’,ä½†æ˜¯å› ä¸ºè¦é™„åŠ åœ¨URLä¹‹åŽ,æ‰€ä»¥æˆ‘ä»¬éœ€è¦å°†JSONè¿›è¡ŒBase64ç¼–ç ,ä»¥ä¿è¯URLä¸­ä¸ä¼šå‡ºçŽ°ä¸€äº›éžæ³•å­—ç¬¦çº¿ç¨‹é˜»å¡žé—®é¢˜å½“åœ¨Objective-Cè¯­è¨€ä¸­è°ƒç”¨stringByEvaluatingJavaScriptFromString:æ–¹æ³•å¿…é¡»åœ¨ä¸»çº¿ç¨‹æ‰§è¡Œ,è€Œä¸»çº¿ç¨‹çš„æ‰§è¡Œæ—¶é—´è¿‡é•¿ä¼šé˜»å¡žUIçš„æ›´æ–°.æ‰€ä»¥æˆ‘ä»¬åº”è¯¥å°½é‡è®©stringByEvaluatingJavaScriptFromString:æ–¹æ³•æ‰§è¡Œæ—¶é—´çŸ­.åƒäº‘ç¬”è®°è¿™æ ·çš„Appåœ¨ä¿å­˜ç¬”è®°çš„æ—¶å€™,éœ€è¦è°ƒç”¨JavaScriptä»£ç æ¥èŽ·å¾—ç¬”è®°çš„å®Œæ•´HTMLå†…å®¹,è¿™ä¸ªæ—¶å€™,å¦‚æžœç¬”è®°å†…å®¹å¾ˆå¤æ‚,å°±ä¼šæ‰§è¡Œå¾ˆé•¿çš„ä¸€æ®µæ—¶é—´,è€Œå› ä¸ºè¿™ä¸ªæ“ä½œå¿…é¡»æ˜¯ä¸»çº¿ç¨‹æ‰§è¡Œ,æ‰€ä»¥æˆ‘ä»¬è¦æ˜¾ç¤ºâ€æ­£åœ¨ä¿å­˜â€çš„UIAlertViewå®Œå…¨æ— æ³•æ­£å¸¸æ˜¾ç¤º,æ•´ä¸ªUIç•Œé¢å°±å®Œå…¨å¡ä¸»äº†,æ‰€ä»¥,è¿™ä¸ªæ—¶å€™,å°±éœ€è¦æ›´æ–°èŽ·å–HTMLå†…å®¹çš„ä»£ç ,æ¥ç¼©çŸ­è¿™ä¸ªæ‰§è¡Œæ—¶é•¿.ä½¿ç”¨Safariè¿›è¡Œè°ƒè¯•è‹¹æžœæ”¯æŒç”¨Safariæµè§ˆå™¨ç›´æŽ¥è¿žæŽ¥åˆ°æ¨¡æ‹Ÿå™¨æˆ–è€…çœŸæœºæ¥è¿›è¡Œç›¸å…³HTMLé¡µé¢,ä»¥åŠJavaScripté€»è¾‘çš„è°ƒè¯•. æ‰“å¼€Safariçš„è°ƒè¯•æ¨¡å¼,é€‰æ‹© Safari -&gt; åå¥½è®¾ç½® -&gt; é«˜çº§ -&gt; å‹¾é€‰ â€œåœ¨èœå•æ ä¸­æ˜¾ç¤ºå¼€å‘èœå•â€2.åŒæ—¶éœ€è¦åœ¨iPhoneæ¨¡æ‹Ÿå™¨æˆ–çœŸæœºçš„è®¾ç½®ä¸ŠæŠŠè°ƒè¯•æ¨¡å¼æ‰“å¼€, è®¾ç½® -&gt; Safari -&gt; é«˜çº§ -&gt; æ‰“å¼€Webæ£€æŸ¥å™¨3.é‡å¯Safari,åœ¨Safariçš„â€å¼€å‘â€èœå•ä¸‹,å°±å¤šå‡ºäº†å¯¹åº”çš„èœå•é€‰é¡¹æˆ‘ä»¬å¯ä»¥åœ¨Safariä¸­ç›´æŽ¥ä¿®æ”¹HTMLä»£ç ,cssæ•ˆæžœ,ä»¥åŠè°ƒè¯•JavaScript.æ‰€æœ‰çš„æ•ˆæžœéƒ½å¯ä»¥ç«‹å³åœ¨UIWebViewä¸Šçœ‹åˆ°]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[HTML5å­¦ä¹ ç¬¬äºŒå¤©]]></title>
      <url>%2F2017%2F03%2F03%2FHTML5%E5%AD%A6%E4%B9%A0%E7%AC%AC%E4%BA%8C%E5%A4%A9%2F</url>
      <content type="text"><![CDATA[ç›’å­æ¨¡åž‹ å±žæ€§æ¯ä¸ªç›’å­æ¨¡åž‹éƒ½æœ‰å››ä¸ªå±žæ€§ å†…å®¹(content)å¡«å……(å†…è¾¹è·,padding)è¾¹æ¡†(border)è¾¹ç•Œ(margin,å¤–è¾¹è·)æ ‡å‡†ç›’å­æ¨¡åž‹å›¾å†…å®¹å±žæ€§heightmax-heightmin-heightwidthmax-widthmin-widthå¡«å……å±žæ€§(å†…è¾¹è·,padding)paddingpadding-bottompadding-leftpadding-rightpadding-topä¸¾ä¾‹å­:å†…è¾¹è·1234padding: 10px 5px 15px 10px; è®¾ç½®ä¸Š,å·¦,ä¸‹,å³å†…è¾¹è·padding: 10px 5px 15px; è®¾ç½®ä¸Š,å·¦å³,ä¸‹è¾¹è·padding: 10px 5px; è®¾ç½®ä¸Šä¸‹,å·¦å³è¾¹è·padding: 10px; è®¾ç½®ä¸Šä¸‹å·¦å³è¾¹è·è¾¹æ¡†(border):è®¾ç½®4ä¸ªè¾¹æ¡†çš„æ ·å¼123p&#123;border: 5px solid red;&#125;borderç®€å†™å±žæ€§åœ¨ä¸€ä¸ªå£°æ˜Žè®¾ç½®æ‰€æœ‰çš„è¾¹æ¡†å±žæ€§å¯ä»¥æŒ‰é¡ºåºè®¾ç½®å¦‚ä¸‹å±žæ€§:border-widthborder-styleborder-colorè®¾ç½®è¾¹æ¡†è®¾ç½®: border-radiusè¾¹ç•Œ(margin,å¤–è¾¹è·)marginmargin-topmargin-bottommargin-leftmargin-right1234margin: 10px 5px 15px 10px; è®¾ç½®ä¸Š,å·¦,ä¸‹,å³å¤–è¾¹è·margin: 10px 5px 15px; è®¾ç½®ä¸Š,å·¦å³,å¤–è¾¹è·margin: 10px 5px; è®¾ç½®ä¸Šä¸‹,å·¦å³å¤–è¾¹è·margin: 10px; è®¾ç½®ä¸Šä¸‹å·¦å³å¤–è¾¹è·CSS3æ–°å¢žç‰¹æ€§RGBAé€æ˜Žåº¦1&lt;div style=&quot;width: 100px; background-color: rgba(255,0,0,1)&quot;&gt;çœ‹æˆ‘çš„æ•ˆæžœ&lt;/div&gt;çœ‹æˆ‘çš„æ•ˆæžœå—é˜´å½±å€¼è¯´æ˜Ž:h-shadowå¿…éœ€ã€‚æ°´å¹³é˜´å½±çš„ä½ç½®ã€‚å…è®¸è´Ÿå€¼ã€‚v-shadowå¿…éœ€ã€‚åž‚ç›´é˜´å½±çš„ä½ç½®ã€‚å…è®¸è´Ÿå€¼ã€‚blurå¯é€‰ã€‚æ¨¡ç³Šè·ç¦»ã€‚spreadå¯é€‰ã€‚é˜´å½±çš„å°ºå¯¸ã€‚colorå¯é€‰ã€‚é˜´å½±çš„é¢œè‰²ã€‚è¯·å‚é˜… CSS é¢œè‰²å€¼ã€‚insetå¯é€‰ã€‚å°†å¤–éƒ¨é˜´å½± (outset) æ”¹ä¸ºå†…éƒ¨é˜´å½±ã€‚12//è®¾ç½®çš„é¡ºåºä»¥æ­¤ä¸º: æ°´å¹³é˜´å½±, åž‚ç›´é˜´å½±, é˜´å½±çš„æ¨¡ç³Šè·ç¦»,ä»¥åŠé˜´å½±çš„é¢œè‰²&lt;div style=&quot;width: 100px; height: 25px; box-shadow: 5px 5px 10px black;&quot;&gt;æˆ‘æ˜¯ç›’å­&lt;/div&gt;æˆ‘æ˜¯ç›’å­æ–‡å­—é˜´å½±åœ¨è®¾ç½®å‚æ•°ä¸Šä¸Žå—é˜´å½±æ˜¯ä¸€æ ·çš„1&lt;p style=&quot;font-size: 20px; color: aqua; text-shadow: 5px 5px 10px black&quot;&gt;æˆ‘çœ‹ç€ä½ å‘¢&lt;/p&gt;æˆ‘çœ‹ç€ä½ å‘¢åœ†è§’ borderradiusæˆ‘å˜æˆäº†åœ†åœ†çš„äº†CSSå¸ƒå±€é»˜è®¤æƒ…å†µä¸‹,æ‰€æœ‰çš„ç½‘é¡µçš„å¸ƒå±€éƒ½åœ¨æ ‡å‡†æµå¸ƒå±€ä¸­: ä»Žä¸Šåˆ°ä¸‹,ä»Žå·¦åˆ°å³è„±ç¦»æ ‡å‡†æµçš„æ–¹æ³•æœ‰floatå±žæ€§positionå±žæ€§å’Œleft right top bottomå±žæ€§floatfloat å±žæ€§çš„å¸¸ç”¨å–å€¼æœ‰left: è„±ç¦»æ ‡å‡†æµ,æµ®åŠ¨åˆ°çˆ¶æ ‡ç­¾çš„æœ€å·¦è¾¹right: è„±ç¦»æ ‡å‡†æµ,æµ®åŠ¨åˆ°çˆ¶æ ‡ç­¾çš„æœ€å³è¾¹ å…·ä½“æœ‰å…³float CSSæµ®åŠ¨ å¯æŸ¥çœ‹W3Schoolçš„è¿™ç¯‡æ–‡ç«  é€šè¿‡floatä¿®æ”¹é¦–å­—æ¯æ ·å¼12345678910&lt;p&gt;&lt;span style=&quot;float: left; width: 0.7em; font-size: 400%; font-family:algerian,courier; line-height:80%;&quot;&gt;T&lt;/span&gt;his is some text.This is some text. This is some text.This is some text. This is some text. This is some text.This is some text. This is some text. This is some text.This is some text. This is some text. This is some text.This is some text. This is some text. This is some text.This is some text. This is some text. This is some text.This is some text. This is some text. This is some text.&lt;/p&gt; This is some text.This is some text. This is some text.This is some text. This is some text. This is some text.This is some text. This is some text. This is some text.This is some text. This is some text. This is some text.This is some text. This is some text. This is some text.This is some text. This is some text. This is some text.This is some text. This is some text. This is some text. positionå±žæ€§å…·ä½“æœ‰å…³position å¯æŸ¥çœ‹W3Schoolçš„è¿™ç¯‡æ–‡ç« é€šå¸¸positonå±žæ€§ç»“åˆleft top bottom rightå±žæ€§ä½¿ç”¨ å€¼æè¿°absoluteç”Ÿæˆç»å¯¹å®šä½çš„å…ƒç´ ï¼Œç›¸å¯¹äºŽ static å®šä½ä»¥å¤–çš„ç¬¬ä¸€ä¸ªçˆ¶å…ƒç´ è¿›è¡Œå®šä½ã€‚å…ƒç´ çš„ä½ç½®é€šè¿‡ â€œleftâ€, â€œtopâ€, â€œrightâ€ ä»¥åŠ â€œbottomâ€ å±žæ€§è¿›è¡Œè§„å®šã€‚fixedç”Ÿæˆç»å¯¹å®šä½çš„å…ƒç´ ï¼Œç›¸å¯¹äºŽæµè§ˆå™¨çª—å£è¿›è¡Œå®šä½ã€‚å…ƒç´ çš„ä½ç½®é€šè¿‡ â€œleftâ€, â€œtopâ€, â€œrightâ€ ä»¥åŠ â€œbottomâ€ å±žæ€§è¿›è¡Œè§„å®šã€‚relativeç”Ÿæˆç›¸å¯¹å®šä½çš„å…ƒç´ ï¼Œç›¸å¯¹äºŽå…¶æ­£å¸¸ä½ç½®è¿›è¡Œå®šä½ã€‚å› æ­¤ï¼Œâ€left:20â€ ä¼šå‘å…ƒç´ çš„ LEFT ä½ç½®æ·»åŠ  20 åƒç´ ã€‚staticé»˜è®¤å€¼ã€‚æ²¡æœ‰å®šä½ï¼Œå…ƒç´ å‡ºçŽ°åœ¨æ­£å¸¸çš„æµä¸­ï¼ˆå¿½ç•¥ top, bottom, left, right æˆ–è€… z-index å£°æ˜Žï¼‰ã€‚inheritè§„å®šåº”è¯¥ä»Žçˆ¶å…ƒç´ ç»§æ‰¿ position å±žæ€§çš„å€¼ã€‚]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[HTMLå­¦ä¹ ç¬¬ä¸€å¤©]]></title>
      <url>%2F2017%2F03%2F02%2FHTML%E5%AD%A6%E4%B9%A0%E7%AC%AC%E4%B8%80%E5%A4%A9%2F</url>
      <content type="text"><![CDATA[HTML5 åŸºç¡€ä»‹ç» 2014å¹´åˆ¶å®šå®ŒHTML5æ ‡å‡† åˆ©ç”¨HTML5ç¼–å†™çš„UIèƒ½å¤Ÿè¿è¡Œåœ¨æ‰€æœ‰çš„æµè§ˆå™¨çš„å¹³å° æ‰‹æœºAPPçš„å¼€å‘æ¨¡å¼: åŽŸç”Ÿ çº¯HTML5 åŽŸç”Ÿ + HTML5 è‡ªåŠ¨æ›´æ–° Web3.0 : HTML5 + CSS3 HTML5: Canvas HTML5éŸ³è§†é¢‘ Webå­˜å‚¨ Geolocation Workerså¤šçº¿ç¨‹å¤„ç† CSS3äº®ç‚¹: è®¾è®¡åŠ¨ç”» 2Då˜å½¢ ä¸€ä¸ªå®Œæ•´çš„ç½‘é¡µç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼š HTML CSS JavaScript W3school HTMLçš„å¸¸è§ä½¿ç”¨ HTMLï¼š è¶…æ–‡æœ¬æ ‡è®°è¯­è¨€ æµè§ˆå™¨è´Ÿè´£å°†å®ƒè§£æžæˆå…·ä½“çš„ç½‘é¡µå†…å®¹ï¼ŒHTMLè¯­è¨€æ˜¯æ¾æ•£çš„ WebStormçš„ä½¿ç”¨ï¼š æ³¨é‡Šå¿«æ·é”®ï¼šcommand + / çº¿æ¡ï¼š 1\&lt;hr&gt; è¾“å…¥ 1&lt;input placeholder=&quot;æˆ‘æ˜¯å ä½æ–‡å­—&quot;&gt; 1&lt;input value=&quot;æˆ‘æ˜¯é»˜è®¤çš„æ–‡å­—&quot;&gt; 1&lt;input type=&quot;date&quot;&gt; 1&lt;input type=&quot;file&quot;&gt; 1&lt;input type=&quot;color&quot;&gt; 1&lt;input type=&quot;radio&quot;&gt; 1&lt;input type=&quot;checkbox&quot;&gt; å›¾ç‰‡æ ‡ç­¾ alt: å›¾ç‰‡æ˜¾ç¤ºå¤±è´¥çš„æ—¶å€™ï¼Œæ˜¾ç¤ºçš„æ–‡å­—æç¤º 1&lt;img src=&quot;abc.jpg&quot; alt=&quot;è¿™æ˜¯ä¸€å¼ å›¾ç‰‡&quot;&gt; 12&lt;!â€”ç›¸å¯¹è·¯å¾„--&gt;&lt;img src=&quot;image/IMG_0084.png&quot;&gt; 12&lt;!â€”ç»å¯¹è·¯å¾„ å›ºå®šäº†å®½ï¼Œé«˜ä¼šæŒ‰æ¯”ä¾‹è‡ªåŠ¨ç¼©æ”¾â€”&gt;&lt;img src=&quot;https://ss0.bdstatic.com/5aV1bjqh_Q23odCf/static/superman/img/logo/bd_logo1_31bdc765.png&quot; width=&quot;100&quot;&gt; 12&lt;!â€”ç»å¯¹è·¯å¾„ è®¾ç½®å®½ä¸Žçˆ¶å…ƒç´ çš„æ¯”ä¾‹ï¼Œè¿™æ ·èƒ½æ›´å¥½çš„é€‚é…ï¼Œç›¸å¯¹äºŽè®¾ç½®å›ºå®šçš„å®½åº¦â€”&gt;&lt;img src=&quot;https://ss0.bdstatic.com/5aV1bjqh_Q23odCf/static/superman/img/logo/bd_logo1_31bdc765.png&quot; width=&quot;50%&quot;&gt; æ¢è¡Œæ ‡ç­¾ 1&lt;br&gt; åˆ—è¡¨æ ‡ç­¾ 12345678&lt;ul&gt; &lt;li&gt;æ— åºåˆ—è¡¨&lt;/li&gt; &lt;li&gt;æ— åºåˆ—è¡¨&lt;/li&gt; &lt;li&gt;æ— åºåˆ—è¡¨&lt;/li&gt; &lt;li&gt;æ— åºåˆ—è¡¨&lt;/li&gt; &lt;li&gt;æ— åºåˆ—è¡¨&lt;/li&gt; &lt;li&gt;æ— åºåˆ—è¡¨&lt;/li&gt;&lt;/ul&gt; æ— åºåˆ—è¡¨ æ— åºåˆ—è¡¨ æ— åºåˆ—è¡¨ æ— åºåˆ—è¡¨ æ— åºåˆ—è¡¨ æ— åºåˆ—è¡¨ 12345678&lt;ul&gt; &lt;li&gt;æ— åºåˆ—è¡¨&lt;/li&gt; &lt;li&gt;æ— åºåˆ—è¡¨&lt;/li&gt; &lt;li&gt;æ— åºåˆ—è¡¨&lt;/li&gt; &lt;li&gt;æ— åºåˆ—è¡¨&lt;/li&gt; &lt;li&gt;æ— åºåˆ—è¡¨&lt;/li&gt; &lt;li&gt;æ— åºåˆ—è¡¨&lt;/li&gt;&lt;/ul&gt; æœ‰åºåˆ—è¡¨ æœ‰åºåˆ—è¡¨ æœ‰åºåˆ—è¡¨ æœ‰åºåˆ—è¡¨ æœ‰åºåˆ—è¡¨ è¶…é“¾æŽ¥ 1&lt;a target=&quot;_self&quot; href=&quot;https://www.baidu.com&quot;&gt;æˆ‘æ˜¯è¶…é“¾æŽ¥&lt;/a&gt; æˆ‘æ˜¯è¶…é“¾æŽ¥ 1&lt;a target=&quot;_blank&quot; href=&quot;https:www.baidu.com&quot;&gt;æˆ‘æ˜¯è¶…é“¾æŽ¥&lt;/a&gt; æˆ‘æ˜¯è¶…é“¾æŽ¥ 1&lt;a target=&quot;_top&quot; href=&quot;#&quot;&gt;å›žåˆ°é¡¶éƒ¨&lt;/a&gt; å›žåˆ°é¡¶éƒ¨ 1&lt;meter value=&quot;30&quot; max=&quot;100&quot; min=&quot;0&quot;&gt;30%&lt;/meter&gt; 30% 1&lt;progress value=&quot;40&quot; max=&quot;100&quot;&gt;&lt;/progress&gt; 1&lt;audio src=&quot;../audio/music.m4a&quot; controls=&quot;controls&quot;&gt;&lt;/audio&gt; è§†é¢‘å›¾ç‰‡1&lt;video src=&quot;http://player.youku.com/player.php/Type/Folder/Fid//Ob//sid/XMjU1MjMwMDAzNg==/v.swf&quot;&gt;&lt;/video&gt; CSS CSSçš„ä½¿ç”¨æ ·å¼ è¡Œå†…æ ·å¼ é¡µå†…æ ·å¼ å¤–éƒ¨æ ·å¼ è¡Œå†…æ ·å¼1234567891011121314&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;&lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;title&gt;cssçš„è¡Œå†…æ ·å¼&lt;/title&gt;&lt;/head&gt;&lt;body style=&quot;background-color: red;&quot;&gt;//styleä½œä¸ºå…ƒç´ çš„ä¸€ä¸ªå±žæ€§ï¼Œå°†æ‰€æœ‰æ ·å¼çš„æ ·å¼å†™åœ¨styleå±žæ€§å½“ä¸­ &lt;div style=&quot;color: blue; font-size: 18px; background-color: aqua;&quot;&gt;æˆ‘æ˜¯å®¹å™¨æ ‡ç­¾&lt;/div&gt; &lt;p style=&quot;color: red; font-size: 60px; border: 5px double purple;&quot;&gt;æˆ‘æ˜¯æ®µè½æ ‡ç­¾&lt;/p&gt; &lt;p style=&quot;color: red; font-size: 60px; border: 5px solid purple;&quot;&gt;æˆ‘æ˜¯æ®µè½æ ‡ç­¾&lt;/p&gt; &lt;p style=&quot;color: red; font-size: 60px; border: 5px dashed purple;&quot;&gt;æˆ‘æ˜¯æ®µè½æ ‡ç­¾&lt;/p&gt;&lt;/body&gt;&lt;/html&gt; é¡µå†…æ ·å¼1234567891011121314151617181920212223242526272829303132333435363738394041&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;&lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;title&gt;cssçš„é¡µå†…æ ·å¼&lt;/title&gt; &lt;link href=&quot;css/index.css&quot; rel=&quot;stylesheet&quot;&gt; &lt;!-- cssè§„å¾‹: å°±è¿‘åŽŸåˆ™ å åŠ åŽŸåˆ™ --&gt; //åœ¨headæ ‡ç­¾å½“ä¸­å†™æ ‡ç­¾æ ·å¼ï¼Œæ ·å¼å†™åœ¨&lt;style&gt;&lt;/style&gt;å½“ä¸­ &lt;style&gt; div&#123; color: red; font-size: 30px; border: 4px solid yellow; &#125; p&#123; color: blue; font-size: 44px; background-color: yellowgreen; &#125; &lt;/style&gt;&lt;/head&gt;&lt;body&gt; &lt;div&gt;æˆ‘æ˜¯å®¹å™¨æ ‡ç­¾&lt;/div&gt; &lt;div&gt;æˆ‘æ˜¯å®¹å™¨æ ‡ç­¾&lt;/div&gt; &lt;div&gt;æˆ‘æ˜¯å®¹å™¨æ ‡ç­¾&lt;/div&gt; &lt;div&gt;æˆ‘æ˜¯å®¹å™¨æ ‡ç­¾&lt;/div&gt; &lt;div&gt;æˆ‘æ˜¯å®¹å™¨æ ‡ç­¾&lt;/div&gt; &lt;p&gt;æˆ‘æ˜¯æ®µè½æ ‡ç­¾&lt;/p&gt; &lt;p&gt;æˆ‘æ˜¯æ®µè½æ ‡ç­¾&lt;/p&gt; &lt;p&gt;æˆ‘æ˜¯æ®µè½æ ‡ç­¾&lt;/p&gt; &lt;p&gt;æˆ‘æ˜¯æ®µè½æ ‡ç­¾&lt;/p&gt; &lt;p&gt;æˆ‘æ˜¯æ®µè½æ ‡ç­¾&lt;/p&gt; &lt;p&gt;æˆ‘æ˜¯æ®µè½æ ‡ç­¾&lt;/p&gt; &lt;p&gt;æˆ‘æ˜¯æ®µè½æ ‡ç­¾&lt;/p&gt;&lt;/body&gt;&lt;/html&gt; å¤–éƒ¨æ ·å¼1234567891011121314151617181920212223&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;&lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;title&gt;csså¤–éƒ¨æ ·å¼&lt;/title&gt; //é“¾æŽ¥å¤–éƒ¨cssæ–‡ä»¶ &lt;link rel=&quot;stylesheet&quot; href=&quot;css/index.css&quot;&gt;&lt;/head&gt;&lt;body&gt; &lt;div&gt;æˆ‘æ˜¯å®¹å™¨æ ‡ç­¾&lt;/div&gt; &lt;div&gt;æˆ‘æ˜¯å®¹å™¨æ ‡ç­¾&lt;/div&gt; &lt;div&gt;æˆ‘æ˜¯å®¹å™¨æ ‡ç­¾&lt;/div&gt; &lt;div&gt;æˆ‘æ˜¯å®¹å™¨æ ‡ç­¾&lt;/div&gt; &lt;div&gt;æˆ‘æ˜¯å®¹å™¨æ ‡ç­¾&lt;/div&gt; &lt;p&gt;æˆ‘æ˜¯æ®µè½æ ‡ç­¾&lt;/p&gt; &lt;p&gt;æˆ‘æ˜¯æ®µè½æ ‡ç­¾&lt;/p&gt; &lt;p&gt;æˆ‘æ˜¯æ®µè½æ ‡ç­¾&lt;/p&gt; &lt;p&gt;æˆ‘æ˜¯æ®µè½æ ‡ç­¾&lt;/p&gt; &lt;p&gt;æˆ‘æ˜¯æ®µè½æ ‡ç­¾&lt;/p&gt; &lt;p&gt;æˆ‘æ˜¯æ®µè½æ ‡ç­¾&lt;/p&gt; &lt;p&gt;æˆ‘æ˜¯æ®µè½æ ‡ç­¾&lt;/p&gt;&lt;/body&gt;&lt;/html&gt; cssä¸­çš„å†…å®¹1234567891011div&#123; color: olivedrab; font-size: 66px; background-color: green;&#125;p&#123; color: goldenrod; font-size: 2px; border: 2px solid red;&#125; CSSé€‰æ‹©å™¨ æ ‡ç­¾é€‰æ‹©å™¨ 12345&lt;div&gt;div1&lt;/div&gt;&lt;div&gt;div2&lt;/div&gt;div&#123; color: red; &#125; ç±»é€‰æ‹©å™¨12345678&lt;p class=&quot;high&quot;&gt;ç¬¬ä¸€æ®µæ–‡å­&lt;/p&gt;&lt;p&gt;ç¬¬äºŒæ®µæ–‡å­—&lt;/p&gt;&lt;div class=&quot;high&quot;&gt;div1&lt;/div&gt;&lt;div&gt;div2&lt;/div&gt;// . + ç±»å.high &#123; color: red; &#125; IDé€‰æ‹©å™¨123456css: #main &#123; color: gray&#125;html: &lt;div id=&quot;main&quot;&gt;æˆ‘æ˜¯divæ ‡ç­¾&lt;/div&gt; å¹¶åˆ—é€‰æ‹©å™¨1234567css: ç”¨é€—å·(,)éš”å¼€div , .test1 &#123; color: red;&#125;html: ä»¥ä¸‹ä¸¤è€…éƒ½æ»¡è¶³&lt;div&gt;æˆ‘æ˜¯div&lt;/div&gt;&lt;p class=&quot;test1&quot;&gt;æˆ‘æ˜¯æ®µè½&lt;/p&gt; 123456css: idå€¼ä¸ºmainï¼Œæˆ–è€…classå€¼ä¸ºtest1#main , .test1 &#123;&#125;html: ä»¥ä¸‹ä¸¤è€…éƒ½æ»¡è¶³&lt;div id=&quot;main&quot;&gt;&lt;/div&gt;&lt;div class=&quot;test1&quot;&gt;&lt;/div&gt; å¤æ´»é€‰æ‹©å™¨12345css: divæ ‡ç­¾å¹¶ä¸”å¿…é¡»ç±»å€¼ä¸ºtest1div.test1&#123;&#125;html:&lt;div class=&quot;test1&quot;&gt;&lt;/div&gt; åŽä»£é€‰æ‹©å™¨123456css: divä¸­çš„pæ ‡ç­¾ï¼ˆåŒ…æ‹¬å­ç±»å’Œå­™å­ç±»ï¼‰div p &#123;&#125;html: ä»¥ä¸‹ä¸¤ä¸ªéƒ½æ»¡è¶³&lt;div&gt;&lt;p&gt;æˆ‘æ»¡è¶³æ¡ä»¶&lt;/p&gt;&lt;/div&gt;&lt;div&gt;&lt;h2&gt;&lt;p&gt;æˆ‘ä¹Ÿæ»¡è¶³&lt;/p&gt;&lt;/h2&gt;&lt;/div&gt; ç›´æŽ¥åŽä»£é€‰æ‹©å™¨12345css: div &gt; a &#123;&#125;html:&lt;div&gt;&lt;a href=&quot;#&quot;&gt;æˆ‘æ»¡è¶³&lt;/a&gt;&lt;div&gt;&lt;div&gt;&lt;p&gt;&lt;a href=&quot;#&quot;&gt;æˆ‘ä¸æ»¡è¶³ðŸ˜Œ&lt;/a&gt;&lt;/p&gt;&lt;/div&gt; å±žæ€§é€‰æ‹©å™¨123456css:div[name]&#123;&#125;html:&lt;div name=&quot;jack&quot;&gt;æˆ‘æ»¡è¶³&lt;/div&gt;&lt;div name=&quot;rose&quot;&gt;æˆ‘ä¹Ÿæ»¡è¶³&lt;/div&gt;&lt;div age=&quot;23&quot;&gt;æˆ‘ä¸æ»¡è¶³&lt;/div&gt; ç‰¹å®šå±žæ€§å€¼é€‰æ‹©å™¨12345css:div[name=&quot;jack&quot;]&#123;&#125;html:&lt;div name=&quot;rose&quot;&gt;æˆ‘ä¸ðŸ˜Œ&lt;/div&gt;&lt;div name=&quot;jack&quot;&gt;æˆ‘æ»¡è¶³ðŸ˜„&lt;/div&gt; ä¼ªç±»1234567891011121314151617css: /*è§¦å‘æŸäº›æ“ä½œçš„æ—¶å€™æ›´æ”¹ä¸€äº›æ ·å¼*/input:focus &#123;/*åŽ»é™¤å¤–çº¿æ¡*/outline: none;height: 50px;font-size: 20px;&#125;/*å½“é¼ æ ‡ç§»åŠ¨ä¸Šæ¥*/#main:hover&#123;width: 300px;height: 200px;background-color: aqua;&#125;html:&lt;div id=&quot;main&quot;&gt;æˆ‘æ˜¯divæ ‡ç­¾&lt;/div&gt;&lt;input placeholder=&quot;æˆ‘æ˜¯è¾“å…¥æ¡†&quot;&gt; ä¼ªå…ƒç´ /ä¼ªå…ƒç´  æ¯”å¦‚æ®µè½çš„ç¬¬ä¸€ä¸ªå­—æ¯å˜å¤§,å¯ä»¥é€šè¿‡ä¼ªå…ƒç´ å®žçŽ°/ é€‰æ‹©å™¨ä¼˜å…ˆçº§é€‰æ‹©å™¨çš„æƒå€¼ï¼š é€šé…é€‰æ‹©ç¬¦(*) : 0 æ ‡ç­¾: 1 ç±»: 10 å±žæ€§ï¼š10 ä¼ªç±»ï¼š 10 ä¼ªå…ƒç´ : 10 id: 100 important: 1000 åŽŸåˆ™ï¼š é€‰æ‹©å™¨çš„æƒå€¼åŠ åˆ°ä¸€èµ·ï¼Œå¤§çš„ä¼˜å…ˆï¼›å¦‚æžœæƒå€¼ç›¸åŒï¼ŒåŽå®šä¹‰çš„ä¼˜å…ˆ ä¼˜å…ˆçº§é¡ºåºï¼š important &gt; å†…è”ï¼ˆè¡Œå†…styleï¼‰&gt;id&gt;ç±»|ä¼ªç±»|ä¼ªå…ƒç´ |å±žæ€§|ä¼ªå…ƒç´ &gt;æ ‡ç­¾&gt;ç»Ÿé…é€‰æ‹©ç¬¦ HTMLæ ‡ç­¾çš„åˆ†ç±»å’Œä¿®æ”¹ æ ‡ç­¾çš„åˆ†ç±» å—çº§æ ‡ç­¾ ç‹¬å ä¸€è¡Œï¼Œèƒ½å¤Ÿé€šè¿‡cssä¿®æ”¹é«˜åº¦(divã€pã€h1ã€h2ã€ulã€liâ€¦) è¡Œå†…æ ‡ç­¾ï¼ˆå†…è”æ ‡ç­¾ï¼‰ å¤šä¸ªè¡Œå†…æ ‡ç­¾èƒ½åŒæ—¶æ˜¾ç¤ºåœ¨ä¸€è¡Œï¼Œå¹¶ä¸”æ— æ³•ä¿®æ”¹å…¶å®½é«˜ å®½åº¦å’Œé«˜åº¦å–å†³äºŽå†…å®¹çš„å°ºå¯¸ (spanã€aã€labelâ€¦.) è¡Œå†…-å—çº§æ ‡ç­¾ (å†…è”-å—çº§æ ‡ç­¾) å¤šä¸ªè¡Œç±»å—çº§æ ‡ç­¾èƒ½å¤Ÿæ˜¾ç¤ºåœ¨ä¸€è¡Œ :å…·å¤‡äº†å†…è”æ ‡ç­¾çš„ç‰¹ç‚¹ èƒ½å¤Ÿè®¾ç½®å®½åº¦å’Œé«˜åº¦(input, button) : å…·å¤‡äº†å—çº§æ ‡ç­¾çš„ç‰¹ç‚¹ä¿®æ”¹æ ‡ç­¾çš„æ˜¾ç¤ºç±»åž‹é€šè¿‡cssä¸­çš„displayå±žæ€§ï¼Œèƒ½å¤Ÿä¿®æ”¹æ˜¾ç¤ºçš„ç±»åž‹ none: éšè—æ ‡ç­¾ block: è®©æ ‡ç­¾å˜æˆå—çº§æ ‡ç­¾ inline: è®©æ ‡ç­¾å˜æˆå†…è”æ ‡ç­¾ inline-block: è®©æ ‡ç­¾å˜æˆå†…è”-å—çº§æ ‡ç­¾ å…¶ä»–å±žæ€§ä»‹ç»cursorï¼š ðŸ–±é¼ æ ‡æ ·å¼text-decoration:è§„å®šæ·»åŠ åˆ°æ–‡æœ¬çš„ä¿®é¥°123456789101112131415161718&lt;html&gt;&lt;head&gt;&lt;style type=&quot;text/css&quot;&gt;h1 &#123;text-decoration: overline&#125;h2 &#123;text-decoration: line-through&#125;h3 &#123;text-decoration: underline&#125;h4 &#123;text-decoration: blink&#125;a &#123;text-decoration: none&#125;&lt;/style&gt;&lt;/head&gt;&lt;body&gt;&lt;h1&gt;è¿™æ˜¯æ ‡é¢˜ 1&lt;/h1&gt;&lt;h2&gt;è¿™æ˜¯æ ‡é¢˜ 2&lt;/h2&gt;&lt;h3&gt;è¿™æ˜¯æ ‡é¢˜ 3&lt;/h3&gt;&lt;h4&gt;è¿™æ˜¯æ ‡é¢˜ 4&lt;/h4&gt;&lt;p&gt;&lt;a href=&quot;http://www.w3school.com.cn/index.html&quot;&gt;è¿™æ˜¯ä¸€ä¸ªé“¾æŽ¥&lt;/a&gt;&lt;/p&gt;&lt;/body&gt;&lt;/html&gt; line-through: çœ‹æˆ‘overline:çœ‹æˆ‘underline:çœ‹æˆ‘blink:çœ‹æˆ‘ ç”¨text-decorationåŽ»æŽ‰è¶…é“¾æŽ¥çš„ä¸‹åˆ’çº¿ è¿™æ˜¯ä¸€ä¸ªè¶…é“¾æŽ¥ï¼Œä½†æ˜¯æ²¡æœ‰ä¸‹åˆ’çº¿ï¼Œå› ä¸ºæˆ‘æœ‰å€¼ä¸ºnoneçš„text-decorationå‘€ text-indentå°†æ®µè½çš„ç¬¬ä¸€è¡Œç¼©è¿› 50 åƒç´ ï¼š1234css:p&#123; text-indent:50px;&#125; list-style:æŠŠå›¾åƒè®¾ç½®ä¸ºåˆ—è¡¨ä¸­çš„åˆ—è¡¨é¡¹ç›®æ ‡è®°ï¼š1234css:ul&#123; list-style:square inside url(&apos;/i/arrow.gif&apos;); &#125; 12345678910111213141516171819&lt;html&gt;&lt;head&gt;&lt;style type=&quot;text/css&quot;&gt;ul &#123;list-style: square inside url(&apos;/i/eg_arrow.gif&apos;)&#125;&lt;/style&gt;&lt;/head&gt;&lt;body&gt;&lt;ul&gt;&lt;li&gt;å’–å•¡&lt;/li&gt;&lt;li&gt;èŒ¶&lt;/li&gt;&lt;li&gt;å¯å£å¯ä¹&lt;/li&gt;&lt;/ul&gt;&lt;/body&gt;&lt;/html&gt; å¯ä»¥æŒ‰é¡ºåºè®¾ç½®å¦‚ä¸‹å±žæ€§ï¼š list-style-type list-style-position list-style-imag overflow: åœ¨å®½é«˜å›ºå®šçš„æƒ…å†µä¸‹ï¼Œå†…å®¹è¶…å‡ºçš„æ—¶å€™çš„æ˜¾ç¤ºæ ·å¼123456div &#123; width:150px; height:150px; overflow:scroll; &#125; é»˜è®¤å€¼ï¼š visibleå¯èƒ½çš„å€¼å€¼ æè¿°visible é»˜è®¤å€¼ã€‚å†…å®¹ä¸ä¼šè¢«ä¿®å‰ªï¼Œä¼šå‘ˆçŽ°åœ¨å…ƒç´ æ¡†ä¹‹å¤–ã€‚ hidden å†…å®¹ä¼šè¢«ä¿®å‰ªï¼Œå¹¶ä¸”å…¶ä½™å†…å®¹æ˜¯ä¸å¯è§çš„ã€‚ scroll å†…å®¹ä¼šè¢«ä¿®å‰ªï¼Œä½†æ˜¯æµè§ˆå™¨ä¼šæ˜¾ç¤ºæ»šåŠ¨æ¡ä»¥ä¾¿æŸ¥çœ‹å…¶ä½™çš„å†…å®¹ã€‚ auto å¦‚æžœå†…å®¹è¢«ä¿®å‰ªï¼Œåˆ™æµè§ˆå™¨ä¼šæ˜¾ç¤ºæ»šåŠ¨æ¡ä»¥ä¾¿æŸ¥çœ‹å…¶ä½™çš„å†…å®¹ã€‚ inherit è§„å®šåº”è¯¥ä»Žçˆ¶å…ƒç´ ç»§æ‰¿ overflow å±žæ€§çš„å€¼ã€‚]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[UIWindowç¬”è®°]]></title>
      <url>%2F2017%2F03%2F02%2FUIWindow%E7%AC%94%E8%AE%B0%2F</url>
      <content type="text"><![CDATA[UIWindowæ›´å¤šçš„æ—¶å€™åªä½œä¸ºUIViewçš„é¡¶å±‚å®¹å™¨å­˜åœ¨ UIWindowçš„ä¸»è¦ä½œç”¨æœ‰ï¼š ä½œä¸ºUIViewçš„æœ€é¡¶å±‚å®¹å™¨ï¼ŒåŒ…å«åº”ç”¨æ‰€éœ€è¦çš„æ‰€æœ‰çš„UIView ä¼ é€’è§¦æ‘¸æ¶ˆæ¯å’Œé”®ç›˜äº‹ä»¶ç»™UIView ä¸ºUIWindowå¢žåŠ UIView å› ä¸ºå…¶æœ¬èº«æ˜¯UIViewçš„å­ç±»ï¼Œæ‰€ä»¥å¯ä»¥è°ƒç”¨addSubViewæ–¹æ³• é€šè¿‡è®¾ç½®å…¶ç‰¹æœ‰çš„rootViewControllerå±žæ€§ã€‚ é€šè¿‡è®¾ç½®å…¶å±žæ€§æ·»åŠ viewå¯¹åº”çš„UIViewControllerï¼ŒUIWindowè‡ªåŠ¨å°†å…¶viewæ·»åŠ åˆ°å½“å‰windowä¸­ã€‚åŒæ—¶è´Ÿè´£ç»´æŠ¤ViewControllerå’Œviewçš„ç”Ÿå‘½å‘¨æœŸã€‚ ç³»ç»Ÿå¯¹UIWindowçš„ä½¿ç”¨ è°ƒç”¨ç³»ç»Ÿçš„æŽ§ä»¶æ—¶(UIAlertView)ï¼ŒiOSç³»ç»Ÿä¸ºäº†ä¿è¯UIAlertViewåœ¨æ‰€æœ‰çš„ç•Œé¢ä¹‹ä¸Šï¼Œå®ƒä¼šä¸´æ—¶åˆ›å»ºä¸€ä¸ªæ–°çš„UIWindowï¼Œé€šè¿‡å°†å…¶UIWindowçš„UIWindowLevelè®¾ç½®å¾—æ›´é«˜ï¼Œè®©UIAlertViewç›–åœ¨æ‰€æœ‰çš„åº”ç”¨ç•Œé¢ä¹‹ä¸Š WindowLevel UIWindowçš„UIWindowLevelå±žæ€§ï¼Œå®šä¹‰äº†UIWindowçš„å±‚çº§ UIKIT_EXTERN const UIWindowLevel UIWindowLevelNormal; UIKIT_EXTERN const UIWindowLevel UIWindowLevelAlert; UIKIT_EXTERN const UIWindowLevel UIWindowLevelStatusBar é€šè¿‡ä»£ç å°†è¿™äº›å€¼è¾“å‡ºï¼š NSLog(@&quot;UIWindowLevelAlert - %lf ,UIWindowLevelNormal %lf, UIWindowLevelStatusBar %lf&quot;,UIWindowLevelAlert,UIWindowLevelNormal,UIWindowLevelStatusBar); è¾“å‡ºçš„ç»“æžœä¸ºï¼š UIWindowLevelAlert - 2000.000000 ,UIWindowLevelNormal 0.000000, UIWindowLevelStatusBar 1000.000000 é»˜è®¤çš„UIWindowå±‚çº§ä¸ºUIWindowLevelNormalï¼Œå½“ç³»ç»Ÿéœ€è¦åœ¨å…¶ä¸Šé¢è¦†ç›–UIAlerViewæ—¶ï¼Œåˆ›å»ºä¸€ä¸ªUIWindowLevelAlertå±‚çº§çš„UIWindow æ‰‹å·¥åˆ›å»ºUIWindow åˆ›å»ºUIWindowå’ŒUIViewä¸åŒçš„æ˜¯ï¼Œä¸€æ—¦è¢«åˆ›å»ºï¼Œå®ƒä¼šè‡ªåŠ¨çš„è¢«æ·»åŠ åˆ°ç•Œé¢ä¸Šã€‚ @interface ViewController () { UIWindow *_uiwindow; } @end - (IBAction)click:(id)sender { _uiwindow = [[UIWindow alloc] initWithFrame:[UIScreen mainScreen].bounds]; //è®¾ç½®å…¶å±‚çº§ _uiwindow.windowLevel = UIWindowLevelNormal; _uiwindow.backgroundColor = [UIColor redColor]; _uiwindow.hidden = NO; UIGestureRecognizer *gesture = [[UITapGestureRecognizer alloc] init]; [gesture addTarget:self action:@selector(hideWindow:)]; [_uiwindow addGestureRecognizer:gesture]; } -(void)hideWindow:(UIGestureRecognizer *)gesture{ _uiwindow.hidden = YES; //ç§»é™¤çš„æ–¹å¼å°±æ˜¯æ¸…ç©º _uiwindow = nil; } ä½œè€…(å”å·§)åœ¨åšæœ‰é“äº‘ç¬”è®°æ—¶ï¼Œæƒ³åšä¸€ä¸ªå¯†ç ä¿æŠ¤åŠŸèƒ½ï¼Œå½“ç”¨æˆ·ä»Žåº”ç”¨çš„ä»»ä½•ç•Œé¢æŒ‰Homeé”®é€€å‡ºï¼Œè¿‡ä¸€æ®µæ—¶é—´å†ä»ŽåŽå°æ¢å›žæ¥æ—¶ï¼Œæ˜¾ç¤ºä¸€ä¸ªå¯†ç è¾“å…¥ç•Œé¢ã€‚è¿™ä¸ªå¯†ç ç•Œé¢å¯èƒ½ä»Žä»»ä½•åº”ç”¨ç•Œé¢å¼¹å‡ºï¼Œå¹¶ä¸”éœ€è¦ç›–åœ¨æ‰€æœ‰ç•Œé¢çš„æœ€ä¸Šå±‚ï¼Œå®ƒå¾ˆé€‚åˆç”¨ä¸€ä¸ªUIWindowæ¥å®žçŽ° #import &lt;UIKit/UIKit.h&gt; @interface PasswordInputWindow : UIWindow -(void)show; +(instancetype)sharedInstance; @end #import &quot;PasswordInputWindow.h&quot; @implementation PasswordInputWindow{ UITextField *_textField; } +(instancetype)sharedInstance{ //æ›´æ”¹å…¶ç”Ÿå‘½å‘¨æœŸ static id sharedInstance = nil; static dispatch_once_t onceToken; dispatch_once(&amp;onceToken, ^{ sharedInstance = [[self alloc] initWithFrame:[UIScreen mainScreen].bounds]; }); return sharedInstance; } -(instancetype)initWithFrame:(CGRect)frame{ self = [super initWithFrame:frame]; if (self) { UILabel *label = [[UILabel alloc] initWithFrame:CGRectMake(10, 50, 200, 20)]; label.text = @&quot;è¯·è¾“å…¥å¯†ç &quot;; [self addSubview:label]; UITextField *textField = [[UITextField alloc] initWithFrame:CGRectMake(10, 80, 200, 20)]; textField.backgroundColor = [UIColor whiteColor]; //å¯†ç è¾“å…¥æ—¶å•ä¸ªæ˜¾ç¤º textField.secureTextEntry = YES; [self addSubview:textField]; UIButton *button = [[UIButton alloc] initWithFrame:CGRectMake(10, 110, 200, 44)]; [button setBackgroundColor:[UIColor blueColor]]; button.titleLabel.textColor = [UIColor blackColor]; [button setTitle:@&quot;ç¡®å®š&quot; forState:UIControlStateNormal]; [button addTarget:self action:@selector(completeButtonPressed) forControlEvents:UIControlEventTouchUpInside]; self.backgroundColor = [UIColor yellowColor]; [self addSubview:button]; _textField = textField; } return self; } -(void)show{ //ä½¿å…¶æˆä¸ºä¸»çª—å£ï¼Œè°ƒç”¨è¿™ä¸ªæ–¹æ³•å°±è®©å½“å‰çª—å£æˆä¸ºä¸»çª—å£ [self makeKeyWindow]; self.hidden = NO; } -(void)completeButtonPressed{ if ([_textField.text isEqualToString:@&quot;abcd&quot;]) { //å…³é—­é”®ç›˜ [_textField resignFirstResponder]; //è¾žåŽ»ä¸»çª—å£ [self resignKeyWindow]; self.hidden = YES; }else{ [self showErrorAlertView]; } } -(void)showErrorAlertView{ UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:nil message:@&quot;å¯†ç  é”™è¯¯ï¼Œæ­£ç¡®å¯†ç æ˜¯abcd&quot; delegate:nil cancelButtonTitle:@&quot;OK&quot; otherButtonTitles:nil, nil]; [alertView show]; } @end åªéœ€è¦åœ¨åº”ç”¨è¿›å…¥åŽå°çš„å›žè°ƒå‡½æ•°ä¸­ï¼Œå°†è¯¥UIWindowåˆ›å»ºæ˜¾ç¤ºå‡ºæ¥å³å¯ - (void)applicationDidEnterBackground:(UIApplication *)application { [[PasswordInputWindow sharedInstance] show]; } éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æžœæˆ‘ä»¬åˆ›å»ºçš„windowéœ€è¦å¤„ç†é”®ç›˜äº‹ä»¶ï¼Œé‚£å°±éœ€è¦åˆç†çš„å°†å…¶è®¾ç½®ä¸ºkeyWindow.keyWindowæ˜¯è¢«ç³»ç»Ÿè®¾è®¡ç”¨æ¥æŽ¥æ”¶é”®ç›˜å’Œå…¶ä»–éžè§¦æ‘¸äº‹ä»¶çš„UIWindowã€‚é€šè¿‡makeKeyWindowå’ŒresignKeyWindowæ¥å°†è‡ªå·±çš„windowè®¾ç½®ä¸ºkeyWindowï¼Œä»¥åŠè¾žåŽ»keyWindowï¼Œ]]></content>
    </entry>

    
  
  
</search>
